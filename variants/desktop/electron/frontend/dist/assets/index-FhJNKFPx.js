(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();function Xi(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const Ue={},Yn=[],Qt=()=>{},Sd=()=>!1,hs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Yi=e=>e.startsWith("onUpdate:"),Ze=Object.assign,Zi=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},tp=Object.prototype.hasOwnProperty,Fe=(e,t)=>tp.call(e,t),ve=Array.isArray,Zn=e=>zo(e)==="[object Map]",lo=e=>zo(e)==="[object Set]",Aa=e=>zo(e)==="[object Date]",_e=e=>typeof e=="function",Ke=e=>typeof e=="string",Jt=e=>typeof e=="symbol",qe=e=>e!==null&&typeof e=="object",Ed=e=>(qe(e)||_e(e))&&_e(e.then)&&_e(e.catch),Pd=Object.prototype.toString,zo=e=>Pd.call(e),np=e=>zo(e).slice(8,-1),Ad=e=>zo(e)==="[object Object]",ea=e=>Ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ao=Xi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ys=e=>{const t=Object.create(null);return(r=>t[r]||(t[r]=e(r)))},op=/-\w/g,Mt=ys(e=>e.replace(op,t=>t.slice(1).toUpperCase())),rp=/\B([A-Z])/g,kn=ys(e=>e.replace(rp,"-$1").toLowerCase()),bs=ys(e=>e.charAt(0).toUpperCase()+e.slice(1)),js=ys(e=>e?`on${bs(e)}`:""),xn=(e,t)=>!Object.is(e,t),Wr=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},Rd=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},_s=e=>{const t=parseFloat(e);return isNaN(t)?e:t},sp=e=>{const t=Ke(e)?Number(e):NaN;return isNaN(t)?e:t};let Ra;const xs=()=>Ra||(Ra=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ta(e){if(ve(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],s=Ke(n)?up(n):ta(n);if(s)for(const l in s)t[l]=s[l]}return t}else if(Ke(e)||qe(e))return e}const ip=/;(?![^(]*\))/g,ap=/:([^]+)/,lp=/\/\*[^]*?\*\//g;function up(e){const t={};return e.replace(lp,"").split(ip).forEach(r=>{if(r){const n=r.split(ap);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function le(e){let t="";if(Ke(e))t=e;else if(ve(e))for(let r=0;r<e.length;r++){const n=le(e[r]);n&&(t+=n+" ")}else if(qe(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const dp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cp=Xi(dp);function Td(e){return!!e||e===""}function fp(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=qn(e[n],t[n]);return r}function qn(e,t){if(e===t)return!0;let r=Aa(e),n=Aa(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=Jt(e),n=Jt(t),r||n)return e===t;if(r=ve(e),n=ve(t),r||n)return r&&n?fp(e,t):!1;if(r=qe(e),n=qe(t),r||n){if(!r||!n)return!1;const s=Object.keys(e).length,l=Object.keys(t).length;if(s!==l)return!1;for(const i in e){const a=e.hasOwnProperty(i),c=t.hasOwnProperty(i);if(a&&!c||!a&&c||!qn(e[i],t[i]))return!1}}return String(e)===String(t)}function na(e,t){return e.findIndex(r=>qn(r,t))}const Od=e=>!!(e&&e.__v_isRef===!0),b=e=>Ke(e)?e:e==null?"":ve(e)||qe(e)&&(e.toString===Pd||!_e(e.toString))?Od(e)?b(e.value):JSON.stringify(e,Md,2):String(e),Md=(e,t)=>Od(t)?Md(e,t.value):Zn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,s],l)=>(r[Bs(n,l)+" =>"]=s,r),{})}:lo(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>Bs(r))}:Jt(t)?Bs(t):qe(t)&&!ve(t)&&!Ad(t)?String(t):t,Bs=(e,t="")=>{var r;return Jt(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};let ft;class pp{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ft,!t&&ft&&(this.index=(ft.scopes||(ft.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=ft;try{return ft=this,t()}finally{ft=r}}}on(){++this._on===1&&(this.prevScope=ft,ft=this)}off(){this._on>0&&--this._on===0&&(ft=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function mp(){return ft}let je;const Vs=new WeakSet;class Dd{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ft&&ft.active&&ft.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Vs.has(this)&&(Vs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Nd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ta(this),Fd(this);const t=je,r=$t;je=this,$t=!0;try{return this.fn()}finally{$d(this),je=t,$t=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)sa(t);this.deps=this.depsTail=void 0,Ta(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Vs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ti(this)&&this.run()}get dirty(){return Ti(this)}}let Id=0,Ro,To;function Nd(e,t=!1){if(e.flags|=8,t){e.next=To,To=e;return}e.next=Ro,Ro=e}function oa(){Id++}function ra(){if(--Id>0)return;if(To){let t=To;for(To=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;Ro;){let t=Ro;for(Ro=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=r}}if(e)throw e}function Fd(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function $d(e){let t,r=e.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),sa(n),gp(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}e.deps=t,e.depsTail=r}function Ti(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ld(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ld(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Fo)||(e.globalVersion=Fo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ti(e))))return;e.flags|=2;const t=e.dep,r=je,n=$t;je=e,$t=!0;try{Fd(e);const s=e.fn(e._value);(t.version===0||xn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{je=r,$t=n,$d(e),e.flags&=-3}}function sa(e,t=!1){const{dep:r,prevSub:n,nextSub:s}=e;if(n&&(n.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=n,e.nextSub=void 0),r.subs===e&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let l=r.computed.deps;l;l=l.nextDep)sa(l,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function gp(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let $t=!0;const qd=[];function dn(){qd.push($t),$t=!1}function cn(){const e=qd.pop();$t=e===void 0?!0:e}function Ta(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=je;je=void 0;try{t()}finally{je=r}}}let Fo=0;class vp{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ia{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!je||!$t||je===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==je)r=this.activeLink=new vp(je,this),je.deps?(r.prevDep=je.depsTail,je.depsTail.nextDep=r,je.depsTail=r):je.deps=je.depsTail=r,Ud(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=je.depsTail,r.nextDep=void 0,je.depsTail.nextDep=r,je.depsTail=r,je.deps===r&&(je.deps=n)}return r}trigger(t){this.version++,Fo++,this.notify(t)}notify(t){oa();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{ra()}}}function Ud(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Ud(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const Oi=new WeakMap,Fn=Symbol(""),Mi=Symbol(""),$o=Symbol("");function tt(e,t,r){if($t&&je){let n=Oi.get(e);n||Oi.set(e,n=new Map);let s=n.get(r);s||(n.set(r,s=new ia),s.map=n,s.key=r),s.track()}}function an(e,t,r,n,s,l){const i=Oi.get(e);if(!i){Fo++;return}const a=c=>{c&&c.trigger()};if(oa(),t==="clear")i.forEach(a);else{const c=ve(e),d=c&&ea(r);if(c&&r==="length"){const u=Number(n);i.forEach((f,p)=>{(p==="length"||p===$o||!Jt(p)&&p>=u)&&a(f)})}else switch((r!==void 0||i.has(void 0))&&a(i.get(r)),d&&a(i.get($o)),t){case"add":c?d&&a(i.get("length")):(a(i.get(Fn)),Zn(e)&&a(i.get(Mi)));break;case"delete":c||(a(i.get(Fn)),Zn(e)&&a(i.get(Mi)));break;case"set":Zn(e)&&a(i.get(Fn));break}}ra()}function zn(e){const t=De(e);return t===e?t:(tt(t,"iterate",$o),Tt(e)?t:t.map(Lt))}function ws(e){return tt(e=De(e),"iterate",$o),e}function hn(e,t){return fn(e)?$n(e)?oo(Lt(t)):oo(t):Lt(t)}const hp={__proto__:null,[Symbol.iterator](){return Hs(this,Symbol.iterator,e=>hn(this,e))},concat(...e){return zn(this).concat(...e.map(t=>ve(t)?zn(t):t))},entries(){return Hs(this,"entries",e=>(e[1]=hn(this,e[1]),e))},every(e,t){return Xt(this,"every",e,t,void 0,arguments)},filter(e,t){return Xt(this,"filter",e,t,r=>r.map(n=>hn(this,n)),arguments)},find(e,t){return Xt(this,"find",e,t,r=>hn(this,r),arguments)},findIndex(e,t){return Xt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Xt(this,"findLast",e,t,r=>hn(this,r),arguments)},findLastIndex(e,t){return Xt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Xt(this,"forEach",e,t,void 0,arguments)},includes(...e){return zs(this,"includes",e)},indexOf(...e){return zs(this,"indexOf",e)},join(e){return zn(this).join(e)},lastIndexOf(...e){return zs(this,"lastIndexOf",e)},map(e,t){return Xt(this,"map",e,t,void 0,arguments)},pop(){return po(this,"pop")},push(...e){return po(this,"push",e)},reduce(e,...t){return Oa(this,"reduce",e,t)},reduceRight(e,...t){return Oa(this,"reduceRight",e,t)},shift(){return po(this,"shift")},some(e,t){return Xt(this,"some",e,t,void 0,arguments)},splice(...e){return po(this,"splice",e)},toReversed(){return zn(this).toReversed()},toSorted(e){return zn(this).toSorted(e)},toSpliced(...e){return zn(this).toSpliced(...e)},unshift(...e){return po(this,"unshift",e)},values(){return Hs(this,"values",e=>hn(this,e))}};function Hs(e,t,r){const n=ws(e),s=n[t]();return n!==e&&!Tt(e)&&(s._next=s.next,s.next=()=>{const l=s._next();return l.done||(l.value=r(l.value)),l}),s}const yp=Array.prototype;function Xt(e,t,r,n,s,l){const i=ws(e),a=i!==e&&!Tt(e),c=i[t];if(c!==yp[t]){const f=c.apply(e,l);return a?Lt(f):f}let d=r;i!==e&&(a?d=function(f,p){return r.call(this,hn(e,f),p,e)}:r.length>2&&(d=function(f,p){return r.call(this,f,p,e)}));const u=c.call(i,d,n);return a&&s?s(u):u}function Oa(e,t,r,n){const s=ws(e);let l=r;return s!==e&&(Tt(e)?r.length>3&&(l=function(i,a,c){return r.call(this,i,a,c,e)}):l=function(i,a,c){return r.call(this,i,hn(e,a),c,e)}),s[t](l,...n)}function zs(e,t,r){const n=De(e);tt(n,"iterate",$o);const s=n[t](...r);return(s===-1||s===!1)&&ua(r[0])?(r[0]=De(r[0]),n[t](...r)):s}function po(e,t,r=[]){dn(),oa();const n=De(e)[t].apply(e,r);return ra(),cn(),n}const bp=Xi("__proto__,__v_isRef,__isVue"),jd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Jt));function _p(e){Jt(e)||(e=String(e));const t=De(this);return tt(t,"has",e),t.hasOwnProperty(e)}class Bd{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){if(r==="__v_skip")return t.__v_skip;const s=this._isReadonly,l=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return l;if(r==="__v_raw")return n===(s?l?Tp:Gd:l?zd:Hd).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const i=ve(t);if(!s){let c;if(i&&(c=hp[r]))return c;if(r==="hasOwnProperty")return _p}const a=Reflect.get(t,r,rt(t)?t:n);if((Jt(r)?jd.has(r):bp(r))||(s||tt(t,"get",r),l))return a;if(rt(a)){const c=i&&ea(r)?a:a.value;return s&&qe(c)?Ii(c):c}return qe(a)?s?Ii(a):Cs(a):a}}class Vd extends Bd{constructor(t=!1){super(!1,t)}set(t,r,n,s){let l=t[r];const i=ve(t)&&ea(r);if(!this._isShallow){const d=fn(l);if(!Tt(n)&&!fn(n)&&(l=De(l),n=De(n)),!i&&rt(l)&&!rt(n))return d||(l.value=n),!0}const a=i?Number(r)<t.length:Fe(t,r),c=Reflect.set(t,r,n,rt(t)?t:s);return t===De(s)&&(a?xn(n,l)&&an(t,"set",r,n):an(t,"add",r,n)),c}deleteProperty(t,r){const n=Fe(t,r);t[r];const s=Reflect.deleteProperty(t,r);return s&&n&&an(t,"delete",r,void 0),s}has(t,r){const n=Reflect.has(t,r);return(!Jt(r)||!jd.has(r))&&tt(t,"has",r),n}ownKeys(t){return tt(t,"iterate",ve(t)?"length":Fn),Reflect.ownKeys(t)}}class xp extends Bd{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const wp=new Vd,Cp=new xp,kp=new Vd(!0);const Di=e=>e,or=e=>Reflect.getPrototypeOf(e);function Sp(e,t,r){return function(...n){const s=this.__v_raw,l=De(s),i=Zn(l),a=e==="entries"||e===Symbol.iterator&&i,c=e==="keys"&&i,d=s[e](...n),u=r?Di:t?oo:Lt;return!t&&tt(l,"iterate",c?Mi:Fn),{next(){const{value:f,done:p}=d.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function rr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ep(e,t){const r={get(s){const l=this.__v_raw,i=De(l),a=De(s);e||(xn(s,a)&&tt(i,"get",s),tt(i,"get",a));const{has:c}=or(i),d=t?Di:e?oo:Lt;if(c.call(i,s))return d(l.get(s));if(c.call(i,a))return d(l.get(a));l!==i&&l.get(s)},get size(){const s=this.__v_raw;return!e&&tt(De(s),"iterate",Fn),s.size},has(s){const l=this.__v_raw,i=De(l),a=De(s);return e||(xn(s,a)&&tt(i,"has",s),tt(i,"has",a)),s===a?l.has(s):l.has(s)||l.has(a)},forEach(s,l){const i=this,a=i.__v_raw,c=De(a),d=t?Di:e?oo:Lt;return!e&&tt(c,"iterate",Fn),a.forEach((u,f)=>s.call(l,d(u),d(f),i))}};return Ze(r,e?{add:rr("add"),set:rr("set"),delete:rr("delete"),clear:rr("clear")}:{add(s){!t&&!Tt(s)&&!fn(s)&&(s=De(s));const l=De(this);return or(l).has.call(l,s)||(l.add(s),an(l,"add",s,s)),this},set(s,l){!t&&!Tt(l)&&!fn(l)&&(l=De(l));const i=De(this),{has:a,get:c}=or(i);let d=a.call(i,s);d||(s=De(s),d=a.call(i,s));const u=c.call(i,s);return i.set(s,l),d?xn(l,u)&&an(i,"set",s,l):an(i,"add",s,l),this},delete(s){const l=De(this),{has:i,get:a}=or(l);let c=i.call(l,s);c||(s=De(s),c=i.call(l,s)),a&&a.call(l,s);const d=l.delete(s);return c&&an(l,"delete",s,void 0),d},clear(){const s=De(this),l=s.size!==0,i=s.clear();return l&&an(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=Sp(s,e,t)}),r}function aa(e,t){const r=Ep(e,t);return(n,s,l)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(Fe(r,s)&&s in n?r:n,s,l)}const Pp={get:aa(!1,!1)},Ap={get:aa(!1,!0)},Rp={get:aa(!0,!1)};const Hd=new WeakMap,zd=new WeakMap,Gd=new WeakMap,Tp=new WeakMap;function Op(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Mp(e){return e.__v_skip||!Object.isExtensible(e)?0:Op(np(e))}function Cs(e){return fn(e)?e:la(e,!1,wp,Pp,Hd)}function Qd(e){return la(e,!1,kp,Ap,zd)}function Ii(e){return la(e,!0,Cp,Rp,Gd)}function la(e,t,r,n,s){if(!qe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=Mp(e);if(l===0)return e;const i=s.get(e);if(i)return i;const a=new Proxy(e,l===2?n:r);return s.set(e,a),a}function $n(e){return fn(e)?$n(e.__v_raw):!!(e&&e.__v_isReactive)}function fn(e){return!!(e&&e.__v_isReadonly)}function Tt(e){return!!(e&&e.__v_isShallow)}function ua(e){return e?!!e.__v_raw:!1}function De(e){const t=e&&e.__v_raw;return t?De(t):e}function Dp(e){return!Fe(e,"__v_skip")&&Object.isExtensible(e)&&Rd(e,"__v_skip",!0),e}const Lt=e=>qe(e)?Cs(e):e,oo=e=>qe(e)?Ii(e):e;function rt(e){return e?e.__v_isRef===!0:!1}function N(e){return Kd(e,!1)}function Ip(e){return Kd(e,!0)}function Kd(e,t){return rt(e)?e:new Np(e,t)}class Np{constructor(t,r){this.dep=new ia,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:De(t),this._value=r?t:Lt(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||Tt(t)||fn(t);t=n?t:De(t),xn(t,r)&&(this._rawValue=t,this._value=n?t:Lt(t),this.dep.trigger())}}function ye(e){return rt(e)?e.value:e}const Fp={get:(e,t,r)=>t==="__v_raw"?e:ye(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const s=e[t];return rt(s)&&!rt(r)?(s.value=r,!0):Reflect.set(e,t,r,n)}};function Jd(e){return $n(e)?e:new Proxy(e,Fp)}class $p{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new ia(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Fo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&je!==this)return Nd(this,!0),!0}get value(){const t=this.dep.track();return Ld(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Lp(e,t,r=!1){let n,s;return _e(e)?n=e:(n=e.get,s=e.set),new $p(n,s,r)}const sr={},rs=new WeakMap;let Mn;function qp(e,t=!1,r=Mn){if(r){let n=rs.get(r);n||rs.set(r,n=[]),n.push(e)}}function Up(e,t,r=Ue){const{immediate:n,deep:s,once:l,scheduler:i,augmentJob:a,call:c}=r,d=T=>s?T:Tt(T)||s===!1||s===0?ln(T,1):ln(T);let u,f,p,m,g=!1,v=!1;if(rt(e)?(f=()=>e.value,g=Tt(e)):$n(e)?(f=()=>d(e),g=!0):ve(e)?(v=!0,g=e.some(T=>$n(T)||Tt(T)),f=()=>e.map(T=>{if(rt(T))return T.value;if($n(T))return d(T);if(_e(T))return c?c(T,2):T()})):_e(e)?t?f=c?()=>c(e,2):e:f=()=>{if(p){dn();try{p()}finally{cn()}}const T=Mn;Mn=u;try{return c?c(e,3,[m]):e(m)}finally{Mn=T}}:f=Qt,t&&s){const T=f,y=s===!0?1/0:s;f=()=>ln(T(),y)}const h=mp(),C=()=>{u.stop(),h&&h.active&&Zi(h.effects,u)};if(l&&t){const T=t;t=(...y)=>{T(...y),C()}}let E=v?new Array(e.length).fill(sr):sr;const k=T=>{if(!(!(u.flags&1)||!u.dirty&&!T))if(t){const y=u.run();if(s||g||(v?y.some((R,S)=>xn(R,E[S])):xn(y,E))){p&&p();const R=Mn;Mn=u;try{const S=[y,E===sr?void 0:v&&E[0]===sr?[]:E,m];E=y,c?c(t,3,S):t(...S)}finally{Mn=R}}}else u.run()};return a&&a(k),u=new Dd(f),u.scheduler=i?()=>i(k,!1):k,m=T=>qp(T,!1,u),p=u.onStop=()=>{const T=rs.get(u);if(T){if(c)c(T,4);else for(const y of T)y();rs.delete(u)}},t?n?k(!0):E=u.run():i?i(k.bind(null,!0),!0):u.run(),C.pause=u.pause.bind(u),C.resume=u.resume.bind(u),C.stop=C,C}function ln(e,t=1/0,r){if(t<=0||!qe(e)||e.__v_skip||(r=r||new Map,(r.get(e)||0)>=t))return e;if(r.set(e,t),t--,rt(e))ln(e.value,t,r);else if(ve(e))for(let n=0;n<e.length;n++)ln(e[n],t,r);else if(lo(e)||Zn(e))e.forEach(n=>{ln(n,t,r)});else if(Ad(e)){for(const n in e)ln(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&ln(e[n],t,r)}return e}function Go(e,t,r,n){try{return n?e(...n):e()}catch(s){ks(s,t,r)}}function qt(e,t,r,n){if(_e(e)){const s=Go(e,t,r,n);return s&&Ed(s)&&s.catch(l=>{ks(l,t,r)}),s}if(ve(e)){const s=[];for(let l=0;l<e.length;l++)s.push(qt(e[l],t,r,n));return s}}function ks(e,t,r,n=!0){const s=t?t.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||Ue;if(t){let a=t.parent;const c=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,c,d)===!1)return}a=a.parent}if(l){dn(),Go(l,null,10,[e,c,d]),cn();return}}jp(e,r,s,n,i)}function jp(e,t,r,n=!0,s=!1){if(s)throw e;console.error(e)}const ut=[];let zt=-1;const eo=[];let yn=null,Wn=0;const Wd=Promise.resolve();let ss=null;function Ss(e){const t=ss||Wd;return e?t.then(this?e.bind(this):e):t}function Bp(e){let t=zt+1,r=ut.length;for(;t<r;){const n=t+r>>>1,s=ut[n],l=Lo(s);l<e||l===e&&s.flags&2?t=n+1:r=n}return t}function da(e){if(!(e.flags&1)){const t=Lo(e),r=ut[ut.length-1];!r||!(e.flags&2)&&t>=Lo(r)?ut.push(e):ut.splice(Bp(t),0,e),e.flags|=1,Xd()}}function Xd(){ss||(ss=Wd.then(Zd))}function Vp(e){ve(e)?eo.push(...e):yn&&e.id===-1?yn.splice(Wn+1,0,e):e.flags&1||(eo.push(e),e.flags|=1),Xd()}function Ma(e,t,r=zt+1){for(;r<ut.length;r++){const n=ut[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ut.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Yd(e){if(eo.length){const t=[...new Set(eo)].sort((r,n)=>Lo(r)-Lo(n));if(eo.length=0,yn){yn.push(...t);return}for(yn=t,Wn=0;Wn<yn.length;Wn++){const r=yn[Wn];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}yn=null,Wn=0}}const Lo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Zd(e){try{for(zt=0;zt<ut.length;zt++){const t=ut[zt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Go(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;zt<ut.length;zt++){const t=ut[zt];t&&(t.flags&=-2)}zt=-1,ut.length=0,Yd(),ss=null,(ut.length||eo.length)&&Zd()}}let xt=null,ec=null;function is(e){const t=xt;return xt=e,ec=e&&e.type.__scopeId||null,t}function qo(e,t=xt,r){if(!t||e._n)return e;const n=(...s)=>{n._d&&us(-1);const l=is(t);let i;try{i=e(...s)}finally{is(l),n._d&&us(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}function Q(e,t){if(xt===null)return e;const r=Ts(xt),n=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[l,i,a,c=Ue]=t[s];l&&(_e(l)&&(l={mounted:l,updated:l}),l.deep&&ln(i),n.push({dir:l,instance:r,value:i,oldValue:void 0,arg:a,modifiers:c}))}return e}function En(e,t,r,n){const s=e.dirs,l=t&&t.dirs;for(let i=0;i<s.length;i++){const a=s[i];l&&(a.oldValue=l[i].value);let c=a.dir[n];c&&(dn(),qt(c,r,8,[e.el,a,e,t]),cn())}}function Xr(e,t){if(nt){let r=nt.provides;const n=nt.parent&&nt.parent.provides;n===r&&(r=nt.provides=Object.create(n)),r[e]=t}}function Kt(e,t,r=!1){const n=Oc();if(n||to){let s=to?to._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return r&&_e(t)?t.call(n&&n.proxy):t}}const Hp=Symbol.for("v-scx"),zp=()=>Kt(Hp);function Ae(e,t,r){return tc(e,t,r)}function tc(e,t,r=Ue){const{immediate:n,deep:s,flush:l,once:i}=r,a=Ze({},r),c=t&&n||!t&&l!=="post";let d;if(Bo){if(l==="sync"){const m=zp();d=m.__watcherHandles||(m.__watcherHandles=[])}else if(!c){const m=()=>{};return m.stop=Qt,m.resume=Qt,m.pause=Qt,m}}const u=nt;a.call=(m,g,v)=>qt(m,u,g,v);let f=!1;l==="post"?a.scheduler=m=>{_t(m,u&&u.suspense)}:l!=="sync"&&(f=!0,a.scheduler=(m,g)=>{g?m():da(m)}),a.augmentJob=m=>{t&&(m.flags|=4),f&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const p=Up(e,t,a);return Bo&&(d?d.push(p):c&&p()),p}function Gp(e,t,r){const n=this.proxy,s=Ke(e)?e.includes(".")?nc(n,e):()=>n[e]:e.bind(n,n);let l;_e(t)?l=t:(l=t.handler,r=t);const i=Qo(this),a=tc(s,l.bind(n),r);return i(),a}function nc(e,t){const r=t.split(".");return()=>{let n=e;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}const Qp=Symbol("_vte"),oc=e=>e.__isTeleport,sn=Symbol("_leaveCb"),ir=Symbol("_enterCb");function Kp(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return vt(()=>{e.isMounted=!0}),fc(()=>{e.isUnmounting=!0}),e}const Pt=[Function,Array],rc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Pt,onEnter:Pt,onAfterEnter:Pt,onEnterCancelled:Pt,onBeforeLeave:Pt,onLeave:Pt,onAfterLeave:Pt,onLeaveCancelled:Pt,onBeforeAppear:Pt,onAppear:Pt,onAfterAppear:Pt,onAppearCancelled:Pt},sc=e=>{const t=e.subTree;return t.component?sc(t.component):t},Jp={name:"BaseTransition",props:rc,setup(e,{slots:t}){const r=Oc(),n=Kp();return()=>{const s=t.default&&lc(t.default(),!0);if(!s||!s.length)return;const l=ic(s),i=De(e),{mode:a}=i;if(n.isLeaving)return Gs(l);const c=Da(l);if(!c)return Gs(l);let d=Ni(c,i,n,r,f=>d=f);c.type!==ct&&Uo(c,d);let u=r.subTree&&Da(r.subTree);if(u&&u.type!==ct&&!Dn(u,c)&&sc(r).type!==ct){let f=Ni(u,i,n,r);if(Uo(u,f),a==="out-in"&&c.type!==ct)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete f.afterLeave,u=void 0},Gs(l);a==="in-out"&&c.type!==ct?f.delayLeave=(p,m,g)=>{const v=ac(n,u);v[String(u.key)]=u,p[sn]=()=>{m(),p[sn]=void 0,delete d.delayedLeave,u=void 0},d.delayedLeave=()=>{g(),delete d.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return l}}};function ic(e){let t=e[0];if(e.length>1){for(const r of e)if(r.type!==ct){t=r;break}}return t}const Wp=Jp;function ac(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function Ni(e,t,r,n,s){const{appear:l,mode:i,persisted:a=!1,onBeforeEnter:c,onEnter:d,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:g,onLeaveCancelled:v,onBeforeAppear:h,onAppear:C,onAfterAppear:E,onAppearCancelled:k}=t,T=String(e.key),y=ac(r,e),R=(O,$)=>{O&&qt(O,n,9,$)},S=(O,$)=>{const U=$[1];R(O,$),ve(O)?O.every(I=>I.length<=1)&&U():O.length<=1&&U()},w={mode:i,persisted:a,beforeEnter(O){let $=c;if(!r.isMounted)if(l)$=h||c;else return;O[sn]&&O[sn](!0);const U=y[T];U&&Dn(e,U)&&U.el[sn]&&U.el[sn](),R($,[O])},enter(O){let $=d,U=u,I=f;if(!r.isMounted)if(l)$=C||d,U=E||u,I=k||f;else return;let M=!1;const j=O[ir]=B=>{M||(M=!0,B?R(I,[O]):R(U,[O]),w.delayedLeave&&w.delayedLeave(),O[ir]=void 0)};$?S($,[O,j]):j()},leave(O,$){const U=String(e.key);if(O[ir]&&O[ir](!0),r.isUnmounting)return $();R(p,[O]);let I=!1;const M=O[sn]=j=>{I||(I=!0,$(),j?R(v,[O]):R(g,[O]),O[sn]=void 0,y[U]===e&&delete y[U])};y[U]=e,m?S(m,[O,M]):M()},clone(O){const $=Ni(O,t,r,n,s);return s&&s($),$}};return w}function Gs(e){if(Es(e))return e=wn(e),e.children=null,e}function Da(e){if(!Es(e))return oc(e.type)&&e.children?ic(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&_e(r.default))return r.default()}}function Uo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Uo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function lc(e,t=!1,r){let n=[],s=0;for(let l=0;l<e.length;l++){let i=e[l];const a=r==null?i.key:String(r)+String(i.key!=null?i.key:l);i.type===fe?(i.patchFlag&128&&s++,n=n.concat(lc(i.children,t,a))):(t||i.type!==ct)&&n.push(a!=null?wn(i,{key:a}):i)}if(s>1)for(let l=0;l<n.length;l++)n[l].patchFlag=-2;return n}function uc(e,t){return _e(e)?Ze({name:e.name},t,{setup:e}):e}function dc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const as=new WeakMap;function Oo(e,t,r,n,s=!1){if(ve(e)){e.forEach((g,v)=>Oo(g,t&&(ve(t)?t[v]:t),r,n,s));return}if(Mo(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Oo(e,t,r,n.component.subTree);return}const l=n.shapeFlag&4?Ts(n.component):n.el,i=s?null:l,{i:a,r:c}=e,d=t&&t.r,u=a.refs===Ue?a.refs={}:a.refs,f=a.setupState,p=De(f),m=f===Ue?Sd:g=>Fe(p,g);if(d!=null&&d!==c){if(Ia(t),Ke(d))u[d]=null,m(d)&&(f[d]=null);else if(rt(d)){d.value=null;const g=t;g.k&&(u[g.k]=null)}}if(_e(c))Go(c,a,12,[i,u]);else{const g=Ke(c),v=rt(c);if(g||v){const h=()=>{if(e.f){const C=g?m(c)?f[c]:u[c]:c.value;if(s)ve(C)&&Zi(C,l);else if(ve(C))C.includes(l)||C.push(l);else if(g)u[c]=[l],m(c)&&(f[c]=u[c]);else{const E=[l];c.value=E,e.k&&(u[e.k]=E)}}else g?(u[c]=i,m(c)&&(f[c]=i)):v&&(c.value=i,e.k&&(u[e.k]=i))};if(i){const C=()=>{h(),as.delete(e)};C.id=-1,as.set(e,C),_t(C,r)}else Ia(e),h()}}}function Ia(e){const t=as.get(e);t&&(t.flags|=8,as.delete(e))}xs().requestIdleCallback;xs().cancelIdleCallback;const Mo=e=>!!e.type.__asyncLoader,Es=e=>e.type.__isKeepAlive;function Xp(e,t){cc(e,"a",t)}function Yp(e,t){cc(e,"da",t)}function cc(e,t,r=nt){const n=e.__wdc||(e.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Ps(t,n,r),r){let s=r.parent;for(;s&&s.parent;)Es(s.parent.vnode)&&Zp(n,t,r,s),s=s.parent}}function Zp(e,t,r,n){const s=Ps(t,e,n,!0);ca(()=>{Zi(n[t],s)},r)}function Ps(e,t,r=nt,n=!1){if(r){const s=r[e]||(r[e]=[]),l=t.__weh||(t.__weh=(...i)=>{dn();const a=Qo(r),c=qt(t,r,e,i);return a(),cn(),c});return n?s.unshift(l):s.push(l),l}}const pn=e=>(t,r=nt)=>{(!Bo||e==="sp")&&Ps(e,(...n)=>t(...n),r)},em=pn("bm"),vt=pn("m"),tm=pn("bu"),nm=pn("u"),fc=pn("bum"),ca=pn("um"),om=pn("sp"),rm=pn("rtg"),sm=pn("rtc");function im(e,t=nt){Ps("ec",e,t)}const am="components";function He(e,t){return um(am,e,!0,t)||e}const lm=Symbol.for("v-ndc");function um(e,t,r=!0,n=!1){const s=xt||nt;if(s){const l=s.type;{const a=Qm(l,!1);if(a&&(a===t||a===Mt(t)||a===bs(Mt(t))))return l}const i=Na(s[e]||l[e],t)||Na(s.appContext[e],t);return!i&&n?l:i}}function Na(e,t){return e&&(e[t]||e[Mt(t)]||e[bs(Mt(t))])}function be(e,t,r,n){let s;const l=r,i=ve(e);if(i||Ke(e)){const a=i&&$n(e);let c=!1,d=!1;a&&(c=!Tt(e),d=fn(e),e=ws(e)),s=new Array(e.length);for(let u=0,f=e.length;u<f;u++)s[u]=t(c?d?oo(Lt(e[u])):Lt(e[u]):e[u],u,void 0,l)}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,l)}else if(qe(e))if(e[Symbol.iterator])s=Array.from(e,(a,c)=>t(a,c,void 0,l));else{const a=Object.keys(e);s=new Array(a.length);for(let c=0,d=a.length;c<d;c++){const u=a[c];s[c]=t(e[u],u,c,l)}}else s=[];return s}const Fi=e=>e?Mc(e)?Ts(e):Fi(e.parent):null,Do=Ze(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Fi(e.parent),$root:e=>Fi(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>mc(e),$forceUpdate:e=>e.f||(e.f=()=>{da(e.update)}),$nextTick:e=>e.n||(e.n=Ss.bind(e.proxy)),$watch:e=>Gp.bind(e)}),Qs=(e,t)=>e!==Ue&&!e.__isScriptSetup&&Fe(e,t),dm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:l,accessCache:i,type:a,appContext:c}=e;if(t[0]!=="$"){const p=i[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return s[t];case 4:return r[t];case 3:return l[t]}else{if(Qs(n,t))return i[t]=1,n[t];if(s!==Ue&&Fe(s,t))return i[t]=2,s[t];if(Fe(l,t))return i[t]=3,l[t];if(r!==Ue&&Fe(r,t))return i[t]=4,r[t];$i&&(i[t]=0)}}const d=Do[t];let u,f;if(d)return t==="$attrs"&&tt(e.attrs,"get",""),d(e);if((u=a.__cssModules)&&(u=u[t]))return u;if(r!==Ue&&Fe(r,t))return i[t]=4,r[t];if(f=c.config.globalProperties,Fe(f,t))return f[t]},set({_:e},t,r){const{data:n,setupState:s,ctx:l}=e;return Qs(s,t)?(s[t]=r,!0):n!==Ue&&Fe(n,t)?(n[t]=r,!0):Fe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(l[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:s,props:l,type:i}},a){let c;return!!(r[a]||e!==Ue&&a[0]!=="$"&&Fe(e,a)||Qs(t,a)||Fe(l,a)||Fe(n,a)||Fe(Do,a)||Fe(s.config.globalProperties,a)||(c=i.__cssModules)&&c[a])},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Fe(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function Fa(e){return ve(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let $i=!0;function cm(e){const t=mc(e),r=e.proxy,n=e.ctx;$i=!1,t.beforeCreate&&$a(t.beforeCreate,e,"bc");const{data:s,computed:l,methods:i,watch:a,provide:c,inject:d,created:u,beforeMount:f,mounted:p,beforeUpdate:m,updated:g,activated:v,deactivated:h,beforeDestroy:C,beforeUnmount:E,destroyed:k,unmounted:T,render:y,renderTracked:R,renderTriggered:S,errorCaptured:w,serverPrefetch:O,expose:$,inheritAttrs:U,components:I,directives:M,filters:j}=t;if(d&&fm(d,n,null),i)for(const z in i){const te=i[z];_e(te)&&(n[z]=te.bind(r))}if(s){const z=s.call(r,r);qe(z)&&(e.data=Cs(z))}if($i=!0,l)for(const z in l){const te=l[z],pe=_e(te)?te.bind(r,r):_e(te.get)?te.get.bind(r,r):Qt,Re=!_e(te)&&_e(te.set)?te.set.bind(r):Qt,de=K({get:pe,set:Re});Object.defineProperty(n,z,{enumerable:!0,configurable:!0,get:()=>de.value,set:P=>de.value=P})}if(a)for(const z in a)pc(a[z],n,r,z);if(c){const z=_e(c)?c.call(r):c;Reflect.ownKeys(z).forEach(te=>{Xr(te,z[te])})}u&&$a(u,e,"c");function A(z,te){ve(te)?te.forEach(pe=>z(pe.bind(r))):te&&z(te.bind(r))}if(A(em,f),A(vt,p),A(tm,m),A(nm,g),A(Xp,v),A(Yp,h),A(im,w),A(sm,R),A(rm,S),A(fc,E),A(ca,T),A(om,O),ve($))if($.length){const z=e.exposed||(e.exposed={});$.forEach(te=>{Object.defineProperty(z,te,{get:()=>r[te],set:pe=>r[te]=pe,enumerable:!0})})}else e.exposed||(e.exposed={});y&&e.render===Qt&&(e.render=y),U!=null&&(e.inheritAttrs=U),I&&(e.components=I),M&&(e.directives=M),O&&dc(e)}function fm(e,t,r=Qt){ve(e)&&(e=Li(e));for(const n in e){const s=e[n];let l;qe(s)?"default"in s?l=Kt(s.from||n,s.default,!0):l=Kt(s.from||n):l=Kt(s),rt(l)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>l.value,set:i=>l.value=i}):t[n]=l}}function $a(e,t,r){qt(ve(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function pc(e,t,r,n){let s=n.includes(".")?nc(r,n):()=>r[n];if(Ke(e)){const l=t[e];_e(l)&&Ae(s,l)}else if(_e(e))Ae(s,e.bind(r));else if(qe(e))if(ve(e))e.forEach(l=>pc(l,t,r,n));else{const l=_e(e.handler)?e.handler.bind(r):t[e.handler];_e(l)&&Ae(s,l,e)}}function mc(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:s,optionsCache:l,config:{optionMergeStrategies:i}}=e.appContext,a=l.get(t);let c;return a?c=a:!s.length&&!r&&!n?c=t:(c={},s.length&&s.forEach(d=>ls(c,d,i,!0)),ls(c,t,i)),qe(t)&&l.set(t,c),c}function ls(e,t,r,n=!1){const{mixins:s,extends:l}=t;l&&ls(e,l,r,!0),s&&s.forEach(i=>ls(e,i,r,!0));for(const i in t)if(!(n&&i==="expose")){const a=pm[i]||r&&r[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const pm={data:La,props:qa,emits:qa,methods:Eo,computed:Eo,beforeCreate:at,created:at,beforeMount:at,mounted:at,beforeUpdate:at,updated:at,beforeDestroy:at,beforeUnmount:at,destroyed:at,unmounted:at,activated:at,deactivated:at,errorCaptured:at,serverPrefetch:at,components:Eo,directives:Eo,watch:gm,provide:La,inject:mm};function La(e,t){return t?e?function(){return Ze(_e(e)?e.call(this,this):e,_e(t)?t.call(this,this):t)}:t:e}function mm(e,t){return Eo(Li(e),Li(t))}function Li(e){if(ve(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function at(e,t){return e?[...new Set([].concat(e,t))]:t}function Eo(e,t){return e?Ze(Object.create(null),e,t):t}function qa(e,t){return e?ve(e)&&ve(t)?[...new Set([...e,...t])]:Ze(Object.create(null),Fa(e),Fa(t??{})):t}function gm(e,t){if(!e)return t;if(!t)return e;const r=Ze(Object.create(null),e);for(const n in t)r[n]=at(e[n],t[n]);return r}function gc(){return{app:null,config:{isNativeTag:Sd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vm=0;function hm(e,t){return function(n,s=null){_e(n)||(n=Ze({},n)),s!=null&&!qe(s)&&(s=null);const l=gc(),i=new WeakSet,a=[];let c=!1;const d=l.app={_uid:vm++,_component:n,_props:s,_container:null,_context:l,_instance:null,version:Jm,get config(){return l.config},set config(u){},use(u,...f){return i.has(u)||(u&&_e(u.install)?(i.add(u),u.install(d,...f)):_e(u)&&(i.add(u),u(d,...f))),d},mixin(u){return l.mixins.includes(u)||l.mixins.push(u),d},component(u,f){return f?(l.components[u]=f,d):l.components[u]},directive(u,f){return f?(l.directives[u]=f,d):l.directives[u]},mount(u,f,p){if(!c){const m=d._ceVNode||Te(n,s);return m.appContext=l,p===!0?p="svg":p===!1&&(p=void 0),e(m,u,p),c=!0,d._container=u,u.__vue_app__=d,Ts(m.component)}},onUnmount(u){a.push(u)},unmount(){c&&(qt(a,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(u,f){return l.provides[u]=f,d},runWithContext(u){const f=to;to=d;try{return u()}finally{to=f}}};return d}}let to=null;const ym=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Mt(t)}Modifiers`]||e[`${kn(t)}Modifiers`];function bm(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Ue;let s=r;const l=t.startsWith("update:"),i=l&&ym(n,t.slice(7));i&&(i.trim&&(s=r.map(u=>Ke(u)?u.trim():u)),i.number&&(s=r.map(_s)));let a,c=n[a=js(t)]||n[a=js(Mt(t))];!c&&l&&(c=n[a=js(kn(t))]),c&&qt(c,e,6,s);const d=n[a+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,qt(d,e,6,s)}}const _m=new WeakMap;function vc(e,t,r=!1){const n=r?_m:t.emitsCache,s=n.get(e);if(s!==void 0)return s;const l=e.emits;let i={},a=!1;if(!_e(e)){const c=d=>{const u=vc(d,t,!0);u&&(a=!0,Ze(i,u))};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!l&&!a?(qe(e)&&n.set(e,null),null):(ve(l)?l.forEach(c=>i[c]=null):Ze(i,l),qe(e)&&n.set(e,i),i)}function As(e,t){return!e||!hs(t)?!1:(t=t.slice(2).replace(/Once$/,""),Fe(e,t[0].toLowerCase()+t.slice(1))||Fe(e,kn(t))||Fe(e,t))}function Ua(e){const{type:t,vnode:r,proxy:n,withProxy:s,propsOptions:[l],slots:i,attrs:a,emit:c,render:d,renderCache:u,props:f,data:p,setupState:m,ctx:g,inheritAttrs:v}=e,h=is(e);let C,E;try{if(r.shapeFlag&4){const T=s||n,y=T;C=Gt(d.call(y,T,u,f,m,p,g)),E=a}else{const T=t;C=Gt(T.length>1?T(f,{attrs:a,slots:i,emit:c}):T(f,null)),E=t.props?a:xm(a)}}catch(T){Io.length=0,ks(T,e,1),C=Te(ct)}let k=C;if(E&&v!==!1){const T=Object.keys(E),{shapeFlag:y}=k;T.length&&y&7&&(l&&T.some(Yi)&&(E=wm(E,l)),k=wn(k,E,!1,!0))}return r.dirs&&(k=wn(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(r.dirs):r.dirs),r.transition&&Uo(k,r.transition),C=k,is(h),C}const xm=e=>{let t;for(const r in e)(r==="class"||r==="style"||hs(r))&&((t||(t={}))[r]=e[r]);return t},wm=(e,t)=>{const r={};for(const n in e)(!Yi(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function Cm(e,t,r){const{props:n,children:s,component:l}=e,{props:i,children:a,patchFlag:c}=t,d=l.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&c>=0){if(c&1024)return!0;if(c&16)return n?ja(n,i,d):!!i;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(i[p]!==n[p]&&!As(d,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===i?!1:n?i?ja(n,i,d):!0:!!i;return!1}function ja(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const l=n[s];if(t[l]!==e[l]&&!As(r,l))return!0}return!1}function km({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const hc={},yc=()=>Object.create(hc),bc=e=>Object.getPrototypeOf(e)===hc;function Sm(e,t,r,n=!1){const s={},l=yc();e.propsDefaults=Object.create(null),_c(e,t,s,l);for(const i in e.propsOptions[0])i in s||(s[i]=void 0);r?e.props=n?s:Qd(s):e.type.props?e.props=s:e.props=l,e.attrs=l}function Em(e,t,r,n){const{props:s,attrs:l,vnode:{patchFlag:i}}=e,a=De(s),[c]=e.propsOptions;let d=!1;if((n||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(As(e.emitsOptions,p))continue;const m=t[p];if(c)if(Fe(l,p))m!==l[p]&&(l[p]=m,d=!0);else{const g=Mt(p);s[g]=qi(c,a,g,m,e,!1)}else m!==l[p]&&(l[p]=m,d=!0)}}}else{_c(e,t,s,l)&&(d=!0);let u;for(const f in a)(!t||!Fe(t,f)&&((u=kn(f))===f||!Fe(t,u)))&&(c?r&&(r[f]!==void 0||r[u]!==void 0)&&(s[f]=qi(c,a,f,void 0,e,!0)):delete s[f]);if(l!==a)for(const f in l)(!t||!Fe(t,f))&&(delete l[f],d=!0)}d&&an(e.attrs,"set","")}function _c(e,t,r,n){const[s,l]=e.propsOptions;let i=!1,a;if(t)for(let c in t){if(Ao(c))continue;const d=t[c];let u;s&&Fe(s,u=Mt(c))?!l||!l.includes(u)?r[u]=d:(a||(a={}))[u]=d:As(e.emitsOptions,c)||(!(c in n)||d!==n[c])&&(n[c]=d,i=!0)}if(l){const c=De(r),d=a||Ue;for(let u=0;u<l.length;u++){const f=l[u];r[f]=qi(s,c,f,d[f],e,!Fe(d,f))}}return i}function qi(e,t,r,n,s,l){const i=e[r];if(i!=null){const a=Fe(i,"default");if(a&&n===void 0){const c=i.default;if(i.type!==Function&&!i.skipFactory&&_e(c)){const{propsDefaults:d}=s;if(r in d)n=d[r];else{const u=Qo(s);n=d[r]=c.call(null,t),u()}}else n=c;s.ce&&s.ce._setProp(r,n)}i[0]&&(l&&!a?n=!1:i[1]&&(n===""||n===kn(r))&&(n=!0))}return n}const Pm=new WeakMap;function xc(e,t,r=!1){const n=r?Pm:t.propsCache,s=n.get(e);if(s)return s;const l=e.props,i={},a=[];let c=!1;if(!_e(e)){const u=f=>{c=!0;const[p,m]=xc(f,t,!0);Ze(i,p),m&&a.push(...m)};!r&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!l&&!c)return qe(e)&&n.set(e,Yn),Yn;if(ve(l))for(let u=0;u<l.length;u++){const f=Mt(l[u]);Ba(f)&&(i[f]=Ue)}else if(l)for(const u in l){const f=Mt(u);if(Ba(f)){const p=l[u],m=i[f]=ve(p)||_e(p)?{type:p}:Ze({},p),g=m.type;let v=!1,h=!0;if(ve(g))for(let C=0;C<g.length;++C){const E=g[C],k=_e(E)&&E.name;if(k==="Boolean"){v=!0;break}else k==="String"&&(h=!1)}else v=_e(g)&&g.name==="Boolean";m[0]=v,m[1]=h,(v||Fe(m,"default"))&&a.push(f)}}const d=[i,a];return qe(e)&&n.set(e,d),d}function Ba(e){return e[0]!=="$"&&!Ao(e)}const fa=e=>e==="_"||e==="_ctx"||e==="$stable",pa=e=>ve(e)?e.map(Gt):[Gt(e)],Am=(e,t,r)=>{if(t._n)return t;const n=qo((...s)=>pa(t(...s)),r);return n._c=!1,n},wc=(e,t,r)=>{const n=e._ctx;for(const s in e){if(fa(s))continue;const l=e[s];if(_e(l))t[s]=Am(s,l,n);else if(l!=null){const i=pa(l);t[s]=()=>i}}},Cc=(e,t)=>{const r=pa(t);e.slots.default=()=>r},kc=(e,t,r)=>{for(const n in t)(r||!fa(n))&&(e[n]=t[n])},Rm=(e,t,r)=>{const n=e.slots=yc();if(e.vnode.shapeFlag&32){const s=t._;s?(kc(n,t,r),r&&Rd(n,"_",s,!0)):wc(t,n)}else t&&Cc(e,t)},Tm=(e,t,r)=>{const{vnode:n,slots:s}=e;let l=!0,i=Ue;if(n.shapeFlag&32){const a=t._;a?r&&a===1?l=!1:kc(s,t,r):(l=!t.$stable,wc(t,s)),i=t}else t&&(Cc(e,t),i={default:1});if(l)for(const a in s)!fa(a)&&i[a]==null&&delete s[a]},_t=Nm;function Om(e){return Mm(e)}function Mm(e,t){const r=xs();r.__VUE__=!0;const{insert:n,remove:s,patchProp:l,createElement:i,createText:a,createComment:c,setText:d,setElementText:u,parentNode:f,nextSibling:p,setScopeId:m=Qt,insertStaticContent:g}=e,v=(D,F,H,X=null,q=null,V=null,ee=void 0,re=null,se=!!F.dynamicChildren)=>{if(D===F)return;D&&!Dn(D,F)&&(X=J(D),P(D,q,V,!0),D=null),F.patchFlag===-2&&(se=!1,F.dynamicChildren=null);const{type:Y,ref:ge,shapeFlag:ue}=F;switch(Y){case Rs:h(D,F,H,X);break;case ct:C(D,F,H,X);break;case Yr:D==null&&E(F,H,X,ee);break;case fe:I(D,F,H,X,q,V,ee,re,se);break;default:ue&1?y(D,F,H,X,q,V,ee,re,se):ue&6?M(D,F,H,X,q,V,ee,re,se):(ue&64||ue&128)&&Y.process(D,F,H,X,q,V,ee,re,se,ce)}ge!=null&&q?Oo(ge,D&&D.ref,V,F||D,!F):ge==null&&D&&D.ref!=null&&Oo(D.ref,null,V,D,!0)},h=(D,F,H,X)=>{if(D==null)n(F.el=a(F.children),H,X);else{const q=F.el=D.el;F.children!==D.children&&d(q,F.children)}},C=(D,F,H,X)=>{D==null?n(F.el=c(F.children||""),H,X):F.el=D.el},E=(D,F,H,X)=>{[D.el,D.anchor]=g(D.children,F,H,X,D.el,D.anchor)},k=({el:D,anchor:F},H,X)=>{let q;for(;D&&D!==F;)q=p(D),n(D,H,X),D=q;n(F,H,X)},T=({el:D,anchor:F})=>{let H;for(;D&&D!==F;)H=p(D),s(D),D=H;s(F)},y=(D,F,H,X,q,V,ee,re,se)=>{if(F.type==="svg"?ee="svg":F.type==="math"&&(ee="mathml"),D==null)R(F,H,X,q,V,ee,re,se);else{const Y=D.el&&D.el._isVueCE?D.el:null;try{Y&&Y._beginPatch(),O(D,F,q,V,ee,re,se)}finally{Y&&Y._endPatch()}}},R=(D,F,H,X,q,V,ee,re)=>{let se,Y;const{props:ge,shapeFlag:ue,transition:me,dirs:he}=D;if(se=D.el=i(D.type,V,ge&&ge.is,ge),ue&8?u(se,D.children):ue&16&&w(D.children,se,null,X,q,Ks(D,V),ee,re),he&&En(D,null,X,"created"),S(se,D,D.scopeId,ee,X),ge){for(const Ie in ge)Ie!=="value"&&!Ao(Ie)&&l(se,Ie,null,ge[Ie],V,X);"value"in ge&&l(se,"value",null,ge.value,V),(Y=ge.onVnodeBeforeMount)&&Bt(Y,X,D)}he&&En(D,null,X,"beforeMount");const Pe=Dm(q,me);Pe&&me.beforeEnter(se),n(se,F,H),((Y=ge&&ge.onVnodeMounted)||Pe||he)&&_t(()=>{Y&&Bt(Y,X,D),Pe&&me.enter(se),he&&En(D,null,X,"mounted")},q)},S=(D,F,H,X,q)=>{if(H&&m(D,H),X)for(let V=0;V<X.length;V++)m(D,X[V]);if(q){let V=q.subTree;if(F===V||Ac(V.type)&&(V.ssContent===F||V.ssFallback===F)){const ee=q.vnode;S(D,ee,ee.scopeId,ee.slotScopeIds,q.parent)}}},w=(D,F,H,X,q,V,ee,re,se=0)=>{for(let Y=se;Y<D.length;Y++){const ge=D[Y]=re?bn(D[Y]):Gt(D[Y]);v(null,ge,F,H,X,q,V,ee,re)}},O=(D,F,H,X,q,V,ee)=>{const re=F.el=D.el;let{patchFlag:se,dynamicChildren:Y,dirs:ge}=F;se|=D.patchFlag&16;const ue=D.props||Ue,me=F.props||Ue;let he;if(H&&Pn(H,!1),(he=me.onVnodeBeforeUpdate)&&Bt(he,H,F,D),ge&&En(F,D,H,"beforeUpdate"),H&&Pn(H,!0),(ue.innerHTML&&me.innerHTML==null||ue.textContent&&me.textContent==null)&&u(re,""),Y?$(D.dynamicChildren,Y,re,H,X,Ks(F,q),V):ee||te(D,F,re,null,H,X,Ks(F,q),V,!1),se>0){if(se&16)U(re,ue,me,H,q);else if(se&2&&ue.class!==me.class&&l(re,"class",null,me.class,q),se&4&&l(re,"style",ue.style,me.style,q),se&8){const Pe=F.dynamicProps;for(let Ie=0;Ie<Pe.length;Ie++){const Me=Pe[Ie],Je=ue[Me],et=me[Me];(et!==Je||Me==="value")&&l(re,Me,Je,et,q,H)}}se&1&&D.children!==F.children&&u(re,F.children)}else!ee&&Y==null&&U(re,ue,me,H,q);((he=me.onVnodeUpdated)||ge)&&_t(()=>{he&&Bt(he,H,F,D),ge&&En(F,D,H,"updated")},X)},$=(D,F,H,X,q,V,ee)=>{for(let re=0;re<F.length;re++){const se=D[re],Y=F[re],ge=se.el&&(se.type===fe||!Dn(se,Y)||se.shapeFlag&198)?f(se.el):H;v(se,Y,ge,null,X,q,V,ee,!0)}},U=(D,F,H,X,q)=>{if(F!==H){if(F!==Ue)for(const V in F)!Ao(V)&&!(V in H)&&l(D,V,F[V],null,q,X);for(const V in H){if(Ao(V))continue;const ee=H[V],re=F[V];ee!==re&&V!=="value"&&l(D,V,re,ee,q,X)}"value"in H&&l(D,"value",F.value,H.value,q)}},I=(D,F,H,X,q,V,ee,re,se)=>{const Y=F.el=D?D.el:a(""),ge=F.anchor=D?D.anchor:a("");let{patchFlag:ue,dynamicChildren:me,slotScopeIds:he}=F;he&&(re=re?re.concat(he):he),D==null?(n(Y,H,X),n(ge,H,X),w(F.children||[],H,ge,q,V,ee,re,se)):ue>0&&ue&64&&me&&D.dynamicChildren&&D.dynamicChildren.length===me.length?($(D.dynamicChildren,me,H,q,V,ee,re),(F.key!=null||q&&F===q.subTree)&&Sc(D,F,!0)):te(D,F,H,ge,q,V,ee,re,se)},M=(D,F,H,X,q,V,ee,re,se)=>{F.slotScopeIds=re,D==null?F.shapeFlag&512?q.ctx.activate(F,H,X,ee,se):j(F,H,X,q,V,ee,se):B(D,F,se)},j=(D,F,H,X,q,V,ee)=>{const re=D.component=Bm(D,X,q);if(Es(D)&&(re.ctx.renderer=ce),Vm(re,!1,ee),re.asyncDep){if(q&&q.registerDep(re,A,ee),!D.el){const se=re.subTree=Te(ct);C(null,se,F,H),D.placeholder=se.el}}else A(re,D,F,H,q,V,ee)},B=(D,F,H)=>{const X=F.component=D.component;if(Cm(D,F,H))if(X.asyncDep&&!X.asyncResolved){z(X,F,H);return}else X.next=F,X.update();else F.el=D.el,X.vnode=F},A=(D,F,H,X,q,V,ee)=>{const re=()=>{if(D.isMounted){let{next:ue,bu:me,u:he,parent:Pe,vnode:Ie}=D;{const St=Ec(D);if(St){ue&&(ue.el=Ie.el,z(D,ue,ee)),St.asyncDep.then(()=>{D.isUnmounted||re()});return}}let Me=ue,Je;Pn(D,!1),ue?(ue.el=Ie.el,z(D,ue,ee)):ue=Ie,me&&Wr(me),(Je=ue.props&&ue.props.onVnodeBeforeUpdate)&&Bt(Je,Pe,ue,Ie),Pn(D,!0);const et=Ua(D),kt=D.subTree;D.subTree=et,v(kt,et,f(kt.el),J(kt),D,q,V),ue.el=et.el,Me===null&&km(D,et.el),he&&_t(he,q),(Je=ue.props&&ue.props.onVnodeUpdated)&&_t(()=>Bt(Je,Pe,ue,Ie),q)}else{let ue;const{el:me,props:he}=F,{bm:Pe,m:Ie,parent:Me,root:Je,type:et}=D,kt=Mo(F);Pn(D,!1),Pe&&Wr(Pe),!kt&&(ue=he&&he.onVnodeBeforeMount)&&Bt(ue,Me,F),Pn(D,!0);{Je.ce&&Je.ce._def.shadowRoot!==!1&&Je.ce._injectChildStyle(et);const St=D.subTree=Ua(D);v(null,St,H,X,D,q,V),F.el=St.el}if(Ie&&_t(Ie,q),!kt&&(ue=he&&he.onVnodeMounted)){const St=F;_t(()=>Bt(ue,Me,St),q)}(F.shapeFlag&256||Me&&Mo(Me.vnode)&&Me.vnode.shapeFlag&256)&&D.a&&_t(D.a,q),D.isMounted=!0,F=H=X=null}};D.scope.on();const se=D.effect=new Dd(re);D.scope.off();const Y=D.update=se.run.bind(se),ge=D.job=se.runIfDirty.bind(se);ge.i=D,ge.id=D.uid,se.scheduler=()=>da(ge),Pn(D,!0),Y()},z=(D,F,H)=>{F.component=D;const X=D.vnode.props;D.vnode=F,D.next=null,Em(D,F.props,X,H),Tm(D,F.children,H),dn(),Ma(D),cn()},te=(D,F,H,X,q,V,ee,re,se=!1)=>{const Y=D&&D.children,ge=D?D.shapeFlag:0,ue=F.children,{patchFlag:me,shapeFlag:he}=F;if(me>0){if(me&128){Re(Y,ue,H,X,q,V,ee,re,se);return}else if(me&256){pe(Y,ue,H,X,q,V,ee,re,se);return}}he&8?(ge&16&&Be(Y,q,V),ue!==Y&&u(H,ue)):ge&16?he&16?Re(Y,ue,H,X,q,V,ee,re,se):Be(Y,q,V,!0):(ge&8&&u(H,""),he&16&&w(ue,H,X,q,V,ee,re,se))},pe=(D,F,H,X,q,V,ee,re,se)=>{D=D||Yn,F=F||Yn;const Y=D.length,ge=F.length,ue=Math.min(Y,ge);let me;for(me=0;me<ue;me++){const he=F[me]=se?bn(F[me]):Gt(F[me]);v(D[me],he,H,null,q,V,ee,re,se)}Y>ge?Be(D,q,V,!0,!1,ue):w(F,H,X,q,V,ee,re,se,ue)},Re=(D,F,H,X,q,V,ee,re,se)=>{let Y=0;const ge=F.length;let ue=D.length-1,me=ge-1;for(;Y<=ue&&Y<=me;){const he=D[Y],Pe=F[Y]=se?bn(F[Y]):Gt(F[Y]);if(Dn(he,Pe))v(he,Pe,H,null,q,V,ee,re,se);else break;Y++}for(;Y<=ue&&Y<=me;){const he=D[ue],Pe=F[me]=se?bn(F[me]):Gt(F[me]);if(Dn(he,Pe))v(he,Pe,H,null,q,V,ee,re,se);else break;ue--,me--}if(Y>ue){if(Y<=me){const he=me+1,Pe=he<ge?F[he].el:X;for(;Y<=me;)v(null,F[Y]=se?bn(F[Y]):Gt(F[Y]),H,Pe,q,V,ee,re,se),Y++}}else if(Y>me)for(;Y<=ue;)P(D[Y],q,V,!0),Y++;else{const he=Y,Pe=Y,Ie=new Map;for(Y=Pe;Y<=me;Y++){const st=F[Y]=se?bn(F[Y]):Gt(F[Y]);st.key!=null&&Ie.set(st.key,Y)}let Me,Je=0;const et=me-Pe+1;let kt=!1,St=0;const Sn=new Array(et);for(Y=0;Y<et;Y++)Sn[Y]=0;for(Y=he;Y<=ue;Y++){const st=D[Y];if(Je>=et){P(st,q,V,!0);continue}let Et;if(st.key!=null)Et=Ie.get(st.key);else for(Me=Pe;Me<=me;Me++)if(Sn[Me-Pe]===0&&Dn(st,F[Me])){Et=Me;break}Et===void 0?P(st,q,V,!0):(Sn[Et-Pe]=Y+1,Et>=St?St=Et:kt=!0,v(st,F[Et],H,null,q,V,ee,re,se),Je++)}const nr=kt?Im(Sn):Yn;for(Me=nr.length-1,Y=et-1;Y>=0;Y--){const st=Pe+Y,Et=F[st],Vn=F[st+1],Hn=st+1<ge?Vn.el||Pc(Vn):X;Sn[Y]===0?v(null,Et,H,Hn,q,V,ee,re,se):kt&&(Me<0||Y!==nr[Me]?de(Et,H,Hn,2):Me--)}}},de=(D,F,H,X,q=null)=>{const{el:V,type:ee,transition:re,children:se,shapeFlag:Y}=D;if(Y&6){de(D.component.subTree,F,H,X);return}if(Y&128){D.suspense.move(F,H,X);return}if(Y&64){ee.move(D,F,H,ce);return}if(ee===fe){n(V,F,H);for(let ue=0;ue<se.length;ue++)de(se[ue],F,H,X);n(D.anchor,F,H);return}if(ee===Yr){k(D,F,H);return}if(X!==2&&Y&1&&re)if(X===0)re.beforeEnter(V),n(V,F,H),_t(()=>re.enter(V),q);else{const{leave:ue,delayLeave:me,afterLeave:he}=re,Pe=()=>{D.ctx.isUnmounted?s(V):n(V,F,H)},Ie=()=>{V._isLeaving&&V[sn](!0),ue(V,()=>{Pe(),he&&he()})};me?me(V,Pe,Ie):Ie()}else n(V,F,H)},P=(D,F,H,X=!1,q=!1)=>{const{type:V,props:ee,ref:re,children:se,dynamicChildren:Y,shapeFlag:ge,patchFlag:ue,dirs:me,cacheIndex:he}=D;if(ue===-2&&(q=!1),re!=null&&(dn(),Oo(re,null,H,D,!0),cn()),he!=null&&(F.renderCache[he]=void 0),ge&256){F.ctx.deactivate(D);return}const Pe=ge&1&&me,Ie=!Mo(D);let Me;if(Ie&&(Me=ee&&ee.onVnodeBeforeUnmount)&&Bt(Me,F,D),ge&6)Ee(D.component,H,X);else{if(ge&128){D.suspense.unmount(H,X);return}Pe&&En(D,null,F,"beforeUnmount"),ge&64?D.type.remove(D,F,H,ce,X):Y&&!Y.hasOnce&&(V!==fe||ue>0&&ue&64)?Be(Y,F,H,!1,!0):(V===fe&&ue&384||!q&&ge&16)&&Be(se,F,H),X&&W(D)}(Ie&&(Me=ee&&ee.onVnodeUnmounted)||Pe)&&_t(()=>{Me&&Bt(Me,F,D),Pe&&En(D,null,F,"unmounted")},H)},W=D=>{const{type:F,el:H,anchor:X,transition:q}=D;if(F===fe){ke(H,X);return}if(F===Yr){T(D);return}const V=()=>{s(H),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(D.shapeFlag&1&&q&&!q.persisted){const{leave:ee,delayLeave:re}=q,se=()=>ee(H,V);re?re(D.el,V,se):se()}else V()},ke=(D,F)=>{let H;for(;D!==F;)H=p(D),s(D),D=H;s(F)},Ee=(D,F,H)=>{const{bum:X,scope:q,job:V,subTree:ee,um:re,m:se,a:Y}=D;Va(se),Va(Y),X&&Wr(X),q.stop(),V&&(V.flags|=8,P(ee,D,F,H)),re&&_t(re,F),_t(()=>{D.isUnmounted=!0},F)},Be=(D,F,H,X=!1,q=!1,V=0)=>{for(let ee=V;ee<D.length;ee++)P(D[ee],F,H,X,q)},J=D=>{if(D.shapeFlag&6)return J(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const F=p(D.anchor||D.el),H=F&&F[Qp];return H?p(H):F};let ae=!1;const ie=(D,F,H)=>{let X;D==null?F._vnode&&(P(F._vnode,null,null,!0),X=F._vnode.component):v(F._vnode||null,D,F,null,null,null,H),F._vnode=D,ae||(ae=!0,Ma(X),Yd(),ae=!1)},ce={p:v,um:P,m:de,r:W,mt:j,mc:w,pc:te,pbc:$,n:J,o:e};return{render:ie,hydrate:void 0,createApp:hm(ie)}}function Ks({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Pn({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Dm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Sc(e,t,r=!1){const n=e.children,s=t.children;if(ve(n)&&ve(s))for(let l=0;l<n.length;l++){const i=n[l];let a=s[l];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[l]=bn(s[l]),a.el=i.el),!r&&a.patchFlag!==-2&&Sc(i,a)),a.type===Rs&&(a.patchFlag!==-1?a.el=i.el:a.__elIndex=l+(e.type===fe?1:0)),a.type===ct&&!a.el&&(a.el=i.el)}}function Im(e){const t=e.slice(),r=[0];let n,s,l,i,a;const c=e.length;for(n=0;n<c;n++){const d=e[n];if(d!==0){if(s=r[r.length-1],e[s]<d){t[n]=s,r.push(n);continue}for(l=0,i=r.length-1;l<i;)a=l+i>>1,e[r[a]]<d?l=a+1:i=a;d<e[r[l]]&&(l>0&&(t[n]=r[l-1]),r[l]=n)}}for(l=r.length,i=r[l-1];l-- >0;)r[l]=i,i=t[i];return r}function Ec(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ec(t)}function Va(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Pc(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Pc(t.subTree):null}const Ac=e=>e.__isSuspense;function Nm(e,t){t&&t.pendingBranch?ve(e)?t.effects.push(...e):t.effects.push(e):Vp(e)}const fe=Symbol.for("v-fgt"),Rs=Symbol.for("v-txt"),ct=Symbol.for("v-cmt"),Yr=Symbol.for("v-stc"),Io=[];let wt=null;function _(e=!1){Io.push(wt=e?null:[])}function Fm(){Io.pop(),wt=Io[Io.length-1]||null}let jo=1;function us(e,t=!1){jo+=e,e<0&&wt&&t&&(wt.hasOnce=!0)}function Rc(e){return e.dynamicChildren=jo>0?wt||Yn:null,Fm(),jo>0&&wt&&wt.push(e),e}function x(e,t,r,n,s,l){return Rc(o(e,t,r,n,s,l,!0))}function pt(e,t,r,n,s){return Rc(Te(e,t,r,n,s,!0))}function ds(e){return e?e.__v_isVNode===!0:!1}function Dn(e,t){return e.type===t.type&&e.key===t.key}const Tc=({key:e})=>e??null,Zr=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Ke(e)||rt(e)||_e(e)?{i:xt,r:e,k:t,f:!!r}:e:null);function o(e,t=null,r=null,n=0,s=null,l=e===fe?0:1,i=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Tc(t),ref:t&&Zr(t),scopeId:ec,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:xt};return a?(ma(c,r),l&128&&e.normalize(c)):r&&(c.shapeFlag|=Ke(r)?8:16),jo>0&&!i&&wt&&(c.patchFlag>0||l&6)&&c.patchFlag!==32&&wt.push(c),c}const Te=$m;function $m(e,t=null,r=null,n=0,s=null,l=!1){if((!e||e===lm)&&(e=ct),ds(e)){const a=wn(e,t,!0);return r&&ma(a,r),jo>0&&!l&&wt&&(a.shapeFlag&6?wt[wt.indexOf(e)]=a:wt.push(a)),a.patchFlag=-2,a}if(Km(e)&&(e=e.__vccOpts),t){t=Lm(t);let{class:a,style:c}=t;a&&!Ke(a)&&(t.class=le(a)),qe(c)&&(ua(c)&&!ve(c)&&(c=Ze({},c)),t.style=ta(c))}const i=Ke(e)?1:Ac(e)?128:oc(e)?64:qe(e)?4:_e(e)?2:0;return o(e,t,r,n,s,i,l,!0)}function Lm(e){return e?ua(e)||bc(e)?Ze({},e):e:null}function wn(e,t,r=!1,n=!1){const{props:s,ref:l,patchFlag:i,children:a,transition:c}=e,d=t?qm(s||{},t):s,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&Tc(d),ref:t&&t.ref?r&&l?ve(l)?l.concat(Zr(t)):[l,Zr(t)]:Zr(t):l,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==fe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&wn(e.ssContent),ssFallback:e.ssFallback&&wn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&n&&Uo(u,c.clone(u)),u}function ne(e=" ",t=0){return Te(Rs,null,e,t)}function Dt(e,t){const r=Te(Yr,null,e);return r.staticCount=t,r}function L(e="",t=!1){return t?(_(),pt(ct,null,e)):Te(ct,null,e)}function Gt(e){return e==null||typeof e=="boolean"?Te(ct):ve(e)?Te(fe,null,e.slice()):ds(e)?bn(e):Te(Rs,null,String(e))}function bn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:wn(e)}function ma(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ve(t))r=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),ma(e,s()),s._c&&(s._d=!0));return}else{r=32;const s=t._;!s&&!bc(t)?t._ctx=xt:s===3&&xt&&(xt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _e(t)?(t={default:t,_ctx:xt},r=32):(t=String(t),n&64?(r=16,t=[ne(t)]):r=8);e.children=t,e.shapeFlag|=r}function qm(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=le([t.class,n.class]));else if(s==="style")t.style=ta([t.style,n.style]);else if(hs(s)){const l=t[s],i=n[s];i&&l!==i&&!(ve(l)&&l.includes(i))&&(t[s]=l?[].concat(l,i):i)}else s!==""&&(t[s]=n[s])}return t}function Bt(e,t,r,n=null){qt(e,t,7,[r,n])}const Um=gc();let jm=0;function Bm(e,t,r){const n=e.type,s=(t?t.appContext:e.appContext)||Um,l={uid:jm++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new pp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xc(n,s),emitsOptions:vc(n,s),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:n.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=bm.bind(null,l),e.ce&&e.ce(l),l}let nt=null;const Oc=()=>nt||xt;let cs,Ui;{const e=xs(),t=(r,n)=>{let s;return(s=e[r])||(s=e[r]=[]),s.push(n),l=>{s.length>1?s.forEach(i=>i(l)):s[0](l)}};cs=t("__VUE_INSTANCE_SETTERS__",r=>nt=r),Ui=t("__VUE_SSR_SETTERS__",r=>Bo=r)}const Qo=e=>{const t=nt;return cs(e),e.scope.on(),()=>{e.scope.off(),cs(t)}},Ha=()=>{nt&&nt.scope.off(),cs(null)};function Mc(e){return e.vnode.shapeFlag&4}let Bo=!1;function Vm(e,t=!1,r=!1){t&&Ui(t);const{props:n,children:s}=e.vnode,l=Mc(e);Sm(e,n,l,t),Rm(e,s,r||t);const i=l?Hm(e,t):void 0;return t&&Ui(!1),i}function Hm(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,dm);const{setup:n}=r;if(n){dn();const s=e.setupContext=n.length>1?Gm(e):null,l=Qo(e),i=Go(n,e,0,[e.props,s]),a=Ed(i);if(cn(),l(),(a||e.sp)&&!Mo(e)&&dc(e),a){if(i.then(Ha,Ha),t)return i.then(c=>{za(e,c)}).catch(c=>{ks(c,e,0)});e.asyncDep=i}else za(e,i)}else Dc(e)}function za(e,t,r){_e(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:qe(t)&&(e.setupState=Jd(t)),Dc(e)}function Dc(e,t,r){const n=e.type;e.render||(e.render=n.render||Qt);{const s=Qo(e);dn();try{cm(e)}finally{cn(),s()}}}const zm={get(e,t){return tt(e,"get",""),e[t]}};function Gm(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,zm),slots:e.slots,emit:e.emit,expose:t}}function Ts(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Jd(Dp(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Do)return Do[r](e)},has(t,r){return r in t||r in Do}})):e.proxy}function Qm(e,t=!0){return _e(e)?e.displayName||e.name:e.name||t&&e.__name}function Km(e){return _e(e)&&"__vccOpts"in e}const K=(e,t)=>Lp(e,t,Bo);function ga(e,t,r){try{us(-1);const n=arguments.length;return n===2?qe(t)&&!ve(t)?ds(t)?Te(e,null,[t]):Te(e,t):Te(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&ds(r)&&(r=[r]),Te(e,t,r))}finally{us(1)}}const Jm="3.5.26";let ji;const Ga=typeof window<"u"&&window.trustedTypes;if(Ga)try{ji=Ga.createPolicy("vue",{createHTML:e=>e})}catch{}const Ic=ji?e=>ji.createHTML(e):e=>e,Wm="http://www.w3.org/2000/svg",Xm="http://www.w3.org/1998/Math/MathML",on=typeof document<"u"?document:null,Qa=on&&on.createElement("template"),Ym={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const s=t==="svg"?on.createElementNS(Wm,e):t==="mathml"?on.createElementNS(Xm,e):r?on.createElement(e,{is:r}):on.createElement(e);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>on.createTextNode(e),createComment:e=>on.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>on.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,s,l){const i=r?r.previousSibling:t.lastChild;if(s&&(s===l||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),r),!(s===l||!(s=s.nextSibling)););else{Qa.innerHTML=Ic(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=Qa.content;if(n==="svg"||n==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,r)}return[i?i.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},mn="transition",mo="animation",Vo=Symbol("_vtc"),Nc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Zm=Ze({},rc,Nc),eg=e=>(e.displayName="Transition",e.props=Zm,e),fs=eg((e,{slots:t})=>ga(Wp,tg(e),t)),An=(e,t=[])=>{ve(e)?e.forEach(r=>r(...t)):e&&e(...t)},Ka=e=>e?ve(e)?e.some(t=>t.length>1):e.length>1:!1;function tg(e){const t={};for(const I in e)I in Nc||(t[I]=e[I]);if(e.css===!1)return t;const{name:r="v",type:n,duration:s,enterFromClass:l=`${r}-enter-from`,enterActiveClass:i=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:c=l,appearActiveClass:d=i,appearToClass:u=a,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:p=`${r}-leave-active`,leaveToClass:m=`${r}-leave-to`}=e,g=ng(s),v=g&&g[0],h=g&&g[1],{onBeforeEnter:C,onEnter:E,onEnterCancelled:k,onLeave:T,onLeaveCancelled:y,onBeforeAppear:R=C,onAppear:S=E,onAppearCancelled:w=k}=t,O=(I,M,j,B)=>{I._enterCancelled=B,Rn(I,M?u:a),Rn(I,M?d:i),j&&j()},$=(I,M)=>{I._isLeaving=!1,Rn(I,f),Rn(I,m),Rn(I,p),M&&M()},U=I=>(M,j)=>{const B=I?S:E,A=()=>O(M,I,j);An(B,[M,A]),Ja(()=>{Rn(M,I?c:l),Yt(M,I?u:a),Ka(B)||Wa(M,n,v,A)})};return Ze(t,{onBeforeEnter(I){An(C,[I]),Yt(I,l),Yt(I,i)},onBeforeAppear(I){An(R,[I]),Yt(I,c),Yt(I,d)},onEnter:U(!1),onAppear:U(!0),onLeave(I,M){I._isLeaving=!0;const j=()=>$(I,M);Yt(I,f),I._enterCancelled?(Yt(I,p),Za(I)):(Za(I),Yt(I,p)),Ja(()=>{I._isLeaving&&(Rn(I,f),Yt(I,m),Ka(T)||Wa(I,n,h,j))}),An(T,[I,j])},onEnterCancelled(I){O(I,!1,void 0,!0),An(k,[I])},onAppearCancelled(I){O(I,!0,void 0,!0),An(w,[I])},onLeaveCancelled(I){$(I),An(y,[I])}})}function ng(e){if(e==null)return null;if(qe(e))return[Js(e.enter),Js(e.leave)];{const t=Js(e);return[t,t]}}function Js(e){return sp(e)}function Yt(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Vo]||(e[Vo]=new Set)).add(t)}function Rn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const r=e[Vo];r&&(r.delete(t),r.size||(e[Vo]=void 0))}function Ja(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let og=0;function Wa(e,t,r,n){const s=e._endId=++og,l=()=>{s===e._endId&&n()};if(r!=null)return setTimeout(l,r);const{type:i,timeout:a,propCount:c}=rg(e,t);if(!i)return n();const d=i+"end";let u=0;const f=()=>{e.removeEventListener(d,p),l()},p=m=>{m.target===e&&++u>=c&&f()};setTimeout(()=>{u<c&&f()},a+1),e.addEventListener(d,p)}function rg(e,t){const r=window.getComputedStyle(e),n=g=>(r[g]||"").split(", "),s=n(`${mn}Delay`),l=n(`${mn}Duration`),i=Xa(s,l),a=n(`${mo}Delay`),c=n(`${mo}Duration`),d=Xa(a,c);let u=null,f=0,p=0;t===mn?i>0&&(u=mn,f=i,p=l.length):t===mo?d>0&&(u=mo,f=d,p=c.length):(f=Math.max(i,d),u=f>0?i>d?mn:mo:null,p=u?u===mn?l.length:c.length:0);const m=u===mn&&/\b(?:transform|all)(?:,|$)/.test(n(`${mn}Property`).toString());return{type:u,timeout:f,propCount:p,hasTransform:m}}function Xa(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>Ya(r)+Ya(e[n])))}function Ya(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Za(e){return(e?e.ownerDocument:document).body.offsetHeight}function sg(e,t,r){const n=e[Vo];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const ps=Symbol("_vod"),Fc=Symbol("_vsh"),Po={name:"show",beforeMount(e,{value:t},{transition:r}){e[ps]=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):go(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),go(e,!0),n.enter(e)):n.leave(e,()=>{go(e,!1)}):go(e,t))},beforeUnmount(e,{value:t}){go(e,t)}};function go(e,t){e.style.display=t?e[ps]:"none",e[Fc]=!t}const ig=Symbol(""),ag=/(?:^|;)\s*display\s*:/;function lg(e,t,r){const n=e.style,s=Ke(r);let l=!1;if(r&&!s){if(t)if(Ke(t))for(const i of t.split(";")){const a=i.slice(0,i.indexOf(":")).trim();r[a]==null&&es(n,a,"")}else for(const i in t)r[i]==null&&es(n,i,"");for(const i in r)i==="display"&&(l=!0),es(n,i,r[i])}else if(s){if(t!==r){const i=n[ig];i&&(r+=";"+i),n.cssText=r,l=ag.test(r)}}else t&&e.removeAttribute("style");ps in e&&(e[ps]=l?n.display:"",e[Fc]&&(n.display="none"))}const el=/\s*!important$/;function es(e,t,r){if(ve(r))r.forEach(n=>es(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=ug(e,t);el.test(r)?e.setProperty(kn(n),r.replace(el,""),"important"):e[n]=r}}const tl=["Webkit","Moz","ms"],Ws={};function ug(e,t){const r=Ws[t];if(r)return r;let n=Mt(t);if(n!=="filter"&&n in e)return Ws[t]=n;n=bs(n);for(let s=0;s<tl.length;s++){const l=tl[s]+n;if(l in e)return Ws[t]=l}return t}const nl="http://www.w3.org/1999/xlink";function ol(e,t,r,n,s,l=cp(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(nl,t.slice(6,t.length)):e.setAttributeNS(nl,t,r):r==null||l&&!Td(r)?e.removeAttribute(t):e.setAttribute(t,l?"":Jt(r)?String(r):r)}function rl(e,t,r,n,s){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?Ic(r):r);return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const a=l==="OPTION"?e.getAttribute("value")||"":e.value,c=r==null?e.type==="checkbox"?"on":"":String(r);(a!==c||!("_value"in e))&&(e.value=c),r==null&&e.removeAttribute(t),e._value=r;return}let i=!1;if(r===""||r==null){const a=typeof e[t];a==="boolean"?r=Td(r):r==null&&a==="string"?(r="",i=!0):a==="number"&&(r=0,i=!0)}try{e[t]=r}catch{}i&&e.removeAttribute(s||t)}function un(e,t,r,n){e.addEventListener(t,r,n)}function dg(e,t,r,n){e.removeEventListener(t,r,n)}const sl=Symbol("_vei");function cg(e,t,r,n,s=null){const l=e[sl]||(e[sl]={}),i=l[t];if(n&&i)i.value=n;else{const[a,c]=fg(t);if(n){const d=l[t]=gg(n,s);un(e,a,d,c)}else i&&(dg(e,a,i,c),l[t]=void 0)}}const il=/(?:Once|Passive|Capture)$/;function fg(e){let t;if(il.test(e)){t={};let n;for(;n=e.match(il);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):kn(e.slice(2)),t]}let Xs=0;const pg=Promise.resolve(),mg=()=>Xs||(pg.then(()=>Xs=0),Xs=Date.now());function gg(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;qt(vg(n,r.value),t,5,[n])};return r.value=e,r.attached=mg(),r}function vg(e,t){if(ve(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const al=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,hg=(e,t,r,n,s,l)=>{const i=s==="svg";t==="class"?sg(e,n,i):t==="style"?lg(e,r,n):hs(t)?Yi(t)||cg(e,t,r,n,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):yg(e,t,n,i))?(rl(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ol(e,t,n,i,l,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ke(n))?rl(e,Mt(t),n,l,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),ol(e,t,n,i))};function yg(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&al(t)&&_e(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return al(t)&&Ke(r)?!1:t in e}const Cn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ve(t)?r=>Wr(t,r):t};function bg(e){e.target.composing=!0}function ll(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ot=Symbol("_assign");function ul(e,t,r){return t&&(e=e.trim()),r&&(e=_s(e)),e}const oe={created(e,{modifiers:{lazy:t,trim:r,number:n}},s){e[Ot]=Cn(s);const l=n||s.props&&s.props.type==="number";un(e,t?"change":"input",i=>{i.target.composing||e[Ot](ul(e.value,r,l))}),(r||l)&&un(e,"change",()=>{e.value=ul(e.value,r,l)}),t||(un(e,"compositionstart",bg),un(e,"compositionend",ll),un(e,"change",ll))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:n,trim:s,number:l}},i){if(e[Ot]=Cn(i),e.composing)return;const a=(l||e.type==="number")&&!/^0\d/.test(e.value)?_s(e.value):e.value,c=t??"";a!==c&&(document.activeElement===e&&e.type!=="range"&&(n&&t===r||s&&e.value.trim()===c)||(e.value=c))}},dt={deep:!0,created(e,t,r){e[Ot]=Cn(r),un(e,"change",()=>{const n=e._modelValue,s=ro(e),l=e.checked,i=e[Ot];if(ve(n)){const a=na(n,s),c=a!==-1;if(l&&!c)i(n.concat(s));else if(!l&&c){const d=[...n];d.splice(a,1),i(d)}}else if(lo(n)){const a=new Set(n);l?a.add(s):a.delete(s),i(a)}else i($c(e,l))})},mounted:dl,beforeUpdate(e,t,r){e[Ot]=Cn(r),dl(e,t,r)}};function dl(e,{value:t,oldValue:r},n){e._modelValue=t;let s;if(ve(t))s=na(t,n.props.value)>-1;else if(lo(t))s=t.has(n.props.value);else{if(t===r)return;s=qn(t,$c(e,!0))}e.checked!==s&&(e.checked=s)}const _g={created(e,{value:t},r){e.checked=qn(t,r.props.value),e[Ot]=Cn(r),un(e,"change",()=>{e[Ot](ro(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e[Ot]=Cn(n),t!==r&&(e.checked=qn(t,n.props.value))}},$e={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const s=lo(t);un(e,"change",()=>{const l=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>r?_s(ro(i)):ro(i));e[Ot](e.multiple?s?new Set(l):l:l[0]),e._assigning=!0,Ss(()=>{e._assigning=!1})}),e[Ot]=Cn(n)},mounted(e,{value:t}){cl(e,t)},beforeUpdate(e,t,r){e[Ot]=Cn(r)},updated(e,{value:t}){e._assigning||cl(e,t)}};function cl(e,t){const r=e.multiple,n=ve(t);if(!(r&&!n&&!lo(t))){for(let s=0,l=e.options.length;s<l;s++){const i=e.options[s],a=ro(i);if(r)if(n){const c=typeof a;c==="string"||c==="number"?i.selected=t.some(d=>String(d)===String(a)):i.selected=na(t,a)>-1}else i.selected=t.has(a);else if(qn(ro(i),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ro(e){return"_value"in e?e._value:e.value}function $c(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const xg={created(e,t,r){ar(e,t,r,null,"created")},mounted(e,t,r){ar(e,t,r,null,"mounted")},beforeUpdate(e,t,r,n){ar(e,t,r,n,"beforeUpdate")},updated(e,t,r,n){ar(e,t,r,n,"updated")}};function wg(e,t){switch(e){case"SELECT":return $e;case"TEXTAREA":return oe;default:switch(t){case"checkbox":return dt;case"radio":return _g;default:return oe}}}function ar(e,t,r,n,s){const i=wg(e.tagName,r.props&&r.props.type)[s];i&&i(e,t,r,n)}const Cg=["ctrl","shift","alt","meta"],kg={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Cg.some(r=>e[`${r}Key`]&&!t.includes(r))},xe=(e,t)=>{const r=e._withMods||(e._withMods={}),n=t.join(".");return r[n]||(r[n]=((s,...l)=>{for(let i=0;i<t.length;i++){const a=kg[t[i]];if(a&&a(s,t))return}return e(s,...l)}))},Sg={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},fl=(e,t)=>{const r=e._withKeys||(e._withKeys={}),n=t.join(".");return r[n]||(r[n]=(s=>{if(!("key"in s))return;const l=kn(s.key);if(t.some(i=>i===l||Sg[i]===l))return e(s)}))},Eg=Ze({patchProp:hg},Ym);let pl;function Pg(){return pl||(pl=Om(Eg))}const Ag=((...e)=>{const t=Pg().createApp(...e),{mount:r}=t;return t.mount=n=>{const s=Tg(n);if(!s)return;const l=t._component;!_e(l)&&!l.render&&!l.template&&(l.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const i=r(s,!1,Rg(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},t});function Rg(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Tg(e){return Ke(e)?document.querySelector(e):e}function va(){const e=typeof window<"u"&&window.electron&&window.electron.store;return e||(console.error(" Electron store non disponible"),console.error("window:",typeof window),console.error("window.electron:",window?.electron),console.error("window.electron.store:",window?.electron?.store)),e}async function Og(e){if(!va())throw new Error("Electron store non disponible");try{await window.electron.store.set("auth_token",e),console.log(" Token sauvegard avec succs")}catch(t){throw console.error(" Erreur lors de la sauvegarde du token:",t),t}}async function Mg(){if(!va())throw new Error("Electron store non disponible");try{const e=await window.electron.store.get("auth_token");return console.log(" Token rcupr:",e?"Prsent":"Absent"),e||null}catch(e){throw console.error(" Erreur lors de la rcupration du token:",e),e}}async function Dg(){if(!va())throw new Error("Electron store non disponible");try{await window.electron.store.delete("auth_token"),console.log(" Token supprim avec succs")}catch(e){throw console.error(" Erreur lors de la suppression du token:",e),e}}const Ig=window.location.hostname==="localhost"?"http://localhost:8000/api/v1":"/api/v1",ha=async()=>{const e=sessionStorage.getItem("auth_token");return e||(window.electron?await window.electron.store.get("auth_token"):localStorage.getItem("auth_token"))},Ng=async()=>{if(window.authHeaders)return console.log(" window.authHeaders dj dfini"),!0;const e=await ha();return e?(window.authHeaders={Authorization:`Bearer ${e}`,"Content-Type":"application/json"},console.log(" window.authHeaders initialis depuis le storage"),!0):(console.warn(" Aucun token trouv pour initialiser authHeaders"),!1)},lr=async()=>window.electron&&window.electron.getApiBase?`${await window.electron.getApiBase()}/api/v1`:Ig,ur=async()=>{const e={"Content-Type":"application/json",Accept:"application/json"};if(window.authHeaders&&window.authHeaders.Authorization)return console.log(" Utilisation de window.authHeaders"),{...e,...window.authHeaders};const t=await ha();return t?(console.log(" Token rcupr depuis le storage"),e.Authorization=`Bearer ${t}`):console.warn(" Aucun token d'authentification trouv"),e},dr=async(e,t,r)=>{let n="Erreur rseau",s=null;try{s=await e.json(),n=s.message||s.error||n}catch{n=e.statusText||n}switch(e.status){case 401:throw console.error(" Session expire ou non authentifi"),await Lc(),new Error("Session expire. Veuillez vous reconnecter.");case 403:throw console.error(" Accs refus - Permissions insuffisantes"),new Error("Vous n'avez pas les permissions ncessaires pour cette action.");case 404:throw console.error(" Ressource non trouve:",t),new Error(`Ressource non trouve: ${t}`);case 422:throw console.error(" Erreur de validation:",s),new Error(`Erreur de validation: ${n}`);case 500:case 502:case 503:throw console.error(" Erreur serveur:",n),new Error("Erreur serveur. Veuillez ressayer plus tard.");default:throw console.error(` Erreur API [${r}] ${t}:`,{status:e.status,message:n,details:s}),new Error(`Erreur ${e.status}: ${n}`)}},Oe={get:async e=>{const t=await lr(),r=await ur(),n=await fetch(t+e,{headers:r});return n.ok||await dr(n,e,"GET"),n.json()},post:async(e,t)=>{const r=await lr(),n=await ur(),s=await fetch(r+e,{method:"POST",headers:n,body:JSON.stringify(t)});return s.ok||await dr(s,e,"POST"),s.json()},put:async(e,t)=>{const r=await lr(),n=await ur(),s=await fetch(r+e,{method:"PUT",headers:n,body:JSON.stringify(t)});return s.ok||await dr(s,e,"PUT"),s.json()},delete:async e=>{const t=await lr(),r=await ur(),n=await fetch(t+e,{method:"DELETE",headers:r});return n.ok||await dr(n,e,"DELETE"),n.status===204?{success:!0}:n.json()}},Lc=async()=>{console.log(" Dconnexion en cours...");try{const e=await ha();if(e)try{const t=window.electron?await window.electron.getApiBase():"http://localhost:8000";console.log(" Appel API /api/auth/logout...");const r=await fetch(`${t}/api/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});r.ok?console.log(" Dconnexion API russie"):console.warn(" API logout a chou (code:",r.status,")")}catch(t){console.warn(" Erreur API logout (rseau?):",t.message)}}catch(e){console.error(" Erreur lors de la dconnexion:",e)}finally{if(console.log(" Nettoyage des donnes locales..."),sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.authHeaders&&(delete window.authHeaders,console.log(" window.authHeaders supprim")),window.electron&&window.electron.store)try{await window.electron.store.delete("auth_token"),await window.electron.store.delete("user"),console.log(" Electron store nettoy")}catch(e){console.error("Erreur nettoyage Electron store:",e)}console.log(" Dconnexion termine")}},Fg=async(e,t)=>{const r=window.electron?await window.electron.getApiBase():"http://localhost:8000",n=await fetch(`${r}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:e,password:t})});let s=await n.json();if(typeof s=="string"&&(s=JSON.parse(s.replace(/^\uFEFF/,""))),!n.ok||s&&s.success===!1)throw new Error(s.message||"Erreur de connexion");return s},Ve=(e,t)=>{const r=e.__vccOpts||e;for(const[n,s]of t)r[n]=s;return r},$g={class:"login-container"},Lg={class:"login-box"},qg={key:0,class:"error-message"},Ug={class:"form-group"},jg=["disabled"],Bg={class:"form-group"},Vg={class:"password-input-wrapper"},Hg=["type","disabled"],zg=["disabled"],Gg={key:0,class:"toggle-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qg={key:1,class:"toggle-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Kg={class:"form-group-checkbox"},Jg={class:"checkbox-label"},Wg=["disabled"],Xg=["disabled"],Yg={key:0,class:"spinner",viewBox:"0 0 24 24"},Zg={key:1},e0={key:2},t0={class:"login-footer"},n0={class:"mode-info"},o0={key:0,class:"dev-info"},r0={__name:"Login",emits:["login-success"],setup(e,{emit:t}){const r=t,n=N({username:"",password:""}),s=N(!1),l=N(!1),i=N(!1),a=N(""),c=N("Desktop"),d=N(!1);vt(async()=>{try{if(window.electron){const f=await window.electron.getAppInfo();d.value=f.isDev;const p=await window.electron.store.get("saved_username");p&&(n.value.username=p,l.value=!0)}}catch(f){console.error(" Erreur lors de l'initialisation:",f)}});const u=async()=>{if(!i.value){console.group(" TENTATIVE DE CONNEXION"),console.log(" Username:",n.value.username),console.log(" Timestamp:",new Date().toISOString()),a.value="",i.value=!0;try{console.log(" Envoi de la requte...");const f=await Fg(n.value.username,n.value.password);if(console.group(" VALIDATION"),console.log("success:",f?.success),console.log("has data:",!!f?.data),console.log("has user:",!!f?.data?.user),console.log("has token:",!!f?.data?.token),console.groupEnd(),f&&f.success===!0){if(!f.data||!f.data.user||!f.data.token){console.error(" Structure de donnes invalide"),console.log("Data reue:",f),a.value="Erreur de structure de rponse",console.groupEnd();return}const{user:p,token:m}=f.data;console.log(" Connexion russie pour:",p.name),console.log(" Token reu:",m.substring(0,20)+"..."),console.log(" mission de login-success"),r("login-success",{user:p,token:m});const g=[];window.electron&&(g.push(window.electron.store.set("auth_token",m),window.electron.store.set("user",JSON.stringify(p))),l.value&&g.push(window.electron.store.set("remember_me","true"),window.electron.store.set("saved_username",n.value.username))),Promise.all(g).then(()=>console.log(" Donnes sauvegardes")).catch(v=>console.warn(" Erreur sauvegarde:",v))}else console.warn(" Connexion choue"),console.log("Message:",f?.message),a.value=f?.message||"Erreur de connexion"}catch(f){console.group(" ERREUR"),console.error("Message:",f.message),console.groupEnd(),a.value=f.message||"Une erreur est survenue. Veuillez ressayer."}finally{i.value=!1,console.groupEnd()}}};return(f,p)=>(_(),x("div",$g,[o("div",Lg,[p[12]||(p[12]=Dt('<div class="login-header" data-v-da675ea8><div class="logo-circle" data-v-da675ea8><span class="logo-text" data-v-da675ea8>SD</span></div><h1 class="app-title" data-v-da675ea8>SmartDrinkStore Manager</h1><p class="app-subtitle" data-v-da675ea8>KAMDEM - Dpt de boissons</p></div>',1)),o("form",{onSubmit:xe(u,["prevent"]),class:"login-form"},[a.value?(_(),x("div",qg,[p[4]||(p[4]=o("svg",{class:"error-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),ne(" "+b(a.value),1)])):L("",!0),o("div",Ug,[p[5]||(p[5]=o("label",{for:"username",class:"form-label"},[o("svg",{class:"label-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),ne(" Nom d'utilisateur ou email ")],-1)),Q(o("input",{id:"username","onUpdate:modelValue":p[0]||(p[0]=m=>n.value.username=m),type:"text",class:"form-input",placeholder:"admindebug",required:"",disabled:i.value,autocomplete:"username"},null,8,jg),[[oe,n.value.username]])]),o("div",Bg,[p[8]||(p[8]=o("label",{for:"password",class:"form-label"},[o("svg",{class:"label-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),ne(" Mot de passe ")],-1)),o("div",Vg,[Q(o("input",{id:"password","onUpdate:modelValue":p[1]||(p[1]=m=>n.value.password=m),type:s.value?"text":"password",class:"form-input",placeholder:"",required:"",disabled:i.value,autocomplete:"current-password"},null,8,Hg),[[xg,n.value.password]]),o("button",{type:"button",class:"password-toggle",onClick:p[2]||(p[2]=m=>s.value=!s.value),disabled:i.value},[s.value?(_(),x("svg",Qg,[...p[7]||(p[7]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(_(),x("svg",Gg,[...p[6]||(p[6]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,zg)])]),o("div",Kg,[o("label",Jg,[Q(o("input",{"onUpdate:modelValue":p[3]||(p[3]=m=>l.value=m),type:"checkbox",class:"checkbox-input",disabled:i.value},null,8,Wg),[[dt,l.value]]),p[9]||(p[9]=o("span",{class:"checkbox-text"},"Se souvenir de moi",-1))])]),o("button",{type:"submit",class:"btn-login",disabled:i.value},[i.value?(_(),x("svg",Yg,[...p[10]||(p[10]=[o("circle",{class:"spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"},null,-1)])])):L("",!0),i.value?(_(),x("span",e0,"Connexion en cours...")):(_(),x("span",Zg,"Se connecter"))],8,Xg)],32),o("div",t0,[p[11]||(p[11]=o("p",{class:"version-info"},"Version Desktop 1.0.0",-1)),o("p",n0,"Mode: "+b(c.value),1)])]),d.value?(_(),x("div",o0,[...p[13]||(p[13]=[Dt("<p data-v-da675ea8><strong data-v-da675ea8> Mode dveloppement</strong></p><p data-v-da675ea8> Debug: <code data-v-da675ea8>admindebug</code> / <code data-v-da675ea8>Debug@2024</code></p><p data-v-da675ea8> Admin: <code data-v-da675ea8>admin</code> / <code data-v-da675ea8>admin123</code></p><p data-v-da675ea8> Manager: <code data-v-da675ea8>manager</code> / <code data-v-da675ea8>manager123</code></p>",4)])])):L("",!0)]))}},qc=Ve(r0,[["__scopeId","data-v-da675ea8"]]),s0=N("dashboard"),i0=N(!1),a0=N(!1),l0=N([]),Rt=N([]),Ft=N([]),u0=N(""),d0=N({name:"",sku:"",code:"",category_id:"",subcategory_id:"",unit_price:0,min_stock:0,stock:0,has_deposit:!1,deposit_type_id:null,units_per_deposit:1}),c0=N(null),f0=N(null),p0=N(!1),m0=N(!1),g0=N(!1),v0=N(!1),h0=N(""),y0=N(null),b0=N(""),_0=N([]),x0=N(!1),w0=N({type:"",product_id:"",date_from:"",date_to:""}),C0=N(!1),k0=N(null),S0=N(0),E0=N(""),P0=N(!1),A0=N(null),R0=N(0),T0=N(""),O0=N("damage"),M0=N([]),D0=N(""),I0=N(!1),N0=N(null),F0=N({name:"",phone:"",email:"",address:""}),$0=N([]),L0=N(""),q0=N(!1),U0=N(null),j0=N({name:"",phone:"",email:"",address:""}),B0=N([]),V0=N(!1),H0=N(""),z0=N({period:"all",type:"",payment_method:""}),G0=N(!1),Q0=N(null),K0=N("standard"),J0=N({total:0,count:0,average:0}),W0=N(1),X0=N(10),Y0=N([]),Z0=N(""),ev=N("counter"),tv=N(""),nv=N("cash"),ov=N(!1),rv=N([]),sv=N(0),iv=N({totalProducts:0,totalStock:0,totalValue:0,lowStock:0,outOfStock:0,todayRevenue:0,todaySalesCount:0,totalCustomers:0}),av=N([]),lv=N(0),uv=N([]),dv=N(0),Uc=N(!1),jc=N(null),Bc=N({name:"",code:"",category:"",amount:0,initial_stock:0,current_stock:0,description:"",is_active:!0}),Vc=N(!1),cv=N("outgoing"),Hc=N({deposit_type_id:"",partner_id:"",quantity:1,expected_return_at:null,notes:""}),zc=N(!1),Gc=N(null),Qc=N(!1),Kc=N({quantity:1,good_condition:0,damaged:0,lost:0,damage_penalty:0,late_penalty:0,notes:""}),Jc=N({type:"all",status:"all",partner_type:"all"}),Wc=N({active_deposits:0,total_units_out:0,total_deposits_amount:0,total_penalties:0,total_refunds:0}),ms=N([]),Bi=N([]),Xc=N([]),fv=N([]),pv=N({version:"1.0.0",environment:"development"}),mv=Object.freeze(Object.defineProperty({__proto__:null,alerts:av,alertsCount:lv,appInfo:pv,cart:Y0,cartDeposits:uv,categories:Rt,connectionError:a0,currentInvoice:Q0,currentView:s0,customerForm:F0,customerSearchQuery:D0,customers:M0,depositFilters:Jc,depositForm:Hc,depositReturnForm:Kc,depositReturns:Xc,depositStats:Wc,depositTypeForm:Bc,depositTypes:ms,depositTypesInPOS:fv,deposits:Bi,deposittype:cv,editingCategoryId:y0,editingCategoryName:b0,editingCustomer:N0,editingDepositType:jc,editingProduct:c0,editingSupplier:U0,invoiceType:K0,lastSaleItems:rv,lastSaleTotal:sv,loading:i0,loadingMovements:x0,loadingSales:V0,movementFilters:w0,movements:_0,newCategoryName:h0,paymentMethod:nv,posSearch:Z0,processingReturn:Qc,productForm:d0,products:l0,restockProduct:k0,restockQuantity:S0,restockReason:E0,saleType:ev,sales:B0,salesCurrentPage:W0,salesFilters:z0,salesPerPage:X0,salesSearch:H0,salesStats:J0,savingProduct:p0,searchQuery:u0,selectedCustomerId:tv,selectedDeposit:Gc,showCategoryModal:g0,showCheckoutModal:ov,showCustomerModal:I0,showDepositModal:Vc,showDepositReturnModal:zc,showDepositTypeModal:Uc,showInvoiceModal:G0,showProductModal:m0,showRestockModal:C0,showStockOutModal:P0,showSupplierModal:q0,showViewModal:v0,stats:iv,stockOutProduct:A0,stockOutQuantity:R0,stockOutReason:T0,stockOutReasonType:O0,subcategories:Ft,supplierForm:j0,supplierSearchQuery:L0,suppliers:$0,totalDepositsAmount:dv,viewingProduct:f0},Symbol.toStringTag,{value:"Module"})),rn=e=>!e&&e!==0?"0 FCFA":new Intl.NumberFormat("fr-FR").format(e)+" FCFA",gv=()=>{const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),s=Date.now().toString().slice(-6);return`INV-${t}${r}${n}-${s}`},vv=e=>{const t=K(()=>{if(!e.products.value)return[];if(!e.searchQuery.value)return e.products.value;const M=e.searchQuery.value.toLowerCase();return e.products.value.filter(j=>j.name?.toLowerCase().includes(M)||j.sku?.toLowerCase().includes(M)||j.code?.toLowerCase().includes(M)||j.category_name?.toLowerCase().includes(M))}),r=K(()=>{if(!e.products.value)return[];let M=e.products.value;if(e.posSearch.value){const j=e.posSearch.value.toLowerCase();M=M.filter(B=>B.name?.toLowerCase().includes(j)||B.sku?.toLowerCase().includes(j))}return M.filter(j=>(j.stock||0)>0)}),n=K(()=>e.products.value?.filter(M=>M.category_name?.toLowerCase().includes("consigne")&&M.stock>0)||[]),s=K(()=>n.value.reduce((M,j)=>M+(j.stock||0),0)),l=K(()=>e.cart.value.reduce((M,j)=>M+j.quantity*j.unit_price,0)),i=K(()=>l.value),a=K(()=>{const M=i.value;return e.saleType.value==="wholesale"?M*.05:0}),c=K(()=>i.value-a.value),d=K(()=>{const M=new Map;return e.cart.value.forEach(j=>{const B=e.products.value.find(A=>A.id===j.product_id);if(B&&B.has_deposit&&B.deposit_type_id){const A=e.depositTypes.value.find(z=>z.id===B.deposit_type_id);if(A){const z=B.units_per_deposit||1,te=Math.ceil(j.quantity/z),pe=A.id,Re=M.get(pe);Re?(Re.quantity+=te,Re.total_amount=Re.quantity*A.amount):M.set(pe,{deposit_type_id:A.id,deposit_type_name:A.name,quantity:te,unit_amount:A.amount,total_amount:te*A.amount})}}}),Array.from(M.values())}),u=K(()=>d.value.reduce((M,j)=>M+j.quantity,0)),f=K(()=>d.value.reduce((M,j)=>M+j.total_amount,0)),p=K(()=>{const M=l.value,j=f.value,B=e.saleType.value==="wholesale"?M*.05:0;return M-B+j}),m=K(()=>e.depositTypes.value.filter(M=>M.is_active)),g=K(()=>{if(!e.customers.value)return[];if(!e.customerSearchQuery.value)return e.customers.value;const M=e.customerSearchQuery.value.toLowerCase();return e.customers.value.filter(j=>j.name?.toLowerCase().includes(M)||j.phone?.toLowerCase().includes(M)||j.email?.toLowerCase().includes(M))}),v=K(()=>{if(!e.suppliers.value)return[];if(!e.supplierSearchQuery.value)return e.suppliers.value;const M=e.supplierSearchQuery.value.toLowerCase();return e.suppliers.value.filter(j=>j.name?.toLowerCase().includes(M)||j.phone?.toLowerCase().includes(M)||j.email?.toLowerCase().includes(M))}),h=K(()=>{if(!e.movements.value)return[];let M=e.movements.value;if(e.movementFilters.value.type&&(M=M.filter(j=>j.type===e.movementFilters.value.type)),e.movementFilters.value.reason&&(M=M.filter(j=>j.reason?.toLowerCase().includes(e.movementFilters.value.reason.toLowerCase()))),e.movementFilters.value.date){const j=new Date(e.movementFilters.value.date).toDateString();M=M.filter(B=>new Date(B.created_at).toDateString()===j)}return M}),C=K(()=>{if(!e.sales.value)return[];if(!e.salesSearch.value)return e.sales.value;const M=e.salesSearch.value.toLowerCase();return e.sales.value.filter(j=>j.invoice_number?.toLowerCase().includes(M)||j.customer_name?.toLowerCase().includes(M)||j.payment_method?.toLowerCase().includes(M)||j.type?.toLowerCase().includes(M)||j.total_amount?.toString().includes(M))}),E=K(()=>{const M=e.salesCurrentPage.value,j=e.salesPerPage.value,B=(M-1)*j,A=B+j;return C.value.slice(B,A)}),k=K(()=>Math.ceil(C.value.length/e.salesPerPage.value)||1),T=K(()=>e.salesCurrentPage.value>1),y=K(()=>e.salesCurrentPage.value<k.value),R=K(()=>e.salesStats.value&&typeof e.salesStats.value.total<"u"?e.salesStats.value:{total:0,count:0,average:0}),S=K(()=>e.depositTypes.value?e.depositTypes.value:[]),w=K(()=>S.value.filter(M=>M.is_active)),O=K(()=>e.deposits.value?e.deposits.value:[]),$=K(()=>O.value.filter(M=>M.quantity_pending>0)),U=K(()=>O.value.filter(M=>M.status==="returned")),I=K(()=>$.value.reduce((M,j)=>M+j.quantity_pending*j.unit_deposit_amount,0));return{filteredProducts:t,filteredPosProducts:r,consignedProducts:n,totalEmptyContainers:s,cartTotal:l,cartSubtotal:i,cartDiscount:a,finalTotal:c,grandTotal:p,cartDeposits:d,cartDepositsCount:u,totalDepositsAmount:f,depositTypesInPOS:m,filteredCustomers:g,filteredSuppliers:v,filteredMovements:h,filteredSales:C,displaySalesStats:R,paginatedSales:E,totalSalesPages:k,hasPreviousPage:T,hasNextPage:y,filteredDepositTypes:S,activeDepositTypes:w,filteredDeposits:O,pendingDeposits:$,returnedDeposits:U,totalDepositValue:I}};function hv(e){if(typeof e!="string")return e;const t=e.replace(/^\uFEFF/,"");return JSON.parse(t)}async function ht(e){try{const t=await Oe.get(e);return typeof t=="string"?hv(t):t}catch(t){throw t instanceof SyntaxError&&t.message.includes("JSON")&&console.warn("Erreur de parsing JSON dtecte, tentative avec gestion BOM..."),t}}let ml=null,Ys=0;const gl=5e3,yv=e=>{const t=async()=>{try{e.loading.value=!0;const k=await ht("/products");k.success&&(e.products.value=k.data||[],console.log(` ${e.products.value.length} produits chargs`),g(),v())}catch(k){console.error(" Erreur chargement produits:",k),e.connectionError.value=!0}finally{e.loading.value=!1}},r=async()=>{try{const k=await ht("/categories");k.success&&(e.categories.value=k.data||[],console.log(` ${e.categories.value.length} catgories charges`))}catch(k){console.error(" Erreur chargement catgories:",k)}},n=async()=>{try{const k=await ht("/subcategories");k.success&&(e.subcategories.value=k.data||[],console.log(` ${e.subcategories.value.length} sous-catgories charges`))}catch(k){console.error(" Erreur chargement sous-catgories:",k)}},s=async()=>{try{e.loading.value=!0;const k=await ht("/customers");k.success&&(e.customers.value=k.data||[],console.log(` ${e.customers.value.length} clients chargs`),g())}catch(k){console.error(" Erreur chargement clients:",k),e.connectionError.value=!0}finally{e.loading.value=!1}},l=async()=>{try{const k=await ht("/suppliers");k.success&&(e.suppliers.value=k.data||[],console.log(` ${e.suppliers.value.length} fournisseurs chargs`))}catch(k){console.error(" Erreur chargement fournisseurs:",k),e.connectionError.value=!0}finally{e.loading.value=!1}},i=async()=>{try{const k=await ht("/stats");k.success&&(e.stats.value=k.data||{},console.log(" Statistiques charges"),k.data?.total_products||g(),Date.now()-Ys>gl?v():console.log(" Alertes en cache, skip recalcul"))}catch(k){console.error(" Erreur chargement stats:",k),g(),v()}},a=async()=>{console.warn(" loadAlerts() est obsolte")},c=async()=>{try{e.loadingMovements.value=!0;const k=new URLSearchParams;e.movementFilters.value.type&&k.append("type",e.movementFilters.value.type),e.movementFilters.value.product_id&&k.append("product_id",e.movementFilters.value.product_id),e.movementFilters.value.date_from&&k.append("date_from",e.movementFilters.value.date_from),e.movementFilters.value.date_to&&k.append("date_to",e.movementFilters.value.date_to);const T=await ht("/movements?"+k.toString());T.success&&(e.movements.value=T.data||[],console.log(` ${e.movements.value.length} mouvements chargs`))}catch(k){console.error(" Erreur chargement mouvements:",k),e.movements.value=[]}finally{e.loadingMovements.value=!1}},d=async()=>{try{e.loadingSales.value=!0,console.log(" Chargement des ventes...");const k=await ht("/sales");if(k.success&&k.data){e.sales.value=k.data,console.log("",k.data.length,"ventes charges");const T=new Date,y=new Date(T.getFullYear(),T.getMonth(),T.getDate()),R=new Date(y);R.setDate(y.getDate()-y.getDay());const S=new Date(T.getFullYear(),T.getMonth(),1);let w=e.sales.value;e.salesFilters.value.period==="today"?w=e.sales.value.filter(I=>new Date(I.created_at)>=y):e.salesFilters.value.period==="week"?w=e.sales.value.filter(I=>new Date(I.created_at)>=R):e.salesFilters.value.period==="month"&&(w=e.sales.value.filter(I=>new Date(I.created_at)>=S));const O=w.reduce((I,M)=>I+Number(M.total_amount||0),0),$=w.length,U=$>0?O/$:0;e.salesStats.value={total:O,count:$,average:U},g()}else console.warn(" Aucune vente trouve"),e.sales.value=[],e.salesStats.value={total:0,count:0,average:0}}catch(k){console.error(" Erreur chargement ventes:",k),e.sales.value=[],e.salesStats.value={total:0,count:0,average:0},k.status===500&&(e.connectionError.value=!0)}finally{e.loadingSales.value=!1}},u=async()=>{try{const k=await ht("/sales/stats/summary");k.success&&(e.salesStats.value=k.data||{today:{count:0,total:0,cash:0,mobile:0,credit:0},this_week:{count:0,total:0},this_month:{count:0,total:0},total_credit:0},console.log(" Statistiques ventes charges"))}catch(k){console.error(" Erreur chargement stats ventes:",k),e.salesStats.value={today:{count:0,total:0,cash:0,mobile:0,credit:0},this_week:{count:0,total:0},this_month:{count:0,total:0},total_credit:0}}},f=async()=>{try{console.log(" Chargement des types d'emballages...");const k=await ht("/deposit-types");k.success&&(e.depositTypes.value=k.data||[],console.log(` ${e.depositTypes.value.length} types d'emballages chargs`))}catch(k){console.error(" Erreur chargement types d'emballages:",k),e.depositTypes.value=[],k.status===500&&(e.connectionError.value=!0)}},p=async()=>{try{console.log(" Chargement des consignes...");const k=await ht("/deposits");k.success&&(e.deposits.value=k.data||[],console.log(` ${e.deposits.value.length} consignes charges`));try{console.log(" Chargement des statistiques consignes...");const T=await ht("/deposits/stats/summary");T.success&&T.data?(e.depositStats=T.data,console.log(" Statistiques consignes charges:",T.data)):(console.warn(" Stats indisponibles, valeurs par dfaut"),e.depositStats={active_deposits:0,total_units_out:0,total_deposits_amount:0,total_penalties:0})}catch(T){console.warn(" Erreur stats consignes (non bloquant):",T.message),e.depositStats={active_deposits:0,total_units_out:0,total_deposits_amount:0,total_penalties:0}}}catch(k){console.error(" Erreur chargement consignes:",k),e.deposits.value=[],e.depositStats={active_deposits:0,total_units_out:0,total_deposits_amount:0,total_penalties:0},k.status===500&&(e.connectionError.value=!0)}},m=async()=>{try{console.log(" Chargement de l'historique des retours...");const k=await ht("/deposit-returns");k.success&&(e.depositReturns.value=k.data||[],console.log(` ${e.depositReturns.value.length} retours chargs`))}catch(k){console.error(" Erreur chargement retours:",k),e.depositReturns.value=[],k.status===500&&(e.connectionError.value=!0)}},g=()=>{try{const k=e.products.value?.length||0,T=e.products.value?.reduce((j,B)=>j+(Number(B.stock)||0),0)||0,y=e.products.value?.reduce((j,B)=>j+(Number(B.stock)||0)*(Number(B.unit_price)||0),0)||0,R=e.products.value?.filter(j=>Number(j.stock)>0&&Number(j.stock)<=Number(j.min_stock)).length||0,S=e.products.value?.filter(j=>Number(j.stock)===0).length||0,w=new Date,O=new Date(w.getTime()-1440*60*1e3),$=e.sales.value?.filter(j=>new Date(j.created_at)>=O)||[],U=$.reduce((j,B)=>j+(Number(B.total_amount)||0),0),I=$.length,M=e.customers.value?.length||0;e.stats.value={...e.stats.value,totalProducts:k,totalStock:T,totalValue:y,lowStock:R,outOfStock:S,todayRevenue:U,todaySalesCount:I,totalCustomers:M}}catch(k){console.error(" Erreur calcul statistiques:",k),e.stats.value={totalProducts:0,totalStock:0,totalValue:0,lowStock:0,outOfStock:0,todayRevenue:0,todaySalesCount:0,totalCustomers:0}}},v=()=>{try{if(!e.products.value||e.products.value.length===0){e.alerts.value=[],e.alertsCount.value=0;return}const k=JSON.stringify(e.products.value.map(R=>({id:R.id,stock:R.stock,min_stock:R.min_stock}))),T=Date.now();if(k===ml&&e.alerts.value.length>0&&T-Ys<gl){console.log(" Alertes en cache, skip recalcul");return}ml=k,Ys=T;const y=e.products.value.filter(R=>{const S=Number(R.stock)||0,w=Number(R.min_stock)||0;return S===0||S>0&&w>0&&S<=w});e.alerts.value=y,e.alertsCount.value=y.length,y.length>0&&console.log(` ${y.length} alerte(s) dtecte(s)`)}catch(k){console.error(" Erreur calcul alertes:",k),e.alerts.value=[],e.alertsCount.value=0}},h=async()=>{e.connectionError.value=!1,await C()},C=async()=>{const k=performance.now();console.log(" Initialisation optimise...");try{const[T,y,R,S,w]=await Promise.allSettled([r(),n(),s(),l(),t()]);if(w.status==="rejected"){console.error(" chec critique: produits non chargs"),e.connectionError.value=!0;return}await Promise.allSettled([i(),c(),d(),f(),p(),m()]);const O=(performance.now()-k).toFixed(0);console.log(` Application initialise en ${O}ms`),console.log(` tat: ${e.products.value?.length||0} produits, ${e.alertsCount.value} alertes`)}catch(T){console.error(" Erreur lors de l'initialisation:",T),e.connectionError.value=!0}};let E=null;return Ae(e.salesFilters,()=>{clearTimeout(E),E=setTimeout(()=>{d()},300)},{deep:!0}),{loadProducts:t,loadCategories:r,loadSubcategories:n,loadCustomers:s,loadSuppliers:l,loadStats:i,loadAlerts:a,loadMovements:c,loadSales:d,loadSalesStats:u,loadDepositTypes:f,loadDeposits:p,loadDepositReturns:m,retryConnection:h,calculateStats:g,calculateAlerts:v,init:C}},bv=(e,t)=>{const r=(d=null)=>{d?(e.editingProduct.value=d,e.productForm.value={name:d.name,sku:d.sku,code:d.code||"",unit_price:d.unit_price,stock:d.stock,min_stock:d.min_stock,category_id:d.category_id,subcategory_id:d.subcategory_id,description:d.description||"",image:d.image||null}):(e.editingProduct.value=null,e.productForm.value={name:"",sku:"",code:"",unit_price:0,stock:0,min_stock:0,category_id:null,subcategory_id:null,description:"",image:null}),e.showProductModal.value=!0},n=()=>{e.showProductModal.value=!1,e.editingProduct.value=null,e.productForm.value={name:"",sku:"",code:"",unit_price:0,stock:0,min_stock:0,category_id:null,subcategory_id:null,description:"",image:null}};return{openProductModal:r,closeProductModal:n,filterSubcategories:()=>{console.log("Filtrage des sous-catgories pour category_id:",e.productForm.value.category_id)},saveProduct:async()=>{if(!e.productForm.value.name.trim()||!e.productForm.value.sku.trim()){alert(" Le nom et le SKU sont obligatoires");return}if(e.productForm.value.unit_price<=0){alert(" Le prix doit tre suprieur  0");return}try{e.savingProduct.value=!0,e.editingProduct.value?(await Oe.put(`/products/${e.editingProduct.value.id}`,e.productForm.value)).success&&(alert(" Produit mis  jour avec succs"),await t.loadProducts(),n()):(await Oe.post("/products",e.productForm.value)).success&&(alert(" Produit cr avec succs"),await t.loadProducts(),n())}catch(d){console.error("Erreur sauvegarde produit:",d),alert(" Erreur: "+(d.message||"Impossible de sauvegarder le produit"))}finally{e.savingProduct.value=!1}},deleteProduct:async d=>{if(confirm(` tes-vous sr de vouloir supprimer le produit "${d.name}" ?

Cette action est irrversible.`))try{e.loading.value=!0,(await Oe.delete(`/products/${d.id}`)).success&&(alert(" Produit supprim avec succs"),await t.loadProducts(),await t.loadStats(),await t.loadAlerts())}catch(u){console.error("Erreur suppression produit:",u),alert(" Erreur: "+(u.message||"Impossible de supprimer le produit"))}finally{e.loading.value=!1}},viewProduct:d=>{e.viewingProduct.value=d,e.showViewModal.value=!0},closeViewModal:()=>{e.showViewModal.value=!1,e.viewingProduct.value=null}}},_v=(e,t)=>({addCategory:async()=>{if(!e.newCategoryName.value||!e.newCategoryName.value.trim()){alert(" Le nom de la catgorie est obligatoire");return}try{e.loading.value=!0,(await Oe.post("/categories",{name:e.newCategoryName.value.trim()})).success&&(alert(" Catgorie cre avec succs"),e.newCategoryName.value="",await t.loadCategories())}catch(a){console.error("Erreur cration catgorie:",a),alert(" Erreur: "+(a.message||"Impossible de crer la catgorie"))}finally{e.loading.value=!1}},editCategory:a=>{e.editingCategoryId.value=a.id,e.editingCategoryName.value=a.name},saveEditedCategory:async()=>{if(!e.editingCategoryName.value||!e.editingCategoryName.value.trim()){alert(" Le nom de la catgorie ne peut pas tre vide");return}try{e.loading.value=!0,(await Oe.put(`/categories/${e.editingCategoryId.value}`,{name:e.editingCategoryName.value.trim()})).success&&(alert(" Catgorie mise  jour avec succs"),e.editingCategoryId.value=null,e.editingCategoryName.value="",await t.loadCategories())}catch(a){console.error("Erreur mise  jour catgorie:",a),alert(" Erreur: "+(a.message||"Impossible de mettre  jour la catgorie"))}finally{e.loading.value=!1}},cancelEditCategory:()=>{e.editingCategoryId.value=null,e.editingCategoryName.value=""},deleteCategory:async a=>{if(!confirm(` tes-vous sr de vouloir supprimer la catgorie "${a.name}" ?

Cette action est irrversible.`))return;const c=e.products.value.filter(d=>d.category_id===a.id);if(c.length>0){alert(` Impossible de supprimer cette catgorie.

${c.length} produit(s) l'utilisent encore.`);return}try{e.loading.value=!0,(await Oe.delete(`/categories/${a.id}`)).success&&(alert(" Catgorie supprime avec succs"),await t.loadCategories())}catch(d){console.error("Erreur suppression catgorie:",d),alert(" Erreur: "+(d.message||"Impossible de supprimer la catgorie"))}finally{e.loading.value=!1}}}),xv=(e,t)=>{const r=async()=>{e.currentView.value="movements",e.movements.value.length===0&&await t.loadMovements()},n=f=>{e.restockProduct.value=f,e.restockQuantity.value=null,e.restockReason.value="",e.showRestockModal.value=!0},s=()=>{e.showRestockModal.value=!1,e.restockProduct.value=null,e.restockQuantity.value=null,e.restockReason.value=""},l=async()=>{if(!e.restockQuantity.value||e.restockQuantity.value<1){alert(" Quantit invalide");return}try{e.loading.value=!0,(await Oe.post("/movements/restock",{product_id:e.restockProduct.value.id,quantity:e.restockQuantity.value,reason:e.restockReason.value||"Rapprovisionnement"})).success&&(alert(` Stock ajout : +${e.restockQuantity.value} units`),s(),await t.loadProducts(),await t.loadMovements(),await t.loadStats(),await t.calculateAlerts())}catch(f){console.error("Erreur ajout stock:",f),alert(" Erreur: "+(f.message||"Impossible d'ajouter le stock"))}finally{e.loading.value=!1}},i=f=>{e.stockOutProduct.value=f,e.stockOutQuantity.value=null,e.stockOutReason.value="",e.stockOutReasonType.value="sale",e.showStockOutModal.value=!0},a=()=>{e.showStockOutModal.value=!1,e.stockOutProduct.value=null,e.stockOutQuantity.value=null,e.stockOutReason.value="",e.stockOutReasonType.value="sale"};return{switchToMovements:r,openStockInModal:n,closeStockInModal:s,submitStockIn:l,openStockOutModal:i,closeStockOutModal:a,submitStockOut:async()=>{if(!e.stockOutQuantity.value||e.stockOutQuantity.value<1){alert(" Quantit invalide");return}if(e.stockOutQuantity.value>e.stockOutProduct.value.stock){alert(" Quantit suprieure au stock disponible !");return}try{e.loading.value=!0;const f={sale:"Vente",loss:"Casse / Perte",expiry:"Premption",donation:"Don",return:"Retour fournisseur",other:"Autre"},p=e.stockOutReason.value||f[e.stockOutReasonType.value];(await Oe.post("/movements/stock-out",{product_id:e.stockOutProduct.value.id,quantity:e.stockOutQuantity.value,reason:p})).success&&(alert(` Stock retir : -${e.stockOutQuantity.value} units`),a(),await t.loadProducts(),await t.loadMovements(),await t.loadStats(),await t.calculateAlerts())}catch(f){console.error("Erreur retrait stock:",f),alert(" Erreur: "+(f.message||"Impossible de retirer le stock"))}finally{e.loading.value=!1}},resetFilters:async()=>{e.movementFilters.value={type:"",product_id:"",date_from:"",date_to:""},await t.loadMovements()},exportMovements:()=>{if(e.movements.value.length===0){alert(" Aucun mouvement  exporter");return}const f=e.movements.value.map(C=>({Date:new Date(C.created_at).toLocaleDateString("fr-FR"),Produit:C.product_name,SKU:C.product_sku,Type:C.type==="in"?"Entre":C.type==="out"?"Sortie":"Ajustement",Quantit:C.quantity,Raison:C.reason||"-"})),p=Object.keys(f[0]);let m=p.join(",")+`
`;f.forEach(C=>{const E=p.map(k=>{const T=C[k];return`"${String(T||"").replace(/"/g,'""')}"`});m+=E.join(",")+`
`});const g=new Blob([m],{type:"text/csv;charset=utf-8;"}),v=document.createElement("a"),h=URL.createObjectURL(g);v.setAttribute("href",h),v.setAttribute("download",`mouvements_stock_${new Date().toISOString().split("T")[0]}.csv`),v.style.visibility="hidden",document.body.appendChild(v),v.click(),document.body.removeChild(v)},openRestockModal:n,closeRestockModal:s,submitRestock:l,saveRestock:l}},wv=(e,t)=>{const r=v=>{if(!v||v.stock===0){alert(" Ce produit est en rupture de stock");return}const h=e.cart.value.find(C=>C.product_id===v.id);h?h.quantity<v.stock?(h.quantity++,v.has_deposit&&s(v,h.quantity),console.log(" Quantit augmente:",v.name)):alert(` Stock maximum atteint (${v.stock})`):(e.cart.value.push({product_id:v.id,name:v.name,sku:v.sku,unit_price:v.unit_price,quantity:1,stock:v.stock,has_deposit:v.has_deposit||!1,deposit_type_id:v.deposit_type_id,units_per_deposit:v.units_per_deposit||1}),v.has_deposit&&v.deposit_type_id&&n(v,1),console.log(" Produit ajout au panier:",v.name))},n=(v,h)=>{const C=e.depositTypesInPOS.value.find(T=>T.id===v.deposit_type_id);if(!C){console.warn(" Type de consigne introuvable:",v.deposit_type_id);return}const E=Math.ceil(h/v.units_per_deposit);if(C.quantity_in_stock<E){alert(` Stock d'emballages insuffisant pour ${v.name}
Requis: ${E} ${C.name}
Disponible: ${C.quantity_in_stock}`);return}const k=e.cartDeposits.value.find(T=>T.deposit_type_id===C.id);k?(k.quantity=E,k.total_amount=E*C.deposit_amount):e.cartDeposits.value.push({deposit_type_id:C.id,deposit_type_name:C.name,product_name:v.name,quantity:E,unit_amount:C.deposit_amount,total_amount:E*C.deposit_amount}),i()},s=(v,h)=>{if(!v.has_deposit)return;const C=e.depositTypesInPOS.value.find(T=>T.id===v.deposit_type_id);if(!C)return;const E=Math.ceil(h/v.units_per_deposit),k=e.cartDeposits.value.find(T=>T.deposit_type_id===C.id);k&&(k.quantity=E,k.total_amount=E*C.deposit_amount),i()},l=v=>{const h=e.cart.value.find(E=>E.product_id===v);if(!h||!h.has_deposit)return;const C=e.cartDeposits.value.findIndex(E=>E.deposit_type_id===h.deposit_type_id);C!==-1&&e.cartDeposits.value.splice(C,1),i()},i=()=>{e.totalDepositsAmount.value=e.cartDeposits.value.reduce((v,h)=>v+h.total_amount,0)},a=v=>{const h=e.cart.value[v];h&&h.has_deposit&&l(h.product_id),e.cart.value.splice(v,1),console.log(" Produit retir du panier")},c=(v,h)=>{const C=e.cart.value[v];if(!C)return;const E=C.quantity+h;if(E<1)a(v);else if(E<=C.stock){if(C.quantity=E,C.has_deposit){const k=e.products.value.find(T=>T.id===C.product_id);k&&s(k,E)}}else alert(" Stock insuffisant")},d=v=>{const h=e.cart.value.findIndex(C=>C.product_id===v);h!==-1&&c(h,1)},u=v=>{const h=e.cart.value.findIndex(C=>C.product_id===v);h!==-1&&c(h,-1)},f=()=>{e.cart.value.length!==0&&confirm("Vider le panier ?")&&(e.cart.value=[],e.cartDeposits.value=[],e.totalDepositsAmount.value=0,e.selectedCustomerId.value=null,e.paymentMethod.value="cash",e.saleType.value="counter",console.log(" Panier vid"))},p=()=>{if(e.cart.value.length===0){alert(" Le panier est vide");return}e.showCheckoutModal.value=!0},m=()=>{e.showCheckoutModal.value=!1};return{addToCart:r,removeFromCart:a,updateCartQty:c,increaseQuantity:d,decreaseQuantity:u,clearCart:f,openCheckoutModal:p,closeCheckoutModal:m,processSale:async()=>{if(console.log(" Dbut du processus de vente..."),!e.cart.value||e.cart.value.length===0){alert(" Le panier est vide");return}if(e.paymentMethod.value==="credit"&&!e.selectedCustomerId.value){alert(" Veuillez slectionner un client pour une vente  crdit");return}const v=e.cart.value.reduce((y,R)=>y+R.quantity*R.unit_price,0),h=e.saleType.value==="wholesale"?v*.05:0,C=v-h,E=e.saleType.value==="wholesale"?"Vente en Gros (-5%)":"Vente au Comptoir",k={cash:" Espces",mobile:" Mobile Money",credit:"  crdit"};let T=` CONFIRMATION DE VENTE

`;if(T+=` Articles: ${e.cart.value.length} produit(s)
`,T+=` Montant produits: ${rn(C)}
`,e.cartDeposits.value.length>0&&(T+=`
 CONSIGNES:
`,e.cartDeposits.value.forEach(y=>{T+=`   ${y.quantity}x ${y.deposit_type_name} = ${rn(y.total_amount)}
`}),T+=` Total consignes: ${rn(e.totalDepositsAmount.value)}
`,T+=` TOTAL GNRAL: ${rn(C+e.totalDepositsAmount.value)}
`),T+=`
 Type: ${E}
`,T+=` Paiement: ${k[e.paymentMethod.value]}
`,e.paymentMethod.value==="credit"&&e.selectedCustomerId.value){const y=e.customers.value.find(R=>R.id===e.selectedCustomerId.value);T+=` Client: ${y?.name||"Inconnu"}
`}if(h>0&&(T+=`
 Remise: ${rn(h)}
`),T+=`
 Confirmer cette vente ?`,!confirm(T)){console.log(" Vente annule par l'utilisateur");return}for(const y of e.cart.value){const R=e.products.value.find(S=>S.id===y.product_id);if(!R){alert(` Le produit "${y.name}" n'existe plus !`);return}if(R.stock<y.quantity){alert(` Stock insuffisant pour "${y.name}".
Disponible: ${R.stock}, Demand: ${y.quantity}`);return}}try{e.loading.value=!0;const y=e.cart.value.reduce((M,j)=>M+j.quantity*j.unit_price,0),R=e.saleType.value==="wholesale"?y*.05:0,S=y-R;if(S<=0){alert(" Le montant total doit tre suprieur  0");return}if(!["cash","mobile","credit"].includes(e.paymentMethod.value)){alert(" Mode de paiement invalide");return}if(!["counter","wholesale"].includes(e.saleType.value)){alert(" Type de vente invalide");return}const $=gv(),U={invoice_number:$,customer_id:e.selectedCustomerId.value||null,type:e.saleType.value,payment_method:e.paymentMethod.value,total_amount:Math.round(S*100)/100,discount:Math.round(R*100)/100,paid_amount:e.paymentMethod.value==="credit"?0:Math.round(S*100)/100,items:e.cart.value.map(M=>({product_id:M.product_id,quantity:M.quantity,unit_price:Math.round(M.unit_price*100)/100,subtotal:Math.round(M.quantity*M.unit_price*100)/100})),deposits:e.cartDeposits.value.map(M=>({deposit_type_id:M.deposit_type_id,quantity:M.quantity})),deposit_amount:e.totalDepositsAmount.value};console.log(" Envoi vente avec consignes:",U);const I=await Oe.post("/sales",U);if(I&&I.success){console.log(" Vente enregistre avec succs !"),e.lastSaleItems.value=[...e.cart.value],e.lastSaleTotal.value=S;const j=e.cartDeposits.value.length>0?`
 Consignes: ${rn(e.totalDepositsAmount.value)}`:"";alert(` Vente enregistre avec succs !

Numro: ${$}
Montant: ${rn(S)}${j}`),f(),m(),await Promise.allSettled([t.loadProducts(),t.loadStats(),t.loadSales(),t.calculateAlerts()]),console.log(" Processus termin avec succs !")}else{const M=I?.message||"Rponse invalide du serveur";console.error(" chec:",M),alert(` Erreur: ${M}`)}}catch(y){console.error(" ERREUR:",y);let R="Impossible d'enregistrer la vente",S="";if(y.response){const w=y.response.status,O=y.response.data;w===500?(R="Erreur du serveur (500)",S=O?.message||"Erreur interne du serveur"):w===422?(R="Donnes invalides (422)",O?.errors&&(S=Object.entries(O.errors).map(([$,U])=>`${$}: ${U.join(", ")}`).join(`
`))):w===404?R="Endpoint introuvable (404)":w===401&&(R="Non autoris (401)")}else y.request&&(R="Le serveur ne rpond pas",S="Vrifiez que le serveur Laravel est dmarr");alert(` ${R}

${S}`)}finally{e.loading.value=!1}}}},Cv=(e,t)=>{const r=async()=>{e.currentView.value="customers",e.customers.value.length===0&&await t.loadCustomers()},n=(p=null)=>{p?(e.editingCustomer.value=p,e.customerForm.value={name:p.name,phone:p.phone||"",email:p.email||"",address:p.address||""}):(e.editingCustomer.value=null,e.customerForm.value={name:"",phone:"",email:"",address:""}),e.showCustomerModal.value=!0},s=()=>{e.showCustomerModal.value=!1,e.editingCustomer.value=null,e.customerForm.value={name:"",phone:"",email:"",address:""}},l=async()=>{if(!e.customerForm.value.name.trim()){alert(" Le nom du client est obligatoire");return}try{e.loading.value=!0,e.editingCustomer.value?(await Oe.put(`/customers/${e.editingCustomer.value.id}`,e.customerForm.value)).success&&(alert(" Client mis  jour avec succs"),await t.loadCustomers(),s()):(await Oe.post("/customers",e.customerForm.value)).success&&(alert(" Client cr avec succs"),await t.loadCustomers(),s())}catch(p){console.error("Erreur sauvegarde client:",p),alert(" Erreur: "+(p.message||"Impossible de sauvegarder le client"))}finally{e.loading.value=!1}},i=async p=>{if(!p){console.error(" ID client manquant"),alert(" Erreur: ID client invalide");return}const m=e.customers.value.find(g=>g.id===p);if(!m){alert(" Client introuvable");return}if(confirm(` tes-vous sr de vouloir supprimer le client "${m.name}" ?

Cette action est irrversible.`)&&!(m.balance>0&&!confirm(` ATTENTION: Ce client a un solde impay de ${(v=>new Intl.NumberFormat("fr-FR").format(v)+" FCFA")(m.balance)}.

Voulez-vous vraiment continuer ?`)))try{e.loading.value=!0,console.log(" Tentative de suppression du client:",p),(await Oe.delete(`/customers/${p}`)).success&&(alert(" Client supprim avec succs"),await t.loadCustomers())}catch(g){console.error("Erreur suppression client:",g),g.message.includes("405")?alert(` Erreur: La suppression de clients n'est pas autorise.
Veuillez contacter l'administrateur systme pour activer cette fonctionnalit.`):g.message.includes("403")?alert(" Erreur: Vous n'avez pas les permissions ncessaires pour supprimer un client."):g.message.includes("404")?alert(" Erreur: Client introuvable."):g.message.includes("400")?alert(" Erreur: "+(g.message||"Impossible de supprimer ce client (solde impay ?)")):alert(" Erreur: "+(g.message||"Impossible de supprimer le client"))}finally{e.loading.value=!1}},a=async()=>{e.currentView.value="suppliers",e.suppliers.value.length===0&&await t.loadSuppliers()},c=p=>{p?(e.editingSupplier.value=p,e.supplierForm.value={name:p.name,phone:p.phone||"",email:p.email||"",address:p.address||""}):(e.editingSupplier.value=null,e.supplierForm.value={name:"",phone:"",email:"",address:""}),e.showSupplierModal.value=!0},d=()=>{e.showSupplierModal.value=!1,e.editingSupplier.value=null,e.supplierForm.value={name:"",phone:"",email:"",address:""}};return{switchToCustomers:r,openCustomerModal:n,closeCustomerModal:s,saveCustomer:l,deleteCustomer:i,switchToSuppliers:a,openSupplierModal:c,closeSupplierModal:d,saveSupplier:async()=>{if(!e.supplierForm.value.name.trim()){alert(" Le nom du fournisseur est obligatoire");return}try{e.loading.value=!0;const p={name:e.supplierForm.value.name,phone:e.supplierForm.value.phone,email:e.supplierForm.value.email,address:e.supplierForm.value.address};let m;e.editingSupplier.value?m=await Oe.put(`/suppliers/${e.editingSupplier.value.id}`,p):m=await Oe.post("/suppliers",p),m.success&&(alert(` Fournisseur ${e.editingSupplier.value?"modifi":"cr"} avec succs !`),d(),await t.loadSuppliers())}catch(p){console.error("Erreur sauvegarde fournisseur:",p),alert(" Erreur: "+(p.message||"Impossible de sauvegarder le fournisseur"))}finally{e.loading.value=!1}},deleteSupplier:async p=>{if(!p){console.error(" ID fournisseur manquant"),alert(" Erreur: ID fournisseur invalide");return}if(confirm("tes-vous sr de vouloir supprimer ce fournisseur ?"))try{e.loading.value=!0,console.log(" Tentative de suppression du fournisseur:",p),(await Oe.delete(`/suppliers/${p}`)).success&&(alert(" Fournisseur supprim avec succs !"),await t.loadSuppliers())}catch(m){console.error("Erreur suppression fournisseur:",m),m.message.includes("405")?alert(` Erreur: La suppression de fournisseurs n'est pas autorise.
Veuillez contacter l'administrateur systme pour activer cette fonctionnalit.`):m.message.includes("403")?alert(" Erreur: Vous n'avez pas les permissions ncessaires pour supprimer un fournisseur."):m.message.includes("404")?alert(" Erreur: Fournisseur introuvable."):m.message.includes("400")?alert(" Erreur: "+(m.message||"Impossible de supprimer ce fournisseur (produits associs ?)")):alert(" Erreur: "+(m.message||"Impossible de supprimer le fournisseur"))}finally{e.loading.value=!1}}}},kv=(e,t)=>({viewInvoice:async i=>{try{if(!i){console.error(" Aucune vente fournie  viewInvoice()"),alert(" Erreur: Aucune vente slectionne");return}if(!i.id){console.error(" La vente ne contient pas d'ID:",i),alert(" Erreur: Vente invalide (pas d'ID)");return}console.log(" Ouverture facture pour vente ID:",i.id),console.log(" Objet vente reu:",i),e.loadingSales.value=!0;const a=await Oe.get(`/sales/${i.id}`);if(console.log(" Rponse brute API:",a),console.log(" Structure response.data:",a.data),!a||!a.success)throw new Error(a?.message||"Rponse API invalide");if(!a.data)throw new Error("Aucune donne retourne par l'API");let c,d;if(a.data.sale&&a.data.items)console.log(" Format dtect: Format structur (data.sale + data.items)"),c=a.data.sale,d=a.data.items;else if(a.data.items&&a.data.id){console.log(" Format dtect: Format plat (data contient tout)"),d=a.data.items;const{items:h,...C}=a.data;c=C}else throw Array.isArray(a.data)?(console.log(" Format dtect: Format tableau direct"),new Error("Format de rponse non support: tableau direct. Donnes de vente manquantes.")):(console.error(" Format de rponse non reconnu:",a.data),new Error("Format de rponse API non reconnu"));if(console.log(" Sale data brute:",c),console.log(" Items bruts:",d),!c)throw new Error("Impossible d'extraire les donnes de vente");if(!d||d.length===0)throw new Error("Aucun article trouv pour cette vente");console.log(" Dtail des items:"),d.forEach((h,C)=>{console.log(`  Item ${C}:`,{product_id:h.product_id,product_name:h.product_name,name:h.name,quantity:h.quantity,unit_price:h.unit_price})});const u=new Map;e.products.value&&(e.products.value.forEach(h=>{u.set(h.id,h)}),console.log(` ${u.size} produits disponibles pour correspondance`));let f=0;const p=d.map(h=>{const C=parseFloat(h.quantity||0),E=parseFloat(h.unit_price||0);f+=C*E;let k=h.product_name||h.name;if(!k&&h.product_id){const T=u.get(h.product_id);T?(k=T.name,console.log(` Nom trouv pour produit #${h.product_id}: "${k}"`)):console.warn(` Produit #${h.product_id} introuvable dans state.products`)}return k||(k=`Produit #${h.product_id}`),{product_id:h.product_id,product_name:k,quantity:C,unit_price:E,subtotal:C*E}});console.log(" Subtotal calcul:",f),console.log(" Items enrichis:",p);let m=null;if(c.customer_id){if(c.customer_name)m={id:c.customer_id,name:c.customer_name,phone:c.customer_phone||"",address:c.customer_address||""},console.log(" Client depuis API:",m.name);else if(e.customers.value){const h=e.customers.value.find(C=>C.id===c.customer_id);h?(m={id:h.id,name:h.name,phone:h.phone||"",address:h.address||""},console.log(" Client trouv dans state.customers:",m.name)):(console.warn(` Client #${c.customer_id} introuvable`),m={id:c.customer_id,name:`Client #${c.customer_id}`,phone:"",address:""})}}else console.log(" Vente comptoir (pas de client)");let g=null;c.user_id&&(c.seller_name?(g={id:c.user_id,name:c.seller_name,email:c.seller_email||""},console.log(" Vendeur depuis API:",g.name)):(g={id:c.user_id,name:"Vendeur",email:""},console.log(" Vendeur (user_id):",c.user_id)));const v={id:c.id,invoice_number:c.invoice_number||`INV-${c.id}`,type:c.type||"counter",payment_method:c.payment_method||"cash",total_amount:parseFloat(c.total_amount||0),discount:parseFloat(c.discount||0),subtotal:f,created_at:c.created_at||new Date().toISOString(),customer:m,seller:g,items:p};console.log(" Donnes formates pour la facture:",v),e.currentInvoice.value=v,e.showInvoiceModal.value=!0}catch(a){console.error(" Erreur complte:",a),console.error(" Message:",a.message),console.error(" Stack:",a.stack);let c="Impossible d'afficher la facture";a.message&&(c+=": "+a.message),alert(c)}finally{e.loadingSales.value=!1}},closeInvoiceModal:()=>{e.showInvoiceModal.value=!1,e.currentInvoice.value=null},printInvoice:(i="standard")=>{if(!e.currentInvoice.value){console.error(" Aucune facture slectionne"),alert("Veuillez d'abord slectionner une facture");return}const a=e.currentInvoice.value,d=Rv(a,i,{name:"ENTREPRISES KAMDEM",address:"Dpt de boissons - Yaound",phone:"+237 699 956 376",email:"contact@entreprises-kamdem.cm"}),u=window.open("","_blank","width=800,height=600");u?(u.document.write(d),u.document.close(),u.onload=()=>{u.focus()}):alert("Impossible d'ouvrir la fentre d'impression. Vrifiez les popups.")},getPaymentMethodLabel:i=>({cash:" Espces",mobile:" Mobile Money",mobile_money:" Mobile Money",bank_transfer:" Virement",credit:"  crdit"})[i]||i}),Ye=e=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e||0)+" FCFA",ya=e=>({cash:" Espces",mobile:" Mobile Money",mobile_money:" Mobile Money",bank_transfer:" Virement",credit:"  crdit"})[e]||e,gs=(e,t)=>{if(!e)return"";const r=String(e);return r.length>t?r.substring(0,t-3)+"...":r},ba=e=>e?e.name||"Client":"Vente comptoir",Sv=(e,t)=>`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>Facture #${e.invoice_number||e.id}</title>
      <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; padding: 20px; }
        .invoice-container { max-width: 800px; margin: 0 auto; }
        .header { display: flex; justify-content: space-between; margin-bottom: 30px; border-bottom: 2px solid #2563eb; padding-bottom: 15px; }
        .company-name { font-size: 24px; font-weight: bold; color: #2563eb; margin-bottom: 5px; }
        .invoice-number { font-size: 20px; font-weight: bold; color: #2563eb; }
        .client-section { background: #f3f4f6; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th { background: #2563eb; color: white; padding: 12px; text-align: left; }
        td { padding: 10px; border-bottom: 1px solid #e5e7eb; }
        .text-right { text-align: right; }
        .totals { margin-top: 20px; text-align: right; }
        .totals-row { display: flex; justify-content: flex-end; padding: 8px 0; }
        .totals-label { width: 150px; font-weight: bold; }
        .totals-value { width: 150px; text-align: right; }
        .grand-total { font-size: 20px; color: #2563eb; border-top: 2px solid #2563eb; padding-top: 10px; margin-top: 10px; }
        .footer { margin-top: 40px; text-align: center; color: #6b7280; font-size: 12px; }
        @media print { body { padding: 0; } .no-print { display: none; } }
      </style>
    </head>
    <body>
      <div class="invoice-container">
        <div class="header">
          <div class="company-info">
            <div class="company-name">${t.name}</div>
            <div>${t.address}</div>
            <div>Tl: ${t.phone}</div>
            ${t.email?`<div>Email: ${t.email}</div>`:""}
          </div>
          <div class="invoice-details">
            <div class="invoice-number">FACTURE #${e.invoice_number||e.id}</div>
            <div>Date: ${new Date(e.created_at).toLocaleDateString("fr-FR")}</div>
            <div>Heure: ${new Date(e.created_at).toLocaleTimeString("fr-FR")}</div>
          </div>
        </div>

        ${e.customer?`
        <div class="client-section">
          <strong>Client:</strong> ${ba(e.customer)}<br>
          ${e.customer.phone?`Tl: ${e.customer.phone}<br>`:""}
          ${e.customer.email?`Email: ${e.customer.email}`:""}
        </div>
        `:""}

        <table>
          <thead>
            <tr>
              <th>Produit</th>
              <th class="text-right">Prix Unitaire</th>
              <th class="text-right">Quantit</th>
              <th class="text-right">Montant</th>
            </tr>
          </thead>
          <tbody>
            ${e.items.map(r=>`
              <tr>
                <td>${r.product_name}</td>
                <td class="text-right">${Ye(r.unit_price)}</td>
                <td class="text-right">${r.quantity}</td>
                <td class="text-right">${Ye(r.quantity*r.unit_price)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="totals">
          <div class="totals-row">
            <div class="totals-label">Sous-total:</div>
            <div class="totals-value">${Ye(e.subtotal)}</div>
          </div>
          ${e.discount>0?`
          <div class="totals-row">
            <div class="totals-label">Remise:</div>
            <div class="totals-value">-${Ye(e.discount)}</div>
          </div>
          `:""}
          <div class="totals-row grand-total">
            <div class="totals-label">TOTAL:</div>
            <div class="totals-value">${Ye(e.total_amount)}</div>
          </div>
        </div>

        <div style="margin-top: 30px; padding: 15px; background: #f3f4f6; border-radius: 8px;">
          <strong>Mode de paiement:</strong> ${ya(e.payment_method)}
        </div>

        ${e.seller?`
        <div style="margin-top: 15px; padding: 15px; background: #f0f9ff; border-radius: 8px;">
          <strong>Vendeur:</strong> ${e.seller.name}
        </div>
        `:""}

        <div class="footer">
          <p>Merci de votre confiance !</p>
          <p>${t.name} - ${t.phone}</p>
        </div>

        <div class="no-print" style="margin-top: 30px; text-align: center;">
          <button onclick="window.print()" style="padding: 15px 30px; background: #2563eb; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;">
             Imprimer
          </button>
          <button onclick="window.close()" style="padding: 15px 30px; background: #6b7280; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; margin-left: 10px;">
            Fermer
          </button>
        </div>
      </div>
    </body>
    </html>
  `,Ev=(e,t)=>`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>Facture A4 #${e.invoice_number||e.id}</title>
      <style>
        @page { size: A4; margin: 20mm; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; font-size: 11pt; line-height: 1.4; }
        .header { display: flex; justify-content: space-between; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 3px solid #2563eb; }
        .company-name { font-size: 20pt; font-weight: bold; color: #2563eb; }
        .invoice-title { font-size: 24pt; font-weight: bold; color: #2563eb; text-align: right; margin-bottom: 10px; }
        .items-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .items-table th { background: #2563eb; color: white; padding: 12px; text-align: left; }
        .items-table td { padding: 10px; border-bottom: 1px solid #ddd; }
        .text-right { text-align: right; }
        .summary-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; }
        .summary-row.total { font-size: 14pt; font-weight: bold; color: #2563eb; border-top: 2px solid #2563eb; border-bottom: none; margin-top: 10px; padding-top: 10px; }
        @media print { .no-print { display: none !important; } }
      </style>
    </head>
    <body>
      <div style="max-width: 800px; margin: 0 auto;">
        <div class="header">
          <div>
            <div class="company-name">${t.name}</div>
            <p>${t.address}</p>
            <p>Tl: ${t.phone}</p>
            ${t.email?`<p>Email: ${t.email}</p>`:""}
          </div>
          <div style="text-align: right;">
            <div class="invoice-title">FACTURE</div>
            <p><strong>N:</strong> ${e.invoice_number||String(e.id).padStart(6,"0")}</p>
            <p><strong>Date:</strong> ${new Date(e.created_at).toLocaleDateString("fr-FR")}</p>
            <p><strong>Heure:</strong> ${new Date(e.created_at).toLocaleTimeString("fr-FR")}</p>
          </div>
        </div>

        ${e.customer?`
        <div style="margin-bottom: 30px; padding: 15px; background: #f8f9fa; border-left: 4px solid #2563eb;">
          <p><strong>FACTUR :</strong></p>
          <p style="margin-top: 8px; font-size: 12pt;"><strong>${ba(e.customer)}</strong></p>
          ${e.customer.phone?`<p>Tl: ${e.customer.phone}</p>`:""}
          ${e.customer.address?`<p>${e.customer.address}</p>`:""}
        </div>
        `:""}

        <table class="items-table">
          <thead>
            <tr>
              <th style="width: 50%;">Description</th>
              <th class="text-right" style="width: 20%;">Prix Unit.</th>
              <th class="text-right" style="width: 10%;">Qt</th>
              <th class="text-right" style="width: 20%;">Montant</th>
            </tr>
          </thead>
          <tbody>
            ${e.items.map(r=>`
              <tr>
                <td><strong>${r.product_name}</strong></td>
                <td class="text-right">${Ye(r.unit_price)}</td>
                <td class="text-right">${r.quantity}</td>
                <td class="text-right"><strong>${Ye(r.quantity*r.unit_price)}</strong></td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div style="display: flex; justify-content: flex-end;">
          <div style="width: 350px;">
            <div class="summary-row">
              <span>Sous-total:</span>
              <span>${Ye(e.subtotal)}</span>
            </div>
            ${e.discount>0?`
            <div class="summary-row">
              <span>Remise:</span>
              <span style="color: #ef4444;">-${Ye(e.discount)}</span>
            </div>
            `:""}
            <div class="summary-row total">
              <span>TOTAL  PAYER:</span>
              <span>${Ye(e.total_amount)}</span>
            </div>
          </div>
        </div>

        <div style="margin-top: 40px; padding: 20px; background: #f0f9ff; border-radius: 8px;">
          <p><strong> Mode de paiement:</strong> ${ya(e.payment_method)}</p>
          ${e.seller?`<p style="margin-top: 8px;"><strong> Vendeur:</strong> ${e.seller.name}</p>`:""}
        </div>

        <div style="margin-top: 60px; padding-top: 20px; border-top: 1px solid #ddd; text-align: center; color: #6b7280; font-size: 10pt;">
          <p><strong>Merci de votre confiance !</strong></p>
          <p style="margin-top: 5px;">${t.name} - ${t.phone}</p>
        </div>

        <div class="no-print" style="margin-top: 30px; text-align: center;">
          <button onclick="window.print()" style="padding: 15px 30px; background: #2563eb; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14pt;">
             Imprimer
          </button>
          <button onclick="window.close()" style="padding: 15px 30px; background: #6b7280; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14pt; margin-left: 10px;">
            Fermer
          </button>
        </div>
      </div>
    </body>
    </html>
  `,Pv=(e,t)=>`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>Ticket 78mm #${e.invoice_number||e.id}</title>
      <style>
        @page { size: 78mm auto; margin: 0; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Courier New', monospace; font-size: 10pt; width: 78mm; margin: 0 auto; padding: 3mm; }
        .center { text-align: center; }
        .bold { font-weight: bold; }
        .company-name { font-size: 14pt; font-weight: bold; margin: 5px 0; }
        .divider { border-top: 1px dashed #000; margin: 5px 0; }
        .double-divider { border-top: 2px solid #000; margin: 5px 0; }
        .row { display: flex; justify-content: space-between; margin: 2px 0; }
        @media print { .no-print { display: none !important; } }
      </style>
    </head>
    <body>
      <div class="center">
        <div class="company-name">${t.name}</div>
        <div>${t.address}</div>
        <div>Tel: ${t.phone}</div>
      </div>

      <div class="double-divider"></div>

      <div class="center bold">FACTURE N ${e.invoice_number||e.id}</div>
      <div class="center">${new Date(e.created_at).toLocaleString("fr-FR")}</div>

      ${e.customer?`
      <div class="divider"></div>
      <div class="bold">Client: ${ba(e.customer)}</div>
      `:""}

      <div class="divider"></div>

      ${e.items.map(r=>`
        <div class="bold">${gs(r.product_name,25)}</div>
        <div class="row">
          <span>${r.quantity} x ${Ye(r.unit_price)}</span>
          <span>${Ye(r.quantity*r.unit_price)}</span>
        </div>
      `).join("")}

      <div class="divider"></div>

      <div class="row bold">
        <span>SOUS-TOTAL:</span>
        <span>${Ye(e.subtotal)}</span>
      </div>

      ${e.discount>0?`
      <div class="row bold">
        <span>REMISE:</span>
        <span>-${Ye(e.discount)}</span>
      </div>
      `:""}

      <div class="double-divider"></div>

      <div class="row bold" style="font-size: 12pt;">
        <span>TOTAL:</span>
        <span>${Ye(e.total_amount)}</span>
      </div>

      <div class="divider"></div>

      <div class="center">
        <div>Paiement: ${ya(e.payment_method)}</div>
        ${e.seller?`<div style="margin-top: 5px;">Vendeur: ${gs(e.seller.name,25)}</div>`:""}
        <div class="bold" style="margin-top: 10px;">MERCI DE VOTRE VISITE !</div>
      </div>

      <div style="height: 15mm;"></div>

      <div class="no-print center">
        <button onclick="window.print()" style="padding: 8px 16px; background: #2563eb; color: white; border: none; border-radius: 5px; cursor: pointer;">
           Imprimer
        </button>
      </div>
    </body>
    </html>
  `,Av=(e,t)=>`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>Ticket 58mm #${e.invoice_number||e.id}</title>
      <style>
        @page { size: 58mm auto; margin: 0; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Courier New', monospace; font-size: 8pt; width: 58mm; margin: 0 auto; padding: 2mm; }
        .center { text-align: center; }
        .bold { font-weight: bold; }
        .company-name { font-size: 11pt; font-weight: bold; margin: 3px 0; }
        .divider { border-top: 1px dashed #000; margin: 4px 0; }
        .double-divider { border-top: 2px solid #000; margin: 4px 0; }
        .row { display: flex; justify-content: space-between; margin: 2px 0; }
        @media print { .no-print { display: none !important; } }
      </style>
    </head>
    <body>
      <div class="center">
        <div class="company-name">${t.name}</div>
        <div style="font-size: 7pt;">${gs(t.address,25)}</div>
        <div style="font-size: 7pt;">${t.phone}</div>
      </div>

      <div class="double-divider"></div>

      <div class="center bold">FACTURE #${e.invoice_number||e.id}</div>
      <div class="center" style="font-size: 7pt;">${new Date(e.created_at).toLocaleString("fr-FR")}</div>

      <div class="divider"></div>

      ${e.items.map(r=>`
        <div class="bold">${gs(r.product_name,18)}</div>
        <div class="row" style="font-size: 7pt;">
          <span>${r.quantity}x ${Ye(r.unit_price)}</span>
          <span>${Ye(r.quantity*r.unit_price)}</span>
        </div>
      `).join("")}

      <div class="divider"></div>

      ${e.discount>0?`
      <div class="row">
        <span>Remise:</span>
        <span>-${Ye(e.discount)}</span>
      </div>
      `:""}

      <div class="row bold">
        <span>TOTAL:</span>
        <span>${Ye(e.total_amount)}</span>
      </div>

      <div class="divider"></div>

      <div class="center bold">MERCI !</div>

      <div style="height: 10mm;"></div>
    </body>
    </html>
  `,Rv=(e,t,r)=>{switch(t){case"a4":return Ev(e,r);case"thermal-78":return Pv(e,r);case"thermal-58":return Av(e,r);default:return Sv(e,r)}},Tv=(e,t)=>({switchToCustomers:async()=>{e.currentView.value="customers",await t.loadCustomers()},switchToSuppliers:async()=>{e.currentView.value="suppliers",await t.loadSuppliers()},switchToMovements:async()=>{e.currentView.value="movements",await t.loadMovements()},switchToInvoices:async()=>{e.currentView.value="invoices",await t.loadSales()},retryConnection:async()=>{e.connectionError.value=!1,e.loading.value=!0;try{await t.init(),console.log(" Reconnexion russie")}catch(a){console.error(" chec de la reconnexion:",a),e.connectionError.value=!0}finally{e.loading.value=!1}}});function Ov(e,t){const r=N(!1),n=N(!1),s=N(!1),l=N("outgoing"),i=N({code:"",name:"",description:"",category:"",amount:0,initial_stock:0,current_stock:0,is_active:!0}),a=N({deposit_type_id:"",partner_id:"",quantity:1,expected_return_at:null,notes:""}),c=N({quantity:0,good_condition:0,damaged:0,lost:0,damage_penalty:0,late_penalty:0,notes:""}),d=N([]),u=N([]),f=N([]),p=N(null),m=N(null),g=N(!1),v=N({type:"all",status:"all",search:""}),h=K(()=>{let B=d.value;if(v.value.search){const A=v.value.search.toLowerCase();B=B.filter(z=>z.name?.toLowerCase().includes(A)||z.code?.toLowerCase().includes(A)||z.category?.toLowerCase().includes(A))}return B}),C=K(()=>d.value.filter(B=>B.is_active)),E=K(()=>{let B=u.value;if(v.value.direction!=="all"&&(B=B.filter(A=>A.type===v.value.direction)),v.value.status!=="all"&&(B=B.filter(A=>A.status===v.value.status)),v.value.search){const A=v.value.search.toLowerCase();B=B.filter(z=>z.reference?.toLowerCase().includes(A)||z.customer?.name?.toLowerCase().includes(A)||z.supplier?.name?.toLowerCase().includes(A)||z.deposit_type?.name?.toLowerCase().includes(A))}return B}),k=K(()=>u.value.filter(B=>B.quantity_pending>0)),T=K(()=>u.value.filter(B=>B.status==="returned")),y=K(()=>u.value.filter(B=>B.quantity_pending>0).reduce((B,A)=>B+A.quantity_pending*A.unit_deposit_amount,0)),R=K(()=>{const B=u.value.filter(de=>de.status==="active").length,A=u.value.filter(de=>de.status==="partial").length,z=u.value.filter(de=>de.status==="returned").length,te=u.value.filter(de=>de.type==="outgoing").reduce((de,P)=>de+P.quantity_pending,0),pe=y.value,Re=f.value.reduce((de,P)=>de+(P.damage_penalty||0)+(P.late_penalty||0),0);return{active:B,partial:A,returned:z,totalUnitsOut:te,totalValue:pe,totalPenalties:Re}}),S=async()=>{try{const B=window.electron?await window.electron.getApiBase():"http://localhost:8000";console.log(" Chargement des types d'emballages...");const A=await fetch(`${B}/api/v1/deposit-types`,{method:"GET",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(!A.ok)throw new Error(`Erreur ${A.status}`);const z=await A.json();d.value=z.data||z,console.log(` ${d.value.length} types chargs`)}catch(B){console.error(" Erreur chargement types:",B),d.value=[]}},w=async()=>{try{const B=window.electron?await window.electron.getApiBase():"http://localhost:8000";console.log(" Chargement des consignes...");const A=await fetch(`${B}/api/v1/deposits`,{method:"GET",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(!A.ok)throw new Error(`Erreur ${A.status}`);const z=await A.json();u.value=z.data||z,console.log(` ${u.value.length} consignes charges`)}catch(B){console.error(" Erreur chargement consignes:",B),u.value=[]}},O=async()=>{try{const B=window.electron?await window.electron.getApiBase():"http://localhost:8000",A=await fetch(`${B}/api/v1/deposit-returns`,{method:"GET",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(!A.ok)throw new Error(`Erreur ${A.status}`);const z=await A.json();f.value=z.data||z,console.log(` ${f.value.length} retours chargs`)}catch(B){console.error(" Erreur chargement retours:",B),f.value=[]}};return{showDepositTypeModal:r,showDepositModal:n,showDepositReturnModal:s,depositDirection:l,depositTypeForm:i,depositForm:a,depositReturnForm:c,editingDepositType:p,selectedDeposit:m,processingReturn:g,depositTypes:d,deposits:u,depositReturns:f,depositFilters:v,filteredDepositTypes:h,activeDepositTypes:C,filteredDeposits:E,pendingDeposits:k,returnedDeposits:T,totalDepositValue:y,depositStats:R,loadDepositTypes:S,loadDeposits:w,loadDepositReturns:O,createDepositType:async B=>{try{const A=window.electron?await window.electron.getApiBase():"http://localhost:8000",z=await fetch(`${A}/api/v1/deposit-types`,{method:"POST",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"},body:JSON.stringify(B)}),te=await z.json();if(!z.ok)throw new Error(te.message||"Erreur lors de la cration");return await S(),{success:!0,data:te.data||te}}catch(A){return console.error(" Erreur cration type:",A),{success:!1,error:A.message}}},updateDepositType:async(B,A)=>{try{const z=window.electron?await window.electron.getApiBase():"http://localhost:8000",te=await fetch(`${z}/api/v1/deposit-types/${B}`,{method:"PUT",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"},body:JSON.stringify(A)}),pe=await te.json();if(!te.ok)throw new Error(pe.message||"Erreur lors de la modification");return await S(),{success:!0,data:pe.data||pe}}catch(z){return console.error(" Erreur modification type:",z),{success:!1,error:z.message}}},deleteDepositType:async B=>{if(confirm("Supprimer ce type d'emballage ?"))try{const A=window.electron?await window.electron.getApiBase():"http://localhost:8000",z=await fetch(`${A}/api/v1/deposit-types/${B}`,{method:"DELETE",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(!z.ok){const te=await z.json();throw new Error(te.message||"Erreur lors de la suppression")}return await S(),{success:!0}}catch(A){return console.error(" Erreur suppression type:",A),alert(A.message),{success:!1,error:A.message}}},createDeposit:async B=>{try{const A=window.electron?await window.electron.getApiBase():"http://localhost:8000",z=B.type==="outgoing"?"deposits/outgoing":"deposits/incoming",te=await fetch(`${A}/api/v1/${z}`,{method:"POST",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"},body:JSON.stringify(B)}),pe=await te.json();if(!te.ok)throw new Error(pe.message||"Erreur lors de la cration");return await w(),await S(),{success:!0,data:pe.data||pe}}catch(A){return console.error(" Erreur cration consigne:",A),{success:!1,error:A.message}}},processDepositReturn:async(B,A)=>{try{g.value=!0;const z=window.electron?await window.electron.getApiBase():"http://localhost:8000",te=await fetch(`${z}/api/v1/deposits/${B}/return`,{method:"POST",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"},body:JSON.stringify(A)}),pe=await te.json();if(!te.ok)throw new Error(pe.message||"Erreur lors du traitement");return await w(),await O(),await S(),{success:!0,data:pe.data||pe}}catch(z){return console.error(" Erreur retour:",z),{success:!1,error:z.message}}finally{g.value=!1}}}}const Mv={name:"CategoryHierarchyManager",emits:["close","category-updated"],setup(e,{emit:t}){const r=N(""),n=N(!1),s=N(!1),l=N(!1),i=N(!1),a=N(null),c=N(null),d=N(null),u=N({id:null,name:"",category_id:null}),f=async()=>{console.log(" Rechargement des catgories et sous-catgories...");try{const[$,U]=await Promise.all([Oe.get("/categories"),Oe.get("/subcategories")]);$.success&&$.data&&(Rt.value=$.data,console.log(" Catgories recharges:",Rt.value.length)),U.success&&U.data&&(Ft.value=U.data,console.log(" Sous-catgories recharges:",Ft.value.length))}catch($){console.error(" Erreur lors du rechargement:",$)}};vt(()=>{f()}),Ae([Rt,Ft],()=>{console.log(" Changement dtect dans les catgories/sous-catgories")},{deep:!0});const p=K(()=>{if(!Rt.value)return[];let $=Rt.value;if(r.value){const U=r.value.toLowerCase();$=$.filter(I=>I.name.toLowerCase().includes(U))}return $.sort((U,I)=>{const M=U.position!==void 0&&U.position!==null?U.position:9999,j=I.position!==void 0&&I.position!==null?I.position:9999;return M!==j?M-j:U.name.localeCompare(I.name)})}),m=$=>Ft.value?Ft.value.filter(U=>U.category_id===$||U.parent_id===$):[],g=$=>{const U=Rt.value.find(I=>I.id===$);return U?U.name:"Inconnue"},v=K(()=>{const $=u.value.category_id?"sous-catgorie":"catgorie";return s.value?`Modifier la ${$}`:`Nouvelle ${$}`}),h=($=null,U=null)=>{console.log(" openModal appel:",{item:$,parentId:U}),$?(s.value=!0,u.value={...$,category_id:U||$.category_id||null}):(s.value=!1,u.value={id:null,name:"",category_id:U}),console.log(" Form aprs init:",u.value),n.value=!0,requestAnimationFrame(()=>{requestAnimationFrame(()=>{d.value&&(d.value.focus(),d.value.select())})})},C=()=>{n.value=!1,u.value={id:null,name:"",category_id:null}};return{categories:Rt,searchQuery:r,filteredCategories:p,getSubcategories:m,getCategoryName:g,modalTitle:v,showModal:n,isEditing:s,form:u,loading:l,nameInput:d,openModal:h,closeModal:C,saveCategory:async()=>{if(!u.value.name.trim()){alert(" Le nom ne peut pas tre vide");return}const $=!!u.value.category_id;if($?Ft.value.some(I=>I.name.toLowerCase()===u.value.name.trim().toLowerCase()&&I.id!==u.value.id&&I.category_id===u.value.category_id):Rt.value.some(I=>I.name.toLowerCase()===u.value.name.trim().toLowerCase()&&I.id!==u.value.id)){alert(` Une ${$?"sous-catgorie":"catgorie"} avec ce nom existe dj !`);return}l.value=!0;try{let I;const M=$?"/subcategories":"/categories",j={name:u.value.name.trim()};$&&(j.category_id=u.value.category_id),s.value?I=await Oe.put(`${M}/${u.value.id}`,j):I=await Oe.post(M,j),I.success&&(console.log(" Sauvegarde russie, rechargement..."),await f(),t("category-updated"),C())}catch(I){console.error(" Erreur sauvegarde:",I);const M=I.response?.data?.errors?.name?.[0]||I.response?.data?.message||I.message;alert(` Erreur: ${M}`)}finally{l.value=!1}},confirmDelete:async($,U=!1)=>{const I=U?"sous-catgorie":"catgorie";if(confirm(`tes-vous sr de vouloir supprimer la ${I} "${$.name}" ?`))try{const M=U?`/subcategories/${$.id}`:`/categories/${$.id}`;(await Oe.delete(M)).success&&(await f(),t("category-updated"))}catch(M){console.error(`Erreur suppression ${I}:`,M),alert(`Impossible de supprimer cette ${I} (elle est peut-tre utilise).`)}},isReordering:i,draggedCategory:a,draggedSubcategory:c,toggleReorderMode:async()=>{if(i.value){l.value=!0;try{const $=Rt.value.map((I,M)=>I.position!==M?Oe.put(`/categories/${I.id}`,{name:I.name,position:M}):Promise.resolve({success:!0})),U=Ft.value.map((I,M)=>I.position!==M||I._originalCategoryId!==I.category_id?Oe.put(`/subcategories/${I.id}`,{name:I.name,category_id:I.category_id,position:M}):Promise.resolve({success:!0}));await Promise.all([...$,...U]),console.log(" Ordre sauvegard avec succs"),i.value=!1,await f(),t("category-updated")}catch($){console.error(" Erreur sauvegarde ordre:",$),alert("Erreur lors de la sauvegarde de l'ordre: "+($.response?.data?.message||$.message))}finally{l.value=!1}}else i.value=!0,r.value="",Rt.value.forEach(($,U)=>{($.position===void 0||$.position===null)&&($.position=U)}),Ft.value.forEach(($,U)=>{($.position===void 0||$.position===null)&&($.position=U),$._originalCategoryId=$.category_id})},onDragStart:($,U)=>{i.value&&(a.value=U,$.dataTransfer.effectAllowed="move",$.dataTransfer.dropEffect="move")},onDrop:($,U)=>{if(!i.value||!a.value||a.value.id===U.id)return;const I=[...p.value],M=I.findIndex(A=>A.id===a.value.id),j=I.findIndex(A=>A.id===U.id),[B]=I.splice(M,1);I.splice(j,0,B),I.forEach((A,z)=>{const te=Rt.value.find(pe=>pe.id===A.id);te&&(te.position=z)}),a.value=null},onSubDragStart:($,U,I)=>{i.value&&(c.value=U,$.dataTransfer.effectAllowed="move",$.dataTransfer.dropEffect="move",$.stopPropagation())},onSubDragEnter:($,U)=>{!i.value||!c.value||$.stopPropagation()},onSubDrop:($,U,I)=>{if(!i.value||!c.value)return;$.stopPropagation(),$.preventDefault();const M=c.value,j=M.category_id;if(!U){M.category_id!==I&&(console.log(` Dplacement de "${M.name}" vers catgorie ${I}`),M.category_id=I,M.position=0),c.value=null;return}if(j===I&&M.id!==U.id){const B=Ft.value.filter(te=>te.category_id===I),A=B.findIndex(te=>te.id===M.id),z=B.findIndex(te=>te.id===U.id);if(A!==-1&&z!==-1){const[te]=B.splice(A,1);B.splice(z,0,te),B.forEach((pe,Re)=>{pe.position=Re}),console.log(` Rorganisation dans catgorie ${I}`)}}else if(j!==I){console.log(` Dplacement de "${M.name}" de catgorie ${j} vers ${I}`),M.category_id=I;const B=Ft.value.filter(z=>z.category_id===I),A=B.findIndex(z=>z.id===U.id);B.splice(A,0,M),B.forEach((z,te)=>{z.position=te})}c.value=null}}}},Dv={class:"bg-white h-full flex flex-col"},Iv={class:"p-4 border-b flex justify-between items-center bg-gray-50"},Nv={class:"flex gap-2"},Fv=["disabled"],$v={key:0,class:"animate-spin"},Lv={class:"relative"},qv=["disabled"],Uv={class:"flex items-center gap-3"},jv={class:"text-sm text-gray-500"},Bv={class:"flex-1 p-6 overflow-y-auto"},Vv={class:"max-w-5xl mx-auto"},Hv={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},zv=["draggable","onDragstart","onDrop"],Gv={class:"flex items-center gap-3"},Qv={class:"w-10 h-10 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center font-bold text-lg"},Kv={class:"font-semibold text-gray-900"},Jv={class:"text-xs text-gray-500"},Wv={class:"flex gap-1"},Xv=["onClick"],Yv=["onClick"],Zv={class:"p-3 bg-gray-50 flex-1 rounded-b-lg"},e1={class:"flex justify-between items-center mb-2 px-1"},t1=["onClick"],n1={key:0,class:"space-y-2"},o1=["draggable","onDragstart","onDragenter","onDrop"],r1={class:"text-gray-700"},s1=["onClick"],i1=["onClick"],a1=["onDragenter","onDrop"],l1={key:0,class:"col-span-full py-12 text-center text-gray-500"},u1={class:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4"},d1={class:"text-xl font-bold mb-4"},c1={key:0,class:"bg-blue-50 p-3 rounded text-sm text-blue-800 mb-4"},f1={class:"font-semibold"},p1={class:"block text-sm font-medium text-gray-700 mb-1"},m1=["placeholder"],g1={class:"flex justify-end gap-3 pt-4"},v1=["disabled"],h1={key:0,class:"animate-spin"};function y1(e,t,r,n,s,l){return _(),x("div",Dv,[o("div",Iv,[o("div",Nv,[o("button",{onClick:t[0]||(t[0]=i=>n.openModal()),class:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition flex items-center gap-2"},[...t[12]||(t[12]=[o("span",null,"",-1),ne(" + Nouvelle Catgorie ",-1)])]),o("button",{onClick:t[1]||(t[1]=(...i)=>n.toggleReorderMode&&n.toggleReorderMode(...i)),class:le(["px-3 py-1 border border-gray-300 bg-white text-gray-700 rounded text-sm hover:bg-gray-50 transition flex items-center gap-2",{"bg-blue-50 border-blue-300 text-blue-700 ring-2 ring-blue-100":n.isReordering}]),disabled:n.loading},[n.loading&&n.isReordering?(_(),x("span",$v,"")):L("",!0),o("span",null,b(n.isReordering?" Enregistrer":" Rorganiser"),1)],10,Fv),o("div",Lv,[Q(o("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>n.searchQuery=i),type:"text",placeholder:"Rechercher...",class:le(["pl-8 pr-3 py-1 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 w-64",{"bg-gray-100 text-gray-400":n.isReordering}]),disabled:n.isReordering},null,10,qv),[[oe,n.searchQuery]]),t[13]||(t[13]=o("span",{class:"absolute left-2.5 top-1.5 text-gray-400 text-xs"},"",-1))])]),o("div",Uv,[o("div",jv,b(n.filteredCategories.length)+" catgories ",1),o("button",{onClick:t[3]||(t[3]=i=>e.$emit("close")),class:"text-gray-400 hover:text-gray-600 transition"}," Fermer ")])]),o("div",Bv,[o("div",Vv,[o("div",Hv,[(_(!0),x(fe,null,be(n.filteredCategories,i=>(_(),x("div",{key:i.id,draggable:n.isReordering,onDragstart:a=>n.onDragStart(a,i),onDragover:t[6]||(t[6]=xe(()=>{},["prevent"])),onDragenter:t[7]||(t[7]=xe(()=>{},["prevent"])),onDrop:a=>n.onDrop(a,i),class:le(["bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200 flex flex-col",{"cursor-move border-blue-400 border-dashed":n.isReordering,"opacity-50 scale-95":n.draggedCategory&&n.draggedCategory.id===i.id}])},[o("div",{class:le(["p-4 border-b border-gray-100 flex justify-between items-start bg-white rounded-t-lg",{"pointer-events-none":n.isReordering}])},[o("div",Gv,[o("div",Qv,b(i.name.charAt(0).toUpperCase()),1),o("div",null,[o("h3",Kv,b(i.name),1),o("p",Jv,"ID: "+b(i.id),1)])]),o("div",Wv,[o("button",{onClick:a=>n.openModal(i),class:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition",title:"Modifier"},"  ",8,Xv),o("button",{onClick:a=>n.confirmDelete(i),class:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition",title:"Supprimer"},"  ",8,Yv)])],2),o("div",Zv,[o("div",e1,[t[14]||(t[14]=o("div",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Sous-catgories ",-1)),o("button",{onClick:a=>n.openModal(null,i.id),class:"text-xs text-blue-600 hover:text-blue-800 font-medium px-2 py-0.5 rounded hover:bg-blue-50 transition"}," + Ajouter ",8,t1)]),n.getSubcategories(i.id).length>0?(_(),x("div",n1,[(_(!0),x(fe,null,be(n.getSubcategories(i.id),a=>(_(),x("div",{key:a.id,draggable:n.isReordering,onDragstart:c=>n.onSubDragStart(c,a,i.id),onDragover:t[4]||(t[4]=xe(()=>{},["prevent"])),onDragenter:xe(c=>n.onSubDragEnter(c,i.id),["prevent"]),onDrop:c=>n.onSubDrop(c,a,i.id),class:le(["flex items-center justify-between p-2 bg-white rounded border border-gray-200 text-sm group transition-all",{"cursor-move border-blue-400":n.isReordering,"opacity-50 scale-95":n.draggedSubcategory&&n.draggedSubcategory.id===a.id}])},[o("span",r1,b(a.name),1),o("div",{class:le(["transition-opacity flex gap-1",{"opacity-0 group-hover:opacity-100":!n.isReordering,"pointer-events-none":n.isReordering}])},[o("button",{onClick:c=>n.openModal(a,i.id),class:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Modifier"},"  ",8,s1),o("button",{onClick:c=>n.confirmDelete(a,!0),class:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Supprimer"},"  ",8,i1)],2)],42,o1))),128))])):(_(),x("div",{key:1,class:le(["text-center py-4 text-gray-400 text-sm italic border border-dashed border-gray-200 rounded",{"bg-blue-50 border-blue-300":n.isReordering}]),onDragover:t[5]||(t[5]=xe(()=>{},["prevent"])),onDragenter:xe(a=>n.onSubDragEnter(a,i.id),["prevent"]),onDrop:a=>n.onSubDrop(a,null,i.id)},b(n.isReordering?" Dposer ici":"Aucune sous-catgorie"),43,a1))])],42,zv))),128)),n.filteredCategories.length===0?(_(),x("div",l1,[t[15]||(t[15]=o("div",{class:"text-4xl mb-3"},"",-1)),o("p",null,'Aucune catgorie trouve pour "'+b(n.searchQuery)+'"',1)])):L("",!0)])])]),n.showModal?(_(),x("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",onClick:t[11]||(t[11]=xe((...i)=>n.closeModal&&n.closeModal(...i),["self"]))},[o("div",u1,[o("h3",d1,b(n.modalTitle),1),o("form",{onSubmit:t[10]||(t[10]=xe((...i)=>n.saveCategory&&n.saveCategory(...i),["prevent"])),class:"space-y-4"},[n.form.category_id?(_(),x("div",c1,[t[16]||(t[16]=ne(" Ajout dans : ",-1)),o("span",f1,b(n.getCategoryName(n.form.category_id)),1)])):L("",!0),o("div",null,[o("label",p1,b(n.form.category_id?"Nom de la sous-catgorie":"Nom de la catgorie"),1),Q(o("input",{"onUpdate:modelValue":t[8]||(t[8]=i=>n.form.name=i),type:"text",required:"",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:n.form.category_id?"Ex: Cola":"Ex: Boissons Gazeuses",ref:"nameInput"},null,8,m1),[[oe,n.form.name]])]),o("div",g1,[o("button",{type:"button",onClick:t[9]||(t[9]=(...i)=>n.closeModal&&n.closeModal(...i)),class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"}," Annuler "),o("button",{type:"submit",disabled:n.loading,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2"},[n.loading?(_(),x("span",h1,"")):L("",!0),ne(" "+b(n.isEditing?"Mettre  jour":"Crer"),1)],8,v1)])],32)])])):L("",!0)])}const b1=Ve(Mv,[["render",y1]]),_1={name:"ProductModals",components:{CategoryHierarchyManager:b1},props:{showProductModal:Boolean,showHierarchicalCategoryModal:Boolean,showCategoryModal:Boolean,showViewModal:Boolean,productForm:Object,editingProduct:Object,categories:Array,subcategories:Array,savingProduct:Boolean,viewingProduct:Object,newCategoryName:String,editingCategoryId:[String,Number],editingCategoryName:String,formatCurrency:Function,filterSubcategories:Function},emits:["update:showProductModal","update:showHierarchicalCategoryModal","update:showCategoryModal","update:showViewModal","update:newCategoryName","update:editingCategoryName","save-product","close-hierarchical-modal","category-updated","add-category","save-category","cancel-edit-category","edit-category","delete-category","open-product-modal"],setup(e){const t=N(null),r=N(null),n=K(()=>{if(console.log(" Calcul des sous-catgories disponibles"),console.log("  - Catgorie slectionne:",e.productForm.category_id),console.log("  - Toutes les sous-catgories:",e.subcategories),!e.productForm.category_id||!e.subcategories)return console.log("   Aucune catgorie slectionne ou pas de sous-catgories"),[];const l=e.subcategories.filter(i=>{const a=i.category_id===e.productForm.category_id||i.parent_id===e.productForm.category_id;return a&&console.log("   Sous-catgorie trouve:",i.name,"(ID:",i.id,")"),a});return console.log("   Total des sous-catgories filtres:",l.length),l}),s=()=>{if(console.log(" Changement de catgorie dtect"),console.log("  - Nouvelle catgorie:",e.productForm.category_id),console.log("  - Sous-catgorie actuelle:",e.productForm.subcategory_id),e.productForm.subcategory_id){const l=n.value.some(i=>i.id===e.productForm.subcategory_id);console.log("  - Sous-catgorie appartient  la catgorie?",l),l?console.log("   Sous-catgorie conserve"):(console.log("   Rinitialisation de la sous-catgorie (ne correspond plus)"),e.productForm.subcategory_id="")}console.log("   Sous-catgories disponibles:",n.value.length)};return Ae(()=>e.showCategoryModal,l=>{l&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.value&&(t.value.focus(),t.value.select())})})}),Ae(()=>e.showProductModal,l=>{l&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.value&&(r.value.focus(),e.editingProduct&&r.value.select())})})}),{categoryInput:t,productNameInput:r,availableSubcategories:n,onCategoryChange:s}}},x1={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},w1={class:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},C1={class:"flex justify-between items-center mb-4"},k1={class:"text-2xl font-bold"},S1={class:"grid grid-cols-2 gap-4"},E1={class:"grid grid-cols-2 gap-4"},P1=["value"],A1={class:"block text-sm font-medium mb-1 flex items-center gap-2"},R1={key:0,class:"text-xs text-gray-400 font-normal"},T1=["disabled"],O1={value:""},M1=["value"],D1={key:0,class:"text-xs text-blue-600 mt-1"},I1={class:"grid grid-cols-3 gap-4"},N1={class:"border-t pt-4 mt-4"},F1={class:"flex items-center mb-4"},$1={key:0,class:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200"},L1={class:"grid grid-cols-2 gap-4"},q1={class:"form-group"},U1={class:"relative"},j1=["required"],B1={class:"form-group"},V1={key:0,class:"bg-white border border-green-200 rounded p-3"},H1={class:"flex items-center justify-between"},z1={class:"text-lg font-bold text-green-600"},G1={key:1,class:"bg-blue-50 border border-blue-200 rounded p-3"},Q1={class:"flex justify-end gap-2 pt-4"},K1=["disabled"],J1={key:0,class:"animate-spin"},W1={class:"bg-white rounded-lg shadow-xl max-w-5xl w-full mx-4 max-h-[95vh] overflow-hidden"},X1={class:"flex justify-between items-center p-4 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-blue-700"},Y1={class:"overflow-y-auto",style:{"max-height":"calc(95vh - 80px)"}},Z1={class:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},eh={class:"flex justify-between items-center mb-4"},th={class:"mb-6 p-4 bg-gray-50 rounded-lg"},nh=["value"],oh={class:"space-y-2"},rh={key:0,class:"flex-1 flex gap-2"},sh=["value","onKeyup"],ih=["onClick"],ah={key:1,class:"flex-1 flex items-center justify-between"},lh={class:"font-medium"},uh={class:"flex gap-2"},dh=["onClick"],ch=["onClick"],fh={class:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},ph={class:"flex justify-between items-center mb-6"},mh={class:"space-y-4"},gh={class:"grid grid-cols-2 gap-4"},vh={class:"text-lg font-semibold"},hh={class:"text-lg font-mono"},yh={class:"inline-block px-3 py-1 bg-blue-100 text-blue-800 rounded-lg"},bh={class:"grid grid-cols-3 gap-4"},_h={class:"text-xl font-bold text-green-600"},xh={class:"text-xl font-bold text-gray-600"},wh={key:0,class:"bg-orange-50 border-l-4 border-orange-500 p-4 rounded"},Ch={class:"pt-4 flex justify-end gap-2"};function kh(e,t,r,n,s,l){const i=He("CategoryHierarchyManager");return _(),x("div",null,[r.showProductModal?(_(),x("div",x1,[o("div",w1,[o("div",C1,[o("h3",k1,b(r.editingProduct?"Modifier le produit":"Nouveau produit"),1),o("button",{onClick:t[0]||(t[0]=a=>e.$emit("update:showProductModal",!1)),class:"text-gray-500 hover:text-gray-700 text-2xl"},"")]),o("form",{onSubmit:t[13]||(t[13]=xe(a=>e.$emit("save-product"),["prevent"])),class:"space-y-4"},[o("div",S1,[o("div",null,[t[29]||(t[29]=o("label",{class:"block text-sm font-medium mb-1"},"Nom du produit *",-1)),Q(o("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.productForm.name=a),type:"text",required:"",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Coca-Cola 33cl",ref:"productNameInput"},null,512),[[oe,r.productForm.name]])]),o("div",null,[t[30]||(t[30]=o("label",{class:"block text-sm font-medium mb-1 flex items-center gap-2"},[ne(" SKU (Code unique) "),o("span",{class:"text-xs text-gray-500 font-normal"},"(Auto-gnr si vide)")],-1)),Q(o("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.productForm.sku=a),type:"text",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 bg-gray-50",placeholder:"Gnr automatiquement..."},null,512),[[oe,r.productForm.sku]]),t[31]||(t[31]=o("p",{class:"text-xs text-gray-500 mt-1"},"  Laissez vide pour gnration automatique ",-1))])]),o("div",E1,[o("div",null,[t[33]||(t[33]=o("label",{class:"block text-sm font-medium mb-1"},"Catgorie *",-1)),Q(o("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.productForm.category_id=a),required:"",onChange:t[4]||(t[4]=(...a)=>n.onCategoryChange&&n.onCategoryChange(...a)),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},[t[32]||(t[32]=o("option",{value:""},"Slectionner une catgorie...",-1)),(_(!0),x(fe,null,be(r.categories,a=>(_(),x("option",{key:a.id,value:a.id},b(a.name),9,P1))),128))],544),[[$e,r.productForm.category_id]])]),o("div",null,[o("label",A1,[t[34]||(t[34]=ne(" Sous-catgorie ",-1)),r.productForm.category_id?L("",!0):(_(),x("span",R1," (Slectionnez d'abord une catgorie) "))]),Q(o("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>r.productForm.subcategory_id=a),disabled:!r.productForm.category_id||n.availableSubcategories.length===0,class:le(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",{"bg-gray-100 cursor-not-allowed":!r.productForm.category_id||n.availableSubcategories.length===0}])},[o("option",O1,b(r.productForm.category_id?n.availableSubcategories.length===0?"Aucune sous-catgorie disponible":"Aucune (optionnel)":"Slectionnez une catgorie..."),1),(_(!0),x(fe,null,be(n.availableSubcategories,a=>(_(),x("option",{key:a.id,value:a.id},b(a.name),9,M1))),128))],10,T1),[[$e,r.productForm.subcategory_id]]),r.productForm.category_id&&n.availableSubcategories.length===0?(_(),x("p",D1,'  Crez des sous-catgories via le bouton " Catgories" ')):L("",!0)])]),o("div",I1,[o("div",null,[t[35]||(t[35]=o("label",{class:"block text-sm font-medium mb-1"},"Prix unitaire (FCFA) *",-1)),Q(o("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>r.productForm.unit_price=a),type:"number",required:"",min:"0",step:"50",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"500"},null,512),[[oe,r.productForm.unit_price,void 0,{number:!0}]])]),o("div",null,[t[36]||(t[36]=o("label",{class:"block text-sm font-medium mb-1"},"Stock initial",-1)),Q(o("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>r.productForm.stock=a),type:"number",min:"0",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0"},null,512),[[oe,r.productForm.stock,void 0,{number:!0}]])]),o("div",null,[t[37]||(t[37]=o("label",{class:"block text-sm font-medium mb-1"},"Stock min.",-1)),Q(o("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>r.productForm.min_stock=a),type:"number",min:"0",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"5"},null,512),[[oe,r.productForm.min_stock,void 0,{number:!0}]])])]),o("div",N1,[o("div",F1,[Q(o("input",{id:"is_consigned","onUpdate:modelValue":t[9]||(t[9]=a=>r.productForm.is_consigned=a),type:"checkbox",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[dt,r.productForm.is_consigned]]),t[38]||(t[38]=o("label",{for:"is_consigned",class:"ml-2 block text-sm font-medium text-gray-900"}," Ce produit est consign ",-1))]),r.productForm.is_consigned?(_(),x("div",$1,[o("div",L1,[o("div",q1,[t[40]||(t[40]=o("label",{class:"block text-sm font-medium mb-1 flex items-center gap-1"},[o("span",null," Montant de la consigne"),o("span",{class:"text-red-500"},"*")],-1)),o("div",U1,[Q(o("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>r.productForm.consignment_price=a),type:"number",step:"50",min:"0",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 pr-16",placeholder:"500",required:r.productForm.is_consigned},null,8,j1),[[oe,r.productForm.consignment_price,void 0,{number:!0}]]),t[39]||(t[39]=o("span",{class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-medium"}," FCFA ",-1))]),t[41]||(t[41]=o("p",{class:"text-xs text-gray-600 mt-1"}," Prix  payer pour l'emballage ",-1))]),o("div",B1,[t[42]||(t[42]=o("label",{class:"block text-sm font-medium mb-1 flex items-center gap-1"},[o("span",null," Emballages vides en stock")],-1)),Q(o("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>r.productForm.empty_containers_stock=a),type:"number",min:"0",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0"},null,512),[[oe,r.productForm.empty_containers_stock,void 0,{number:!0}]]),t[43]||(t[43]=o("p",{class:"text-xs text-gray-600 mt-1"}," Nombre de vides actuellement disponibles ",-1))])]),r.productForm.consignment_price>0&&r.productForm.empty_containers_stock>0?(_(),x("div",V1,[o("div",H1,[t[44]||(t[44]=o("span",{class:"text-sm text-gray-700"},"Valeur totale des vides :",-1)),o("span",z1,b(r.formatCurrency(r.productForm.consignment_price*r.productForm.empty_containers_stock)),1)])])):L("",!0)])):L("",!0),r.productForm.is_consigned?L("",!0):(_(),x("div",G1,[...t[45]||(t[45]=[Dt('<div class="flex items-start gap-2"><svg class="w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class="text-sm text-blue-700"><p class="font-medium mb-1">Qu&#39;est-ce un produit consign ?</p><p class="text-blue-600"> Les bouteilles en verre, casiers et fts qui doivent tre retourns au fournisseur. Le client paie une caution qui lui sera rembourse lors du retour. </p></div></div>',1)])]))]),o("div",Q1,[o("button",{type:"button",onClick:t[12]||(t[12]=a=>e.$emit("update:showProductModal",!1)),class:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"}," Annuler "),o("button",{type:"submit",disabled:r.savingProduct,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2"},[r.savingProduct?(_(),x("span",J1,"")):L("",!0),ne(" "+b(r.savingProduct?"Enregistrement...":"Enregistrer"),1)],8,K1)])],32)])])):L("",!0),r.showHierarchicalCategoryModal?(_(),x("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[17]||(t[17]=xe(a=>e.$emit("close-hierarchical-modal"),["self"]))},[o("div",W1,[o("div",X1,[t[46]||(t[46]=o("h3",{class:"text-xl font-bold text-white flex items-center gap-2"},[o("span",null,""),o("span",null,"Gestion Hirarchique des Catgories")],-1)),o("button",{onClick:t[14]||(t[14]=a=>e.$emit("close-hierarchical-modal")),class:"text-white hover:text-gray-200 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded hover:bg-blue-800 transition"},"  ")]),o("div",Y1,[Te(i,{onClose:t[15]||(t[15]=a=>e.$emit("close-hierarchical-modal")),onCategoryUpdated:t[16]||(t[16]=a=>e.$emit("category-updated"))})])])])):L("",!0),r.showCategoryModal?(_(),x("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[24]||(t[24]=xe(a=>e.$emit("update:showCategoryModal",!1),["self"]))},[o("div",Z1,[o("div",eh,[t[47]||(t[47]=o("h3",{class:"text-2xl font-bold"},"Gestion des catgories",-1)),o("button",{onClick:t[18]||(t[18]=a=>e.$emit("update:showCategoryModal",!1)),class:"text-gray-500 hover:text-gray-700 text-2xl"},"  ")]),o("div",th,[o("form",{onSubmit:t[20]||(t[20]=xe(a=>e.$emit("add-category"),["prevent"])),class:"flex gap-2"},[o("input",{ref:"categoryInput",value:r.newCategoryName,onInput:t[19]||(t[19]=a=>e.$emit("update:newCategoryName",a.target.value)),type:"text",placeholder:"Nouvelle catgorie...",class:"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:"",autofocus:""},null,40,nh),t[48]||(t[48]=o("button",{type:"submit",class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},"  Ajouter ",-1))],32)]),o("div",oh,[(_(!0),x(fe,null,be(r.categories,a=>(_(),x("div",{key:a.id,class:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50"},[r.editingCategoryId===a.id?(_(),x("div",rh,[o("input",{value:r.editingCategoryName,onInput:t[21]||(t[21]=c=>e.$emit("update:editingCategoryName",c.target.value)),type:"text",class:"flex-1 px-3 py-1 border rounded focus:ring-2 focus:ring-blue-500",onKeyup:[fl(c=>e.$emit("save-category",a.id),["enter"]),t[22]||(t[22]=fl(c=>e.$emit("cancel-edit-category"),["esc"]))]},null,40,sh),o("button",{onClick:c=>e.$emit("save-category",a.id),class:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700"},"  ",8,ih),o("button",{onClick:t[23]||(t[23]=c=>e.$emit("cancel-edit-category")),class:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700"},"  ")])):(_(),x("div",ah,[o("span",lh,b(a.name),1),o("div",uh,[o("button",{onClick:c=>e.$emit("edit-category",a),class:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm"},"  ",8,dh),o("button",{onClick:c=>e.$emit("delete-category",a.id),class:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm"},"  ",8,ch)])]))]))),128))])])])):L("",!0),r.showViewModal&&r.viewingProduct?(_(),x("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[28]||(t[28]=xe(a=>e.$emit("update:showViewModal",!1),["self"]))},[o("div",fh,[o("div",ph,[t[49]||(t[49]=o("h3",{class:"text-2xl font-bold"},"Dtails du produit",-1)),o("button",{onClick:t[25]||(t[25]=a=>e.$emit("update:showViewModal",!1)),class:"text-gray-500 hover:text-gray-700 text-2xl"},"  ")]),o("div",mh,[o("div",gh,[o("div",null,[t[50]||(t[50]=o("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nom du produit",-1)),o("p",vh,b(r.viewingProduct.name),1)]),o("div",null,[t[51]||(t[51]=o("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"SKU",-1)),o("p",hh,b(r.viewingProduct.sku),1)])]),o("div",null,[t[52]||(t[52]=o("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Catgorie",-1)),o("span",yh,b(r.viewingProduct.category?.name||"N/A"),1)]),o("div",bh,[o("div",null,[t[53]||(t[53]=o("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Prix unitaire",-1)),o("p",_h,b(r.formatCurrency(r.viewingProduct.unit_price)),1)]),o("div",null,[t[54]||(t[54]=o("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Stock actuel",-1)),o("p",{class:le(["text-xl font-bold",r.viewingProduct.stock===0?"text-red-600":r.viewingProduct.stock<=r.viewingProduct.min_stock?"text-orange-600":"text-green-600"])},b(r.viewingProduct.stock)+" units ",3)]),o("div",null,[t[55]||(t[55]=o("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Stock minimum",-1)),o("p",xh,b(r.viewingProduct.min_stock)+" units",1)])]),r.viewingProduct.stock<=r.viewingProduct.min_stock?(_(),x("div",wh,[...t[56]||(t[56]=[o("div",{class:"flex items-center"},[o("span",{class:"text-2xl mr-3"},""),o("div",null,[o("p",{class:"font-bold text-orange-800"},"Alerte stock faible"),o("p",{class:"text-sm text-orange-700"},"Ce produit ncessite un rapprovisionnement")])],-1)])])):L("",!0),o("div",Ch,[o("button",{onClick:t[26]||(t[26]=a=>e.$emit("update:showViewModal",!1)),class:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"}," Fermer "),o("button",{onClick:t[27]||(t[27]=a=>{e.$emit("update:showViewModal",!1),e.$emit("open-product-modal",r.viewingProduct)}),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},"  Modifier ")])])])])):L("",!0)])}const Sh=Ve(_1,[["render",kh]]),Eh={name:"Sidebar",props:{currentView:{type:String,required:!0},currentUser:{type:Object,default:null},consignedProducts:{type:Array,default:()=>[]},totalEmptyContainers:{type:Number,default:0},alertsCount:{type:Number,default:0},creditsCount:{type:Number,default:0},appInfo:{type:Object,default:()=>({mode:"dev",platform:"web"})},productsCount:{type:Number,default:0},customersCount:{type:Number,default:0},suppliersCount:{type:Number,default:0},depositsCount:{type:Number,default:0},purchasesCount:{type:Number,default:0},salesCount:{type:Number,default:0},movementsCount:{type:Number,default:0}},emits:["navigate","logout"],setup(e,{emit:t}){const r=N(!1),n=N(!1);return{isCollapsed:r,showUserMenu:n,toggleSidebar:()=>{r.value=!r.value,r.value&&(n.value=!1)},toggleUserMenu:()=>{n.value=!n.value},handleLogout:async()=>{n.value=!1,await Lc()},hasPermission:c=>!e.currentUser||!e.currentUser.permissions?!1:e.currentUser.roles&&e.currentUser.roles.some(d=>d.name==="admin")?!0:e.currentUser.permissions.some(d=>d.name===c)}}},Ph={class:"p-4 border-b border-gray-700 flex items-center justify-between"},Ah={key:0,class:"flex items-center"},Rh={key:0},Th={key:1},Oh={class:"flex-1 p-4 space-y-2 overflow-y-auto"},Mh=["title"],Dh={key:0,class:"flex-1 ml-2"},Ih=["title"],Nh={key:0,class:"flex-1 ml-2"},Fh={key:1,class:"ml-2 px-2 py-0.5 bg-blue-500 text-white text-xs font-bold rounded-full"},$h=["title"],Lh={key:0,class:"flex-1 ml-2"},qh=["title"],Uh={key:0,class:"flex-1 ml-2"},jh={key:1,class:"ml-2 px-2 py-0.5 bg-purple-500 text-white text-xs font-bold rounded-full"},Bh=["title"],Vh={key:0,class:"flex-1 ml-2"},Hh={key:1,class:"ml-2 px-2 py-0.5 bg-orange-500 text-white text-xs font-bold rounded-full"},zh=["title"],Gh={key:0,class:"flex-1 ml-2"},Qh={key:1,class:"ml-2 px-2 py-0.5 bg-teal-500 text-white text-xs font-bold rounded-full"},Kh=["title"],Jh={key:0,class:"flex-1 ml-2"},Wh={key:1,class:"ml-2 px-2 py-0.5 bg-green-500 text-white text-xs font-bold rounded-full"},Xh=["title"],Yh={key:0,class:"flex-1 ml-2"},Zh={key:1,class:"ml-2 px-2 py-0.5 bg-indigo-500 text-white text-xs font-bold rounded-full"},ey=["title"],ty={key:0,class:"badge"},ny=["title"],oy={key:0,class:"flex-1 ml-2"},ry={key:1,class:"ml-2 px-2 py-0.5 bg-yellow-500 text-white text-xs font-bold rounded-full"},sy=["title"],iy={key:0,class:"flex-1 ml-2"},ay={key:1,class:"ml-2 px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full"},ly=["title"],uy={key:0,class:"flex-1 ml-2"},dy={class:"p-4 border-t border-gray-700 bg-gray-900 relative"},cy={key:0,class:"relative"},fy={class:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold flex-shrink-0"},py={key:0,class:"flex-1 text-left"},my={class:"text-sm font-medium truncate"},gy={class:"text-xs text-gray-400 truncate"},vy={key:1,class:"text-gray-400"},hy={key:0,class:"absolute bottom-full left-0 right-0 mb-2 bg-gray-800 rounded-lg shadow-xl border border-gray-700 overflow-hidden"},yy={class:"p-3 border-b border-gray-700"},by={class:"text-sm font-medium"},_y={class:"text-xs text-gray-400"},xy={class:"p-2 border-t border-gray-700 bg-gray-900"},wy={class:"text-xs text-center text-gray-500"};function Cy(e,t,r,n,s,l){return _(),x("aside",{class:le(["bg-gray-800 text-white flex flex-col shadow-lg transition-all duration-300",n.isCollapsed?"w-16":"w-64"])},[o("div",Ph,[n.isCollapsed?L("",!0):(_(),x("div",Ah,[...t[15]||(t[15]=[o("span",{class:"text-3xl mr-2"},"",-1),o("span",{class:"text-xl font-semibold"},"SmartDrink",-1)])])),o("button",{onClick:t[0]||(t[0]=(...i)=>n.toggleSidebar&&n.toggleSidebar(...i)),class:le(["p-2 hover:bg-gray-700 rounded transition",n.isCollapsed?"mx-auto":""])},[n.isCollapsed?(_(),x("span",Rh,"")):(_(),x("span",Th,""))],2)]),o("nav",Oh,[o("a",{onClick:t[1]||(t[1]=xe(i=>e.$emit("navigate","dashboard"),["prevent"])),class:le(["nav-item",{"nav-item-active":r.currentView==="dashboard"}]),href:"#",title:n.isCollapsed?"Tableau de bord":""},[t[16]||(t[16]=o("span",{class:"text-xl"},"",-1)),n.isCollapsed?L("",!0):(_(),x("span",Dh,"Tableau de bord"))],10,Mh),o("a",{onClick:t[2]||(t[2]=xe(i=>e.$emit("navigate","products"),["prevent"])),class:le(["nav-item",{"nav-item-active":r.currentView==="products"}]),href:"#",title:n.isCollapsed?"Produits":""},[t[17]||(t[17]=o("span",{class:"text-xl"},"",-1)),n.isCollapsed?L("",!0):(_(),x("span",Nh,"Produits")),!n.isCollapsed&&r.productsCount>0?(_(),x("span",Fh,b(r.productsCount),1)):L("",!0)],10,Ih),o("a",{onClick:t[3]||(t[3]=xe(i=>e.$emit("navigate","pos"),["prevent"])),class:le(["nav-item",{"nav-item-active":r.currentView==="pos"}]),href:"#",title:n.isCollapsed?"Point de Vente":""},[t[18]||(t[18]=o("span",{class:"text-xl"},"",-1)),n.isCollapsed?L("",!0):(_(),x("span",Lh,"Point de Vente"))],10,$h),o("a",{onClick:t[4]||(t[4]=xe(i=>e.$emit("navigate","customers"),["prevent"])),class:le(["nav-item",{"nav-item-active":r.currentView==="customers"}]),href:"#",title:n.isCollapsed?"Clients":""},[t[19]||(t[19]=o("span",{class:"text-xl"},"",-1)),n.isCollapsed?L("",!0):(_(),x("span",Uh,"Clients")),!n.isCollapsed&&r.customersCount>0?(_(),x("span",jh,b(r.customersCount),1)):L("",!0)],10,qh),o("a",{onClick:t[5]||(t[5]=xe(i=>e.$emit("navigate","suppliers"),["prevent"])),class:le(["nav-item",{"nav-item-active":r.currentView==="suppliers"}]),href:"#",title:n.isCollapsed?"Fournisseurs":""},[t[20]||(t[20]=o("span",{class:"text-xl"},"",-1)),n.isCollapsed?L("",!0):(_(),x("span",Vh,"Fournisseurs")),!n.isCollapsed&&r.suppliersCount>0?(_(),x("span",Hh,b(r.suppliersCount),1)):L("",!0)],10,Bh),o("a",{onClick:t[6]||(t[6]=xe(i=>e.$emit("navigate","purchases"),["prevent"])),class:le(["nav-item",{"nav-item-active":r.currentView==="purchases"}]),href:"#",title:n.isCollapsed?"Achats":""},[t[21]||(t[21]=o("span",{class:"text-xl"},"",-1)),n.isCollapsed?L("",!0):(_(),x("span",Gh,"Achats")),!n.isCollapsed&&r.purchasesCount>0?(_(),x("span",Qh,b(r.purchasesCount),1)):L("",!0)],10,zh),o("a",{onClick:t[7]||(t[7]=xe(i=>e.$emit("navigate","invoices"),["prevent"])),class:le(["nav-item",{"nav-item-active":r.currentView==="invoices"}]),href:"#",title:n.isCollapsed?"Factures":""},[t[22]||(t[22]=o("span",{class:"text-xl"},"",-1)),n.isCollapsed?L("",!0):(_(),x("span",Jh,"Factures")),!n.isCollapsed&&r.salesCount>0?(_(),x("span",Wh,b(r.salesCount),1)):L("",!0)],10,Kh),n.hasPermission("view_stock_movements")?(_(),x("a",{key:0,onClick:t[8]||(t[8]=xe(i=>e.$emit("navigate","movements"),["prevent"])),class:le(["nav-item",{"nav-item-active":r.currentView==="movements"}]),href:"#",title:n.isCollapsed?"Mouvements":""},[t[23]||(t[23]=o("span",{class:"text-xl"},"",-1)),n.isCollapsed?L("",!0):(_(),x("span",Yh,"Mouvements")),!n.isCollapsed&&r.movementsCount>0?(_(),x("span",Zh,b(r.movementsCount),1)):L("",!0)],10,Xh)):L("",!0),o("a",{onClick:t[9]||(t[9]=xe(i=>e.$emit("navigate","deposits"),["prevent"])),class:le(["nav-item",{"nav-item-active":r.currentView==="deposits"}]),href:"#",title:n.isCollapsed?"Consignes":""},[t[24]||(t[24]=o("span",{class:"text-xl"},"",-1)),t[25]||(t[25]=o("span",{class:"flex-1 ml-2"},"Consignes",-1)),!n.isCollapsed&&r.depositsCount>0?(_(),x("span",ty,b(r.depositsCount),1)):L("",!0)],10,ey),o("a",{onClick:t[10]||(t[10]=xe(i=>e.$emit("navigate","credits"),["prevent"])),class:le(["nav-item",{"nav-item-active":r.currentView==="credits"}]),href:"#",title:n.isCollapsed?"Crdits":""},[t[26]||(t[26]=o("span",{class:"text-xl"},"",-1)),n.isCollapsed?L("",!0):(_(),x("span",oy,"Crdits")),!n.isCollapsed&&r.creditsCount>0?(_(),x("span",ry,b(r.creditsCount),1)):L("",!0)],10,ny),n.hasPermission("view_products")?(_(),x("a",{key:1,onClick:t[11]||(t[11]=xe(i=>e.$emit("navigate","alerts"),["prevent"])),class:le(["nav-item",{"nav-item-active":r.currentView==="alerts"}]),href:"#",title:n.isCollapsed?"Alertes":""},[t[27]||(t[27]=o("span",{class:"text-xl"},"",-1)),n.isCollapsed?L("",!0):(_(),x("span",iy,"Alertes")),!n.isCollapsed&&r.alertsCount>0?(_(),x("span",ay,b(r.alertsCount),1)):L("",!0)],10,sy)):L("",!0),r.currentUser?.roles?.some(i=>i.name==="admin")?(_(),x("a",{key:2,onClick:t[12]||(t[12]=xe(i=>e.$emit("navigate","users"),["prevent"])),class:le(["nav-item",{"nav-item-active":r.currentView==="users"}]),href:"#",title:n.isCollapsed?"Utilisateurs":""},[t[28]||(t[28]=o("span",{class:"text-xl"},"",-1)),n.isCollapsed?L("",!0):(_(),x("span",uy,"Utilisateurs"))],10,ly)):L("",!0)]),o("div",dy,[r.currentUser?(_(),x("div",cy,[o("button",{onClick:t[13]||(t[13]=(...i)=>n.toggleUserMenu&&n.toggleUserMenu(...i)),class:le(["w-full flex items-center justify-center gap-2 p-2 hover:bg-gray-800 rounded transition",n.isCollapsed?"":"justify-start"])},[o("div",fy,b(r.currentUser.name.charAt(0).toUpperCase()),1),n.isCollapsed?L("",!0):(_(),x("div",py,[o("p",my,b(r.currentUser.name),1),o("p",gy,b(r.currentUser.roles&&r.currentUser.roles[0]?r.currentUser.roles[0].display_name:"Utilisateur"),1)])),n.isCollapsed?L("",!0):(_(),x("span",vy,b(n.showUserMenu?"":""),1))],2),Te(fs,{name:"slide-up"},{default:qo(()=>[n.showUserMenu?(_(),x("div",hy,[o("div",yy,[o("p",by,b(r.currentUser.name),1),o("p",_y,b(r.currentUser.email||(r.currentUser.roles&&r.currentUser.roles[0]?r.currentUser.roles[0].display_name:"")),1)]),o("button",{onClick:t[14]||(t[14]=(...i)=>n.handleLogout&&n.handleLogout(...i)),class:"w-full px-3 py-2 text-left text-sm hover:bg-gray-700 transition flex items-center gap-2 text-red-400"},[...t[29]||(t[29]=[o("span",null,"",-1),o("span",null,"Dconnexion",-1)])]),o("div",xy,[o("p",wy,b(r.appInfo.mode)+"  "+b(r.appInfo.platform),1)])])):L("",!0)]),_:1})])):L("",!0)])],2)}const ky=Ve(Eh,[["render",Cy],["__scopeId","data-v-e0beeeb9"]]),Sy={name:"Header",props:{currentUser:{type:Object,default:null},currentUserRole:{type:String,default:""}},setup(){const e=N(""),t=N("Desktop"),r=N("Windows");let n=null;const s=()=>{const i=window.navigator.userAgent.toLowerCase();i.indexOf("win")!==-1?r.value="Windows":i.indexOf("mac")!==-1?r.value="MacOS":i.indexOf("linux")!==-1?r.value="Linux":r.value="Unknown",window.electron?t.value="Desktop":t.value="Web"},l=()=>{const i=new Date,c=["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][i.getDay()],d=i.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),u=i.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",second:"2-digit"});e.value=`${c} ${d} : ${u}`};return vt(()=>{s(),l(),n=setInterval(l,1e3)}),ca(()=>{n&&clearInterval(n)}),{formattedDateTime:e,mode:t,platform:r}}},Ey={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg"},Py={class:"container mx-auto px-4 py-4"},Ay={class:"flex items-center justify-between"},Ry={class:"text-right"},Ty={class:"text-base font-semibold"},Oy={class:"pb-2 mb-2 border-t border-blue-400"},My={class:"text-sm font-medium"};function Dy(e,t,r,n,s,l){return _(),x("header",Ey,[o("div",Py,[o("div",Ay,[t[0]||(t[0]=Dt('<div class="flex items-center space-x-3"><div class="w-12 h-12 bg-white rounded-full flex items-center justify-center"><span class="text-2xl font-bold text-blue-600">SD</span></div><div><h1 class="text-2xl font-bold">Entreprises KAMDEM</h1><p class="text-sm text-blue-100">Dpt de boissons</p></div></div>',1)),o("div",Ry,[o("div",null,[o("p",Ty,b(n.formattedDateTime),1)]),o("div",Oy,[o("p",My,"Mode: "+b(n.mode)+" | "+b(n.platform),1)])])])])])}const Iy=Ve(Sy,[["render",Dy]]),Ny={name:"DashboardView",emits:["close","saved"],props:{stats:{type:Object,required:!0,default:()=>({})}},setup(){return{formatCurrency:rn}}},Fy={class:"space-y-6"},$y={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Ly={class:"bg-white rounded-lg shadow p-6"},qy={class:"flex items-center justify-between"},Uy={class:"text-3xl font-bold text-blue-600"},jy={class:"bg-white rounded-lg shadow p-6"},By={class:"flex items-center justify-between"},Vy={class:"text-3xl font-bold text-orange-600"},Hy={class:"bg-white rounded-lg shadow p-6"},zy={class:"flex items-center justify-between"},Gy={class:"text-3xl font-bold text-green-600"},Qy={class:"bg-white rounded-lg shadow p-6"},Ky={class:"flex items-center justify-between"},Jy={class:"text-3xl font-bold text-red-600"};function Wy(e,t,r,n,s,l){return _(),x("div",Fy,[t[8]||(t[8]=o("h2",{class:"text-3xl font-bold"},"Tableau de bord",-1)),o("div",$y,[o("div",Ly,[o("div",qy,[o("div",null,[t[0]||(t[0]=o("p",{class:"text-gray-500 text-sm"},"Produits totaux",-1)),o("p",Uy,b(r.stats.total_products||0),1)]),t[1]||(t[1]=o("div",{class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},[o("span",{class:"text-2xl"},"")],-1))])]),o("div",jy,[o("div",By,[o("div",null,[t[2]||(t[2]=o("p",{class:"text-gray-500 text-sm"},"Stock faible",-1)),o("p",Vy,b(r.stats.low_stock_count||0),1)]),t[3]||(t[3]=o("div",{class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},[o("span",{class:"text-2xl"},"")],-1))])]),o("div",Hy,[o("div",zy,[o("div",null,[t[4]||(t[4]=o("p",{class:"text-gray-500 text-sm"},"Valeur du stock",-1)),o("p",Gy,b(n.formatCurrency(r.stats.total_stock_value)),1)]),t[5]||(t[5]=o("div",{class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},[o("span",{class:"text-2xl"},"")],-1))])]),o("div",Qy,[o("div",Ky,[o("div",null,[t[6]||(t[6]=o("p",{class:"text-gray-500 text-sm"},"Rupture de stock",-1)),o("p",Jy,b(r.stats.out_of_stock||0),1)]),t[7]||(t[7]=o("div",{class:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center"},[o("span",{class:"text-2xl"},"")],-1))])])])])}const Xy=Ve(Ny,[["render",Wy]]),Yy={name:"PaginationControls",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0},totalItems:{type:Number,required:!0},perPage:{type:Number,required:!0},itemName:{type:String,default:"lments"}},emits:["update:currentPage"],setup(e,{emit:t}){const r=K(()=>(e.currentPage-1)*e.perPage),n=K(()=>Math.min(r.value+e.perPage,e.totalItems)),s=K(()=>{const i=e.totalPages,a=e.currentPage;let c=[];if(i<=7)for(let d=1;d<=i;d++)c.push(d);else a<=4?c=[1,2,3,4,5,i]:a>=i-3?c=[1,i-4,i-3,i-2,i-1,i]:c=[1,a-1,a,a+1,i];return c});return{startIndex:r,endIndex:n,displayedPages:s,updatePage:i=>{i>=1&&i<=e.totalPages&&t("update:currentPage",i)}}}},Zy={key:0,class:"px-6 py-4 border-t flex items-center justify-between bg-gray-50"},eb={class:"text-sm text-gray-500"},tb={class:"flex gap-2"},nb=["disabled"],ob={class:"flex items-center gap-1"},rb=["onClick"],sb=["disabled"];function ib(e,t,r,n,s,l){return r.totalPages>1?(_(),x("div",Zy,[o("div",eb," Affichage de "+b(n.startIndex+1)+"  "+b(n.endIndex)+" sur "+b(r.totalItems)+" "+b(r.itemName),1),o("div",tb,[o("button",{onClick:t[0]||(t[0]=i=>n.updatePage(r.currentPage-1)),disabled:r.currentPage===1,class:"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"}," Prcdent ",8,nb),o("div",ob,[(_(!0),x(fe,null,be(n.displayedPages,i=>(_(),x("button",{key:i,onClick:a=>n.updatePage(i),class:le(["px-3 py-1 border rounded min-w-[32px] transition",r.currentPage===i?"bg-blue-600 text-white border-blue-600":"hover:bg-gray-100"])},b(i),11,rb))),128))]),o("button",{onClick:t[1]||(t[1]=i=>n.updatePage(r.currentPage+1)),disabled:r.currentPage===r.totalPages,class:"px-3 py-1 border rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"}," Suivant ",8,sb)])])):L("",!0)}const Yc=Ve(Yy,[["render",ib]]),ab={name:"ProductsView",components:{PaginationControls:Yc},props:{filteredProducts:{type:Array,required:!0},loading:{type:Boolean,default:!1},searchQuery:{type:String,default:""},formatCurrency:{type:Function,required:!0}},emits:["update:searchQuery","open-hierarchical-category-modal","open-product-modal","view-product","delete-product","open-restock-modal","open-product-suppliers-modal"],setup(e){const t=N(null),r=N("all"),n=N(1),s=N(10),l=N("name"),i=N("asc"),a=v=>{l.value===v?i.value=i.value==="asc"?"desc":"asc":(l.value=v,i.value="asc")},c=v=>v.stock===0?"px-2 py-1 rounded text-sm bg-red-100 text-red-800 font-medium":v.stock<=v.min_stock?"px-2 py-1 rounded text-sm bg-orange-100 text-orange-800 font-medium":"px-2 py-1 rounded text-sm bg-green-100 text-green-800 font-medium",d=K(()=>{let v=[...e.filteredProducts];switch(r.value){case"in-stock":return v.filter(h=>h.stock>h.min_stock);case"low-stock":return v.filter(h=>h.stock<=h.min_stock&&h.stock>0);case"out-of-stock":return v.filter(h=>h.stock===0);default:return v}}),u=K(()=>[...d.value].sort((h,C)=>{let E=h[l.value],k=C[l.value];return E==null&&(E=""),k==null&&(k=""),typeof E=="string"&&(E=E.toLowerCase()),typeof k=="string"&&(k=k.toLowerCase()),E<k?i.value==="asc"?-1:1:E>k?i.value==="asc"?1:-1:0})),f=K(()=>Math.ceil(u.value.length/s.value)),p=K(()=>(n.value-1)*s.value),m=K(()=>Math.min(p.value+s.value,u.value.length)),g=K(()=>u.value.slice(p.value,m.value));return Ae(()=>e.filteredProducts,()=>{n.value=1}),Ae(r,()=>{n.value=1}),vt(()=>{t.value&&t.value.focus()}),{searchInput:t,stockFilter:r,currentPage:n,itemsPerPage:s,totalPages:f,startIndex:p,endIndex:m,paginatedProducts:g,sortKey:l,sortOrder:i,sort:a,getStockBadgeClass:c,displayedProducts:d}}},lb={class:"space-y-6"},ub={class:"flex justify-between items-center"},db={class:"flex gap-2"},cb={class:"bg-white rounded-lg shadow p-6"},fb={class:"flex gap-4"},pb=["value"],mb={class:"bg-white rounded-lg shadow overflow-hidden"},gb={class:"w-full"},vb={class:"bg-gray-50"},hb={key:0},yb={key:0},bb={key:0},_b={key:0},xb={key:1},wb={class:"px-6 py-4"},Cb={class:"font-medium"},kb={class:"text-sm text-gray-500"},Sb={class:"px-6 py-4"},Eb={class:"px-2 py-1 bg-gray-100 rounded text-sm"},Pb={class:"px-6 py-4"},Ab={key:0,class:"text-sm"},Rb={class:"px-2 py-1 bg-blue-50 text-blue-700 rounded"},Tb={key:0,class:"ml-1 text-xs text-gray-500"},Ob={key:1,class:"text-sm text-gray-400 italic"},Mb={class:"px-6 py-4 font-medium"},Db={class:"px-6 py-4"},Ib={class:"px-6 py-4"},Nb={class:"flex gap-2 items-center"},Fb=["onClick"],$b=["onClick"],Lb=["onClick"],qb=["onClick"],Ub=["onClick"];function jb(e,t,r,n,s,l){const i=He("PaginationControls");return _(),x("div",lb,[o("div",ub,[t[9]||(t[9]=o("h2",{class:"text-3xl font-bold"},"Gestion des Produits",-1)),o("div",db,[o("button",{onClick:t[0]||(t[0]=a=>e.$emit("open-hierarchical-category-modal")),class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium flex items-center gap-2"},[...t[8]||(t[8]=[o("span",null,"",-1),ne(" Catgories ",-1)])]),o("button",{onClick:t[1]||(t[1]=a=>e.$emit("open-product-modal",null)),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium"},"  Nouveau produit ")])]),o("div",cb,[o("div",fb,[o("input",{ref:"searchInput",value:r.searchQuery,onInput:t[2]||(t[2]=a=>e.$emit("update:searchQuery",a.target.value)),type:"text",placeholder:" Rechercher un produit (nom, SKU, code)...",class:"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,40,pb),Q(o("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>n.stockFilter=a),class:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},[...t[10]||(t[10]=[o("option",{value:"all"},"Tous les produits",-1),o("option",{value:"in-stock"},"En stock",-1),o("option",{value:"low-stock"},"Stock faible",-1),o("option",{value:"out-of-stock"},"Rupture de stock",-1)])],512),[[$e,n.stockFilter]])])]),o("div",mb,[o("table",gb,[o("thead",vb,[o("tr",null,[o("th",{onClick:t[4]||(t[4]=a=>n.sort("name")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none"},[t[11]||(t[11]=ne(" Produit ",-1)),n.sortKey==="name"?(_(),x("span",hb,b(n.sortOrder==="asc"?"":""),1)):L("",!0)]),t[14]||(t[14]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Catgorie",-1)),t[15]||(t[15]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Fournisseur",-1)),o("th",{onClick:t[5]||(t[5]=a=>n.sort("unit_price")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none"},[t[12]||(t[12]=ne(" Prix ",-1)),n.sortKey==="unit_price"?(_(),x("span",yb,b(n.sortOrder==="asc"?"":""),1)):L("",!0)]),o("th",{onClick:t[6]||(t[6]=a=>n.sort("stock")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none"},[t[13]||(t[13]=ne(" Stock ",-1)),n.sortKey==="stock"?(_(),x("span",bb,b(n.sortOrder==="asc"?"":""),1)):L("",!0)]),t[16]||(t[16]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions",-1))])]),o("tbody",null,[r.loading?(_(),x("tr",_b,[...t[17]||(t[17]=[o("td",{colspan:"6",class:"px-6 py-8 text-center"},[o("div",{class:"flex justify-center items-center"},[o("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o("span",{class:"ml-3"},"Chargement...")])],-1)])])):n.displayedProducts.length===0?(_(),x("tr",xb,[...t[18]||(t[18]=[o("td",{colspan:"6",class:"px-6 py-8 text-center text-gray-500"}," Aucun produit trouv ",-1)])])):(_(!0),x(fe,{key:2},be(n.paginatedProducts,a=>(_(),x("tr",{key:a.id,class:"border-t hover:bg-gray-50 transition"},[o("td",wb,[o("div",Cb,b(a.name),1),o("div",kb,b(a.sku),1)]),o("td",Sb,[o("span",Eb,b(a.category?.name||"Sans catgorie"),1)]),o("td",Pb,[a.suppliers&&a.suppliers.length>0?(_(),x("span",Ab,[o("span",Rb,b(a.suppliers[0].name),1),a.suppliers.length>1?(_(),x("span",Tb," +"+b(a.suppliers.length-1),1)):L("",!0)])):(_(),x("span",Ob," Aucun fournisseur "))]),o("td",Mb,b(r.formatCurrency(a.unit_price)),1),o("td",Db,[o("span",{class:le(n.getStockBadgeClass(a))},b(a.stock)+" units ",3)]),o("td",Ib,[o("div",Nb,[o("button",{onClick:c=>e.$emit("view-product",a),class:"text-blue-600 hover:text-blue-800 hover:bg-blue-50 p-2 rounded transition",title:"Voir les dtails"},"  ",8,Fb),o("button",{onClick:c=>e.$emit("open-product-modal",a),class:"text-yellow-600 hover:text-yellow-800 hover:bg-yellow-50 p-2 rounded transition",title:"Modifier"},"  ",8,$b),o("button",{onClick:c=>e.$emit("open-product-suppliers-modal",a),class:"px-3 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100",title:"Fournisseurs associs aux produits"},"  ",8,Lb),o("button",{onClick:c=>e.$emit("open-restock-modal",a),class:"text-green-600 hover:text-green-800 hover:bg-green-50 p-2 rounded transition",title:"Rapprovisionner"},"  ",8,qb),o("button",{onClick:c=>e.$emit("delete-product",a.id),class:"text-red-600 hover:text-red-800 hover:bg-red-50 p-2 rounded transition",title:"Supprimer"},"  ",8,Ub)])])]))),128))])]),Te(i,{currentPage:n.currentPage,"onUpdate:currentPage":t[7]||(t[7]=a=>n.currentPage=a),"total-pages":n.totalPages,"total-items":n.displayedProducts.length,"per-page":n.itemsPerPage,"item-name":"produits"},null,8,["currentPage","total-pages","total-items","per-page"])])])}const Bb=Ve(ab,[["render",jb],["__scopeId","data-v-59590b7e"]]),Vb={name:"StockModals",emits:["close","saved"],props:{showRestockModal:{type:Boolean,default:!1},restockProduct:{type:Object,default:null},restockQuantity:{type:Number,default:null},restockReason:{type:String,default:""},showStockOutModal:{type:Boolean,default:!1},stockOutProduct:{type:Object,default:null},stockOutQuantity:{type:Number,default:null},stockOutReason:{type:String,default:""},stockOutReasonType:{type:String,default:"sale"}},emits:["close-restock-modal","save-restock","update:restockQuantity","update:restockReason","close-stock-out-modal","save-stock-out","update:stockOutQuantity","update:stockOutReason","update:stockOutReasonType"],setup(e,{emit:t}){const r=N(null),n=N(""),s=N(null),l=N(""),i=N("sale");return Ae(()=>e.restockQuantity,d=>{r.value=d},{immediate:!0}),Ae(()=>e.restockReason,d=>{n.value=d},{immediate:!0}),Ae(()=>e.stockOutQuantity,d=>{s.value=d},{immediate:!0}),Ae(()=>e.stockOutReason,d=>{l.value=d},{immediate:!0}),Ae(()=>e.stockOutReasonType,d=>{i.value=d},{immediate:!0}),{localRestockQuantity:r,localRestockReason:n,localStockOutQuantity:s,localStockOutReason:l,localStockOutReasonType:i,handleSubmitRestock:()=>{if(!r.value||r.value<1){alert(" Veuillez entrer une quantit valide");return}t("update:restockQuantity",r.value),t("update:restockReason",n.value),t("save-restock")},handleSubmitStockOut:()=>{if(!s.value||s.value<1){alert(" Veuillez entrer une quantit valide");return}if(s.value>e.stockOutProduct.stock){alert(" Quantit suprieure au stock disponible !");return}t("update:stockOutQuantity",s.value),t("update:stockOutReason",l.value),t("update:stockOutReasonType",i.value),t("save-stock-out")}}}},Hb={class:"bg-white rounded-lg shadow-xl w-full max-w-md p-6"},zb={class:"flex justify-between items-center mb-4"},Gb={class:"space-y-4"},Qb={class:"bg-blue-50 p-3 rounded-lg border border-blue-200"},Kb={class:"font-medium text-blue-900"},Jb={class:"text-sm text-blue-700"},Wb={class:"text-sm text-blue-700"},Xb={key:0,class:"bg-green-50 p-3 rounded-lg border border-green-200"},Yb={class:"text-sm text-green-700"},Zb={class:"font-bold text-green-800"},e_={class:"flex gap-3 mt-6"},t_=["disabled"],n_={class:"bg-white rounded-lg shadow-xl w-full max-w-md p-6"},o_={class:"flex justify-between items-center mb-4"},r_={class:"space-y-4"},s_={class:"bg-orange-50 p-3 rounded-lg border border-orange-200"},i_={class:"font-medium text-orange-900"},a_={class:"text-sm text-orange-700"},l_={class:"text-sm text-orange-700"},u_={class:"font-semibold"},d_=["max"],c_={key:0,class:"text-red-600 text-sm mt-1"},f_={key:0,class:"bg-orange-50 p-3 rounded-lg border border-orange-200"},p_={class:"text-sm text-orange-700"},m_={class:"font-bold text-orange-800"},g_={class:"flex gap-3 mt-6"},v_=["disabled"];function h_(e,t,r,n,s,l){return _(),x("div",null,[r.showRestockModal&&r.restockProduct?(_(),x("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[5]||(t[5]=xe(i=>e.$emit("close-restock-modal"),["self"]))},[o("div",Hb,[o("div",zb,[t[13]||(t[13]=o("h3",{class:"text-xl font-bold"}," Rapprovisionnement",-1)),o("button",{onClick:t[0]||(t[0]=i=>e.$emit("close-restock-modal")),class:"text-gray-500 hover:text-gray-700 text-2xl"},"  ")]),o("div",Gb,[o("div",Qb,[o("p",Kb,b(r.restockProduct.name),1),o("p",Jb,"SKU: "+b(r.restockProduct.sku),1),o("p",Wb,[t[14]||(t[14]=ne(" Stock actuel: ",-1)),o("span",{class:le(r.restockProduct.stock===0?"text-red-600 font-bold":"font-semibold")},b(r.restockProduct.stock)+" units ",3)])]),o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[ne(" Quantit  ajouter "),o("span",{class:"text-red-500"},"*")],-1)),Q(o("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=i=>n.localRestockQuantity=i),min:"1",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 50",required:""},null,512),[[oe,n.localRestockQuantity,void 0,{number:!0}]])]),o("div",null,[t[16]||(t[16]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Raison (optionnel) ",-1)),Q(o("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=i=>n.localRestockReason=i),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Livraison fournisseur, Rassort..."},null,512),[[oe,n.localRestockReason]])]),n.localRestockQuantity&&n.localRestockQuantity>0?(_(),x("div",Xb,[o("p",Yb,[t[17]||(t[17]=o("span",{class:"font-semibold"},"Nouveau stock:",-1)),ne(" "+b(r.restockProduct.stock)+" + "+b(n.localRestockQuantity)+" = ",1),o("span",Zb,b(r.restockProduct.stock+n.localRestockQuantity)+" units",1)])])):L("",!0)]),o("div",e_,[o("button",{onClick:t[3]||(t[3]=i=>e.$emit("close-restock-modal")),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition"}," Annuler "),o("button",{onClick:t[4]||(t[4]=(...i)=>n.handleSubmitRestock&&n.handleSubmitRestock(...i)),disabled:!n.localRestockQuantity||n.localRestockQuantity<1,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:bg-gray-300 disabled:cursor-not-allowed"},"  Valider ",8,t_)])])])):L("",!0),r.showStockOutModal&&r.stockOutProduct?(_(),x("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[12]||(t[12]=xe(i=>e.$emit("close-stock-out-modal"),["self"]))},[o("div",n_,[o("div",o_,[t[18]||(t[18]=o("h3",{class:"text-xl font-bold"}," Sortie de Stock",-1)),o("button",{onClick:t[6]||(t[6]=i=>e.$emit("close-stock-out-modal")),class:"text-gray-500 hover:text-gray-700 text-2xl"},"  ")]),o("div",r_,[o("div",s_,[o("p",i_,b(r.stockOutProduct.name),1),o("p",a_,"SKU: "+b(r.stockOutProduct.sku),1),o("p",l_,[t[19]||(t[19]=ne(" Stock actuel: ",-1)),o("span",u_,b(r.stockOutProduct.stock)+" units",1)])]),o("div",null,[t[21]||(t[21]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[ne(" Type de sortie "),o("span",{class:"text-red-500"},"*")],-1)),Q(o("select",{"onUpdate:modelValue":t[7]||(t[7]=i=>n.localStockOutReasonType=i),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},[...t[20]||(t[20]=[Dt('<option value="sale" data-v-2dc36c4b>Vente</option><option value="loss" data-v-2dc36c4b>Casse / Perte</option><option value="expiry" data-v-2dc36c4b>Premption</option><option value="donation" data-v-2dc36c4b>Don</option><option value="return" data-v-2dc36c4b>Retour fournisseur</option><option value="other" data-v-2dc36c4b>Autre</option>',6)])],512),[[$e,n.localStockOutReasonType]])]),o("div",null,[t[22]||(t[22]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[ne(" Quantit  retirer "),o("span",{class:"text-red-500"},"*")],-1)),Q(o("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=i=>n.localStockOutQuantity=i),min:"1",max:r.stockOutProduct.stock,class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 10",required:""},null,8,d_),[[oe,n.localStockOutQuantity,void 0,{number:!0}]]),n.localStockOutQuantity>r.stockOutProduct.stock?(_(),x("p",c_,"  Quantit suprieure au stock disponible ! ")):L("",!0)]),o("div",null,[t[23]||(t[23]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Prcisions (optionnel) ",-1)),Q(o("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=i=>n.localStockOutReason=i),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Bouteille casse lors du transport..."},null,512),[[oe,n.localStockOutReason]])]),n.localStockOutQuantity&&n.localStockOutQuantity>0&&n.localStockOutQuantity<=r.stockOutProduct.stock?(_(),x("div",f_,[o("p",p_,[t[24]||(t[24]=o("span",{class:"font-semibold"},"Nouveau stock:",-1)),ne(" "+b(r.stockOutProduct.stock)+" - "+b(n.localStockOutQuantity)+" = ",1),o("span",m_,b(r.stockOutProduct.stock-n.localStockOutQuantity)+" units",1)])])):L("",!0)]),o("div",g_,[o("button",{onClick:t[10]||(t[10]=i=>e.$emit("close-stock-out-modal")),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition"}," Annuler "),o("button",{onClick:t[11]||(t[11]=(...i)=>n.handleSubmitStockOut&&n.handleSubmitStockOut(...i)),disabled:!n.localStockOutQuantity||n.localStockOutQuantity<1||n.localStockOutQuantity>r.stockOutProduct.stock,class:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition disabled:bg-gray-300 disabled:cursor-not-allowed"},"  Valider ",8,v_)])])])):L("",!0)])}const y_=Ve(Vb,[["render",h_],["__scopeId","data-v-2dc36c4b"]]);class b_{constructor(){this.metrics={}}start(t){this.metrics[t]={start:performance.now(),end:null,duration:null},console.log(` [START] ${t}`)}end(t){if(!this.metrics[t]){console.warn(` Aucune mesure trouve pour: ${t}`);return}this.metrics[t].end=performance.now(),this.metrics[t].duration=this.metrics[t].end-this.metrics[t].start;const r=this.metrics[t].duration,n=r>1e3?"":r>500?"":"";return console.log(`${n} [END] ${t}: ${r.toFixed(2)}ms`),r}getReport(){console.table(Object.entries(this.metrics).map(([t,r])=>({Label:t,"Dure (ms)":r.duration?r.duration.toFixed(2):"En cours...",Statut:r.duration>1e3?" Lent":r.duration>500?" Moyen":" Rapide"})))}reset(){this.metrics={}}}const no=new b_;async function __(e,t){no.start(e);try{const r=await t();return no.end(e),r}catch(r){throw no.end(e),console.error(` Erreur dans ${e}:`,r),r}}function Zc(e,t){return function(){return e.apply(t,arguments)}}const{toString:x_}=Object.prototype,{getPrototypeOf:_a}=Object,{iterator:Os,toStringTag:ef}=Symbol,Ms=(e=>t=>{const r=x_.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),jt=e=>(e=e.toLowerCase(),t=>Ms(t)===e),Ds=e=>t=>typeof t===e,{isArray:uo}=Array,so=Ds("undefined");function Ko(e){return e!==null&&!so(e)&&e.constructor!==null&&!so(e.constructor)&&mt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const tf=jt("ArrayBuffer");function w_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&tf(e.buffer),t}const C_=Ds("string"),mt=Ds("function"),nf=Ds("number"),Jo=e=>e!==null&&typeof e=="object",k_=e=>e===!0||e===!1,ts=e=>{if(Ms(e)!=="object")return!1;const t=_a(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ef in e)&&!(Os in e)},S_=e=>{if(!Jo(e)||Ko(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},E_=jt("Date"),P_=jt("File"),A_=jt("Blob"),R_=jt("FileList"),T_=e=>Jo(e)&&mt(e.pipe),O_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||mt(e.append)&&((t=Ms(e))==="formdata"||t==="object"&&mt(e.toString)&&e.toString()==="[object FormData]"))},M_=jt("URLSearchParams"),[D_,I_,N_,F_]=["ReadableStream","Request","Response","Headers"].map(jt),$_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wo(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),uo(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(Ko(e))return;const l=r?Object.getOwnPropertyNames(e):Object.keys(e),i=l.length;let a;for(n=0;n<i;n++)a=l[n],t.call(null,e[a],a,e)}}function of(e,t){if(Ko(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const In=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,rf=e=>!so(e)&&e!==In;function Vi(){const{caseless:e,skipUndefined:t}=rf(this)&&this||{},r={},n=(s,l)=>{const i=e&&of(r,l)||l;ts(r[i])&&ts(s)?r[i]=Vi(r[i],s):ts(s)?r[i]=Vi({},s):uo(s)?r[i]=s.slice():(!t||!so(s))&&(r[i]=s)};for(let s=0,l=arguments.length;s<l;s++)arguments[s]&&Wo(arguments[s],n);return r}const L_=(e,t,r,{allOwnKeys:n}={})=>(Wo(t,(s,l)=>{r&&mt(s)?e[l]=Zc(s,r):e[l]=s},{allOwnKeys:n}),e),q_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),U_=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},j_=(e,t,r,n)=>{let s,l,i;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),l=s.length;l-- >0;)i=s[l],(!n||n(i,e,t))&&!a[i]&&(t[i]=e[i],a[i]=!0);e=r!==!1&&_a(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},B_=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},V_=e=>{if(!e)return null;if(uo(e))return e;let t=e.length;if(!nf(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},H_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&_a(Uint8Array)),z_=(e,t)=>{const n=(e&&e[Os]).call(e);let s;for(;(s=n.next())&&!s.done;){const l=s.value;t.call(e,l[0],l[1])}},G_=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Q_=jt("HTMLFormElement"),K_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),vl=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),J_=jt("RegExp"),sf=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Wo(r,(s,l)=>{let i;(i=t(s,l,e))!==!1&&(n[l]=i||s)}),Object.defineProperties(e,n)},W_=e=>{sf(e,(t,r)=>{if(mt(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(mt(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},X_=(e,t)=>{const r={},n=s=>{s.forEach(l=>{r[l]=!0})};return uo(e)?n(e):n(String(e).split(t)),r},Y_=()=>{},Z_=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function ex(e){return!!(e&&mt(e.append)&&e[ef]==="FormData"&&e[Os])}const tx=e=>{const t=new Array(10),r=(n,s)=>{if(Jo(n)){if(t.indexOf(n)>=0)return;if(Ko(n))return n;if(!("toJSON"in n)){t[s]=n;const l=uo(n)?[]:{};return Wo(n,(i,a)=>{const c=r(i,s+1);!so(c)&&(l[a]=c)}),t[s]=void 0,l}}return n};return r(e,0)},nx=jt("AsyncFunction"),ox=e=>e&&(Jo(e)||mt(e))&&mt(e.then)&&mt(e.catch),af=((e,t)=>e?setImmediate:t?((r,n)=>(In.addEventListener("message",({source:s,data:l})=>{s===In&&l===r&&n.length&&n.shift()()},!1),s=>{n.push(s),In.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",mt(In.postMessage)),rx=typeof queueMicrotask<"u"?queueMicrotask.bind(In):typeof process<"u"&&process.nextTick||af,sx=e=>e!=null&&mt(e[Os]),G={isArray:uo,isArrayBuffer:tf,isBuffer:Ko,isFormData:O_,isArrayBufferView:w_,isString:C_,isNumber:nf,isBoolean:k_,isObject:Jo,isPlainObject:ts,isEmptyObject:S_,isReadableStream:D_,isRequest:I_,isResponse:N_,isHeaders:F_,isUndefined:so,isDate:E_,isFile:P_,isBlob:A_,isRegExp:J_,isFunction:mt,isStream:T_,isURLSearchParams:M_,isTypedArray:H_,isFileList:R_,forEach:Wo,merge:Vi,extend:L_,trim:$_,stripBOM:q_,inherits:U_,toFlatObject:j_,kindOf:Ms,kindOfTest:jt,endsWith:B_,toArray:V_,forEachEntry:z_,matchAll:G_,isHTMLForm:Q_,hasOwnProperty:vl,hasOwnProp:vl,reduceDescriptors:sf,freezeMethods:W_,toObjectSet:X_,toCamelCase:K_,noop:Y_,toFiniteNumber:Z_,findKey:of,global:In,isContextDefined:rf,isSpecCompliantForm:ex,toJSONObject:tx,isAsyncFn:nx,isThenable:ox,setImmediate:af,asap:rx,isIterable:sx};function we(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}G.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});const lf=we.prototype,uf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{uf[e]={value:e}});Object.defineProperties(we,uf);Object.defineProperty(lf,"isAxiosError",{value:!0});we.from=(e,t,r,n,s,l)=>{const i=Object.create(lf);G.toFlatObject(e,i,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const a=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return we.call(i,a,c,r,n,s),e&&i.cause==null&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",l&&Object.assign(i,l),i};const ix=null;function Hi(e){return G.isPlainObject(e)||G.isArray(e)}function df(e){return G.endsWith(e,"[]")?e.slice(0,-2):e}function hl(e,t,r){return e?e.concat(t).map(function(s,l){return s=df(s),!r&&l?"["+s+"]":s}).join(r?".":""):t}function ax(e){return G.isArray(e)&&!e.some(Hi)}const lx=G.toFlatObject(G,{},null,function(t){return/^is[A-Z]/.test(t)});function Is(e,t,r){if(!G.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=G.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,h){return!G.isUndefined(h[v])});const n=r.metaTokens,s=r.visitor||u,l=r.dots,i=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&G.isSpecCompliantForm(t);if(!G.isFunction(s))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(G.isDate(g))return g.toISOString();if(G.isBoolean(g))return g.toString();if(!c&&G.isBlob(g))throw new we("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(g)||G.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,v,h){let C=g;if(g&&!h&&typeof g=="object"){if(G.endsWith(v,"{}"))v=n?v:v.slice(0,-2),g=JSON.stringify(g);else if(G.isArray(g)&&ax(g)||(G.isFileList(g)||G.endsWith(v,"[]"))&&(C=G.toArray(g)))return v=df(v),C.forEach(function(k,T){!(G.isUndefined(k)||k===null)&&t.append(i===!0?hl([v],T,l):i===null?v:v+"[]",d(k))}),!1}return Hi(g)?!0:(t.append(hl(h,v,l),d(g)),!1)}const f=[],p=Object.assign(lx,{defaultVisitor:u,convertValue:d,isVisitable:Hi});function m(g,v){if(!G.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(g),G.forEach(g,function(C,E){(!(G.isUndefined(C)||C===null)&&s.call(t,C,G.isString(E)?E.trim():E,v,p))===!0&&m(C,v?v.concat(E):[E])}),f.pop()}}if(!G.isObject(e))throw new TypeError("data must be an object");return m(e),t}function yl(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function xa(e,t){this._pairs=[],e&&Is(e,this,t)}const cf=xa.prototype;cf.append=function(t,r){this._pairs.push([t,r])};cf.toString=function(t){const r=t?function(n){return t.call(this,n,yl)}:yl;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function ux(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ff(e,t,r){if(!t)return e;const n=r&&r.encode||ux;G.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let l;if(s?l=s(t,r):l=G.isURLSearchParams(t)?t.toString():new xa(t,r).toString(n),l){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class bl{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){G.forEach(this.handlers,function(n){n!==null&&t(n)})}}const pf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dx=typeof URLSearchParams<"u"?URLSearchParams:xa,cx=typeof FormData<"u"?FormData:null,fx=typeof Blob<"u"?Blob:null,px={isBrowser:!0,classes:{URLSearchParams:dx,FormData:cx,Blob:fx},protocols:["http","https","file","blob","url","data"]},wa=typeof window<"u"&&typeof document<"u",zi=typeof navigator=="object"&&navigator||void 0,mx=wa&&(!zi||["ReactNative","NativeScript","NS"].indexOf(zi.product)<0),gx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",vx=wa&&window.location.href||"http://localhost",hx=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:wa,hasStandardBrowserEnv:mx,hasStandardBrowserWebWorkerEnv:gx,navigator:zi,origin:vx},Symbol.toStringTag,{value:"Module"})),ot={...hx,...px};function yx(e,t){return Is(e,new ot.classes.URLSearchParams,{visitor:function(r,n,s,l){return ot.isNode&&G.isBuffer(r)?(this.append(n,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function bx(e){return G.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function _x(e){const t={},r=Object.keys(e);let n;const s=r.length;let l;for(n=0;n<s;n++)l=r[n],t[l]=e[l];return t}function mf(e){function t(r,n,s,l){let i=r[l++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),c=l>=r.length;return i=!i&&G.isArray(s)?s.length:i,c?(G.hasOwnProp(s,i)?s[i]=[s[i],n]:s[i]=n,!a):((!s[i]||!G.isObject(s[i]))&&(s[i]=[]),t(r,n,s[i],l)&&G.isArray(s[i])&&(s[i]=_x(s[i])),!a)}if(G.isFormData(e)&&G.isFunction(e.entries)){const r={};return G.forEachEntry(e,(n,s)=>{t(bx(n),s,r,0)}),r}return null}function xx(e,t,r){if(G.isString(e))try{return(t||JSON.parse)(e),G.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Xo={transitional:pf,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,l=G.isObject(t);if(l&&G.isHTMLForm(t)&&(t=new FormData(t)),G.isFormData(t))return s?JSON.stringify(mf(t)):t;if(G.isArrayBuffer(t)||G.isBuffer(t)||G.isStream(t)||G.isFile(t)||G.isBlob(t)||G.isReadableStream(t))return t;if(G.isArrayBufferView(t))return t.buffer;if(G.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return yx(t,this.formSerializer).toString();if((a=G.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Is(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return l||s?(r.setContentType("application/json",!1),xx(t)):t}],transformResponse:[function(t){const r=this.transitional||Xo.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(G.isResponse(t)||G.isReadableStream(t))return t;if(t&&G.isString(t)&&(n&&!this.responseType||s)){const i=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(a){if(i)throw a.name==="SyntaxError"?we.from(a,we.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ot.classes.FormData,Blob:ot.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],e=>{Xo.headers[e]={}});const wx=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Cx=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(i){s=i.indexOf(":"),r=i.substring(0,s).trim().toLowerCase(),n=i.substring(s+1).trim(),!(!r||t[r]&&wx[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},_l=Symbol("internals");function vo(e){return e&&String(e).trim().toLowerCase()}function ns(e){return e===!1||e==null?e:G.isArray(e)?e.map(ns):String(e)}function kx(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Sx=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Zs(e,t,r,n,s){if(G.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!G.isString(t)){if(G.isString(n))return t.indexOf(n)!==-1;if(G.isRegExp(n))return n.test(t)}}function Ex(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Px(e,t){const r=G.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,l,i){return this[n].call(this,t,s,l,i)},configurable:!0})})}let gt=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function l(a,c,d){const u=vo(c);if(!u)throw new Error("header name must be a non-empty string");const f=G.findKey(s,u);(!f||s[f]===void 0||d===!0||d===void 0&&s[f]!==!1)&&(s[f||c]=ns(a))}const i=(a,c)=>G.forEach(a,(d,u)=>l(d,u,c));if(G.isPlainObject(t)||t instanceof this.constructor)i(t,r);else if(G.isString(t)&&(t=t.trim())&&!Sx(t))i(Cx(t),r);else if(G.isObject(t)&&G.isIterable(t)){let a={},c,d;for(const u of t){if(!G.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[d=u[0]]=(c=a[d])?G.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}i(a,r)}else t!=null&&l(r,t,n);return this}get(t,r){if(t=vo(t),t){const n=G.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return kx(s);if(G.isFunction(r))return r.call(this,s,n);if(G.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=vo(t),t){const n=G.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Zs(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function l(i){if(i=vo(i),i){const a=G.findKey(n,i);a&&(!r||Zs(n,n[a],a,r))&&(delete n[a],s=!0)}}return G.isArray(t)?t.forEach(l):l(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const l=r[n];(!t||Zs(this,this[l],l,t,!0))&&(delete this[l],s=!0)}return s}normalize(t){const r=this,n={};return G.forEach(this,(s,l)=>{const i=G.findKey(n,l);if(i){r[i]=ns(s),delete r[l];return}const a=t?Ex(l):String(l).trim();a!==l&&delete r[l],r[a]=ns(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return G.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&G.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[_l]=this[_l]={accessors:{}}).accessors,s=this.prototype;function l(i){const a=vo(i);n[a]||(Px(s,i),n[a]=!0)}return G.isArray(t)?t.forEach(l):l(t),this}};gt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);G.reduceDescriptors(gt.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});G.freezeMethods(gt);function ei(e,t){const r=this||Xo,n=t||r,s=gt.from(n.headers);let l=n.data;return G.forEach(e,function(a){l=a.call(r,l,s.normalize(),t?t.status:void 0)}),s.normalize(),l}function gf(e){return!!(e&&e.__CANCEL__)}function co(e,t,r){we.call(this,e??"canceled",we.ERR_CANCELED,t,r),this.name="CanceledError"}G.inherits(co,we,{__CANCEL__:!0});function vf(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new we("Request failed with status code "+r.status,[we.ERR_BAD_REQUEST,we.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Ax(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Rx(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,l=0,i;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[l];i||(i=d),r[s]=c,n[s]=d;let f=l,p=0;for(;f!==s;)p+=r[f++],f=f%e;if(s=(s+1)%e,s===l&&(l=(l+1)%e),d-i<t)return;const m=u&&d-u;return m?Math.round(p*1e3/m):void 0}}function Tx(e,t){let r=0,n=1e3/t,s,l;const i=(d,u=Date.now())=>{r=u,s=null,l&&(clearTimeout(l),l=null),e(...d)};return[(...d)=>{const u=Date.now(),f=u-r;f>=n?i(d,u):(s=d,l||(l=setTimeout(()=>{l=null,i(s)},n-f)))},()=>s&&i(s)]}const vs=(e,t,r=3)=>{let n=0;const s=Rx(50,250);return Tx(l=>{const i=l.loaded,a=l.lengthComputable?l.total:void 0,c=i-n,d=s(c),u=i<=a;n=i;const f={loaded:i,total:a,progress:a?i/a:void 0,bytes:c,rate:d||void 0,estimated:d&&a&&u?(a-i)/d:void 0,event:l,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},r)},xl=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},wl=e=>(...t)=>G.asap(()=>e(...t)),Ox=ot.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ot.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ot.origin),ot.navigator&&/(msie|trident)/i.test(ot.navigator.userAgent)):()=>!0,Mx=ot.hasStandardBrowserEnv?{write(e,t,r,n,s,l,i){if(typeof document>"u")return;const a=[`${e}=${encodeURIComponent(t)}`];G.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),G.isString(n)&&a.push(`path=${n}`),G.isString(s)&&a.push(`domain=${s}`),l===!0&&a.push("secure"),G.isString(i)&&a.push(`SameSite=${i}`),document.cookie=a.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Dx(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ix(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function hf(e,t,r){let n=!Dx(t);return e&&(n||r==!1)?Ix(e,t):t}const Cl=e=>e instanceof gt?{...e}:e;function Un(e,t){t=t||{};const r={};function n(d,u,f,p){return G.isPlainObject(d)&&G.isPlainObject(u)?G.merge.call({caseless:p},d,u):G.isPlainObject(u)?G.merge({},u):G.isArray(u)?u.slice():u}function s(d,u,f,p){if(G.isUndefined(u)){if(!G.isUndefined(d))return n(void 0,d,f,p)}else return n(d,u,f,p)}function l(d,u){if(!G.isUndefined(u))return n(void 0,u)}function i(d,u){if(G.isUndefined(u)){if(!G.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function a(d,u,f){if(f in t)return n(d,u);if(f in e)return n(void 0,d)}const c={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(d,u,f)=>s(Cl(d),Cl(u),f,!0)};return G.forEach(Object.keys({...e,...t}),function(u){const f=c[u]||s,p=f(e[u],t[u],u);G.isUndefined(p)&&f!==a||(r[u]=p)}),r}const yf=e=>{const t=Un({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:l,headers:i,auth:a}=t;if(t.headers=i=gt.from(i),t.url=ff(hf(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),G.isFormData(r)){if(ot.hasStandardBrowserEnv||ot.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(G.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,f])=>{d.includes(u.toLowerCase())&&i.set(u,f)})}}if(ot.hasStandardBrowserEnv&&(n&&G.isFunction(n)&&(n=n(t)),n||n!==!1&&Ox(t.url))){const c=s&&l&&Mx.read(l);c&&i.set(s,c)}return t},Nx=typeof XMLHttpRequest<"u",Fx=Nx&&function(e){return new Promise(function(r,n){const s=yf(e);let l=s.data;const i=gt.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:d}=s,u,f,p,m,g;function v(){m&&m(),g&&g(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let h=new XMLHttpRequest;h.open(s.method.toUpperCase(),s.url,!0),h.timeout=s.timeout;function C(){if(!h)return;const k=gt.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),y={data:!a||a==="text"||a==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:k,config:e,request:h};vf(function(S){r(S),v()},function(S){n(S),v()},y),h=null}"onloadend"in h?h.onloadend=C:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(C)},h.onabort=function(){h&&(n(new we("Request aborted",we.ECONNABORTED,e,h)),h=null)},h.onerror=function(T){const y=T&&T.message?T.message:"Network Error",R=new we(y,we.ERR_NETWORK,e,h);R.event=T||null,n(R),h=null},h.ontimeout=function(){let T=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const y=s.transitional||pf;s.timeoutErrorMessage&&(T=s.timeoutErrorMessage),n(new we(T,y.clarifyTimeoutError?we.ETIMEDOUT:we.ECONNABORTED,e,h)),h=null},l===void 0&&i.setContentType(null),"setRequestHeader"in h&&G.forEach(i.toJSON(),function(T,y){h.setRequestHeader(y,T)}),G.isUndefined(s.withCredentials)||(h.withCredentials=!!s.withCredentials),a&&a!=="json"&&(h.responseType=s.responseType),d&&([p,g]=vs(d,!0),h.addEventListener("progress",p)),c&&h.upload&&([f,m]=vs(c),h.upload.addEventListener("progress",f),h.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(u=k=>{h&&(n(!k||k.type?new co(null,e,h):k),h.abort(),h=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const E=Ax(s.url);if(E&&ot.protocols.indexOf(E)===-1){n(new we("Unsupported protocol "+E+":",we.ERR_BAD_REQUEST,e));return}h.send(l||null)})},$x=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const l=function(d){if(!s){s=!0,a();const u=d instanceof Error?d:this.reason;n.abort(u instanceof we?u:new co(u instanceof Error?u.message:u))}};let i=t&&setTimeout(()=>{i=null,l(new we(`timeout ${t} of ms exceeded`,we.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),e=null)};e.forEach(d=>d.addEventListener("abort",l));const{signal:c}=n;return c.unsubscribe=()=>G.asap(a),c}},Lx=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},qx=async function*(e,t){for await(const r of Ux(e))yield*Lx(r,t)},Ux=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},kl=(e,t,r,n)=>{const s=qx(e,t);let l=0,i,a=c=>{i||(i=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){a(),c.close();return}let f=u.byteLength;if(r){let p=l+=f;r(p)}c.enqueue(new Uint8Array(u))}catch(d){throw a(d),d}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},Sl=64*1024,{isFunction:cr}=G,jx=(({Request:e,Response:t})=>({Request:e,Response:t}))(G.global),{ReadableStream:El,TextEncoder:Pl}=G.global,Al=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Bx=e=>{e=G.merge.call({skipUndefined:!0},jx,e);const{fetch:t,Request:r,Response:n}=e,s=t?cr(t):typeof fetch=="function",l=cr(r),i=cr(n);if(!s)return!1;const a=s&&cr(El),c=s&&(typeof Pl=="function"?(g=>v=>g.encode(v))(new Pl):async g=>new Uint8Array(await new r(g).arrayBuffer())),d=l&&a&&Al(()=>{let g=!1;const v=new r(ot.origin,{body:new El,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!v}),u=i&&a&&Al(()=>G.isReadableStream(new n("").body)),f={stream:u&&(g=>g.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!f[g]&&(f[g]=(v,h)=>{let C=v&&v[g];if(C)return C.call(v);throw new we(`Response type '${g}' is not supported`,we.ERR_NOT_SUPPORT,h)})});const p=async g=>{if(g==null)return 0;if(G.isBlob(g))return g.size;if(G.isSpecCompliantForm(g))return(await new r(ot.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(G.isArrayBufferView(g)||G.isArrayBuffer(g))return g.byteLength;if(G.isURLSearchParams(g)&&(g=g+""),G.isString(g))return(await c(g)).byteLength},m=async(g,v)=>{const h=G.toFiniteNumber(g.getContentLength());return h??p(v)};return async g=>{let{url:v,method:h,data:C,signal:E,cancelToken:k,timeout:T,onDownloadProgress:y,onUploadProgress:R,responseType:S,headers:w,withCredentials:O="same-origin",fetchOptions:$}=yf(g),U=t||fetch;S=S?(S+"").toLowerCase():"text";let I=$x([E,k&&k.toAbortSignal()],T),M=null;const j=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let B;try{if(R&&d&&h!=="get"&&h!=="head"&&(B=await m(w,C))!==0){let de=new r(v,{method:"POST",body:C,duplex:"half"}),P;if(G.isFormData(C)&&(P=de.headers.get("content-type"))&&w.setContentType(P),de.body){const[W,ke]=xl(B,vs(wl(R)));C=kl(de.body,Sl,W,ke)}}G.isString(O)||(O=O?"include":"omit");const A=l&&"credentials"in r.prototype,z={...$,signal:I,method:h.toUpperCase(),headers:w.normalize().toJSON(),body:C,duplex:"half",credentials:A?O:void 0};M=l&&new r(v,z);let te=await(l?U(M,$):U(v,z));const pe=u&&(S==="stream"||S==="response");if(u&&(y||pe&&j)){const de={};["status","statusText","headers"].forEach(Ee=>{de[Ee]=te[Ee]});const P=G.toFiniteNumber(te.headers.get("content-length")),[W,ke]=y&&xl(P,vs(wl(y),!0))||[];te=new n(kl(te.body,Sl,W,()=>{ke&&ke(),j&&j()}),de)}S=S||"text";let Re=await f[G.findKey(f,S)||"text"](te,g);return!pe&&j&&j(),await new Promise((de,P)=>{vf(de,P,{data:Re,headers:gt.from(te.headers),status:te.status,statusText:te.statusText,config:g,request:M})})}catch(A){throw j&&j(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new we("Network Error",we.ERR_NETWORK,g,M),{cause:A.cause||A}):we.from(A,A&&A.code,g,M)}}},Vx=new Map,bf=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:s}=t,l=[n,s,r];let i=l.length,a=i,c,d,u=Vx;for(;a--;)c=l[a],d=u.get(c),d===void 0&&u.set(c,d=a?new Map:Bx(t)),u=d;return d};bf();const Ca={http:ix,xhr:Fx,fetch:{get:bf}};G.forEach(Ca,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Rl=e=>`- ${e}`,Hx=e=>G.isFunction(e)||e===null||e===!1;function zx(e,t){e=G.isArray(e)?e:[e];const{length:r}=e;let n,s;const l={};for(let i=0;i<r;i++){n=e[i];let a;if(s=n,!Hx(n)&&(s=Ca[(a=String(n)).toLowerCase()],s===void 0))throw new we(`Unknown adapter '${a}'`);if(s&&(G.isFunction(s)||(s=s.get(t))))break;l[a||"#"+i]=s}if(!s){const i=Object.entries(l).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let a=r?i.length>1?`since :
`+i.map(Rl).join(`
`):" "+Rl(i[0]):"as no adapter specified";throw new we("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s}const _f={getAdapter:zx,adapters:Ca};function ti(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new co(null,e)}function Tl(e){return ti(e),e.headers=gt.from(e.headers),e.data=ei.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_f.getAdapter(e.adapter||Xo.adapter,e)(e).then(function(n){return ti(e),n.data=ei.call(e,e.transformResponse,n),n.headers=gt.from(n.headers),n},function(n){return gf(n)||(ti(e),n&&n.response&&(n.response.data=ei.call(e,e.transformResponse,n.response),n.response.headers=gt.from(n.response.headers))),Promise.reject(n)})}const xf="1.13.2",Ns={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ns[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ol={};Ns.transitional=function(t,r,n){function s(l,i){return"[Axios v"+xf+"] Transitional option '"+l+"'"+i+(n?". "+n:"")}return(l,i,a)=>{if(t===!1)throw new we(s(i," has been removed"+(r?" in "+r:"")),we.ERR_DEPRECATED);return r&&!Ol[i]&&(Ol[i]=!0,console.warn(s(i," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(l,i,a):!0}};Ns.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Gx(e,t,r){if(typeof e!="object")throw new we("options must be an object",we.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const l=n[s],i=t[l];if(i){const a=e[l],c=a===void 0||i(a,l,e);if(c!==!0)throw new we("option "+l+" must be "+c,we.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new we("Unknown option "+l,we.ERR_BAD_OPTION)}}const os={assertOptions:Gx,validators:Ns},Vt=os.validators;let Ln=class{constructor(t){this.defaults=t||{},this.interceptors={request:new bl,response:new bl}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Un(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:l}=r;n!==void 0&&os.assertOptions(n,{silentJSONParsing:Vt.transitional(Vt.boolean),forcedJSONParsing:Vt.transitional(Vt.boolean),clarifyTimeoutError:Vt.transitional(Vt.boolean)},!1),s!=null&&(G.isFunction(s)?r.paramsSerializer={serialize:s}:os.assertOptions(s,{encode:Vt.function,serialize:Vt.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),os.assertOptions(r,{baseUrl:Vt.spelling("baseURL"),withXsrfToken:Vt.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=l&&G.merge(l.common,l[r.method]);l&&G.forEach(["delete","get","head","post","put","patch","common"],g=>{delete l[g]}),r.headers=gt.concat(i,l);const a=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(c=c&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const d=[];this.interceptors.response.forEach(function(v){d.push(v.fulfilled,v.rejected)});let u,f=0,p;if(!c){const g=[Tl.bind(this),void 0];for(g.unshift(...a),g.push(...d),p=g.length,u=Promise.resolve(r);f<p;)u=u.then(g[f++],g[f++]);return u}p=a.length;let m=r;for(;f<p;){const g=a[f++],v=a[f++];try{m=g(m)}catch(h){v.call(this,h);break}}try{u=Tl.call(this,m)}catch(g){return Promise.reject(g)}for(f=0,p=d.length;f<p;)u=u.then(d[f++],d[f++]);return u}getUri(t){t=Un(this.defaults,t);const r=hf(t.baseURL,t.url,t.allowAbsoluteUrls);return ff(r,t.params,t.paramsSerializer)}};G.forEach(["delete","get","head","options"],function(t){Ln.prototype[t]=function(r,n){return this.request(Un(n||{},{method:t,url:r,data:(n||{}).data}))}});G.forEach(["post","put","patch"],function(t){function r(n){return function(l,i,a){return this.request(Un(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}Ln.prototype[t]=r(),Ln.prototype[t+"Form"]=r(!0)});let Qx=class wf{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const n=this;this.promise.then(s=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](s);n._listeners=null}),this.promise.then=s=>{let l;const i=new Promise(a=>{n.subscribe(a),l=a}).then(s);return i.cancel=function(){n.unsubscribe(l)},i},t(function(l,i,a){n.reason||(n.reason=new co(l,i,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new wf(function(s){t=s}),cancel:t}}};function Kx(e){return function(r){return e.apply(null,r)}}function Jx(e){return G.isObject(e)&&e.isAxiosError===!0}const Gi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Gi).forEach(([e,t])=>{Gi[t]=e});function Cf(e){const t=new Ln(e),r=Zc(Ln.prototype.request,t);return G.extend(r,Ln.prototype,t,{allOwnKeys:!0}),G.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return Cf(Un(e,s))},r}const Le=Cf(Xo);Le.Axios=Ln;Le.CanceledError=co;Le.CancelToken=Qx;Le.isCancel=gf;Le.VERSION=xf;Le.toFormData=Is;Le.AxiosError=we;Le.Cancel=Le.CanceledError;Le.all=function(t){return Promise.all(t)};Le.spread=Kx;Le.isAxiosError=Jx;Le.mergeConfig=Un;Le.AxiosHeaders=gt;Le.formToJSON=e=>mf(G.isHTMLForm(e)?new FormData(e):e);Le.getAdapter=_f.getAdapter;Le.HttpStatusCode=Gi;Le.default=Le;const{Axios:KN,AxiosError:JN,CanceledError:WN,isCancel:XN,CancelToken:YN,VERSION:ZN,all:eF,Cancel:tF,isAxiosError:nF,spread:oF,toFormData:rF,AxiosHeaders:sF,HttpStatusCode:iF,formToJSON:aF,getAdapter:lF,mergeConfig:uF}=Le,Ml="http://localhost:8000/api/v1";function Wx(){const e=N([]),t=N(!1),r=N(null),n=N({type:null,product_id:null,date_from:null,date_to:null}),s=async()=>{t.value=!0,r.value=null;try{const p=new URLSearchParams;n.value.type&&p.append("type",n.value.type),n.value.product_id&&p.append("product_id",n.value.product_id),n.value.date_from&&p.append("date_from",n.value.date_from),n.value.date_to&&p.append("date_to",n.value.date_to);const m=await Le.get(`${Ml}/movements?${p.toString()}`);if(m.data.success)e.value=m.data.data,console.log(" Mouvements chargs:",e.value.length);else throw new Error(m.data.message||"Erreur de chargement")}catch(p){console.error(" Erreur chargement mouvements:",p),r.value=p.response?.data?.message||p.message,e.value=[]}finally{t.value=!1}},l=async p=>{t.value=!0,r.value=null;try{const m=await Le.post(`${Ml}/movements`,p);if(m.data.success)return console.log(" Mouvement cr:",m.data.data),await s(),m.data.data;throw new Error(m.data.message||"Erreur de cration")}catch(m){throw console.error(" Erreur cration mouvement:",m),r.value=m.response?.data?.message||m.message,m}finally{t.value=!1}},i=K(()=>{const p=e.value.length,m=e.value.filter(k=>k.type==="in").length,g=e.value.filter(k=>k.type==="out").length,v=e.value.filter(k=>k.type==="adjustment").length,h=e.value.filter(k=>k.type==="consignment_return").length,C=e.value.filter(k=>k.type==="in").reduce((k,T)=>k+(T.quantity||0),0),E=e.value.filter(k=>k.type==="out").reduce((k,T)=>k+(T.quantity||0),0);return{total:p,entrees:m,sorties:g,ajustements:v,retours:h,quantiteEntree:C,quantiteSortie:E}}),a=K(()=>{const p={};return e.value.forEach(m=>{const g=new Date(m.created_at).toLocaleDateString("fr-FR");p[g]||(p[g]=[]),p[g].push(m)}),p}),c=(p,m)=>{n.value[p]=m,s()},d=()=>{n.value={type:null,product_id:null,date_from:null,date_to:null},s()},u=[{value:"in",label:"Entre",color:"green",icon:""},{value:"out",label:"Sortie",color:"red",icon:""},{value:"adjustment",label:"Ajustement",color:"orange",icon:""},{value:"consignment_return",label:"Retour consigne",color:"blue",icon:""}];return{movements:e,loading:t,error:r,filters:n,stats:i,movementsByDate:a,movementTypes:u,fetchMovements:s,createMovement:l,setFilter:c,clearFilters:d,getMovementTypeInfo:p=>u.find(m=>m.value===p)||u[0]}}const ho=e=>({in:"Entre",out:"Sortie",adjustment:"Ajustement",consignment_return:"Retour consigne",return:"Retour"})[e]||e,fr=e=>({in:"green",out:"red",adjustment:"orange",consignment_return:"blue",return:"blue"})[e]||"gray",Zt=e=>{if(!e)return"-";const t=new Date(e);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},Xx={class:"stock-movements-view"},Yx={class:"stats-cards"},Zx={class:"stat-card green"},ew={class:"stat-content"},tw={class:"stat-value"},nw={class:"stat-sub"},ow={class:"stat-card red"},rw={class:"stat-content"},sw={class:"stat-value"},iw={class:"stat-sub"},aw={class:"stat-card orange"},lw={class:"stat-content"},uw={class:"stat-value"},dw={class:"filters-section"},cw={class:"search-input"},fw=["value"],pw={key:0,class:"advanced-filters"},mw={class:"filter-row"},gw={class:"movements-table-container"},vw={class:"movements-table"},hw={key:0},yw={key:1},bw={colspan:"6",class:"error-cell"},_w={key:2},xw={class:"type-cell"},ww={class:"type-icon"},Cw={class:"type-label"},kw={class:"product-info"},Sw={class:"sku"},Ew={class:"quantity-cell"},Pw={class:"sign"},Aw={class:"value"},Rw={class:"stock-cell"},Tw={class:"stock-change"},Ow={class:"old-stock"},Mw={class:"new-stock"},Dw={class:"reason-cell"},Iw={class:"reason"},Nw={key:0,class:"reference"},Fw={class:"date-cell"},$w={class:"date"},Lw={class:"user"},qw={class:"info-cell"},Uw=["onClick"],jw={key:0,class:"table-footer"},Bw={class:"flex items-center justify-between w-full"},Vw={class:"results-info"},Hw={class:"font-medium"},zw={class:"font-medium"},Gw={class:"font-medium"},Qw={class:"flex items-center gap-2"},Kw=["disabled"],Jw={class:"flex items-center gap-1"},Ww={key:1,class:"px-2 text-gray-500"},Xw=["onClick"],Yw={key:2,class:"px-2 text-gray-500"},Zw=["disabled"],e2={class:"last-update mt-3 text-center"},t2={class:"modal-container printable"},n2={class:"modal-header"},o2={class:"flex items-center gap-3"},r2={class:"modal-subtitle"},s2={class:"modal-body"},i2={class:"detail-section"},a2={class:"detail-grid"},l2={class:"detail-item"},u2={class:"detail-value"},d2={class:"detail-item"},c2={class:"detail-value"},f2={key:0,class:"detail-item"},p2={class:"detail-value"},m2={key:1,class:"detail-item"},g2={class:"detail-value"},v2={class:"detail-section"},h2={class:"detail-grid"},y2={class:"detail-item"},b2={class:"detail-item"},_2={class:"detail-item"},x2={class:"detail-value stock-old"},w2={class:"detail-item"},C2={class:"detail-value stock-new"},k2={class:"detail-item full-width"},S2={class:"stock-difference"},E2={class:"old"},P2={class:"new"},A2={class:"detail-section"},R2={class:"detail-grid"},T2={class:"detail-item full-width"},O2={class:"detail-value"},M2={key:0,class:"detail-item full-width"},D2={class:"detail-value"},I2={key:1,class:"detail-item"},N2={class:"detail-value"},F2={key:2,class:"detail-item"},$2={class:"detail-value"},L2={key:3,class:"detail-item"},q2={class:"detail-value"},U2={key:4,class:"detail-item"},j2={class:"detail-value highlight"},B2={class:"detail-section"},V2={class:"detail-grid"},H2={class:"detail-item"},z2={class:"detail-value"},G2={class:"detail-item"},Q2={class:"detail-value"},K2={key:0,class:"detail-item"},J2={class:"detail-value"},W2={class:"print-only print-document"},X2={class:"print-badge-section"},Y2={class:"badge-icon"},Z2={class:"badge-text"},eC={class:"print-section"},tC={class:"print-table"},nC={class:"value-col strong"},oC={class:"value-col"},rC={key:0},sC={class:"value-col"},iC={key:1},aC={class:"value-col"},lC={class:"print-section"},uC={class:"print-table"},dC={class:"value-col strong"},cC={class:"value-col"},fC={class:"value-col strong"},pC={class:"value-col"},mC={class:"print-section"},gC={class:"print-table"},vC={class:"value-col"},hC={key:0},yC={class:"value-col"},bC={key:1},_C={class:"value-col"},xC={key:2},wC={class:"value-col"},CC={key:3},kC={class:"value-col"},SC={key:4},EC={class:"value-col strong highlight"},PC={class:"print-section"},AC={class:"print-table"},RC={class:"value-col"},TC={class:"value-col"},OC={key:0},MC={class:"value-col"},DC={class:"print-footer"},IC={class:"footer-content"},NC={class:"footer-right"},FC={class:"footer-text"},$C={class:"modal-container settings-modal"},LC={class:"modal-header"},qC={class:"modal-body settings-body"},UC={class:"settings-section"},jC={class:"settings-grid"},BC={class:"form-group"},VC={class:"form-group"},HC={class:"settings-section"},zC={class:"settings-grid"},GC={class:"form-group"},QC={class:"form-group"},KC={class:"form-group"},JC={class:"form-group"},WC={class:"settings-section"},XC={class:"settings-grid"},YC={class:"form-group"},ZC={class:"form-group"},ek={class:"settings-section"},tk={class:"settings-checkboxes"},nk={class:"checkbox-label"},ok={class:"checkbox-label"},rk={class:"checkbox-label"},sk={class:"checkbox-label"},ik={class:"checkbox-label"},ak={class:"checkbox-label"},lk={class:"modal-footer"},uk={__name:"StockMovementsView",setup(e){const{movements:t,loading:r,error:n,filters:s,stats:l,movementTypes:i,fetchMovements:a,clearFilters:c,getMovementTypeInfo:d}=Wx(),u=N(""),f=N(!1),p=N(new Date().toLocaleString("fr-FR")),m=N(1),g=N(20),v=N(!1),h=N(null),C=N(!1),E=N({name:"SmartDrinkStore",slogan:"Systme de Gestion de Stock",address:"Yaound, Cameroun",phone:"+237 6 XX XX XX XX",email:"contact@smartdrinkstore.cm",website:"www.smartdrinkstore.cm",registrationNumber:"RC/YDE/2024/B/XXXXX",taxId:"M012345678901X",printSettings:{showAddress:!0,showPhone:!0,showEmail:!1,showWebsite:!1,showRegistrationNumber:!1,showTaxId:!1}}),k=()=>{const de=localStorage.getItem("company_config");if(de)try{E.value={...E.value,...JSON.parse(de)}}catch(P){console.error("Erreur chargement config:",P)}},T=()=>{try{localStorage.setItem("company_config",JSON.stringify(E.value)),alert(" Configuration sauvegarde !"),C.value=!1}catch(de){console.error("Erreur sauvegarde config:",de),alert(" Erreur lors de la sauvegarde")}},y=K(()=>{if(!u.value)return t.value;const de=u.value.toLowerCase();return t.value.filter(P=>{const W=P.product?.name?.toLowerCase()||"",ke=P.product?.sku?.toLowerCase()||"",Ee=P.reference?.toLowerCase()||"";return W.includes(de)||ke.includes(de)||Ee.includes(de)})}),R=K(()=>{const de=(m.value-1)*g.value,P=de+g.value;return y.value.slice(de,P)}),S=K(()=>Math.ceil(y.value.length/g.value)),w=K(()=>m.value>1),O=K(()=>m.value<S.value),$=de=>{de>=1&&de<=S.value&&(m.value=de,window.scrollTo({top:0,behavior:"smooth"}))},U=()=>{w.value&&(m.value--,window.scrollTo({top:0,behavior:"smooth"}))},I=()=>{O.value&&(m.value++,window.scrollTo({top:0,behavior:"smooth"}))},M=()=>{m.value=1,a()},j=de=>{const P=de.target.value,W=new Date;switch(P){case"today":s.value.date_from=W.toISOString().split("T")[0],s.value.date_to=W.toISOString().split("T")[0];break;case"week":const ke=new Date(W);ke.setDate(W.getDate()-7),s.value.date_from=ke.toISOString().split("T")[0],s.value.date_to=W.toISOString().split("T")[0];break;case"month":const Ee=new Date(W);Ee.setMonth(W.getMonth()-1),s.value.date_from=Ee.toISOString().split("T")[0],s.value.date_to=W.toISOString().split("T")[0];break;case"all":s.value.date_from=null,s.value.date_to=null;break}M()},B=()=>{f.value=!f.value},A=()=>{u.value="",m.value=1,c()},z=de=>{h.value=de,v.value=!0},te=()=>{v.value=!1,h.value=null},pe=de=>de.new_stock-de.previous_stock,Re=()=>{k();const de=document.querySelector(".print-document");if(!de){console.error("Contenu d'impression introuvable");return}const P=window.open("","_blank","width=800,height=600");if(!P){alert("Veuillez autoriser les pop-ups pour imprimer");return}const W=E.value;let ke="";W.printSettings.showAddress&&(ke+=`<p class="company-details">${W.address}</p>`),W.printSettings.showPhone&&(ke+=`<p class="company-details">${W.phone}</p>`),W.printSettings.showEmail&&(ke+=`<p class="company-details">${W.email}</p>`),W.printSettings.showWebsite&&(ke+=`<p class="company-details">${W.website}</p>`);let Ee="";W.printSettings.showRegistrationNumber&&(Ee+=`<p class="company-details">N Immat: ${W.registrationNumber}</p>`),W.printSettings.showTaxId&&(Ee+=`<p class="company-details">N Fiscal: ${W.taxId}</p>`),P.document.write(`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="UTF-8">
        <title>Mouvement de Stock #${h.value?.id} - ${W.name}</title>
        <style>
          * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
          }
          
          body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #000;
            background: white;
            padding: 20px 30px;
          }
          
          .print-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 3px solid #000;
          }
          
          .company-name {
            font-size: 26px;
            font-weight: 800;
            color: #000;
            margin: 0 0 5px 0;
          }
          
          .company-details {
            font-size: 11px;
            color: #666;
            margin: 1px 0;
          }
          
          .document-title {
            font-size: 22px;
            font-weight: 800;
            color: #000;
            margin: 0 0 5px 0;
            letter-spacing: 1px;
          }
          
          .document-ref, .document-date {
            font-size: 11px;
            color: #666;
            margin: 2px 0;
          }
          
          .print-badge-section {
            text-align: center;
            margin: 20px 0;
          }
          
          .print-badge {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 12px 30px;
            border: 3px solid #000;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 800;
          }
          
          .print-badge.green {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
          }
          
          .print-badge.red {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
          }
          
          .print-badge.orange {
            border-color: #ffc107;
            background: #fff3cd;
            color: #856404;
          }
          
          .print-badge.blue {
            border-color: #17a2b8;
            background: #d1ecf1;
            color: #0c5460;
          }
          
          .print-section {
            margin-bottom: 20px;
          }
          
          .print-section-title {
            font-size: 13px;
            font-weight: 800;
            color: #000;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 0 0 10px 0;
            padding-bottom: 6px;
            border-bottom: 2px solid #000;
          }
          
          .print-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
          }
          
          .print-table tr {
            border-bottom: 1px solid #e0e0e0;
          }
          
          .print-table td {
            padding: 8px 0;
            font-size: 12px;
            vertical-align: top;
          }
          
          .label-col {
            width: 35%;
            font-weight: 600;
            color: #666;
          }
          
          .value-col {
            width: 65%;
            color: #000;
            font-weight: 400;
          }
          
          .value-col.strong {
            font-weight: 700;
          }
          
          .value-col.highlight {
            font-weight: 800;
            font-size: 14px;
          }
          
          .quantity-value {
            font-size: 16px;
            font-weight: 800;
          }
          
          .quantity-value.in {
            color: #28a745;
          }
          
          .quantity-value.out {
            color: #dc3545;
          }
          
          .text-success {
            color: #28a745;
            font-weight: 700;
          }
          
          .text-danger {
            color: #dc3545;
            font-weight: 700;
          }
          
          .print-footer {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 3px solid #000;
          }
          
          .footer-content {
            display: flex;
            justify-content: space-between;
          }
          
          .footer-text {
            font-size: 10px;
            color: #666;
            margin: 3px 0;
          }
          
          @media print {
            @page {
              margin: 1.5cm;
              size: A4 portrait;
            }
            
            * {
              -webkit-print-color-adjust: exact !important;
              print-color-adjust: exact !important;
              color-adjust: exact !important;
            }
          }
        </style>
      </head>
      <body>
        <div class="print-header">
          <div class="company-info">
            <h1 class="company-name">${W.name}</h1>
            <p class="company-details">${W.slogan}</p>
            ${ke}
            ${Ee}
          </div>
          <div class="document-info">
            <h2 class="document-title">MOUVEMENT DE STOCK</h2>
            <p class="document-ref">Rf: #${h.value?.id}</p>
            <p class="document-date">${Zt(new Date)}</p>
          </div>
        </div>
        ${de.innerHTML}
      </body>
    </html>
  `),P.document.close(),P.onload=()=>{setTimeout(()=>{P.print()},250)}};return vt(()=>{k(),a()}),(de,P)=>(_(),x("div",Xx,[P[116]||(P[116]=Dt('<div class="page-header" data-v-724901ad><div class="header-left" data-v-724901ad><h1 class="page-title" data-v-724901ad><span class="icon" data-v-724901ad></span> Mouvements de Stock </h1><p class="page-subtitle" data-v-724901ad>Historique complet des entres, sorties et ajustements de stock</p></div></div>',1)),o("div",Yx,[o("div",Zx,[P[26]||(P[26]=o("div",{class:"stat-icon"},"",-1)),o("div",ew,[P[25]||(P[25]=o("div",{class:"stat-label"},"Entres totales",-1)),o("div",tw,b(ye(l).entrees),1),o("div",nw,b(ye(l).quantiteEntree)+" units",1)])]),o("div",ow,[P[28]||(P[28]=o("div",{class:"stat-icon"},"",-1)),o("div",rw,[P[27]||(P[27]=o("div",{class:"stat-label"},"Sorties totales",-1)),o("div",sw,b(ye(l).sorties),1),o("div",iw,b(ye(l).quantiteSortie)+" units",1)])]),o("div",aw,[P[30]||(P[30]=o("div",{class:"stat-icon"},"",-1)),o("div",lw,[P[29]||(P[29]=o("div",{class:"stat-label"},"Ajustements",-1)),o("div",uw,b(ye(l).ajustements),1)])]),P[31]||(P[31]=Dt('<div class="stat-card purple" data-v-724901ad><div class="stat-icon" data-v-724901ad></div><div class="stat-content" data-v-724901ad><div class="stat-label" data-v-724901ad>Alertes stock</div><div class="stat-value" data-v-724901ad>2</div></div></div>',1))]),o("div",dw,[o("div",cw,[P[32]||(P[32]=o("span",{class:"search-icon"},"",-1)),Q(o("input",{type:"text",placeholder:"Rechercher un produit, SKU, rfrence...","onUpdate:modelValue":P[0]||(P[0]=W=>u.value=W)},null,512),[[oe,u.value]])]),Q(o("select",{"onUpdate:modelValue":P[1]||(P[1]=W=>ye(s).type=W),onChange:M,class:"filter-select"},[P[33]||(P[33]=o("option",{value:null}," Tous les types",-1)),(_(!0),x(fe,null,be(ye(i),W=>(_(),x("option",{key:W.value,value:W.value},b(W.icon)+" "+b(W.label),9,fw))),128))],544),[[$e,ye(s).type]]),o("select",{class:"filter-select",onChange:j},[...P[34]||(P[34]=[o("option",{value:"today"}," Aujourd'hui",-1),o("option",{value:"week"},"Cette semaine",-1),o("option",{value:"month"},"Ce mois",-1),o("option",{value:"all"},"Tout",-1)])],32),o("button",{class:"filter-btn",onClick:B},[...P[35]||(P[35]=[o("span",null," Plus de filtres",-1)])]),o("button",{class:"filter-btn",onClick:P[2]||(P[2]=W=>C.value=!0),title:"Configuration de l'entreprise"},[...P[36]||(P[36]=[o("span",null," Config",-1)])])]),f.value?(_(),x("div",pw,[o("div",mw,[o("label",null,[P[37]||(P[37]=ne(" Date de dbut ",-1)),Q(o("input",{type:"date","onUpdate:modelValue":P[3]||(P[3]=W=>ye(s).date_from=W),onChange:M},null,544),[[oe,ye(s).date_from]])]),o("label",null,[P[38]||(P[38]=ne(" Date de fin ",-1)),Q(o("input",{type:"date","onUpdate:modelValue":P[4]||(P[4]=W=>ye(s).date_to=W),onChange:M},null,544),[[oe,ye(s).date_to]])]),o("button",{onClick:A,class:"btn-secondary"}," Rinitialiser ")])])):L("",!0),o("div",gw,[o("table",vw,[P[43]||(P[43]=o("thead",null,[o("tr",null,[o("th",null,"TYPE & PRODUIT"),o("th",null,"QUANTIT"),o("th",null,"STOCK"),o("th",null,"RAISON & ORIGINE"),o("th",null,"DATE & UTILISATEUR"),o("th",null,"INFOS")])],-1)),o("tbody",null,[ye(r)?(_(),x("tr",hw,[...P[39]||(P[39]=[o("td",{colspan:"6",class:"loading-cell"},[o("div",{class:"loader"}),o("p",null,"Chargement des mouvements...")],-1)])])):ye(n)?(_(),x("tr",yw,[o("td",bw,[P[40]||(P[40]=o("div",{class:"error-icon"},"",-1)),o("p",null,b(ye(n)),1),o("button",{onClick:P[5]||(P[5]=(...W)=>ye(a)&&ye(a)(...W)),class:"btn-retry"}," Ressayer ")])])):R.value.length===0?(_(),x("tr",_w,[...P[41]||(P[41]=[o("td",{colspan:"6",class:"empty-cell"},[o("div",{class:"empty-icon"},""),o("p",null,"Aucun mouvement trouv"),o("small",null,"Essayez de modifier vos filtres")],-1)])])):L("",!0),(_(!0),x(fe,null,be(R.value,W=>(_(),x("tr",{key:W.id,class:"movement-row"},[o("td",xw,[o("div",{class:le(["type-badge",ye(fr)(W.type)])},[o("span",ww,b(ye(d)(W.type).icon),1),o("span",Cw,b(ye(ho)(W.type)),1)],2),o("div",kw,[o("strong",null,b(W.product?.name||"Produit inconnu"),1),o("span",Sw,"SKU: "+b(W.product?.sku||"-"),1)])]),o("td",Ew,[o("div",{class:le(["quantity",W.type])},[o("span",Pw,b(W.type==="in"?"+":"-"),1),o("span",Aw,b(W.quantity),1)],2)]),o("td",Rw,[o("div",Tw,[o("span",Ow,b(W.previous_stock),1),P[42]||(P[42]=o("span",{class:"arrow"},"",-1)),o("span",Mw,b(W.new_stock),1)])]),o("td",Dw,[o("div",Iw,b(W.reason||"-"),1),W.reference?(_(),x("div",Nw," Rf: "+b(W.reference),1)):L("",!0)]),o("td",Fw,[o("div",$w,b(ye(Zt)(W.created_at)),1),o("div",Lw,b(W.user?.name||"Systme"),1)]),o("td",qw,[o("button",{class:"btn-icon",onClick:ke=>z(W)},"  ",8,Uw)])]))),128))])]),!ye(r)&&R.value.length>0?(_(),x("div",jw,[o("div",Bw,[o("div",Vw,[P[44]||(P[44]=ne(" Affichage de ",-1)),o("span",Hw,b((m.value-1)*g.value+1),1),P[45]||(P[45]=ne("  ",-1)),o("span",zw,b(Math.min(m.value*g.value,y.value.length)),1),P[46]||(P[46]=ne(" sur ",-1)),o("span",Gw,b(y.value.length),1),P[47]||(P[47]=ne(" mouvement(s) ",-1))]),o("div",Qw,[o("button",{onClick:U,disabled:!w.value,class:le(["px-4 py-2 rounded-lg font-medium transition",w.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"])},"  Prcdent ",10,Kw),o("div",Jw,[m.value>3?(_(),x("button",{key:0,onClick:P[6]||(P[6]=W=>$(1)),class:"w-10 h-10 rounded-lg font-medium transition bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}," 1 ")):L("",!0),m.value>4?(_(),x("span",Ww,"...")):L("",!0),(_(!0),x(fe,null,be(S.value,W=>Q((_(),x("button",{key:W,onClick:ke=>$(W),class:le(["w-10 h-10 rounded-lg font-medium transition",W===m.value?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"])},b(W),11,Xw)),[[Po,Math.abs(W-m.value)<=2]])),128)),m.value<S.value-3?(_(),x("span",Yw,"...")):L("",!0),m.value<S.value-2?(_(),x("button",{key:3,onClick:P[7]||(P[7]=W=>$(S.value)),class:"w-10 h-10 rounded-lg font-medium transition bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"},b(S.value),1)):L("",!0)]),o("button",{onClick:I,disabled:!O.value,class:le(["px-4 py-2 rounded-lg font-medium transition",O.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"])}," Suivant  ",10,Zw)])]),o("div",e2," Dernire mise  jour: "+b(p.value),1)])):L("",!0)]),Te(fs,{name:"modal"},{default:qo(()=>[v.value?(_(),x("div",{key:0,class:le(["modal-overlay",{printing:!1}]),onClick:xe(te,["self"])},[o("div",t2,[o("div",n2,[o("div",o2,[o("div",{class:le(["modal-icon",ye(fr)(h.value?.type)])},b(ye(d)(h.value?.type).icon),3),o("div",null,[P[48]||(P[48]=o("h2",{class:"modal-title"},"Dtails du mouvement",-1)),o("p",r2,b(ye(ho)(h.value?.type))+" - Rf: #"+b(h.value?.id),1)])]),o("button",{onClick:te,class:"modal-close"},"  ")]),o("div",s2,[o("div",i2,[P[53]||(P[53]=o("h3",{class:"section-title"}," Produit concern",-1)),o("div",a2,[o("div",l2,[P[49]||(P[49]=o("span",{class:"detail-label"},"Nom du produit",-1)),o("span",u2,b(h.value?.product?.name||"-"),1)]),o("div",d2,[P[50]||(P[50]=o("span",{class:"detail-label"},"Code SKU",-1)),o("span",c2,b(h.value?.product?.sku||"-"),1)]),h.value?.product?.barcode?(_(),x("div",f2,[P[51]||(P[51]=o("span",{class:"detail-label"},"Code-barres",-1)),o("span",p2,b(h.value?.product?.barcode),1)])):L("",!0),h.value?.product?.category?(_(),x("div",m2,[P[52]||(P[52]=o("span",{class:"detail-label"},"Catgorie",-1)),o("span",g2,b(h.value?.product?.category?.name||"-"),1)])):L("",!0)])]),o("div",v2,[P[60]||(P[60]=o("h3",{class:"section-title"}," Informations du mouvement",-1)),o("div",h2,[o("div",y2,[P[54]||(P[54]=o("span",{class:"detail-label"},"Type de mouvement",-1)),o("span",{class:le(["detail-badge",ye(fr)(h.value?.type)])},b(ye(d)(h.value?.type).icon)+" "+b(ye(ho)(h.value?.type)),3)]),o("div",b2,[P[55]||(P[55]=o("span",{class:"detail-label"},"Quantit",-1)),o("span",{class:le(["detail-quantity",h.value?.type])},b(h.value?.type==="in"?"+":"-")+b(h.value?.quantity),3)]),o("div",_2,[P[56]||(P[56]=o("span",{class:"detail-label"},"Stock avant",-1)),o("span",x2,b(h.value?.previous_stock)+" units",1)]),o("div",w2,[P[57]||(P[57]=o("span",{class:"detail-label"},"Stock aprs",-1)),o("span",C2,b(h.value?.new_stock)+" units",1)]),o("div",k2,[P[59]||(P[59]=o("span",{class:"detail-label"},"Diffrence",-1)),o("div",S2,[o("span",E2,b(h.value?.previous_stock),1),P[58]||(P[58]=o("span",{class:"arrow"},"",-1)),o("span",P2,b(h.value?.new_stock),1),o("span",{class:le(["diff",pe(h.value)>=0?"positive":"negative"])}," ("+b(pe(h.value)>=0?"+":"")+b(pe(h.value))+") ",3)])])])]),o("div",A2,[P[67]||(P[67]=o("h3",{class:"section-title"}," Dtails complmentaires",-1)),o("div",R2,[o("div",T2,[P[61]||(P[61]=o("span",{class:"detail-label"},"Raison / Motif",-1)),o("span",O2,b(h.value?.reason||"Non spcifi"),1)]),h.value?.reference?(_(),x("div",M2,[P[62]||(P[62]=o("span",{class:"detail-label"},"Rfrence",-1)),o("span",D2,b(h.value?.reference),1)])):L("",!0),h.value?.expiry_date?(_(),x("div",I2,[P[63]||(P[63]=o("span",{class:"detail-label"},"Date d'expiration",-1)),o("span",N2,b(ye(Zt)(h.value?.expiry_date)),1)])):L("",!0),h.value?.empty_packages?(_(),x("div",F2,[P[64]||(P[64]=o("span",{class:"detail-label"},"Emballages vides",-1)),o("span",$2,b(h.value?.empty_packages),1)])):L("",!0),h.value?.unit_price?(_(),x("div",L2,[P[65]||(P[65]=o("span",{class:"detail-label"},"Prix unitaire",-1)),o("span",q2,b(h.value?.unit_price)+" FCFA",1)])):L("",!0),h.value?.unit_price?(_(),x("div",U2,[P[66]||(P[66]=o("span",{class:"detail-label"},"Valeur totale",-1)),o("span",j2,b((h.value?.quantity*h.value?.unit_price).toLocaleString())+" FCFA ",1)])):L("",!0)])]),o("div",B2,[P[71]||(P[71]=o("h3",{class:"section-title"}," Traabilit",-1)),o("div",V2,[o("div",H2,[P[68]||(P[68]=o("span",{class:"detail-label"},"Utilisateur",-1)),o("span",z2,b(h.value?.user?.name||"Systme"),1)]),o("div",G2,[P[69]||(P[69]=o("span",{class:"detail-label"},"Date de cration",-1)),o("span",Q2,b(ye(Zt)(h.value?.created_at)),1)]),h.value?.updated_at!==h.value?.created_at?(_(),x("div",K2,[P[70]||(P[70]=o("span",{class:"detail-label"},"Dernire modification",-1)),o("span",J2,b(ye(Zt)(h.value?.updated_at)),1)])):L("",!0)])])]),o("div",{class:"modal-footer no-print"},[o("button",{onClick:te,class:"btn-secondary"}," Fermer "),o("button",{class:"btn-primary",onClick:Re},"  Imprimer ")]),o("div",W2,[o("div",X2,[o("div",{class:le(["print-badge",ye(fr)(h.value?.type)])},[o("span",Y2,b(ye(d)(h.value?.type).icon),1),o("span",Z2,b(ye(ho)(h.value?.type).toUpperCase()),1)],2)]),o("div",eC,[P[76]||(P[76]=o("h3",{class:"print-section-title"},"PRODUIT CONCERN",-1)),o("table",tC,[o("tbody",null,[o("tr",null,[P[72]||(P[72]=o("td",{class:"label-col"},"Nom du produit :",-1)),o("td",nC,b(h.value?.product?.name||"-"),1)]),o("tr",null,[P[73]||(P[73]=o("td",{class:"label-col"},"Code SKU :",-1)),o("td",oC,b(h.value?.product?.sku||"-"),1)]),h.value?.product?.barcode?(_(),x("tr",rC,[P[74]||(P[74]=o("td",{class:"label-col"},"Code-barres :",-1)),o("td",sC,b(h.value?.product?.barcode),1)])):L("",!0),h.value?.product?.category?(_(),x("tr",iC,[P[75]||(P[75]=o("td",{class:"label-col"},"Catgorie :",-1)),o("td",aC,b(h.value?.product?.category?.name||"-"),1)])):L("",!0)])])]),o("div",lC,[P[82]||(P[82]=o("h3",{class:"print-section-title"},"DTAILS DU MOUVEMENT",-1)),o("table",uC,[o("tbody",null,[o("tr",null,[P[77]||(P[77]=o("td",{class:"label-col"},"Type de mouvement :",-1)),o("td",dC,b(ye(ho)(h.value?.type)),1)]),o("tr",null,[P[78]||(P[78]=o("td",{class:"label-col"},"Quantit :",-1)),o("td",{class:le(["value-col quantity-value",h.value?.type])},b(h.value?.type==="in"?"+":"-")+b(h.value?.quantity)+" units ",3)]),o("tr",null,[P[79]||(P[79]=o("td",{class:"label-col"},"Stock avant :",-1)),o("td",cC,b(h.value?.previous_stock)+" units",1)]),o("tr",null,[P[80]||(P[80]=o("td",{class:"label-col"},"Stock aprs :",-1)),o("td",fC,b(h.value?.new_stock)+" units",1)]),o("tr",null,[P[81]||(P[81]=o("td",{class:"label-col"},"Diffrence :",-1)),o("td",pC,[o("span",{class:le(pe(h.value)>=0?"text-success":"text-danger")},b(pe(h.value)>=0?"+":"")+b(pe(h.value))+" units ",3)])])])])]),o("div",mC,[P[89]||(P[89]=o("h3",{class:"print-section-title"},"INFORMATIONS COMPLMENTAIRES",-1)),o("table",gC,[o("tbody",null,[o("tr",null,[P[83]||(P[83]=o("td",{class:"label-col"},"Raison / Motif :",-1)),o("td",vC,b(h.value?.reason||"Non spcifi"),1)]),h.value?.reference?(_(),x("tr",hC,[P[84]||(P[84]=o("td",{class:"label-col"},"Rfrence :",-1)),o("td",yC,b(h.value?.reference),1)])):L("",!0),h.value?.expiry_date?(_(),x("tr",bC,[P[85]||(P[85]=o("td",{class:"label-col"},"Date d'expiration :",-1)),o("td",_C,b(ye(Zt)(h.value?.expiry_date)),1)])):L("",!0),h.value?.empty_packages?(_(),x("tr",xC,[P[86]||(P[86]=o("td",{class:"label-col"},"Emballages vides :",-1)),o("td",wC,b(h.value?.empty_packages),1)])):L("",!0),h.value?.unit_price?(_(),x("tr",CC,[P[87]||(P[87]=o("td",{class:"label-col"},"Prix unitaire :",-1)),o("td",kC,b(h.value?.unit_price?.toLocaleString())+" FCFA",1)])):L("",!0),h.value?.unit_price?(_(),x("tr",SC,[P[88]||(P[88]=o("td",{class:"label-col"},"Valeur totale :",-1)),o("td",EC,b((h.value?.quantity*h.value?.unit_price).toLocaleString())+" FCFA ",1)])):L("",!0)])])]),o("div",PC,[P[93]||(P[93]=o("h3",{class:"print-section-title"},"TRAABILIT",-1)),o("table",AC,[o("tbody",null,[o("tr",null,[P[90]||(P[90]=o("td",{class:"label-col"},"Utilisateur :",-1)),o("td",RC,b(h.value?.user?.name||"Systme"),1)]),o("tr",null,[P[91]||(P[91]=o("td",{class:"label-col"},"Date de cration :",-1)),o("td",TC,b(ye(Zt)(h.value?.created_at)),1)]),h.value?.updated_at!==h.value?.created_at?(_(),x("tr",OC,[P[92]||(P[92]=o("td",{class:"label-col"},"Dernire modification :",-1)),o("td",MC,b(ye(Zt)(h.value?.updated_at)),1)])):L("",!0)])])]),o("div",DC,[P[96]||(P[96]=o("div",{class:"print-divider"},null,-1)),o("div",IC,[P[95]||(P[95]=o("div",{class:"footer-left"},[o("p",{class:"footer-text"},"Document gnr automatiquement"),o("p",{class:"footer-text"},"SmartDrinkStore - Gestion de Stock")],-1)),o("div",NC,[o("p",FC,"Date d'impression : "+b(ye(Zt)(new Date)),1),P[94]||(P[94]=o("p",{class:"footer-text"},"Page 1/1",-1))])])])])])])):L("",!0)]),_:1}),Te(fs,{name:"modal"},{default:qo(()=>[C.value?(_(),x("div",{key:0,class:"modal-overlay",onClick:P[24]||(P[24]=xe(W=>C.value=!1,["self"]))},[o("div",$C,[o("div",LC,[P[97]||(P[97]=o("div",{class:"flex items-center gap-3"},[o("div",{class:"modal-icon",style:{background:"#e7d7f8"}},"  "),o("div",null,[o("h2",{class:"modal-title"},"Configuration de l'entreprise"),o("p",{class:"modal-subtitle"},"Informations affiches sur les documents")])],-1)),o("button",{onClick:P[8]||(P[8]=W=>C.value=!1),class:"modal-close"},"  ")]),o("div",qC,[o("div",UC,[P[100]||(P[100]=o("h3",{class:"settings-title"}," Informations principales",-1)),o("div",jC,[o("div",BC,[P[98]||(P[98]=o("label",null,"Nom de l'entreprise *",-1)),Q(o("input",{"onUpdate:modelValue":P[9]||(P[9]=W=>E.value.name=W),type:"text",class:"form-input"},null,512),[[oe,E.value.name]])]),o("div",VC,[P[99]||(P[99]=o("label",null,"Slogan / Description",-1)),Q(o("input",{"onUpdate:modelValue":P[10]||(P[10]=W=>E.value.slogan=W),type:"text",class:"form-input"},null,512),[[oe,E.value.slogan]])])])]),o("div",HC,[P[105]||(P[105]=o("h3",{class:"settings-title"}," Coordonnes",-1)),o("div",zC,[o("div",GC,[P[101]||(P[101]=o("label",null,"Adresse",-1)),Q(o("input",{"onUpdate:modelValue":P[11]||(P[11]=W=>E.value.address=W),type:"text",class:"form-input"},null,512),[[oe,E.value.address]])]),o("div",QC,[P[102]||(P[102]=o("label",null,"Tlphone",-1)),Q(o("input",{"onUpdate:modelValue":P[12]||(P[12]=W=>E.value.phone=W),type:"text",class:"form-input"},null,512),[[oe,E.value.phone]])]),o("div",KC,[P[103]||(P[103]=o("label",null,"Email",-1)),Q(o("input",{"onUpdate:modelValue":P[13]||(P[13]=W=>E.value.email=W),type:"email",class:"form-input"},null,512),[[oe,E.value.email]])]),o("div",JC,[P[104]||(P[104]=o("label",null,"Site web",-1)),Q(o("input",{"onUpdate:modelValue":P[14]||(P[14]=W=>E.value.website=W),type:"text",class:"form-input"},null,512),[[oe,E.value.website]])])])]),o("div",WC,[P[108]||(P[108]=o("h3",{class:"settings-title"}," Informations lgales",-1)),o("div",XC,[o("div",YC,[P[106]||(P[106]=o("label",null,"Numro d'immatriculation",-1)),Q(o("input",{"onUpdate:modelValue":P[15]||(P[15]=W=>E.value.registrationNumber=W),type:"text",class:"form-input"},null,512),[[oe,E.value.registrationNumber]])]),o("div",ZC,[P[107]||(P[107]=o("label",null,"Numro fiscal",-1)),Q(o("input",{"onUpdate:modelValue":P[16]||(P[16]=W=>E.value.taxId=W),type:"text",class:"form-input"},null,512),[[oe,E.value.taxId]])])])]),o("div",ek,[P[115]||(P[115]=o("h3",{class:"settings-title"}," lments  afficher",-1)),o("div",tk,[o("label",nk,[Q(o("input",{"onUpdate:modelValue":P[17]||(P[17]=W=>E.value.printSettings.showAddress=W),type:"checkbox"},null,512),[[dt,E.value.printSettings.showAddress]]),P[109]||(P[109]=o("span",null,"Afficher l'adresse",-1))]),o("label",ok,[Q(o("input",{"onUpdate:modelValue":P[18]||(P[18]=W=>E.value.printSettings.showPhone=W),type:"checkbox"},null,512),[[dt,E.value.printSettings.showPhone]]),P[110]||(P[110]=o("span",null,"Afficher le tlphone",-1))]),o("label",rk,[Q(o("input",{"onUpdate:modelValue":P[19]||(P[19]=W=>E.value.printSettings.showEmail=W),type:"checkbox"},null,512),[[dt,E.value.printSettings.showEmail]]),P[111]||(P[111]=o("span",null,"Afficher l'email",-1))]),o("label",sk,[Q(o("input",{"onUpdate:modelValue":P[20]||(P[20]=W=>E.value.printSettings.showWebsite=W),type:"checkbox"},null,512),[[dt,E.value.printSettings.showWebsite]]),P[112]||(P[112]=o("span",null,"Afficher le site web",-1))]),o("label",ik,[Q(o("input",{"onUpdate:modelValue":P[21]||(P[21]=W=>E.value.printSettings.showRegistrationNumber=W),type:"checkbox"},null,512),[[dt,E.value.printSettings.showRegistrationNumber]]),P[113]||(P[113]=o("span",null,"Afficher le N d'immatriculation",-1))]),o("label",ak,[Q(o("input",{"onUpdate:modelValue":P[22]||(P[22]=W=>E.value.printSettings.showTaxId=W),type:"checkbox"},null,512),[[dt,E.value.printSettings.showTaxId]]),P[114]||(P[114]=o("span",null,"Afficher le N fiscal",-1))])])])]),o("div",lk,[o("button",{onClick:P[23]||(P[23]=W=>C.value=!1),class:"btn-secondary"}," Annuler "),o("button",{onClick:T,class:"btn-primary"},"  Enregistrer ")])])])):L("",!0)]),_:1})]))}},dk=Ve(uk,[["__scopeId","data-v-724901ad"]]),ck={name:"ProductSuppliersModal",props:{show:Boolean,product:Object,allSuppliers:Array},emits:["close","refresh"],setup(e,{emit:t}){const r=N([]),n=N(!1),s=N(!1),l=N(!1),i=N(null),a=N({supplier_id:"",cost_price:null,delivery_days:null,minimum_order_quantity:1,is_preferred:!1,notes:""}),c=N({cost_price:null,delivery_days:null,minimum_order_quantity:1,is_preferred:!1,notes:""}),d=K(()=>{const y=r.value.map(R=>R.id);return e.allSuppliers.filter(R=>!y.includes(R.id))}),u=y=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(y),f="http://localhost:8000",p=async()=>{const y=await Mg();if(!y)throw new Error("Token manquant");return{Authorization:`Bearer ${y}`,Accept:"application/json","Content-Type":"application/json"}},m=async()=>{if(e.product){n.value=!0;try{const y=await p(),{data:R}=await Le.get(`${f}/api/v1/products/${e.product.id}/suppliers`,{headers:y});R.success?r.value=R.data:alert("Erreur: "+R.message)}catch(y){console.error(y),alert("Erreur lors du chargement des fournisseurs")}finally{n.value=!1}}},g=async()=>{if(!a.value.supplier_id)return alert("Veuillez slectionner un fournisseur");s.value=!0;try{const y=await p(),{data:R}=await Le.post(`${f}/api/v1/products/${e.product.id}/suppliers`,a.value,{headers:y});R.success?(alert("Fournisseur ajout avec succs"),v(),await m(),t("refresh")):alert("Erreur: "+R.message)}catch(y){console.error(y),alert("Erreur lors de l'ajout")}finally{s.value=!1}},v=()=>{l.value=!1,a.value={supplier_id:"",cost_price:null,delivery_days:null,minimum_order_quantity:1,is_preferred:!1,notes:""}},h=y=>{i.value=y.id,c.value={...y}},C=async()=>{s.value=!0;try{const y=await p(),{data:R}=await Le.put(`${f}/api/v1/products/${e.product.id}/suppliers/${i.value}`,c.value,{headers:y});R.success?(alert("Association mise  jour"),E(),await m(),t("refresh")):alert("Erreur: "+R.message)}catch(y){console.error(y),alert("Erreur lors de la mise  jour")}finally{s.value=!1}},E=()=>{i.value=null,c.value={cost_price:null,delivery_days:null,minimum_order_quantity:1,is_preferred:!1,notes:""}},k=async y=>{try{const R=await p(),{data:S}=await Le.patch(`${f}/api/v1/products/${e.product.id}/suppliers/${y}/preferred`,{},{headers:R});S.success?(await m(),t("refresh")):alert("Erreur: "+S.message)}catch(R){console.error(R),alert("Erreur lors de la dfinition du fournisseur prfr")}},T=async y=>{if(confirm("Voulez-vous vraiment retirer ce fournisseur ?"))try{const R=await p(),{data:S}=await Le.delete(`${f}/api/v1/products/${e.product.id}/suppliers/${y}`,{headers:R});S.success?(alert("Fournisseur retir avec succs"),await m(),t("refresh")):alert("Erreur: "+S.message)}catch(R){console.error(R),alert("Erreur lors du retrait")}};return Ae(()=>e.product,y=>{y&&m()}),{suppliers:r,loading:n,saving:s,showAddForm:l,editingId:i,form:a,editForm:c,availableSuppliers:d,formatCurrency:u,addSupplier:g,cancelAdd:v,editSupplier:h,saveEdit:C,cancelEdit:E,setPreferred:k,removeSupplier:T}}},fk={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},pk={class:"bg-white rounded-lg w-full max-w-4xl shadow-xl max-h-[90vh] overflow-hidden"},mk={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 flex justify-between items-center"},gk={key:0,class:"text-blue-100 text-sm mt-1"},vk={class:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]"},hk={class:"mb-6"},yk={key:1,class:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-4"},bk={class:"grid grid-cols-2 gap-4"},_k={class:"col-span-2"},xk=["value"],wk={class:"flex items-center"},Ck={class:"flex items-center cursor-pointer"},kk={class:"col-span-2"},Sk={class:"flex gap-3"},Ek=["disabled"],Pk={key:0,class:"text-center py-8 text-gray-500"},Ak={key:1,class:"text-center py-8 text-gray-500"},Rk={key:2,class:"space-y-3"},Tk={class:"flex justify-between items-start"},Ok={class:"flex-1"},Mk={class:"flex items-center gap-2 mb-2"},Dk={class:"font-bold text-lg"},Ik={key:0,class:"text-yellow-600 text-xl"},Nk={class:"grid grid-cols-2 gap-3 text-sm"},Fk={class:"ml-2 font-medium"},$k={class:"ml-2 font-medium"},Lk={class:"ml-2 font-bold text-green-600"},qk={class:"ml-2 font-medium"},Uk={class:"ml-2 font-medium"},jk={key:0,class:"mt-2 text-sm text-gray-600 bg-gray-50 p-2 rounded"},Bk={class:"flex gap-2"},Vk=["onClick"],Hk=["onClick"],zk=["onClick"],Gk={key:0,class:"mt-4 pt-4 border-t bg-gray-50 p-3 rounded-lg"},Qk={class:"grid grid-cols-2 gap-3"},Kk={class:"flex items-center"},Jk={class:"flex items-center cursor-pointer"},Wk={class:"col-span-2"},Xk={class:"flex gap-2 mt-3"},Yk=["disabled"];function Zk(e,t,r,n,s,l){return r.show?(_(),x("div",fk,[o("div",pk,[o("div",mk,[o("div",null,[t[17]||(t[17]=o("h3",{class:"text-2xl font-bold"},"Fournisseurs du produit",-1)),r.product?(_(),x("p",gk,b(r.product.name)+" ("+b(r.product.sku)+") ",1)):L("",!0)]),o("button",{onClick:t[0]||(t[0]=i=>e.$emit("close")),class:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition"},[...t[18]||(t[18]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o("div",vk,[o("div",hk,[n.showAddForm?(_(),x("div",yk,[t[27]||(t[27]=o("h4",{class:"font-bold text-blue-900"},"Associer un nouveau fournisseur",-1)),o("div",bk,[o("div",_k,[t[21]||(t[21]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fournisseur *",-1)),Q(o("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>n.form.supplier_id=i),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},[t[20]||(t[20]=o("option",{value:""},"Slectionner un fournisseur",-1)),(_(!0),x(fe,null,be(n.availableSuppliers,i=>(_(),x("option",{key:i.id,value:i.id},b(i.name),9,xk))),128))],512),[[$e,n.form.supplier_id]])]),o("div",null,[t[22]||(t[22]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prix d'achat (FCFA)",-1)),Q(o("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>n.form.cost_price=i),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"450.50"},null,512),[[oe,n.form.cost_price,void 0,{number:!0}]])]),o("div",null,[t[23]||(t[23]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dlai (jours)",-1)),Q(o("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>n.form.delivery_days=i),type:"number",min:"0",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"7"},null,512),[[oe,n.form.delivery_days,void 0,{number:!0}]])]),o("div",null,[t[24]||(t[24]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quantit min.",-1)),Q(o("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>n.form.minimum_order_quantity=i),type:"number",min:"1",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"1"},null,512),[[oe,n.form.minimum_order_quantity,void 0,{number:!0}]])]),o("div",wk,[o("label",Ck,[Q(o("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>n.form.is_preferred=i),type:"checkbox",class:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"},null,512),[[dt,n.form.is_preferred]]),t[25]||(t[25]=o("span",{class:"ml-2 text-sm font-medium text-gray-700"}," Fournisseur prfr",-1))])]),o("div",kk,[t[26]||(t[26]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),Q(o("textarea",{"onUpdate:modelValue":t[7]||(t[7]=i=>n.form.notes=i),rows:"2",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Notes ou remarques..."},null,512),[[oe,n.form.notes]])])]),o("div",Sk,[o("button",{onClick:t[8]||(t[8]=(...i)=>n.cancelAdd&&n.cancelAdd(...i)),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition"}," Annuler "),o("button",{onClick:t[9]||(t[9]=(...i)=>n.addSupplier&&n.addSupplier(...i)),disabled:!n.form.supplier_id||n.saving,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition"},b(n.saving?"Ajout...":"Ajouter"),9,Ek)])])):(_(),x("button",{key:0,onClick:t[1]||(t[1]=i=>n.showAddForm=!0),class:"w-full py-3 border-2 border-dashed border-blue-300 text-blue-600 rounded-lg hover:bg-blue-50 transition flex items-center justify-center gap-2 font-medium"},[...t[19]||(t[19]=[o("span",{class:"text-xl"},"",-1),ne(" Ajouter un fournisseur ",-1)])]))]),n.loading?(_(),x("div",Pk,"Chargement des fournisseurs...")):n.suppliers.length===0?(_(),x("div",Ak,[...t[28]||(t[28]=[o("p",{class:"text-lg"},"Aucun fournisseur associ",-1),o("p",{class:"text-sm mt-2"},"Ajoutez un fournisseur pour ce produit",-1)])])):(_(),x("div",Rk,[(_(!0),x(fe,null,be(n.suppliers,i=>(_(),x("div",{key:i.id,class:le(["border rounded-lg p-4 hover:shadow-md transition",{"border-yellow-400 bg-yellow-50":i.is_preferred}])},[o("div",Tk,[o("div",Ok,[o("div",Mk,[o("h4",Dk,b(i.name),1),i.is_preferred?(_(),x("span",Ik,"")):L("",!0)]),o("div",Nk,[o("div",null,[t[29]||(t[29]=o("span",{class:"text-gray-500"},"Contact:",-1)),o("span",Fk,b(i.phone||"N/A"),1)]),o("div",null,[t[30]||(t[30]=o("span",{class:"text-gray-500"},"Email:",-1)),o("span",$k,b(i.email||"N/A"),1)]),o("div",null,[t[31]||(t[31]=o("span",{class:"text-gray-500"},"Prix d'achat:",-1)),o("span",Lk,b(i.cost_price?n.formatCurrency(i.cost_price):"N/A"),1)]),o("div",null,[t[32]||(t[32]=o("span",{class:"text-gray-500"},"Dlai:",-1)),o("span",qk,b(i.delivery_days||"N/A")+" jours",1)]),o("div",null,[t[33]||(t[33]=o("span",{class:"text-gray-500"},"Qt min:",-1)),o("span",Uk,b(i.minimum_order_quantity||1),1)])]),i.notes?(_(),x("div",jk,[t[34]||(t[34]=o("span",{class:"font-medium"},"Notes:",-1)),ne(" "+b(i.notes),1)])):L("",!0)]),o("div",Bk,[o("button",{onClick:a=>n.editSupplier(i),class:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded transition",title:"Modifier"},"",8,Vk),i.is_preferred?L("",!0):(_(),x("button",{key:0,onClick:a=>n.setPreferred(i.id),class:"px-3 py-1 text-yellow-600 hover:bg-yellow-50 rounded transition",title:"Dfinir comme prfr"},"",8,Hk)),o("button",{onClick:a=>n.removeSupplier(i.id),class:"px-3 py-1 text-red-600 hover:bg-red-50 rounded transition",title:"Retirer"},"",8,zk)])]),n.editingId===i.id?(_(),x("div",Gk,[t[40]||(t[40]=o("h5",{class:"font-bold text-sm mb-3"},"Modifier l'association",-1)),o("div",Qk,[o("div",null,[t[35]||(t[35]=o("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Prix d'achat",-1)),Q(o("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>n.editForm.cost_price=a),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-1.5 text-sm border rounded focus:ring-2 focus:ring-blue-500"},null,512),[[oe,n.editForm.cost_price,void 0,{number:!0}]])]),o("div",null,[t[36]||(t[36]=o("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Dlai (jours)",-1)),Q(o("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>n.editForm.delivery_days=a),type:"number",min:"0",class:"w-full px-3 py-1.5 text-sm border rounded focus:ring-2 focus:ring-blue-500"},null,512),[[oe,n.editForm.delivery_days,void 0,{number:!0}]])]),o("div",null,[t[37]||(t[37]=o("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Qt min.",-1)),Q(o("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>n.editForm.minimum_order_quantity=a),type:"number",min:"1",class:"w-full px-3 py-1.5 text-sm border rounded focus:ring-2 focus:ring-blue-500"},null,512),[[oe,n.editForm.minimum_order_quantity,void 0,{number:!0}]])]),o("div",Kk,[o("label",Jk,[Q(o("input",{"onUpdate:modelValue":t[13]||(t[13]=a=>n.editForm.is_preferred=a),type:"checkbox",class:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"},null,512),[[dt,n.editForm.is_preferred]]),t[38]||(t[38]=o("span",{class:"ml-2 text-xs font-medium"}," Prfr",-1))])]),o("div",Wk,[t[39]||(t[39]=o("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Notes",-1)),Q(o("textarea",{"onUpdate:modelValue":t[14]||(t[14]=a=>n.editForm.notes=a),rows:"2",class:"w-full px-3 py-1.5 text-sm border rounded focus:ring-2 focus:ring-blue-500"},null,512),[[oe,n.editForm.notes]])])]),o("div",Xk,[o("button",{onClick:t[15]||(t[15]=(...a)=>n.cancelEdit&&n.cancelEdit(...a)),class:"flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded hover:bg-gray-50 transition"},"Annuler"),o("button",{onClick:t[16]||(t[16]=(...a)=>n.saveEdit&&n.saveEdit(...a)),disabled:n.saving,class:"flex-1 px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 transition"},b(n.saving?"Enregistrement...":"Enregistrer"),9,Yk)])])):L("",!0)],2))),128))]))])])])):L("",!0)}const eS=Ve(ck,[["render",Zk]]),tS="http://localhost:8000/api/v1",fo=Le.create({baseURL:tS,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});fo.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));fo.interceptors.request.use(async e=>{let t;if(window.authHeaders?.Authorization)t=window.authHeaders.Authorization.replace("Bearer ","");else if(window.electron?.store)try{t=await window.electron.store.get("auth_token")}catch(r){console.warn(" Erreur rcupration token Electron:",r)}else t=localStorage.getItem("auth_token");return t?(e.headers.Authorization=`Bearer ${t}`,console.log(" Token ajout aux headers API crdits")):console.warn(" Aucun token trouv pour l'API crdits"),e},e=>Promise.reject(e));const nS=async(e={})=>{try{return(await fo.get("/credits",{params:e})).data}catch(t){throw console.error(" Erreur fetchCredits:",t),t}},oS=async e=>{try{return(await fo.post("/credits/payments",e)).data}catch(t){throw console.error(" Erreur recordPayment:",t),t}},rS=async e=>{try{return(await fo.get(`/credits/${e}/history`)).data}catch(t){throw console.error(" Erreur fetchPaymentHistory:",t),t}},sS=async e=>{try{return(await fo.delete(`/credits/payments/${e}`)).data}catch(t){throw console.error(" Erreur deletePayment:",t),t}},iS={name:"CreditManagement",components:{PaginationControls:Yc},setup(){const e=N([]),t=N([]),r=N(!1),n=N(!1),s=N(!1),l=N(!1),i=N(!1),a=N(null),c=N(""),d=N([]),u=N({show:!1,message:"",type:"success"}),f=N(""),p=N("all"),m=N("date_desc"),g=N(1),v=N(20),h=N({amount:null,payment_method:"cash",payment_date:new Date().toISOString().split("T")[0],notes:""}),C=new Date().toISOString().split("T")[0],E=K(()=>e.value.reduce((q,V)=>q+V.remaining_amount,0)),k=K(()=>e.value.filter(q=>q.is_overdue&&q.remaining_amount>0).reduce((q,V)=>q+V.remaining_amount,0)),T=K(()=>e.value.filter(q=>q.is_overdue&&q.remaining_amount>0).length),y=K(()=>e.value.filter(q=>!q.is_overdue&&q.remaining_amount>0).reduce((q,V)=>q+V.remaining_amount,0)),R=K(()=>e.value.filter(q=>!q.is_overdue&&q.remaining_amount>0).length),S=K(()=>{const q=new Date,V=new Date(q.getFullYear(),q.getMonth(),1);return t.value.filter(ee=>new Date(ee.payment_date)>=V).reduce((ee,re)=>ee+re.amount,0)}),w=K(()=>{let q=e.value;if(f.value){const V=f.value.toLowerCase();q=q.filter(ee=>ee.invoice_number.toLowerCase().includes(V)||ee.customer_name.toLowerCase().includes(V))}return p.value!=="all"&&(q=q.filter(V=>p.value==="unpaid"?V.paid_amount===0:p.value==="partial"?V.paid_amount>0&&V.remaining_amount>0:p.value==="overdue"?V.is_overdue&&V.remaining_amount>0:!0)),q=[...q].sort((V,ee)=>m.value==="date_desc"?new Date(ee.sale_date)-new Date(V.sale_date):m.value==="date_asc"?new Date(V.sale_date)-new Date(ee.sale_date):m.value==="amount_desc"?ee.remaining_amount-V.remaining_amount:m.value==="amount_asc"?V.remaining_amount-ee.remaining_amount:m.value==="due_date"?new Date(V.due_date)-new Date(ee.due_date):0),q}),O=K(()=>{const q=(g.value-1)*v.value,V=q+v.value;return w.value.slice(q,V)}),$=K(()=>Math.ceil(w.value.length/v.value)),U=K(()=>!a.value||!h.value.amount?0:a.value.remaining_amount-h.value.amount),I=K(()=>!(!a.value||!h.value.amount||h.value.amount<=0||h.value.amount>a.value.remaining_amount||!h.value.payment_method||!h.value.payment_date)),M=K(()=>{const q=w.value.map(V=>V.id);return q.length===0?!1:q.every(V=>d.value.includes(V))}),j=K(()=>{const q=w.value.map(ee=>ee.id);if(q.length===0)return!1;const V=q.filter(ee=>d.value.includes(ee)).length;return V>0&&V<q.length}),B=q=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(q)+" FCFA",A=q=>q?new Date(q).toLocaleDateString("fr-FR"):"N/A",z=q=>q?new Date(q).toLocaleString("fr-FR"):"N/A",te=q=>q.remaining_amount===0?"bg-green-100 text-green-800":q.is_overdue?"bg-red-100 text-red-800":q.paid_amount>0?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",pe=q=>q.remaining_amount===0?" Pay":q.is_overdue?" En retard":q.paid_amount>0?" Partiel":" Non pay",Re=q=>({cash:"",mobile:"",bank_transfer:"",check:""})[q]||"",de=q=>({cash:"Espces",mobile:"Mobile Money",bank_transfer:"Virement bancaire",check:"Chque"})[q]||q,P=()=>{const q=w.value.map(V=>V.id);if(M.value)d.value=d.value.filter(V=>!q.includes(V));else{const V=q.filter(ee=>!d.value.includes(ee));d.value.push(...V)}};let W;const ke=(q,V="success")=>{W&&clearTimeout(W),u.value={show:!0,message:q,type:V},W=setTimeout(()=>u.value.show=!1,3e3)},Ee=()=>{a.value=null,c.value="",h.value={amount:null,payment_method:"cash",payment_date:C,notes:""},l.value=!0},Be=()=>{if(!c.value){a.value=null,h.value.amount=null;return}const q=e.value.find(V=>V.id===parseInt(c.value));q&&(a.value=q,h.value.amount=q.remaining_amount,console.log(" Facture slectionne:",q),console.log(" Montant suggr:",q.remaining_amount))},J=()=>{f.value="",p.value="all",m.value="date_desc",g.value=1,d.value=[]},ae=q=>{a.value=q,h.value={amount:q.remaining_amount,payment_method:"cash",payment_date:C,notes:""},l.value=!0},ie=()=>{l.value=!1,a.value=null,c.value="",h.value={amount:null,payment_method:"cash",payment_date:C,notes:""}},ce=async()=>{if(!I.value){console.error(" Validation choue:",{selectedCredit:!!a.value,amount:h.value.amount,remaining:a.value?.remaining_amount,method:h.value.payment_method,date:h.value.payment_date}),ke("Veuillez remplir tous les champs correctement","warning");return}if(confirm(`Confirmez-vous l'enregistrement du paiement de ${B(h.value.amount)} ?`)){s.value=!0;try{const q={sale_id:a.value.id,amount:h.value.amount,payment_method:h.value.payment_method,payment_date:h.value.payment_date,notes:h.value.notes};console.log(" Enregistrement du paiement:",q);const V=await oS(q);console.log(" Rponse API:",V),ie(),await D(),ke("Paiement enregistr avec succs !","success")}catch(q){console.error(" Erreur:",q),ke(`Erreur lors de l'enregistrement du paiement: ${q.message}`,"error")}finally{s.value=!1}}},Se=async q=>{a.value=q,i.value=!0,await F(q.id)},D=async()=>{r.value=!0;try{console.log(" Chargement des crdits..."),console.log("Token disponible:",!!window.authHeaders?.Authorization);const q=await nS({status:p.value!=="all"?p.value:void 0});e.value=q.data||[],console.log(" Crdits chargs:",e.value.length)}catch(q){console.error(" Erreur chargement crdits:",q),ke(`Impossible de charger les crdits: ${q.message}`,"error")}finally{r.value=!1}},F=async q=>{n.value=!0;try{const V=await rS(q);t.value=V.data?.payments||[],V.data?.sale&&(a.value={...a.value,...V.data.sale}),console.log(" Historique charg:",t.value.length,"paiements")}catch(V){console.error(" Erreur chargement historique:",V),t.value=[]}finally{n.value=!1}},H=q=>{const V=new Date(q.created_at);return(new Date-V)/(1e3*60*60)<24},X=async q=>{if(confirm("Voulez-vous vraiment supprimer ce paiement ?"))try{await sS(q),ke("Paiement supprim","success"),await F(a.value.id),await D()}catch(V){console.error(" Erreur suppression:",V),ke(`Erreur lors de la suppression: ${V.message}`,"error")}};return vt(()=>{D()}),Ae([f,p,m,v],()=>{g.value=1}),{credits:e,paymentHistory:t,toast:u,loading:r,loadingHistory:n,saving:s,showPaymentModal:l,showHistoryModal:i,selectedCredit:a,tempSelectedCreditId:c,selectedCreditIds:d,searchQuery:f,filterStatus:p,sortBy:m,currentPage:g,perPage:v,paymentForm:h,today:C,totalDebt:E,overdueDebt:k,overdueCount:T,currentDebt:y,currentCount:R,paidThisMonth:S,filteredCredits:w,paginatedCredits:O,totalPages:$,newRemaining:U,isPaymentValid:I,isAllSelected:M,isPartiallySelected:j,toggleSelectAll:P,formatCurrency:B,formatDate:A,formatDateTime:z,getStatusClass:te,getStatusLabel:pe,getPaymentIcon:Re,getPaymentMethodLabel:de,openNewPaymentModal:Ee,openPaymentModal:ae,closePaymentModal:ie,selectCreditFromDropdown:Be,resetFilters:J,savePayment:ce,viewPaymentHistory:Se,canDeletePayment:H,deletePayment:X}}},aS={class:"space-y-6"},lS={class:"bg-white rounded-lg shadow p-6"},uS={class:"flex justify-between items-center mb-6"},dS={class:"grid grid-cols-4 gap-4"},cS={class:"bg-red-50 border border-red-200 rounded-lg p-4"},fS={class:"text-2xl font-bold text-red-700"},pS={class:"bg-orange-50 border border-orange-200 rounded-lg p-4"},mS={class:"text-2xl font-bold text-orange-700"},gS={class:"text-xs text-orange-600 mt-1"},vS={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},hS={class:"text-2xl font-bold text-blue-700"},yS={class:"text-xs text-blue-600 mt-1"},bS={class:"bg-green-50 border border-green-200 rounded-lg p-4"},_S={class:"text-2xl font-bold text-green-700"},xS={class:"bg-white rounded-lg shadow p-4 flex gap-4"},wS={key:0,class:"bg-blue-100 border-l-4 border-blue-500 rounded-r-lg p-4 flex justify-between items-center shadow-sm transition-all duration-300"},CS={class:"font-semibold text-blue-800"},kS={class:"bg-white rounded-lg shadow overflow-hidden"},SS={class:"w-full"},ES={class:"bg-gray-50"},PS={class:"px-4 py-3"},AS=["checked","indeterminate"],RS={key:0},TS={key:1},OS={class:"px-4 py-4"},MS=["value"],DS={class:"px-6 py-4 font-medium"},IS={class:"px-6 py-4"},NS={class:"px-6 py-4 text-sm"},FS={class:"px-6 py-4 text-sm"},$S={key:0,class:"ml-1"},LS={class:"px-6 py-4 font-semibold"},qS={class:"px-6 py-4 text-green-600 font-medium"},US={class:"px-6 py-4"},jS={class:"px-6 py-4"},BS={class:"flex gap-2"},VS=["onClick"],HS=["onClick"],zS={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},GS={class:"bg-white rounded-lg w-full max-w-2xl shadow-xl max-h-[90vh] flex flex-col"},QS={class:"bg-gradient-to-r from-green-600 to-green-700 text-white p-6 flex justify-between items-center flex-shrink-0 rounded-t-lg"},KS={key:0,class:"text-green-100 text-sm mt-1"},JS={key:1,class:"text-green-100 text-sm mt-1"},WS={class:"p-6 space-y-4 overflow-y-auto flex-1"},XS={key:0,class:"space-y-4"},YS={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},ZS=["value","disabled"],eE={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},tE={class:"grid grid-cols-3 gap-4"},nE={class:"text-lg font-bold text-blue-900"},oE={class:"text-lg font-bold text-green-700"},rE={class:"text-lg font-bold text-red-700"},sE={class:"space-y-4"},iE=["max"],aE={class:"text-xs text-gray-500 mt-1"},lE=["max"],uE={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},dE={class:"grid grid-cols-2 gap-4"},cE={class:"text-lg font-bold text-gray-900"},fE={key:0,class:"ml-2"},pE={class:"p-6 border-t bg-gray-50 flex gap-3 flex-shrink-0 rounded-b-lg"},mE=["disabled"],gE={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},vE={class:"bg-white rounded-lg w-full max-w-4xl shadow-xl max-h-[90vh] overflow-hidden"},hE={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 flex justify-between items-center"},yE={class:"text-blue-100 text-sm mt-1"},bE={class:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]"},_E={class:"bg-gray-50 rounded-lg p-4 mb-6 grid grid-cols-3 gap-4"},xE={class:"text-xl font-bold"},wE={class:"text-xl font-bold text-green-600"},CE={class:"text-xl font-bold text-red-600"},kE={class:"space-y-3"},SE={class:"font-semibold text-gray-700"},EE={key:0,class:"text-center py-8 text-gray-500"},PE={key:1,class:"text-center py-8 text-gray-500"},AE={class:"flex justify-between items-start"},RE={class:"flex-1"},TE={class:"flex items-center gap-3 mb-2"},OE={class:"text-2xl"},ME={class:"font-semibold text-lg text-green-600"},DE={class:"text-sm text-gray-600"},IE={class:"text-sm text-gray-600 space-y-1"},NE={key:0},FE={class:"text-xs text-gray-400"},$E=["onClick"],LE={key:0,class:"text-xl"},qE={key:1,class:"text-xl"},UE={key:2,class:"text-xl"},jE={class:"font-medium"};function BE(e,t,r,n,s,l){const i=He("PaginationControls");return _(),x("div",aS,[o("div",lS,[o("div",uS,[t[19]||(t[19]=o("h2",{class:"text-3xl font-bold"},"Gestion des Crdits",-1)),o("button",{onClick:t[0]||(t[0]=(...a)=>n.openNewPaymentModal&&n.openNewPaymentModal(...a)),class:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-medium"},"  Enregistrer un paiement ")]),o("div",dS,[o("div",cS,[t[20]||(t[20]=o("p",{class:"text-sm text-red-600 font-medium"},"Total des dettes",-1)),o("p",fS,b(n.formatCurrency(n.totalDebt)),1)]),o("div",pS,[t[21]||(t[21]=o("p",{class:"text-sm text-orange-600 font-medium"},"En retard",-1)),o("p",mS,b(n.formatCurrency(n.overdueDebt)),1),o("p",gS,b(n.overdueCount)+" facture(s)",1)]),o("div",vS,[t[22]||(t[22]=o("p",{class:"text-sm text-blue-600 font-medium"},"En cours",-1)),o("p",hS,b(n.formatCurrency(n.currentDebt)),1),o("p",yS,b(n.currentCount)+" facture(s)",1)]),o("div",bS,[t[23]||(t[23]=o("p",{class:"text-sm text-green-600 font-medium"},"Pay ce mois",-1)),o("p",_S,b(n.formatCurrency(n.paidThisMonth)),1)])])]),o("div",xS,[Q(o("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>n.searchQuery=a),type:"text",placeholder:" Rechercher par client, facture...",class:"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[oe,n.searchQuery]]),Q(o("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>n.filterStatus=a),class:"px-4 py-2 border rounded-lg"},[...t[24]||(t[24]=[o("option",{value:"all"},"Tous les statuts",-1),o("option",{value:"partial"},"Partiellement pay",-1),o("option",{value:"unpaid"},"Non pay",-1),o("option",{value:"overdue"},"En retard",-1)])],512),[[$e,n.filterStatus]]),Q(o("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>n.sortBy=a),class:"px-4 py-2 border rounded-lg"},[...t[25]||(t[25]=[Dt('<option value="date_desc">Plus rcent</option><option value="date_asc">Plus ancien</option><option value="amount_desc">Montant dcroissant</option><option value="amount_asc">Montant croissant</option><option value="due_date">chance</option>',5)])],512),[[$e,n.sortBy]]),Q(o("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>n.perPage=a),class:"px-4 py-2 border rounded-lg",title:"Nombre d'lments par page"},[...t[26]||(t[26]=[o("option",{value:5},"5 par page",-1),o("option",{value:10},"10 par page",-1),o("option",{value:20},"20 par page",-1)])],512),[[$e,n.perPage]]),o("button",{onClick:t[5]||(t[5]=(...a)=>n.resetFilters&&n.resetFilters(...a)),class:"px-4 py-2 bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded-lg transition font-medium",title:"Rinitialiser les filtres"},"  Rinitialiser ")]),n.selectedCreditIds.length>0?(_(),x("div",wS,[o("p",CS,b(n.selectedCreditIds.length)+" crdit(s) slectionn(s) ",1),t[27]||(t[27]=o("div",null,[o("button",{class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium text-sm"}," Exporter la slection... ")],-1))])):L("",!0),o("div",kS,[o("table",SS,[o("thead",ES,[o("tr",null,[o("th",PS,[o("input",{type:"checkbox",onChange:t[6]||(t[6]=(...a)=>n.toggleSelectAll&&n.toggleSelectAll(...a)),checked:n.isAllSelected,indeterminate:n.isPartiallySelected,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:"Slectionner tout"},null,40,AS)]),t[28]||(t[28]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Facture",-1)),t[29]||(t[29]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client",-1)),t[30]||(t[30]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date vente",-1)),t[31]||(t[31]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"chance",-1)),t[32]||(t[32]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant total",-1)),t[33]||(t[33]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Pay",-1)),t[34]||(t[34]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Reste  payer",-1)),t[35]||(t[35]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut",-1)),t[36]||(t[36]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions",-1))])]),o("tbody",null,[n.loading?(_(),x("tr",RS,[...t[37]||(t[37]=[o("td",{colspan:"10",class:"px-6 py-8 text-center text-gray-500"}," Chargement... ",-1)])])):n.filteredCredits.length===0?(_(),x("tr",TS,[...t[38]||(t[38]=[o("td",{colspan:"10",class:"px-6 py-8 text-center text-gray-500"}," Aucun crdit trouv ",-1)])])):(_(!0),x(fe,{key:2},be(n.paginatedCredits,a=>(_(),x("tr",{key:a.id,class:le(["border-t hover:bg-gray-50",{"bg-red-50":a.is_overdue,"bg-blue-50":n.selectedCreditIds.includes(a.id)}])},[o("td",OS,[Q(o("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=c=>n.selectedCreditIds=c),value:a.id,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,MS),[[dt,n.selectedCreditIds]])]),o("td",DS,b(a.invoice_number),1),o("td",IS,b(a.customer_name),1),o("td",NS,b(n.formatDate(a.sale_date)),1),o("td",FS,[o("span",{class:le(a.is_overdue?"text-red-600 font-semibold":"text-gray-600")},[ne(b(n.formatDate(a.due_date))+" ",1),a.is_overdue?(_(),x("span",$S,"")):L("",!0)],2)]),o("td",LS,b(n.formatCurrency(a.total_amount)),1),o("td",qS,b(n.formatCurrency(a.paid_amount)),1),o("td",{class:le(["px-6 py-4 font-bold",a.remaining_amount>0?"text-red-600":"text-green-600"])},b(n.formatCurrency(a.remaining_amount)),3),o("td",US,[o("span",{class:le(["px-2 py-1 rounded text-xs font-medium",n.getStatusClass(a)])},b(n.getStatusLabel(a)),3)]),o("td",jS,[o("div",BS,[a.remaining_amount>0?(_(),x("button",{key:0,onClick:c=>n.openPaymentModal(a),class:"text-green-600 hover:text-green-800 font-medium",title:"Enregistrer un paiement"},"  Payer ",8,VS)):L("",!0),o("button",{onClick:c=>n.viewPaymentHistory(a),class:"text-blue-600 hover:text-blue-800",title:"Voir l'historique"},"  Historique ",8,HS)])])],2))),128))])]),Te(i,{currentPage:n.currentPage,"onUpdate:currentPage":t[8]||(t[8]=a=>n.currentPage=a),"total-pages":n.totalPages,"total-items":n.filteredCredits.length,"per-page":n.perPage,"item-name":"crdits"},null,8,["currentPage","total-pages","total-items","per-page"])]),n.showPaymentModal?(_(),x("div",zS,[o("div",GS,[o("div",QS,[o("div",null,[t[39]||(t[39]=o("h3",{class:"text-2xl font-bold"}," Enregistrer un paiement",-1)),n.selectedCredit?(_(),x("p",KS,b(n.selectedCredit.invoice_number)+" - "+b(n.selectedCredit.customer_name),1)):(_(),x("p",JS," Slectionnez une facture ci-dessous "))]),o("button",{onClick:t[9]||(t[9]=(...a)=>n.closePaymentModal&&n.closePaymentModal(...a)),class:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition"},[...t[40]||(t[40]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o("div",WS,[n.selectedCredit?L("",!0):(_(),x("div",XS,[o("div",YS,[t[42]||(t[42]=o("p",{class:"text-sm text-blue-800 mb-3"},"  Slectionnez la facture pour laquelle vous souhaitez enregistrer un paiement ",-1)),Q(o("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>n.tempSelectedCreditId=a),onChange:t[11]||(t[11]=(...a)=>n.selectCreditFromDropdown&&n.selectCreditFromDropdown(...a)),class:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-medium"},[t[41]||(t[41]=o("option",{value:""},"-- Choisir une facture --",-1)),(_(!0),x(fe,null,be(n.credits,a=>(_(),x("option",{key:a.id,value:a.id,disabled:a.remaining_amount===0},b(a.invoice_number)+" - "+b(a.customer_name)+" (Reste: "+b(n.formatCurrency(a.remaining_amount))+") "+b(a.remaining_amount===0?" Sold":""),9,ZS))),128))],544),[[$e,n.tempSelectedCreditId]])])])),n.selectedCredit?(_(),x(fe,{key:1},[o("div",eE,[o("div",tE,[o("div",null,[t[43]||(t[43]=o("p",{class:"text-xs text-blue-600 font-medium"},"Montant total",-1)),o("p",nE,b(n.formatCurrency(n.selectedCredit.total_amount)),1)]),o("div",null,[t[44]||(t[44]=o("p",{class:"text-xs text-green-600 font-medium"},"Dj pay",-1)),o("p",oE,b(n.formatCurrency(n.selectedCredit.paid_amount)),1)]),o("div",null,[t[45]||(t[45]=o("p",{class:"text-xs text-red-600 font-medium"},"Reste  payer",-1)),o("p",rE,b(n.formatCurrency(n.selectedCredit.remaining_amount)),1)])])]),o("div",sE,[o("div",null,[t[46]||(t[46]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Montant du paiement * ",-1)),Q(o("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>n.paymentForm.amount=a),type:"number",max:n.selectedCredit.remaining_amount,min:"1",step:"100",placeholder:"Ex: 5000",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",required:""},null,8,iE),[[oe,n.paymentForm.amount,void 0,{number:!0}]]),o("p",aE,"  Maximum: "+b(n.formatCurrency(n.selectedCredit.remaining_amount)),1)]),o("div",null,[t[48]||(t[48]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Mode de paiement * ",-1)),Q(o("select",{"onUpdate:modelValue":t[13]||(t[13]=a=>n.paymentForm.payment_method=a),class:"w-full px-4 py-2 border rounded-lg",required:""},[...t[47]||(t[47]=[o("option",{value:"cash"}," Espces",-1),o("option",{value:"mobile"}," Mobile Money",-1),o("option",{value:"bank_transfer"}," Virement bancaire",-1),o("option",{value:"check"}," Chque",-1)])],512),[[$e,n.paymentForm.payment_method]])]),o("div",null,[t[49]||(t[49]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date du paiement ",-1)),Q(o("input",{"onUpdate:modelValue":t[14]||(t[14]=a=>n.paymentForm.payment_date=a),type:"date",max:n.today,class:"w-full px-4 py-2 border rounded-lg"},null,8,lE),[[oe,n.paymentForm.payment_date]])]),o("div",null,[t[50]||(t[50]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notes / Rfrence (optionnel) ",-1)),Q(o("textarea",{"onUpdate:modelValue":t[15]||(t[15]=a=>n.paymentForm.notes=a),rows:"2",placeholder:"Rfrence du virement, numro de chque, etc.",class:"w-full px-4 py-2 border rounded-lg"},null,512),[[oe,n.paymentForm.notes]])])]),n.paymentForm.amount>0?(_(),x("div",uE,[t[53]||(t[53]=o("p",{class:"text-sm font-medium text-green-700 mb-2"}," Aprs ce paiement:",-1)),o("div",dE,[o("div",null,[t[51]||(t[51]=o("p",{class:"text-xs text-gray-600"},"Total pay",-1)),o("p",cE,b(n.formatCurrency((n.selectedCredit.paid_amount||0)+(n.paymentForm.amount||0))),1)]),o("div",null,[t[52]||(t[52]=o("p",{class:"text-xs text-gray-600"},"Reste  payer",-1)),o("p",{class:le(["text-lg font-bold",n.newRemaining===0?"text-green-600":"text-red-600"])},[ne(b(n.formatCurrency(n.newRemaining))+" ",1),n.newRemaining===0?(_(),x("span",fE,"")):L("",!0)],2)])])])):L("",!0)],64)):L("",!0)]),o("div",pE,[o("button",{onClick:t[16]||(t[16]=(...a)=>n.closePaymentModal&&n.closePaymentModal(...a)),class:"flex-1 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 transition font-medium"}," Annuler "),o("button",{onClick:t[17]||(t[17]=(...a)=>n.savePayment&&n.savePayment(...a)),disabled:!n.isPaymentValid||n.saving,class:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition font-medium"},b(n.saving?"Enregistrement...":" Enregistrer le paiement"),9,mE)])])])):L("",!0),n.showHistoryModal?(_(),x("div",gE,[o("div",vE,[o("div",hE,[o("div",null,[t[54]||(t[54]=o("h3",{class:"text-2xl font-bold"}," Historique des paiements",-1)),o("p",yE,b(n.selectedCredit?.invoice_number)+" - "+b(n.selectedCredit?.customer_name),1)]),o("button",{onClick:t[18]||(t[18]=a=>n.showHistoryModal=!1),class:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2"},[...t[55]||(t[55]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o("div",bE,[o("div",_E,[o("div",null,[t[56]||(t[56]=o("p",{class:"text-xs text-gray-600"},"Montant total",-1)),o("p",xE,b(n.formatCurrency(n.selectedCredit?.total_amount)),1)]),o("div",null,[t[57]||(t[57]=o("p",{class:"text-xs text-gray-600"},"Total pay",-1)),o("p",wE,b(n.formatCurrency(n.selectedCredit?.paid_amount)),1)]),o("div",null,[t[58]||(t[58]=o("p",{class:"text-xs text-gray-600"},"Reste  payer",-1)),o("p",CE,b(n.formatCurrency(n.selectedCredit?.remaining_amount)),1)])]),o("div",kE,[o("h4",SE,"Paiements effectus ("+b(n.paymentHistory.length)+")",1),n.loadingHistory?(_(),x("div",EE," Chargement de l'historique... ")):n.paymentHistory.length===0?(_(),x("div",PE," Aucun paiement enregistr pour cette facture ")):(_(!0),x(fe,{key:2},be(n.paymentHistory,a=>(_(),x("div",{key:a.id,class:"bg-white border rounded-lg p-4 hover:shadow-md transition"},[o("div",AE,[o("div",RE,[o("div",TE,[o("span",OE,b(n.getPaymentIcon(a.payment_method)),1),o("div",null,[o("p",ME,b(n.formatCurrency(a.amount)),1),o("p",DE,b(n.formatDate(a.payment_date)),1)])]),o("div",IE,[o("p",null,[t[59]||(t[59]=o("span",{class:"font-medium"},"Mode:",-1)),ne(" "+b(n.getPaymentMethodLabel(a.payment_method)),1)]),a.notes?(_(),x("p",NE,[t[60]||(t[60]=o("span",{class:"font-medium"},"Notes:",-1)),ne(" "+b(a.notes),1)])):L("",!0),o("p",FE,"Enregistr le "+b(n.formatDateTime(a.created_at)),1)])]),n.canDeletePayment(a)?(_(),x("button",{key:0,onClick:c=>n.deletePayment(a.id),class:"text-red-600 hover:text-red-800 text-sm",title:"Supprimer ce paiement"},"  ",8,$E)):L("",!0)])]))),128))])])])])):L("",!0),n.toast.show?(_(),x("div",{key:3,class:le(["fixed top-4 right-4 z-[60] px-6 py-4 rounded-lg shadow-xl transform transition-all duration-300 flex items-center gap-3 min-w-[300px]",{"bg-green-600 text-white":n.toast.type==="success","bg-red-600 text-white":n.toast.type==="error","bg-yellow-500 text-white":n.toast.type==="warning"}])},[n.toast.type==="success"?(_(),x("span",LE,"")):n.toast.type==="error"?(_(),x("span",qE,"")):(_(),x("span",UE,"")),o("p",jE,b(n.toast.message),1)],2)):L("",!0)])}const VE=Ve(iS,[["render",BE]]),HE={name:"DepositsListTable",props:{deposits:{type:Array,required:!0},loading:{type:Boolean,default:!1},type:{type:String,required:!0,validator:e=>["outgoing","incoming"].includes(e)}},emits:["process-return","create","refresh"],setup(){return{formatCurrency:r=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(r||0)+" FCFA",getStatusLabel:r=>({active:"Active",partially_returned:"Partiel",completed:"Termine",cancelled:"Annule"})[r]||r}}},zE={key:0,class:"text-center py-12"},GE={key:1,class:"text-center py-16"},QE={class:"text-gray-600 mb-6"},KE={key:2,class:"overflow-x-auto"},JE={class:"min-w-full divide-y divide-gray-200"},WE={class:"bg-gray-50"},XE={class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},YE={class:"bg-white divide-y divide-gray-200"},ZE={class:"px-4 py-3 text-sm font-mono"},e3={class:"px-4 py-3 text-sm font-medium"},t3={class:"px-4 py-3 text-sm"},n3={class:"px-4 py-3 text-sm"},o3={class:"px-4 py-3 text-sm"},r3={class:"px-4 py-3 text-sm font-semibold"},s3={class:"px-4 py-3 text-sm"},i3={class:"px-4 py-3 text-sm"},a3=["onClick"];function l3(e,t,r,n,s,l){return _(),x("div",null,[r.loading?(_(),x("div",zE,[...t[1]||(t[1]=[o("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-blue-600"},null,-1),o("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)])])):r.deposits.length===0?(_(),x("div",GE,[t[2]||(t[2]=o("div",{class:"mb-4"},[o("span",{class:"text-6xl"},"")],-1)),t[3]||(t[3]=o("h3",{class:"text-xl font-semibold text-gray-800 mb-2"}," Aucune consigne trouve ",-1)),o("p",QE,b(r.type==="outgoing"?"Commencez par crer une consigne sortante pour vos clients":"Commencez par crer une consigne entrante pour vos fournisseurs"),1),o("button",{onClick:t[0]||(t[0]=i=>e.$emit("create")),class:le(["px-6 py-3 text-white rounded-lg font-medium transition shadow-lg hover:shadow-xl",r.type==="outgoing"?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"])},b(r.type==="outgoing"?" Crer votre premire consigne client":" Crer votre premire consigne fournisseur"),3)])):(_(),x("div",KE,[o("table",JE,[o("thead",WE,[o("tr",null,[t[4]||(t[4]=o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rfrence",-1)),o("th",XE,b(r.type==="outgoing"?"Client":"Fournisseur"),1),t[5]||(t[5]=o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type",-1)),t[6]||(t[6]=o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Quantit",-1)),t[7]||(t[7]=o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"En attente",-1)),t[8]||(t[8]=o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant",-1)),t[9]||(t[9]=o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut",-1)),t[10]||(t[10]=o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions",-1))])]),o("tbody",YE,[(_(!0),x(fe,null,be(r.deposits,i=>(_(),x("tr",{key:i.id,class:"hover:bg-gray-50"},[o("td",ZE,b(i.reference),1),o("td",e3,b(r.type==="outgoing"?i.customer?.name:i.supplier?.name),1),o("td",t3,b(i.deposit_type?.name),1),o("td",n3,b(i.quantity),1),o("td",o3,[o("span",{class:le(["font-semibold",i.quantity_pending>0?"text-orange-600":"text-green-600"])},b(i.quantity_pending),3)]),o("td",r3,b(n.formatCurrency(i.total_deposit_amount)),1),o("td",s3,[o("span",{class:le(["px-2 py-1 rounded-full text-xs font-medium",i.status==="active"?"bg-green-100 text-green-800":i.status==="partially_returned"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"])},b(n.getStatusLabel(i.status)),3)]),o("td",i3,[i.quantity_pending>0?(_(),x("button",{key:0,onClick:a=>e.$emit("process-return",i),class:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-xs font-medium"},"  Retour ",8,a3)):L("",!0)])]))),128))])])]))])}const u3=Ve(HE,[["render",l3]]),d3={name:"ReturnsHistory",props:{returns:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const t=N(""),r=N("all"),n=K(()=>{let a=e.returns;if(r.value!=="all"){const c=new Date,d=new Date(c.setHours(0,0,0,0)),u=new Date(c.setDate(c.getDate()-c.getDay())),f=new Date(c.getFullYear(),c.getMonth(),1);a=a.filter(p=>{const m=new Date(p.returned_at);return r.value==="today"?m>=d:r.value==="week"?m>=u:r.value==="month"?m>=f:!0})}if(t.value){const c=t.value.toLowerCase();a=a.filter(d=>{const u=d.deposit?.customer?.name||d.deposit?.supplier?.name;return d.reference?.toLowerCase().includes(c)||u?.toLowerCase().includes(c)||d.deposit?.deposit_type?.name?.toLowerCase().includes(c)})}return a}),s=a=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(a||0)+" FCFA";return{searchQuery:t,dateFilter:r,filteredReturns:n,formatCurrency:s,formatDate:a=>new Date(a).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),viewDetails:a=>{alert(`Dtails du retour:

Rfrence: ${a.reference}
Quantit: ${a.quantity}
Bon tat: ${a.good_condition}
Endommags: ${a.damaged}
Perdus: ${a.lost}
Pnalit totale: ${s(a.total_penalty)}
Remboursement: ${s(a.refund_amount)}

Notes: ${a.notes||"Aucune"}`)}}}},c3={class:"space-y-4"},f3={class:"flex gap-3"},p3={key:0,class:"text-center py-8"},m3={key:1,class:"text-center py-12"},g3={key:2,class:"overflow-x-auto"},v3={class:"w-full bg-white rounded-lg overflow-hidden"},h3={class:"divide-y divide-gray-200"},y3={class:"px-4 py-3"},b3={class:"text-sm font-medium"},_3={class:"px-4 py-3"},x3={class:"font-mono text-sm"},w3={class:"px-4 py-3"},C3={class:"font-medium"},k3={class:"px-4 py-3"},S3={class:"px-4 py-3"},E3={class:"font-semibold"},P3={class:"px-4 py-3"},A3={class:"flex gap-1 text-xs"},R3={class:"px-2 py-1 bg-green-100 text-green-700 rounded"},T3={key:0,class:"px-2 py-1 bg-orange-100 text-orange-700 rounded"},O3={key:1,class:"px-2 py-1 bg-red-100 text-red-700 rounded"},M3={class:"px-4 py-3"},D3={class:"font-semibold text-green-600"},I3={key:0,class:"text-xs text-red-600"},N3={class:"px-4 py-3"},F3=["onClick"];function $3(e,t,r,n,s,l){return _(),x("div",c3,[o("div",f3,[Q(o("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>n.searchQuery=i),type:"text",placeholder:" Rechercher...",class:"flex-1 px-4 py-2 border rounded-lg"},null,512),[[oe,n.searchQuery]]),Q(o("select",{"onUpdate:modelValue":t[1]||(t[1]=i=>n.dateFilter=i),class:"px-4 py-2 border rounded-lg"},[...t[2]||(t[2]=[o("option",{value:"all"},"Toutes les priodes",-1),o("option",{value:"today"},"Aujourd'hui",-1),o("option",{value:"week"},"Cette semaine",-1),o("option",{value:"month"},"Ce mois",-1)])],512),[[$e,n.dateFilter]])]),r.loading?(_(),x("div",p3,[...t[3]||(t[3]=[o("p",{class:"text-gray-500"},"Chargement...",-1)])])):n.filteredReturns.length===0?(_(),x("div",m3,[...t[4]||(t[4]=[o("p",{class:"text-gray-500 text-lg"},"Aucun retour enregistr",-1)])])):(_(),x("div",g3,[o("table",v3,[t[5]||(t[5]=o("thead",{class:"bg-gray-50"},[o("tr",null,[o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rfrence"),o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Partenaire"),o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Quantit"),o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"tat"),o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Remboursement"),o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),o("tbody",h3,[(_(!0),x(fe,null,be(n.filteredReturns,i=>(_(),x("tr",{key:i.id,class:"hover:bg-gray-50 transition"},[o("td",y3,[o("div",b3,b(n.formatDate(i.returned_at)),1)]),o("td",_3,[o("div",x3,b(i.reference),1)]),o("td",w3,[o("div",C3,b(i.deposit?.deposit_type?.name),1)]),o("td",k3,[o("div",null,b(i.deposit?.customer?.name||i.deposit?.supplier?.name),1)]),o("td",S3,[o("div",E3,b(i.quantity),1)]),o("td",P3,[o("div",A3,[o("span",R3,"  "+b(i.good_condition),1),i.damaged>0?(_(),x("span",T3,"  "+b(i.damaged),1)):L("",!0),i.lost>0?(_(),x("span",O3,"  "+b(i.lost),1)):L("",!0)])]),o("td",M3,[o("div",D3,b(n.formatCurrency(i.refund_amount)),1),i.total_penalty>0?(_(),x("div",I3," Pnalit: "+b(n.formatCurrency(i.total_penalty)),1)):L("",!0)]),o("td",N3,[o("button",{onClick:a=>n.viewDetails(i),class:"text-blue-600 hover:text-blue-800 text-sm"},"  Dtails ",8,F3)])]))),128))])])]))])}const L3=Ve(d3,[["render",$3]]),q3={name:"CreateDepositModal",props:{isOpen:Boolean,type:{type:String,required:!0},depositTypes:{type:Array,default:()=>[]},partners:{type:Array,default:()=>[]}},emits:["close","created"],setup(e,{emit:t}){const r=N(!1),n=N({partner_id:"",deposit_type_id:"",quantity:1,unit_deposit_amount:0,total_deposit_amount:0,notes:""}),s=c=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0}).format(c||0)+" FCFA",l=()=>{const c=e.depositTypes.find(d=>d.id===n.value.deposit_type_id);c&&(n.value.unit_deposit_amount=c.amount,i())},i=()=>{n.value.total_deposit_amount=n.value.quantity*n.value.unit_deposit_amount};return Ae(()=>e.isOpen,c=>{c&&(n.value={partner_id:"",deposit_type_id:"",quantity:1,unit_deposit_amount:0,total_deposit_amount:0,notes:""})}),{saving:r,form:n,formatCurrency:s,updateUnitAmount:l,calculateTotal:i,handleSubmit:async()=>{if(!r.value){if(n.value.quantity<=0){alert(" La quantit doit tre suprieure  0");return}r.value=!0;try{const c={type:e.type,deposit_type_id:n.value.deposit_type_id,quantity:n.value.quantity,unit_deposit_amount:n.value.unit_deposit_amount,total_deposit_amount:n.value.total_deposit_amount,notes:n.value.notes};e.type==="outgoing"?c.customer_id=n.value.partner_id:c.supplier_id=n.value.partner_id;const d=e.type==="outgoing"?"/deposits/outgoing":"/deposits/incoming",u=await Oe.post(d,c);alert(" Consigne cre avec succs"),t("created",u.data||u),t("close")}catch(c){alert(" "+c.message)}finally{r.value=!1}}}}}},U3={class:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto"},j3={class:"flex justify-between items-center"},B3={class:"text-xl font-bold"},V3={class:"block text-sm font-medium text-gray-700 mb-1"},H3=["value"],z3=["value"],G3={class:"bg-blue-50 rounded-lg p-3"},Q3={class:"flex justify-between items-center"},K3={class:"text-xl font-bold text-blue-600"},J3={class:"flex gap-2 pt-2"},W3=["disabled"];function X3(e,t,r,n,s,l){return r.isOpen?(_(),x("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[10]||(t[10]=xe(i=>e.$emit("close"),["self"]))},[o("div",U3,[o("div",{class:le(["text-white p-4 rounded-t-lg",r.type==="outgoing"?"bg-blue-600":"bg-green-600"])},[o("div",j3,[o("h3",B3,b(r.type==="outgoing"?" Consigne Sortante":" Consigne Entrante"),1),o("button",{onClick:t[0]||(t[0]=i=>e.$emit("close")),class:"text-white hover:text-gray-200 text-2xl leading-none"},"")])],2),o("form",{onSubmit:t[9]||(t[9]=xe((...i)=>n.handleSubmit&&n.handleSubmit(...i),["prevent"])),class:"p-4 space-y-3"},[o("div",null,[o("label",V3,[ne(b(r.type==="outgoing"?"Client":"Fournisseur")+" ",1),t[11]||(t[11]=o("span",{class:"text-red-500"},"*",-1))]),Q(o("select",{"onUpdate:modelValue":t[1]||(t[1]=i=>n.form.partner_id=i),required:"",class:"w-full px-3 py-2 border rounded-lg text-sm"},[t[12]||(t[12]=o("option",{value:""},"Slectionner...",-1)),(_(!0),x(fe,null,be(r.partners,i=>(_(),x("option",{key:i.id,value:i.id},b(i.name),9,H3))),128))],512),[[$e,n.form.partner_id]])]),o("div",null,[t[14]||(t[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[ne(" Type d'emballage "),o("span",{class:"text-red-500"},"*")],-1)),Q(o("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>n.form.deposit_type_id=i),required:"",class:"w-full px-3 py-2 border rounded-lg text-sm",onChange:t[3]||(t[3]=(...i)=>n.updateUnitAmount&&n.updateUnitAmount(...i))},[t[13]||(t[13]=o("option",{value:""},"Slectionner...",-1)),(_(!0),x(fe,null,be(r.depositTypes,i=>(_(),x("option",{key:i.id,value:i.id},b(i.name)+" - "+b(n.formatCurrency(i.amount)),9,z3))),128))],544),[[$e,n.form.deposit_type_id]])]),o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[ne(" Quantit "),o("span",{class:"text-red-500"},"*")],-1)),Q(o("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>n.form.quantity=i),type:"number",min:"1",required:"",class:"w-full px-3 py-2 border rounded-lg text-sm",onInput:t[5]||(t[5]=(...i)=>n.calculateTotal&&n.calculateTotal(...i))},null,544),[[oe,n.form.quantity,void 0,{number:!0}]])]),o("div",null,[t[16]||(t[16]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Montant unitaire ",-1)),Q(o("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>n.form.unit_deposit_amount=i),type:"number",readonly:"",class:"w-full px-3 py-2 border rounded-lg bg-gray-100 text-sm"},null,512),[[oe,n.form.unit_deposit_amount]])]),o("div",G3,[o("div",Q3,[t[17]||(t[17]=o("span",{class:"font-semibold text-sm"},"Total:",-1)),o("span",K3,b(n.formatCurrency(n.form.total_deposit_amount)),1)])]),o("div",null,[t[18]||(t[18]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),Q(o("textarea",{"onUpdate:modelValue":t[7]||(t[7]=i=>n.form.notes=i),rows:"2",class:"w-full px-3 py-2 border rounded-lg text-sm"},null,512),[[oe,n.form.notes]])]),o("div",J3,[o("button",{type:"button",onClick:t[8]||(t[8]=i=>e.$emit("close")),class:"flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50 text-sm"}," Annuler "),o("button",{type:"submit",disabled:n.saving,class:le(["flex-1 px-4 py-2 text-white rounded-lg text-sm font-medium",r.type==="outgoing"?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700",n.saving?"opacity-50 cursor-not-allowed":""])},b(n.saving?"Enregistrement...":" Crer"),11,W3)])],32)])])):L("",!0)}const Y3=Ve(q3,[["render",X3]]),Z3={name:"ProcessReturnModal",props:{isOpen:{type:Boolean,required:!0},deposit:{type:Object,default:null}},emits:["close","returned"],setup(e,{emit:t}){const r=N(!1),n=N({quantity:0,good_condition:0,damaged:0,lost:0,damage_penalty:0,late_penalty:0,notes:""}),s=K(()=>(n.value.good_condition||0)+(n.value.damaged||0)+(n.value.lost||0)),l=K(()=>{if(!e.deposit)return 0;const u=(n.value.good_condition||0)*e.deposit.unit_deposit_amount,f=(n.value.damage_penalty||0)+(n.value.late_penalty||0);return Math.max(0,u-f)}),i=u=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(u||0)+" FCFA",a=()=>{const u=s.value;if(u>n.value.quantity){const f=u-n.value.quantity;n.value.lost>=f?n.value.lost-=f:n.value.damaged>=f?n.value.damaged-=f:n.value.good_condition>=f&&(n.value.good_condition-=f)}},c=()=>{n.value={quantity:e.deposit?.quantity_pending||0,good_condition:e.deposit?.quantity_pending||0,damaged:0,lost:0,damage_penalty:0,late_penalty:0,notes:""}};return Ae(()=>e.isOpen,u=>{u&&e.deposit&&c()}),{saving:r,form:n,totalReturned:s,refundAmount:l,formatCurrency:i,validateQuantities:a,handleSubmit:async()=>{if(!r.value){if(s.value!==n.value.quantity){alert(" La rpartition des emballages ne correspond pas  la quantit retourne");return}r.value=!0;try{const u=await Oe.post(`/deposits/${e.deposit.id}/return`,n.value);alert(" Retour trait avec succs"),t("returned",u.data||u),t("close")}catch(u){console.error(" Erreur:",u),alert(" "+u.message)}finally{r.value=!1}}}}}},e5={class:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto"},t5={class:"bg-green-600 text-white p-6 rounded-t-lg sticky top-0"},n5={class:"flex justify-between items-center"},o5={class:"bg-blue-50 border-l-4 border-blue-500 p-4 m-6"},r5={class:"grid grid-cols-2 gap-3 text-sm"},s5={class:"text-orange-600 font-bold"},i5={class:"bg-gray-50 rounded-lg p-4"},a5=["max"],l5={class:"text-xs text-gray-500 mt-1"},u5={class:"space-y-3"},d5={class:"grid grid-cols-3 gap-3"},c5={class:"bg-green-50 border border-green-200 rounded-lg p-3"},f5=["max"],p5={class:"bg-orange-50 border border-orange-200 rounded-lg p-3"},m5=["max"],g5={class:"bg-red-50 border border-red-200 rounded-lg p-3"},v5=["max"],h5={key:0,class:"bg-red-100 border border-red-300 rounded-lg p-3"},y5={class:"text-sm text-red-700"},b5={class:"space-y-3"},_5={class:"grid grid-cols-2 gap-3"},x5={class:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 border-2 border-green-300"},w5={class:"space-y-2 text-sm"},C5={class:"flex justify-between"},k5={class:"font-semibold"},S5={key:0,class:"flex justify-between text-orange-600"},E5={class:"font-semibold"},P5={key:1,class:"flex justify-between text-orange-600"},A5={class:"font-semibold"},R5={class:"border-t-2 border-green-300 pt-2 flex justify-between text-lg font-bold text-green-700"},T5={class:"flex gap-3"},O5=["disabled"];function M5(e,t,r,n,s,l){return r.isOpen&&r.deposit?(_(),x("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[13]||(t[13]=xe(i=>e.$emit("close"),["self"]))},[o("div",e5,[o("div",t5,[o("div",n5,[t[14]||(t[14]=o("h3",{class:"text-2xl font-bold"}," Traiter un Retour",-1)),o("button",{onClick:t[0]||(t[0]=i=>e.$emit("close")),class:"text-white hover:text-gray-200 text-2xl"},"")])]),o("div",o5,[o("div",r5,[o("div",null,[t[15]||(t[15]=o("span",{class:"font-semibold"},"Type:",-1)),ne(" "+b(r.deposit.deposit_type?.name),1)]),o("div",null,[t[16]||(t[16]=o("span",{class:"font-semibold"},"Partenaire:",-1)),ne(" "+b(r.deposit.customer?.name||r.deposit.supplier?.name),1)]),o("div",null,[t[17]||(t[17]=o("span",{class:"font-semibold"},"Quantit initiale:",-1)),ne(" "+b(r.deposit.quantity),1)]),o("div",null,[t[18]||(t[18]=o("span",{class:"font-semibold"},"En attente:",-1)),o("span",s5,b(r.deposit.quantity_pending),1)]),o("div",null,[t[19]||(t[19]=o("span",{class:"font-semibold"},"Montant unitaire:",-1)),ne(" "+b(n.formatCurrency(r.deposit.unit_deposit_amount)),1)]),o("div",null,[t[20]||(t[20]=o("span",{class:"font-semibold"},"Montant total:",-1)),ne(" "+b(n.formatCurrency(r.deposit.total_deposit_amount)),1)])])]),o("form",{onSubmit:t[12]||(t[12]=xe((...i)=>n.handleSubmit&&n.handleSubmit(...i),["prevent"])),class:"p-6 space-y-6"},[o("div",i5,[t[21]||(t[21]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[ne(" Quantit retourne "),o("span",{class:"text-red-500"},"*")],-1)),Q(o("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>n.form.quantity=i),type:"number",min:1,max:r.deposit.quantity_pending,required:"",class:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 text-lg font-semibold"},null,8,a5),[[oe,n.form.quantity,void 0,{number:!0}]]),o("p",l5," Maximum: "+b(r.deposit.quantity_pending)+" emballages ",1)]),o("div",u5,[t[25]||(t[25]=o("h4",{class:"font-semibold text-gray-800"},"tat des emballages retourns",-1)),o("div",d5,[o("div",c5,[t[22]||(t[22]=o("label",{class:"block text-sm font-medium text-green-700 mb-2"},"  Bon tat ",-1)),Q(o("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>n.form.good_condition=i),type:"number",min:"0",max:n.form.quantity,class:"w-full px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500",onInput:t[3]||(t[3]=(...i)=>n.validateQuantities&&n.validateQuantities(...i))},null,40,f5),[[oe,n.form.good_condition,void 0,{number:!0}]])]),o("div",p5,[t[23]||(t[23]=o("label",{class:"block text-sm font-medium text-orange-700 mb-2"},"  Endommags ",-1)),Q(o("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>n.form.damaged=i),type:"number",min:"0",max:n.form.quantity,class:"w-full px-3 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500",onInput:t[5]||(t[5]=(...i)=>n.validateQuantities&&n.validateQuantities(...i))},null,40,m5),[[oe,n.form.damaged,void 0,{number:!0}]])]),o("div",g5,[t[24]||(t[24]=o("label",{class:"block text-sm font-medium text-red-700 mb-2"},"  Perdus ",-1)),Q(o("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>n.form.lost=i),type:"number",min:"0",max:n.form.quantity,class:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500",onInput:t[7]||(t[7]=(...i)=>n.validateQuantities&&n.validateQuantities(...i))},null,40,v5),[[oe,n.form.lost,void 0,{number:!0}]])])]),n.totalReturned!==n.form.quantity?(_(),x("div",h5,[o("p",y5,"  La somme ("+b(n.totalReturned)+") doit tre gale  la quantit retourne ("+b(n.form.quantity)+") ",1)])):L("",!0)]),o("div",b5,[t[28]||(t[28]=o("h4",{class:"font-semibold text-gray-800"},"Pnalits (optionnel)",-1)),o("div",_5,[o("div",null,[t[26]||(t[26]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  Pnalit casse/dommage ",-1)),Q(o("input",{"onUpdate:modelValue":t[8]||(t[8]=i=>n.form.damage_penalty=i),type:"number",min:"0",step:"100",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500"},null,512),[[oe,n.form.damage_penalty,void 0,{number:!0}]])]),o("div",null,[t[27]||(t[27]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  Pnalit retard ",-1)),Q(o("input",{"onUpdate:modelValue":t[9]||(t[9]=i=>n.form.late_penalty=i),type:"number",min:"0",step:"100",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500"},null,512),[[oe,n.form.late_penalty,void 0,{number:!0}]])])])]),o("div",null,[t[29]||(t[29]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notes ",-1)),Q(o("textarea",{"onUpdate:modelValue":t[10]||(t[10]=i=>n.form.notes=i),rows:"3",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"Observations sur le retour..."},null,512),[[oe,n.form.notes]])]),o("div",x5,[t[33]||(t[33]=o("h4",{class:"font-semibold text-gray-800 mb-3"}," Rsum Financier",-1)),o("div",w5,[o("div",C5,[o("span",null,"Montant consignes ("+b(n.form.good_condition)+"  "+b(n.formatCurrency(r.deposit.unit_deposit_amount))+"):",1),o("span",k5,b(n.formatCurrency(n.form.good_condition*r.deposit.unit_deposit_amount)),1)]),n.form.damage_penalty>0?(_(),x("div",S5,[t[30]||(t[30]=o("span",null,"Pnalit casse:",-1)),o("span",E5,"- "+b(n.formatCurrency(n.form.damage_penalty)),1)])):L("",!0),n.form.late_penalty>0?(_(),x("div",P5,[t[31]||(t[31]=o("span",null,"Pnalit retard:",-1)),o("span",A5,"- "+b(n.formatCurrency(n.form.late_penalty)),1)])):L("",!0),o("div",R5,[t[32]||(t[32]=o("span",null,"Montant  rembourser:",-1)),o("span",null,b(n.formatCurrency(n.refundAmount)),1)])])]),o("div",T5,[o("button",{type:"button",onClick:t[11]||(t[11]=i=>e.$emit("close")),class:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition"}," Annuler "),o("button",{type:"submit",disabled:n.saving||n.totalReturned!==n.form.quantity,class:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition"},b(n.saving?"Traitement...":" Valider le retour"),9,O5)])],32)])])):L("",!0)}const D5=Ve(Z3,[["render",M5]]),I5={name:"DepositTypeModal",props:{isOpen:{type:Boolean,default:!1},depositType:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const r=N(!1),n=N({code:"",name:"",description:"",category:"",amount:0,initial_stock:0,is_active:!0});return Ae(()=>e.isOpen,l=>{l&&(e.depositType?n.value={code:e.depositType.code||"",name:e.depositType.name||"",description:e.depositType.description||"",category:e.depositType.category||"",amount:e.depositType.amount||0,initial_stock:e.depositType.current_stock||0,is_active:e.depositType.is_active!==!1}:n.value={code:"",name:"",description:"",category:"",amount:0,initial_stock:0,is_active:!0})}),{form:n,saving:r,handleSubmit:async()=>{r.value=!0;try{const l={code:n.value.code,name:n.value.name,description:n.value.description||null,category:n.value.category||null,amount:n.value.amount,initial_stock:n.value.initial_stock,is_active:n.value.is_active};e.depositType?(await Oe.put(`/deposit-types/${e.depositType.id}`,l),console.log(" Type d'emballage modifi")):(await Oe.post("/deposit-types",l),console.log(" Type d'emballage cr")),t("saved"),t("close")}catch(l){console.error(" Erreur sauvegarde type:",l),alert("Erreur lors de la sauvegarde du type d'emballage")}finally{r.value=!1}}}}},N5={class:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto"},F5={class:"bg-purple-600 text-white p-4 rounded-t-lg sticky top-0"},$5={class:"flex justify-between items-center"},L5={class:"text-xl font-bold"},q5={class:"grid grid-cols-2 gap-3"},U5={class:"grid grid-cols-2 gap-3"},j5={class:"grid grid-cols-2 gap-3"},B5={class:"flex items-end"},V5={class:"flex items-center gap-2 cursor-pointer"},H5={class:"flex gap-2 pt-2"},z5=["disabled"];function G5(e,t,r,n,s,l){return r.isOpen?(_(),x("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[10]||(t[10]=xe(i=>e.$emit("close"),["self"]))},[o("div",N5,[o("div",F5,[o("div",$5,[o("h3",L5,b(r.depositType?" Modifier":" Nouveau")+" Type d'emballage ",1),o("button",{onClick:t[0]||(t[0]=i=>e.$emit("close")),class:"text-white hover:text-gray-200 text-2xl leading-none"},"")])]),o("form",{onSubmit:t[9]||(t[9]=xe((...i)=>n.handleSubmit&&n.handleSubmit(...i),["prevent"])),class:"p-4 space-y-3"},[o("div",q5,[o("div",null,[t[11]||(t[11]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[ne(" Code "),o("span",{class:"text-red-500"},"*")],-1)),Q(o("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>n.form.code=i),type:"text",required:"",class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 text-sm",placeholder:"Ex: BOT-1L"},null,512),[[oe,n.form.code]])]),o("div",null,[t[12]||(t[12]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[ne(" Nom "),o("span",{class:"text-red-500"},"*")],-1)),Q(o("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>n.form.name=i),type:"text",required:"",class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 text-sm",placeholder:"Ex: Bouteille 1L"},null,512),[[oe,n.form.name]])])]),o("div",null,[t[13]||(t[13]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),Q(o("textarea",{"onUpdate:modelValue":t[3]||(t[3]=i=>n.form.description=i),rows:"2",class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 text-sm",placeholder:"Description optionnelle..."},null,512),[[oe,n.form.description]])]),o("div",U5,[o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Catgorie",-1)),Q(o("select",{"onUpdate:modelValue":t[4]||(t[4]=i=>n.form.category=i),class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 text-sm"},[...t[14]||(t[14]=[Dt('<option value="">Aucune</option><option value="bouteille">Bouteille</option><option value="casier">Casier</option><option value="bidon">Bidon</option><option value="ft">Ft</option><option value="autre">Autre</option>',6)])],512),[[$e,n.form.category]])]),o("div",null,[t[16]||(t[16]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[ne(" Montant "),o("span",{class:"text-red-500"},"*")],-1)),Q(o("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>n.form.amount=i),type:"number",min:"0",step:"100",required:"",class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 text-sm"},null,512),[[oe,n.form.amount,void 0,{number:!0}]])])]),o("div",j5,[o("div",null,[t[17]||(t[17]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Stock initial",-1)),Q(o("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>n.form.initial_stock=i),type:"number",min:"0",class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 text-sm"},null,512),[[oe,n.form.initial_stock,void 0,{number:!0}]])]),o("div",B5,[o("label",V5,[Q(o("input",{"onUpdate:modelValue":t[7]||(t[7]=i=>n.form.is_active=i),type:"checkbox",class:"w-4 h-4 text-purple-600 rounded focus:ring-2 focus:ring-purple-500"},null,512),[[dt,n.form.is_active]]),t[18]||(t[18]=o("span",{class:"text-sm font-medium text-gray-700"},"Type actif",-1))])])]),o("div",H5,[o("button",{type:"button",onClick:t[8]||(t[8]=i=>e.$emit("close")),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm"}," Annuler "),o("button",{type:"submit",disabled:n.saving,class:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 text-sm font-medium"},b(n.saving?"Enregistrement...":r.depositType?" Modifier":" Crer"),9,z5)])],32)])])):L("",!0)}const Q5=Ve(I5,[["render",G5]]),K5={name:"DepositsView",components:{DepositsListTable:u3,ReturnsHistory:L3,CreateDepositModal:Y3,ProcessReturnModal:D5,DepositTypeModal:Q5},setup(){const e=N("customers"),t=N(!1),r=N([]),n=N([]),s=N([]),l=N([]),i=N([]),a=N({active_deposits:0,total_units_out:0,total_deposits_amount:0,total_penalties:0}),c=N(!1),d=N("outgoing"),u=N(!1),f=N(null),p=N(!1),m=N(null),g=[{id:"customers",label:" Consignes Clients"},{id:"suppliers",label:" Consignes Fournisseurs"},{id:"types",label:" Types d'emballages"},{id:"history",label:" Historique des retours"}],v=K(()=>r.value.filter(A=>A.type==="outgoing")),h=K(()=>r.value.filter(A=>A.type==="incoming")),C=K(()=>d.value==="outgoing"?s.value:l.value),E=A=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(A||0)+" FCFA",k=async()=>{t.value=!0;try{const A=await Oe.get("/deposits");A.data&&Array.isArray(A.data)?r.value=A.data:Array.isArray(A)?r.value=A:r.value=[],console.log(" Consignes charges:",r.value.length)}catch(A){console.error(" Erreur chargement consignes:",A),r.value=[]}finally{t.value=!1}},T=async()=>{try{const A=await Oe.get("/deposit-types");A.data&&Array.isArray(A.data)?n.value=A.data:Array.isArray(A)?n.value=A:n.value=[],console.log(" Types chargs:",n.value.length)}catch(A){console.error(" Erreur chargement types:",A),n.value=[]}},y=async()=>{try{const A=await Oe.get("/customers");A.data&&Array.isArray(A.data)?s.value=A.data:Array.isArray(A)?s.value=A:s.value=[];const z=await Oe.get("/suppliers");z.data&&Array.isArray(z.data)?l.value=z.data:Array.isArray(z)?l.value=z:l.value=[],console.log(" Partenaires chargs:",{clients:s.value.length,fournisseurs:l.value.length})}catch(A){console.error(" Erreur chargement partenaires:",A),s.value=[],l.value=[]}},R=async()=>{t.value=!0;try{const A=await Oe.get("/deposit-returns");A.data&&Array.isArray(A.data)?i.value=A.data:Array.isArray(A)?i.value=A:i.value=[],console.log(" Retours chargs:",i.value.length)}catch(A){console.error(" Erreur chargement retours:",A),i.value=[]}finally{t.value=!1}},S=async()=>{try{const A=await Oe.get("/deposits/stats/summary");A.data&&typeof A.data=="object"?a.value=A.data:A&&typeof A=="object"&&!A.success?a.value=A:a.value={active_deposits:0,total_units_out:0,total_deposits_amount:0,total_penalties:0},console.log(" Stats charges:",a.value)}catch{console.warn(" Stats non disponibles"),a.value={active_deposits:0,total_units_out:0,total_deposits_amount:0,total_penalties:0}}},w=async(A,z="deposit")=>{if(!window.electron||!window.electron.print){console.warn(" Impression ignore: API Electron non disponible");return}const te=z==="return",pe=te?"REU DE RETOUR":"TICKET DE CONSIGNE",Re=new Date().toLocaleString("fr-FR"),de=A.customer?.name||A.supplier?.name||(A.customer_id?"Client #"+A.customer_id:"Fournisseur #"+A.supplier_id),P=A.deposit_type?.name||"Emballage consign",W=te&&A.quantity_returned||A.quantity,ke=te?A.refund_amount||0:A.total_deposit_amount,Ee=`
        <html>
        <head>
          <style>
            body { font-family: 'Courier New', monospace; font-size: 12px; width: 80mm; margin: 0 auto; }
            .header { text-align: center; margin-bottom: 15px; border-bottom: 1px dashed #000; padding-bottom: 10px; }
            .title { font-size: 16px; font-weight: bold; margin: 5px 0; }
            .info { margin-bottom: 15px; }
            .row { display: flex; justify-content: space-between; margin-bottom: 5px; }
            .total { border-top: 1px dashed #000; margin-top: 10px; padding-top: 10px; font-weight: bold; font-size: 14px; }
            .footer { text-align: center; margin-top: 20px; font-size: 10px; color: #666; }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="title">SmartDrink Store</div>
            <div>${pe}</div>
            <div>${Re}</div>
          </div>
          
          <div class="info">
            <div><strong>Partenaire:</strong> ${de}</div>
            <div><strong>Rf:</strong> #${A.id}</div>
          </div>

          <div class="items">
            <div class="row">
              <span>${P}</span>
              <span>x${W}</span>
            </div>
          </div>

          <div class="row total">
            <span>TOTAL</span>
            <span>${E(ke)}</span>
          </div>

          <div class="footer">
            <p>Merci de votre confiance !</p>
          </div>
        </body>
        </html>
      `;try{await window.electron.print(Ee)}catch(Be){console.error("Erreur impression:",Be),alert("Impossible d'imprimer le reu")}},O=A=>{console.log(" Ouverture modal cration:",A),d.value=A,c.value=!0},$=A=>{console.log(" Ouverture modal retour:",A),f.value=A,u.value=!0},U=A=>{console.log(" Ouverture modal dition type:",A),m.value=A,p.value=!0},I=()=>{console.log(" Fermeture modal type"),p.value=!1,m.value=null},M=async A=>{console.log(" Consigne cre, rechargement..."),c.value=!1,await k(),await S(),await T(),A&&confirm("Voulez-vous imprimer un reu pour cette consigne ?")&&w(A,"deposit")},j=async A=>{console.log(" Retour trait, rechargement..."),u.value=!1,await k(),await S(),await R(),await T(),A&&confirm("Voulez-vous imprimer un reu pour ce retour ?")&&w(A,"return")},B=async()=>{console.log(" Type sauvegard, rechargement..."),await T(),I()};return vt(()=>{console.log(" Initialisation page Consignes"),k(),T(),y(),S(),R()}),{activeTab:e,loading:t,tabs:g,deposits:r,depositTypes:n,customers:s,suppliers:l,returnsHistory:i,statistics:a,customerDeposits:v,supplierDeposits:h,currentPartners:C,showCreateModal:c,createModalType:d,showReturnModal:u,selectedDeposit:f,showDepositTypeModal:p,editingDepositType:m,formatCurrency:E,loadDeposits:k,loadDepositTypes:T,loadPartners:y,loadStatistics:S,loadReturnsHistory:R,openCreateModal:O,openReturnModal:$,editDepositType:U,closeDepositTypeModal:I,handleDepositCreated:M,handleReturnProcessed:j,handleDepositTypeSaved:B}}},J5={class:"min-h-screen bg-gray-50 p-6"},W5={class:"mb-6"},X5={class:"flex items-center justify-between"},Y5={class:"flex items-center space-x-3"},Z5={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},e4={class:"bg-white rounded-lg shadow p-5"},t4={class:"flex items-center justify-between"},n4={class:"text-2xl font-bold text-blue-600"},o4={class:"bg-white rounded-lg shadow p-5"},r4={class:"flex items-center justify-between"},s4={class:"text-2xl font-bold text-orange-600"},i4={class:"bg-white rounded-lg shadow p-5"},a4={class:"flex items-center justify-between"},l4={class:"text-2xl font-bold text-green-600"},u4={class:"bg-white rounded-lg shadow p-5"},d4={class:"flex items-center justify-between"},c4={class:"text-2xl font-bold text-red-600"},f4={class:"bg-white rounded-lg shadow mb-6"},p4={class:"border-b"},m4={class:"flex space-x-8 px-6","aria-label":"Tabs"},g4=["onClick"],v4={class:"p-6"},h4={key:0},y4={key:1},b4={key:2},_4={class:"space-y-4"},x4={key:0,class:"text-center py-12"},w4={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},C4={class:"flex items-start justify-between mb-3"},k4={class:"font-semibold text-lg text-gray-800"},S4={class:"text-sm text-gray-500"},E4={class:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded"},P4={class:"space-y-2 mb-4"},A4={class:"flex justify-between text-sm"},R4={class:"font-semibold text-gray-800"},T4={class:"flex justify-between text-sm"},O4=["onClick"],M4={key:3};function D4(e,t,r,n,s,l){const i=He("DepositsListTable"),a=He("ReturnsHistory"),c=He("CreateDepositModal"),d=He("ProcessReturnModal"),u=He("DepositTypeModal");return _(),x("div",J5,[o("div",W5,[o("div",X5,[t[11]||(t[11]=o("div",null,[o("h1",{class:"text-3xl font-bold text-gray-800"},"Gestion des Consignes"),o("p",{class:"text-gray-600 mt-1"},"Grez vos emballages consigns de manire professionelle")],-1)),o("div",Y5,[o("button",{onClick:t[0]||(t[0]=f=>n.openCreateModal("outgoing")),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center space-x-2"},[...t[8]||(t[8]=[o("span",null,"",-1),o("span",null,"Consigne Sortante",-1)])]),o("button",{onClick:t[1]||(t[1]=f=>n.openCreateModal("incoming")),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center space-x-2"},[...t[9]||(t[9]=[o("span",null,"",-1),o("span",null,"Consigne Entrante",-1)])]),o("button",{onClick:t[2]||(t[2]=f=>n.showDepositTypeModal=!0),class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition flex items-center space-x-2"},[...t[10]||(t[10]=[o("span",null,"",-1),o("span",null,"Type d'emballage",-1)])])])])]),o("div",Z5,[o("div",e4,[o("div",t4,[o("div",null,[t[12]||(t[12]=o("p",{class:"text-sm text-gray-600"},"Consignes Actives",-1)),o("p",n4,b(n.statistics?.active_deposits||0),1)]),t[13]||(t[13]=o("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},[o("span",{class:"text-2xl"},"")],-1))])]),o("div",o4,[o("div",r4,[o("div",null,[t[14]||(t[14]=o("p",{class:"text-sm text-gray-600"},"Emballages en circulation",-1)),o("p",s4,b(n.statistics?.total_units_out||0),1)]),t[15]||(t[15]=o("div",{class:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center"},[o("span",{class:"text-2xl"},"")],-1))])]),o("div",i4,[o("div",a4,[o("div",null,[t[16]||(t[16]=o("p",{class:"text-sm text-gray-600"},"Montant Total Cautions",-1)),o("p",l4,b(n.formatCurrency(n.statistics?.total_deposits_amount||0)),1)]),t[17]||(t[17]=o("div",{class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"},[o("span",{class:"text-2xl"},"")],-1))])]),o("div",u4,[o("div",d4,[o("div",null,[t[18]||(t[18]=o("p",{class:"text-sm text-gray-600"},"Pnalits Perues",-1)),o("p",c4,b(n.formatCurrency(n.statistics?.total_penalties||0)),1)]),t[19]||(t[19]=o("div",{class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center"},[o("span",{class:"text-2xl"},"")],-1))])])]),o("div",f4,[o("div",p4,[o("nav",m4,[(_(!0),x(fe,null,be(n.tabs,f=>(_(),x("button",{key:f.id,onClick:p=>n.activeTab=f.id,class:le(["py-4 px-1 border-b-2 font-medium text-sm transition",n.activeTab===f.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},b(f.label),11,g4))),128))])]),o("div",v4,[n.activeTab==="customers"?(_(),x("div",h4,[Te(i,{deposits:n.customerDeposits,loading:n.loading,type:"outgoing",onProcessReturn:n.openReturnModal,onCreate:t[3]||(t[3]=f=>n.openCreateModal("outgoing")),onRefresh:n.loadDeposits},null,8,["deposits","loading","onProcessReturn","onRefresh"])])):L("",!0),n.activeTab==="suppliers"?(_(),x("div",y4,[Te(i,{deposits:n.supplierDeposits,loading:n.loading,type:"incoming",onProcessReturn:n.openReturnModal,onCreate:t[4]||(t[4]=f=>n.openCreateModal("incoming")),onRefresh:n.loadDeposits},null,8,["deposits","loading","onProcessReturn","onRefresh"])])):L("",!0),n.activeTab==="types"?(_(),x("div",b4,[o("div",_4,[n.depositTypes.length===0?(_(),x("div",x4,[t[20]||(t[20]=o("p",{class:"text-gray-500 mb-4"},"Aucun type d'emballage configur",-1)),o("button",{onClick:t[5]||(t[5]=f=>n.showDepositTypeModal=!0),class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700"},"  Crer le premier type ")])):(_(),x("div",w4,[(_(!0),x(fe,null,be(n.depositTypes,f=>(_(),x("div",{key:f.id,class:"bg-white border rounded-lg p-5 hover:shadow-md transition"},[o("div",C4,[o("div",null,[o("h3",k4,b(f.name),1),o("p",S4,b(f.code),1)]),o("span",E4,b(f.category),1)]),o("div",P4,[o("div",A4,[t[21]||(t[21]=o("span",{class:"text-gray-600"},"Montant caution:",-1)),o("span",R4,b(n.formatCurrency(f.amount)),1)]),o("div",T4,[t[22]||(t[22]=o("span",{class:"text-gray-600"},"Stock actuel:",-1)),o("span",{class:le(["font-semibold",f.current_stock>10?"text-green-600":f.current_stock>0?"text-orange-600":"text-red-600"])},b(f.current_stock)+" units ",3)])]),o("button",{onClick:p=>n.editDepositType(f),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded hover:bg-gray-50 transition"},"  Modifier ",8,O4)]))),128))]))])])):L("",!0),n.activeTab==="history"?(_(),x("div",M4,[Te(a,{returns:n.returnsHistory,loading:n.loading,onRefresh:n.loadReturnsHistory},null,8,["returns","loading","onRefresh"])])):L("",!0)])]),Te(c,{"is-open":n.showCreateModal,type:n.createModalType,"deposit-types":n.depositTypes,partners:n.currentPartners,onClose:t[6]||(t[6]=f=>n.showCreateModal=!1),onCreated:n.handleDepositCreated},null,8,["is-open","type","deposit-types","partners","onCreated"]),Te(d,{"is-open":n.showReturnModal,deposit:n.selectedDeposit,onClose:t[7]||(t[7]=f=>n.showReturnModal=!1),onReturned:n.handleReturnProcessed},null,8,["is-open","deposit","onReturned"]),Te(u,{"is-open":n.showDepositTypeModal,"deposit-type":n.editingDepositType,onClose:n.closeDepositTypeModal,onSaved:n.handleDepositTypeSaved},null,8,["is-open","deposit-type","onClose","onSaved"])])}const I4=Ve(K5,[["render",D4]]),N4=N(!1),F4=N(!1),$4=N(!1),en=N({supplier_id:"",items:[{product_id:"",quantity:1,unit_cost:0,is_consigned:!1,deposit_type_id:null,deposit_quantity:0,unit_deposit_amount:0,notes:""}],payment_method:"cash",mobile_operator:"",mobile_reference:"",paid_amount:0,credit_days:30,discount:0,tax:0,order_date:new Date().toISOString().split("T")[0],expected_delivery_date:null,notes:""}),Dl=N({items:[],received_date:new Date().toISOString().split("T")[0],notes:""}),At=N([]),Il=N(null),L4=N(null),It=N({status:"all",supplier_id:"",date_from:"",date_to:"",search:""});function ka(e,t){const r=K(()=>{let S=At.value;if(It.value.status!=="all"&&(S=S.filter(w=>w.status===It.value.status)),It.value.supplier_id&&(S=S.filter(w=>w.supplier_id==It.value.supplier_id)),It.value.date_from&&(S=S.filter(w=>w.order_date>=It.value.date_from)),It.value.date_to&&(S=S.filter(w=>w.order_date<=It.value.date_to)),It.value.search){const w=It.value.search.toLowerCase();S=S.filter(O=>O.reference?.toLowerCase().includes(w)||O.supplier?.name?.toLowerCase().includes(w))}return S}),n=K(()=>At.value.filter(S=>S.status==="draft")),s=K(()=>At.value.filter(S=>S.status==="confirmed")),l=K(()=>At.value.filter(S=>S.status==="received")),i=K(()=>{const S=new Date;return At.value.filter(w=>w.payment_method==="credit"&&w.due_date&&new Date(w.due_date)<S&&w.paid_amount<w.total_amount)}),a=K(()=>At.value.filter(S=>S.status==="received").reduce((S,w)=>S+parseFloat(w.total_amount||0),0)),c=K(()=>At.value.filter(S=>S.payment_method==="credit"&&S.paid_amount<S.total_amount).reduce((S,w)=>S+(parseFloat(w.total_amount)-parseFloat(w.paid_amount)),0)),d=K(()=>{const S=en.value.items.reduce(($,U)=>$+U.quantity*U.unit_cost,0),w=parseFloat(en.value.tax)||0,O=parseFloat(en.value.discount)||0;return S+w-O}),u=K(()=>en.value.items.reduce((S,w)=>w.is_consigned?S+w.deposit_quantity*w.unit_deposit_amount:S,0)),f=K(()=>({total:At.value.length,draft:n.value.length,confirmed:s.value.length,received:l.value.length,totalAmount:a.value,debtAmount:c.value,overdueCount:i.value.length})),p=async()=>{try{const S=window.electron?await window.electron.getApiBase():"http://localhost:8000";console.log(" Chargement des achats...");const w=await fetch(`${S}/api/v1/purchases`,{method:"GET",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(!w.ok)throw new Error(`Erreur ${w.status}`);const O=await w.json();At.value=O.data||O,console.log(` ${At.value.length} achats chargs`)}catch(S){console.error(" Erreur chargement achats:",S),At.value=[]}},m=async S=>{try{const w=window.electron?await window.electron.getApiBase():"http://localhost:8000",O=await fetch(`${w}/api/v1/purchases/${S}`,{method:"GET",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(!O.ok)throw new Error(`Erreur ${O.status}`);const $=await O.json(),U=$.data||$;return U.items&&e.products&&e.products.value&&(U.items=U.items.map(I=>{if(!I.product&&I.product_id){const M=e.products.value.find(j=>j.id===I.product_id);if(M)return{...I,product:M}}return I})),Il.value=U,{success:!0,data:U}}catch(w){return console.error(" Erreur chargement achat:",w),{success:!1,error:w.message}}},g=async S=>{try{const w=window.electron?await window.electron.getApiBase():"http://localhost:8000",O=await fetch(`${w}/api/v1/purchases`,{method:"POST",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"},body:JSON.stringify(S)}),$=await O.json();if(!O.ok)throw new Error($.message||"Erreur lors de la cration");return await p(),{success:!0,data:$.data||$}}catch(w){return console.error(" Erreur cration achat:",w),{success:!1,error:w.message}}},v=async S=>{if(!confirm("Confirmer cet achat ?"))return{success:!1};try{const w=window.electron?await window.electron.getApiBase():"http://localhost:8000",O=await fetch(`${w}/api/v1/purchases/${S}/confirm`,{method:"POST",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}}),$=await O.json();if(!O.ok)throw new Error($.message||"Erreur lors de la confirmation");return await p(),{success:!0,data:$.data||$}}catch(w){return console.error(" Erreur confirmation achat:",w),alert(w.message),{success:!1,error:w.message}}},h=async(S,w)=>{try{const O=window.electron?await window.electron.getApiBase():"http://localhost:8000",$=await fetch(`${O}/api/v1/purchases/${S}/receive`,{method:"POST",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"},body:JSON.stringify(w)}),U=await $.json();if(!$.ok)throw new Error(U.message||"Erreur lors de la rception");return await p(),await t.loadProducts(),U.data.has_deposits&&await t.loadDeposits(),{success:!0,data:U.data||U}}catch(O){return console.error(" Erreur rception achat:",O),{success:!1,error:O.message}}},C=async S=>{if(!confirm("Annuler cet achat ?"))return{success:!1};try{const w=window.electron?await window.electron.getApiBase():"http://localhost:8000",O=await fetch(`${w}/api/v1/purchases/${S}/cancel`,{method:"POST",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}}),$=await O.json();if(!O.ok)throw new Error($.message||"Erreur lors de l'annulation");return await p(),{success:!0,data:$.data||$}}catch(w){return console.error(" Erreur annulation achat:",w),alert(w.message),{success:!1,error:w.message}}},E=async S=>{if(!confirm("Supprimer cet achat ?"))return{success:!1};try{const w=window.electron?await window.electron.getApiBase():"http://localhost:8000",O=await fetch(`${w}/api/v1/purchases/${S}`,{method:"DELETE",headers:window.authHeaders||{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}});if(!O.ok){const $=await O.json();throw new Error($.message||"Erreur lors de la suppression")}return await p(),{success:!0}}catch(w){return console.error(" Erreur suppression achat:",w),alert(w.message),{success:!1,error:w.message}}},k=()=>{en.value.items.push({product_id:"",quantity:1,unit_cost:0,is_consigned:!1,deposit_type_id:null,deposit_quantity:0,unit_deposit_amount:0,notes:""})},T=S=>{en.value.items.length>1&&en.value.items.splice(S,1)},y=()=>{en.value={supplier_id:"",items:[{product_id:"",quantity:1,unit_cost:0,status:"draft",is_consigned:!1,deposit_type_id:null,deposit_quantity:0,unit_deposit_amount:0,notes:""}],payment_method:"cash",mobile_operator:"",mobile_reference:"",paid_amount:0,credit_days:30,discount:0,tax:0,order_date:new Date().toISOString().split("T")[0],expected_delivery_date:null,notes:""}},R=S=>{Dl.value={items:S.items.map(w=>({id:w.id,product_id:w.product_id,product_name:w.product?.name||"",quantity:w.quantity,quantity_received:w.quantity})),received_date:new Date().toISOString().split("T")[0],notes:""}};return{showPurchaseModal:N4,showReceiveModal:F4,showPurchaseDetailModal:$4,purchaseForm:en,receiveForm:Dl,selectedPurchase:Il,editingPurchase:L4,purchases:At,purchaseFilters:It,filteredPurchases:r,draftPurchases:n,pendingPurchases:s,receivedPurchases:l,overduePurchases:i,totalPurchasesAmount:a,totalDebtAmount:c,purchaseFormTotal:d,purchaseFormDepositTotal:u,purchaseStats:f,purchases:e.purchases,loadPurchases:p,loadPurchase:m,createPurchase:g,confirmPurchase:v,receivePurchase:h,cancelPurchase:C,deletePurchase:E,addPurchaseItem:k,removePurchaseItem:T,resetPurchaseForm:y,prepareReceiveForm:R}}const q4={class:"mobile-payment-selector"},U4={class:"form-group"},j4={key:0,class:"mobile-money-section"},B4={class:"form-group"},V4={key:0,class:"operator-info"},H4={class:"form-group"},z4=["placeholder","pattern"],G4={key:0,class:"validation-error"},Q4={key:1,class:"validation-success"},K4={class:"form-hint"},J4={class:"form-group"},W4={key:0,class:"amount-comparison"},X4={key:0,class:"amount-warning"},Y4={key:1,class:"amount-success"},Z4={key:2,class:"amount-info"},eP={class:"mobile-instructions"},tP={key:1,class:"credit-section"},nP={class:"form-group"},oP={class:"form-hint"},rP={__name:"MobilePaymentSelector",props:{paymentMethod:{type:String,default:"cash"},mobileOperator:{type:String,default:""},mobileReference:{type:String,default:""},paidAmount:{type:Number,default:0},creditDays:{type:Number,default:30},totalAmount:{type:Number,default:null}},emits:["update:paymentMethod","update:mobileOperator","update:mobileReference","update:paidAmount","update:creditDays"],setup(e,{emit:t}){const r=e,n=t,s=N(r.paymentMethod),l=N(r.mobileOperator),i=N(r.mobileReference),a=N(r.paidAmount),c=N(r.creditDays),d={MTN:{name:"MTN Mobile Money",ussd:"#150#",icon:"",regex:/^MP\d{6}\.\d{4}\.[A-Z0-9]{6}$/,example:"MP240102.1234.A56789"},ORANGE:{name:"Orange Money",ussd:"#150#",icon:"",regex:/^OM\d{16}$/,example:"OM2401020123456789"},EU_MOBILE:{name:"Express Union Mobile",ussd:"*944#",icon:"",regex:/^EU\d{10,15}$/,example:"EU12345678901"},YUP:{name:"YUP",ussd:"*155#",icon:"",regex:/^YUP\d{10,15}$/,example:"YUP12345678901"}},u=K(()=>l.value?d[l.value]:null),f=K(()=>u.value?`Ex: ${u.value.example}`:"Rfrence de transaction"),p=K(()=>u.value?.example||"XXXXXXXXXX"),m=K(()=>u.value?.regex.source||".*"),g=K(()=>!i.value||!u.value?!1:u.value.regex.test(i.value)),v=K(()=>{if(s.value!=="credit"||!c.value)return"";const R=new Date,S=new Date(R);return S.setDate(S.getDate()+c.value),S.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),h=R=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(R),C=()=>{n("update:paymentMethod",s.value),s.value!=="mobile"&&(l.value="",i.value="",n("update:mobileOperator",""),n("update:mobileReference",""))},E=()=>{n("update:mobileOperator",l.value),i.value="",n("update:mobileReference","")},k=()=>{n("update:mobileReference",i.value)},T=()=>{n("update:paidAmount",a.value)},y=()=>{n("update:creditDays",c.value)};return Ae(()=>r.paymentMethod,R=>s.value=R),Ae(()=>r.mobileOperator,R=>l.value=R),Ae(()=>r.mobileReference,R=>i.value=R),Ae(()=>r.paidAmount,R=>a.value=R),Ae(()=>r.creditDays,R=>c.value=R),(R,S)=>(_(),x("div",q4,[o("div",U4,[S[6]||(S[6]=o("label",{class:"form-label"},"Mthode de paiement *",-1)),Q(o("select",{"onUpdate:modelValue":S[0]||(S[0]=w=>s.value=w),onChange:C,class:"form-select",required:""},[...S[5]||(S[5]=[o("option",{value:"cash"}," Espces (Cash)",-1),o("option",{value:"mobile"}," Mobile Money",-1),o("option",{value:"credit"}," Crdit ( terme)",-1),o("option",{value:"bank_transfer"}," Virement bancaire",-1)])],544),[[$e,s.value]])]),s.value==="mobile"?(_(),x("div",j4,[o("div",B4,[S[9]||(S[9]=o("label",{class:"form-label"},"Oprateur Mobile Money *",-1)),Q(o("select",{"onUpdate:modelValue":S[1]||(S[1]=w=>l.value=w),onChange:E,class:"form-select",required:""},[...S[7]||(S[7]=[Dt('<option value="" data-v-b45a0659>Slectionner l&#39;oprateur</option><option value="MTN" data-v-b45a0659>  MTN Mobile Money </option><option value="ORANGE" data-v-b45a0659>  Orange Money </option><option value="EU_MOBILE" data-v-b45a0659>  Express Union Mobile </option><option value="YUP" data-v-b45a0659>  YUP </option>',5)])],544),[[$e,l.value]]),u.value?(_(),x("div",V4,[o("small",null,[S[8]||(S[8]=ne("  Code USSD : ",-1)),o("strong",null,b(u.value.ussd),1)])])):L("",!0)]),o("div",H4,[S[10]||(S[10]=o("label",{class:"form-label"},"Rfrence de transaction *",-1)),Q(o("input",{"onUpdate:modelValue":S[2]||(S[2]=w=>i.value=w),onInput:k,type:"text",class:"form-input",placeholder:f.value,required:"",pattern:m.value},null,40,z4),[[oe,i.value]]),i.value&&!g.value?(_(),x("div",G4,"  Format de rfrence invalide pour "+b(l.value),1)):i.value&&g.value?(_(),x("div",Q4,"  Rfrence valide ")):L("",!0),o("small",K4,"  La rfrence se trouve dans le SMS de confirmation (ex: "+b(p.value)+") ",1)]),o("div",J4,[S[11]||(S[11]=o("label",{class:"form-label"},"Montant pay (FCFA) *",-1)),Q(o("input",{"onUpdate:modelValue":S[3]||(S[3]=w=>a.value=w),onInput:T,type:"number",class:"form-input",placeholder:"Ex: 150000",min:"0",step:"100",required:""},null,544),[[oe,a.value,void 0,{number:!0}]]),e.totalAmount&&a.value?(_(),x("div",W4,[a.value<e.totalAmount?(_(),x("div",X4,"  Paiement partiel : "+b(h(e.totalAmount-a.value))+" FCFA restant ",1)):a.value===e.totalAmount?(_(),x("div",Y4,"  Montant exact ")):(_(),x("div",Z4,"  Surplus : "+b(h(a.value-e.totalAmount))+" FCFA ",1))])):L("",!0)]),o("div",eP,[S[19]||(S[19]=o("h4",null," Comment obtenir votre rfrence ?",-1)),o("ol",null,[o("li",null,[S[12]||(S[12]=ne("Composez ",-1)),o("strong",null,b(u.value?.ussd||"#150#"),1),S[13]||(S[13]=ne(" sur votre tlphone",-1))]),S[15]||(S[15]=o("li",null,`Slectionnez "Transfert d'argent"`,-1)),S[16]||(S[16]=o("li",null,"Entrez le numro du fournisseur",-1)),o("li",null,[S[14]||(S[14]=ne("Entrez le montant : ",-1)),o("strong",null,b(h(a.value||0))+" FCFA",1)]),S[17]||(S[17]=o("li",null,"Confirmez avec votre code PIN",-1)),S[18]||(S[18]=o("li",null,"Copiez la rfrence depuis le SMS de confirmation",-1))])])])):L("",!0),s.value==="credit"?(_(),x("div",tP,[o("div",nP,[S[21]||(S[21]=o("label",{class:"form-label"},"Jours de crdit",-1)),Q(o("input",{"onUpdate:modelValue":S[4]||(S[4]=w=>c.value=w),onInput:y,type:"number",class:"form-input",placeholder:"Ex: 30",min:"1",max:"365"},null,544),[[oe,c.value,void 0,{number:!0}]]),o("small",oP,[S[20]||(S[20]=ne(" Date d'chance : ",-1)),o("strong",null,b(v.value),1)])])])):L("",!0)]))}},sP=Ve(rP,[["__scopeId","data-v-b45a0659"]]),iP={class:"modal-container"},aP={class:"modal-header"},lP={class:"modal-body"},uP={class:"form-section"},dP={class:"form-row"},cP={class:"form-group"},fP=["value"],pP={class:"form-group"},mP={class:"form-group"},gP={class:"form-section"},vP={class:"items-list"},hP={class:"item-header"},yP={class:"item-number"},bP=["onClick"],_P={class:"item-form"},xP={class:"form-group"},wP=["onUpdate:modelValue","onChange"],CP=["value"],kP={class:"form-group"},SP=["onUpdate:modelValue","onInput"],EP={class:"form-group"},PP=["onUpdate:modelValue","onInput"],AP={class:"form-group"},RP={class:"form-input-display"},TP={class:"consignment-section"},OP={class:"checkbox-label"},MP=["onUpdate:modelValue","onChange"],DP={key:0,class:"consignment-fields"},IP={class:"form-row"},NP={class:"form-group"},FP=["onUpdate:modelValue"],$P=["value"],LP={class:"form-group"},qP=["onUpdate:modelValue","onInput"],UP={class:"form-group"},jP=["onUpdate:modelValue","onInput"],BP={class:"form-group"},VP={class:"form-input-display consignment-total"},HP={class:"form-group"},zP=["onUpdate:modelValue"],GP={class:"form-section"},QP={class:"form-section"},KP={class:"form-row"},JP={class:"form-group"},WP={class:"form-group"},XP={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5rem"}},YP={style:{"font-size":"0.8rem",cursor:"pointer",display:"flex","align-items":"center",gap:"0.25rem"}},ZP={key:1,class:"form-input",style:{background:"#f1f5f9",color:"#94a3b8","font-style":"italic"}},eA={class:"totals-summary"},tA={class:"total-row"},nA={key:0,class:"total-row consignment"},oA={key:1,class:"total-row"},rA={key:2,class:"total-row discount"},sA={class:"total-row total-final"},iA={class:"form-section"},aA={class:"form-group"},lA={class:"modal-footer"},uA=["disabled"],dA={key:0,class:"spinner-small"},cA={key:1},fA={__name:"PurchaseFormModal",props:{products:{type:Array,default:()=>[]},suppliers:{type:Array,default:()=>[]},preselectedProduct:{type:Object,default:null}},emits:["close","success"],setup(e,{emit:t}){const r=t,n=N({supplier_id:"",items:[{product_id:"",quantity:1,unit_cost:0,is_consigned:!1,deposit_type_id:null,deposit_quantity:0,unit_deposit_amount:0,notes:""}],payment_method:"cash",mobile_operator:"",mobile_reference:"",paid_amount:0,credit_days:30,discount:0,apply_tax:!0,tax_rate:Number(localStorage.getItem("app_default_tax_rate"))||19.25,order_date:new Date().toISOString().split("T")[0],expected_delivery_date:null,notes:""}),s=N(!1),l=e,i=N({}),a={loadProducts:()=>{},loadDeposits:()=>{}},{createPurchase:c}=ka(i,a),d=K(()=>{const T=n.value.items.reduce((w,O)=>w+O.quantity*O.unit_cost,0),y=n.value.items.reduce((w,O)=>O.is_consigned?w+O.deposit_quantity*O.unit_deposit_amount:w,0),R=n.value.apply_tax?Math.round(T*(n.value.tax_rate/100)):0,S=T+y+R-n.value.discount;return{subtotal:T,depositTotal:y,taxAmount:R,total:S}}),u=K(()=>n.value.supplier_id&&n.value.items.length>0&&n.value.items.every(T=>T.product_id&&T.quantity>0)),f=T=>new Intl.NumberFormat("fr-FR").format(T||0)+" FCFA",p=()=>{n.value.items.push({product_id:"",quantity:1,unit_cost:0,is_consigned:!1,deposit_type_id:null,deposit_quantity:0,unit_deposit_amount:0,notes:""})},m=T=>{n.value.items.splice(T,1)},g=T=>{const y=l.products.find(R=>R.id===n.value.items[T].product_id);y&&(n.value.items[T].unit_cost=y.cost_price||0,y.is_consigned&&(n.value.items[T].is_consigned=!0,n.value.items[T].unit_deposit_amount=y.consignment_price||0))},v=T=>{},h=T=>{n.value.items[T].is_consigned||(n.value.items[T].deposit_type_id=null,n.value.items[T].deposit_quantity=0,n.value.items[T].unit_deposit_amount=0)},C=T=>{},E=()=>{},k=async()=>{if(!u.value){alert(" Veuillez remplir tous les champs obligatoires");return}s.value=!0;try{const T={...n.value,tax:d.value.taxAmount},y=await c(T);y.success?r("success"):alert(" Erreur : "+y.error)}catch(T){alert(" Erreur : "+T.message)}finally{s.value=!1}};return Ae(()=>n.value.tax_rate,T=>{T>0&&localStorage.setItem("app_default_tax_rate",T)}),vt(()=>{if(l.preselectedProduct){const T=l.products.find(y=>y.id===l.preselectedProduct.id);if(T){n.value.items[0].product_id=T.id,g(0);const y=Math.max(1,(T.min_stock||0)-(T.stock||0));n.value.items[0].quantity=y,n.value.items[0].notes="Commande gnre suite  une alerte de stock bas."}}}),(T,y)=>(_(),x("div",{class:"modal-overlay",onClick:y[14]||(y[14]=xe(R=>T.$emit("close"),["self"]))},[o("div",iP,[o("div",aP,[y[15]||(y[15]=o("h2",{class:"modal-title"},[o("span",{class:"icon"},""),ne(" Nouvel Achat ")],-1)),o("button",{onClick:y[0]||(y[0]=R=>T.$emit("close")),class:"btn-close"},"")]),o("div",lP,[o("form",{onSubmit:xe(k,["prevent"])},[o("div",uP,[y[20]||(y[20]=o("h3",{class:"section-title"}," Informations Gnrales",-1)),o("div",dP,[o("div",cP,[y[17]||(y[17]=o("label",{class:"form-label"},"Fournisseur *",-1)),Q(o("select",{"onUpdate:modelValue":y[1]||(y[1]=R=>n.value.supplier_id=R),class:"form-select",required:""},[y[16]||(y[16]=o("option",{value:""},"Slectionner un fournisseur",-1)),(_(!0),x(fe,null,be(l.suppliers,R=>(_(),x("option",{key:R.id,value:R.id},b(R.name),9,fP))),128))],512),[[$e,n.value.supplier_id]])]),o("div",pP,[y[18]||(y[18]=o("label",{class:"form-label"},"Date de commande",-1)),Q(o("input",{"onUpdate:modelValue":y[2]||(y[2]=R=>n.value.order_date=R),type:"date",class:"form-input"},null,512),[[oe,n.value.order_date]])]),o("div",mP,[y[19]||(y[19]=o("label",{class:"form-label"},"Livraison prvue",-1)),Q(o("input",{"onUpdate:modelValue":y[3]||(y[3]=R=>n.value.expected_delivery_date=R),type:"date",class:"form-input"},null,512),[[oe,n.value.expected_delivery_date]])])])]),o("div",gP,[o("div",{class:"section-header"},[y[21]||(y[21]=o("h3",{class:"section-title"}," Produits",-1)),o("button",{type:"button",onClick:p,class:"btn btn-sm btn-secondary"},"  Ajouter un produit ")]),o("div",vP,[(_(!0),x(fe,null,be(n.value.items,(R,S)=>(_(),x("div",{key:S,class:"item-card"},[o("div",hP,[o("span",yP,"#"+b(S+1),1),n.value.items.length>1?(_(),x("button",{key:0,type:"button",onClick:w=>m(S),class:"btn-remove"},"  ",8,bP)):L("",!0)]),o("div",_P,[o("div",xP,[y[23]||(y[23]=o("label",{class:"form-label"},"Produit *",-1)),Q(o("select",{"onUpdate:modelValue":w=>R.product_id=w,onChange:w=>g(S),class:"form-select",required:""},[y[22]||(y[22]=o("option",{value:""},"Slectionner un produit",-1)),(_(!0),x(fe,null,be(l.products,w=>(_(),x("option",{key:w.id,value:w.id},b(w.name)+" ("+b(w.sku||"N/A")+") ",9,CP))),128))],40,wP),[[$e,R.product_id]])]),o("div",kP,[y[24]||(y[24]=o("label",{class:"form-label"},"Quantit *",-1)),Q(o("input",{"onUpdate:modelValue":w=>R.quantity=w,onInput:w=>v(),type:"number",class:"form-input",min:"1",required:""},null,40,SP),[[oe,R.quantity,void 0,{number:!0}]])]),o("div",EP,[y[25]||(y[25]=o("label",{class:"form-label"},"Prix unitaire (FCFA) *",-1)),Q(o("input",{"onUpdate:modelValue":w=>R.unit_cost=w,onInput:w=>v(),type:"number",class:"form-input",min:"0",step:"0.01",required:""},null,40,PP),[[oe,R.unit_cost,void 0,{number:!0}]])]),o("div",AP,[y[26]||(y[26]=o("label",{class:"form-label"},"Sous-total",-1)),o("div",RP,b(f(R.quantity*R.unit_cost)),1)])]),o("div",TP,[o("label",OP,[Q(o("input",{"onUpdate:modelValue":w=>R.is_consigned=w,type:"checkbox",onChange:w=>h(S)},null,40,MP),[[dt,R.is_consigned]]),y[27]||(y[27]=o("span",null," Ce produit a des emballages consigns",-1))]),R.is_consigned?(_(),x("div",DP,[o("div",IP,[o("div",NP,[y[29]||(y[29]=o("label",{class:"form-label"},"Type d'emballage",-1)),Q(o("select",{"onUpdate:modelValue":w=>R.deposit_type_id=w,class:"form-select"},[y[28]||(y[28]=o("option",{value:""},"Slectionner",-1)),(_(!0),x(fe,null,be(ye(ms),w=>(_(),x("option",{key:w.id,value:w.id},b(w.name)+" ("+b(f(w.amount))+") ",9,$P))),128))],8,FP),[[$e,R.deposit_type_id]])]),o("div",LP,[y[30]||(y[30]=o("label",{class:"form-label"},"Quantit emballages",-1)),Q(o("input",{"onUpdate:modelValue":w=>R.deposit_quantity=w,onInput:w=>C(),type:"number",class:"form-input",min:"0"},null,40,qP),[[oe,R.deposit_quantity,void 0,{number:!0}]])]),o("div",UP,[y[31]||(y[31]=o("label",{class:"form-label"},"Montant unitaire",-1)),Q(o("input",{"onUpdate:modelValue":w=>R.unit_deposit_amount=w,onInput:w=>C(),type:"number",class:"form-input",min:"0"},null,40,jP),[[oe,R.unit_deposit_amount,void 0,{number:!0}]])]),o("div",BP,[y[32]||(y[32]=o("label",{class:"form-label"},"Total consigne",-1)),o("div",VP,b(f(R.deposit_quantity*R.unit_deposit_amount)),1)])])])):L("",!0)]),o("div",HP,[y[33]||(y[33]=o("label",{class:"form-label"},"Notes (optionnel)",-1)),Q(o("textarea",{"onUpdate:modelValue":w=>R.notes=w,class:"form-textarea",rows:"2",placeholder:"Notes spcifiques pour ce produit..."},null,8,zP),[[oe,R.notes]])])]))),128))])]),o("div",GP,[y[34]||(y[34]=o("h3",{class:"section-title"}," Paiement",-1)),Te(sP,{"payment-method":n.value.payment_method,"onUpdate:paymentMethod":y[4]||(y[4]=R=>n.value.payment_method=R),"mobile-operator":n.value.mobile_operator,"onUpdate:mobileOperator":y[5]||(y[5]=R=>n.value.mobile_operator=R),"mobile-reference":n.value.mobile_reference,"onUpdate:mobileReference":y[6]||(y[6]=R=>n.value.mobile_reference=R),"paid-amount":n.value.paid_amount,"onUpdate:paidAmount":y[7]||(y[7]=R=>n.value.paid_amount=R),"credit-days":n.value.credit_days,"onUpdate:creditDays":y[8]||(y[8]=R=>n.value.credit_days=R),"total-amount":d.value.total},null,8,["payment-method","mobile-operator","mobile-reference","paid-amount","credit-days","total-amount"])]),o("div",QP,[y[42]||(y[42]=o("h3",{class:"section-title"}," Montants",-1)),o("div",KP,[o("div",JP,[y[35]||(y[35]=o("label",{class:"form-label"},"Remise (FCFA)",-1)),Q(o("input",{"onUpdate:modelValue":y[9]||(y[9]=R=>n.value.discount=R),onInput:E,type:"number",class:"form-input",min:"0"},null,544),[[oe,n.value.discount,void 0,{number:!0}]])]),o("div",WP,[o("div",XP,[y[37]||(y[37]=o("label",{class:"form-label",style:{"margin-bottom":"0"}},"TVA (%)",-1)),o("label",YP,[Q(o("input",{type:"checkbox","onUpdate:modelValue":y[10]||(y[10]=R=>n.value.apply_tax=R)},null,512),[[dt,n.value.apply_tax]]),y[36]||(y[36]=ne(" Appliquer ",-1))])]),n.value.apply_tax?Q((_(),x("input",{key:0,"onUpdate:modelValue":y[11]||(y[11]=R=>n.value.tax_rate=R),type:"number",class:"form-input",min:"0",step:"0.01"},null,512)),[[oe,n.value.tax_rate,void 0,{number:!0}]]):(_(),x("div",ZP," Non applicable "))])]),o("div",eA,[o("div",tA,[y[38]||(y[38]=o("span",null,"Sous-total produits :",-1)),o("strong",null,b(f(d.value.subtotal)),1)]),d.value.depositTotal>0?(_(),x("div",nA,[y[39]||(y[39]=o("span",null,"Total consignes :",-1)),o("strong",null,b(f(d.value.depositTotal)),1)])):L("",!0),n.value.apply_tax&&d.value.taxAmount>0?(_(),x("div",oA,[o("span",null,"TVA ("+b(n.value.tax_rate)+"%) :",1),o("strong",null,"+ "+b(f(d.value.taxAmount)),1)])):L("",!0),n.value.discount>0?(_(),x("div",rA,[y[40]||(y[40]=o("span",null,"Remise :",-1)),o("strong",null,"- "+b(f(n.value.discount)),1)])):L("",!0),o("div",sA,[y[41]||(y[41]=o("span",null,"TOTAL  PAYER :",-1)),o("strong",null,b(f(d.value.total)),1)])])]),o("div",iA,[o("div",aA,[y[43]||(y[43]=o("label",{class:"form-label"},"Notes gnrales (optionnel)",-1)),Q(o("textarea",{"onUpdate:modelValue":y[12]||(y[12]=R=>n.value.notes=R),class:"form-textarea",rows:"3",placeholder:"Informations complmentaires sur cet achat..."},null,512),[[oe,n.value.notes]])])])],32)]),o("div",lA,[o("button",{type:"button",onClick:y[13]||(y[13]=R=>T.$emit("close")),class:"btn btn-secondary"}," Annuler "),o("button",{type:"button",onClick:k,disabled:s.value||!u.value,class:"btn btn-primary"},[s.value?(_(),x("span",dA)):(_(),x("span",cA,"")),ne(" "+b(s.value?"Enregistrement...":"Enregistrer"),1)],8,uA)])])]))}},kf=Ve(fA,[["__scopeId","data-v-d45a2999"]]);function Sf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pr={},yo={},mr={},Nl;function Ct(){if(Nl)return mr;Nl=1,Object.defineProperty(mr,"__esModule",{value:!0});function e(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}var t=function r(n,s){e(this,r),this.data=n,this.text=s.text||n,this.options=s};return mr.default=t,mr}var Fl;function pA(){if(Fl)return yo;Fl=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.CODE39=void 0;var e=(function(){function v(h,C){for(var E=0;E<C.length;E++){var k=C[E];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(h,k.key,k)}}return function(h,C,E){return C&&v(h.prototype,C),E&&v(h,E),h}})(),t=Ct(),r=n(t);function n(v){return v&&v.__esModule?v:{default:v}}function s(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}function l(v,h){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:v}function i(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);v.prototype=Object.create(h&&h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(v,h):v.__proto__=h)}var a=(function(v){i(h,v);function h(C,E){return s(this,h),C=C.toUpperCase(),E.mod43&&(C+=p(g(C))),l(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,C,E))}return e(h,[{key:"encode",value:function(){for(var E=u("*"),k=0;k<this.data.length;k++)E+=u(this.data[k])+"0";return E+=u("*"),{data:E,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),h})(r.default),c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],d=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function u(v){return f(m(v))}function f(v){return d[v].toString(2)}function p(v){return c[v]}function m(v){return c.indexOf(v)}function g(v){for(var h=0,C=0;C<v.length;C++)h+=m(v[C]);return h=h%43,h}return yo.CODE39=a,yo}var Nt={},gr={},vr={},ze={},$l;function Yo(){if($l)return ze;$l=1,Object.defineProperty(ze,"__esModule",{value:!0});var e;function t(c,d,u){return d in c?Object.defineProperty(c,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[d]=u,c}var r=ze.SET_A=0,n=ze.SET_B=1,s=ze.SET_C=2;ze.SHIFT=98;var l=ze.START_A=103,i=ze.START_B=104,a=ze.START_C=105;return ze.MODULO=103,ze.STOP=106,ze.FNC1=207,ze.SET_BY_CODE=(e={},t(e,l,r),t(e,i,n),t(e,a,s),e),ze.SWAP={101:r,100:n,99:s},ze.A_START_CHAR="",ze.B_START_CHAR="",ze.C_START_CHAR="",ze.A_CHARS="[\0-_-]",ze.B_CHARS="[ --]",ze.C_CHARS="(*[0-9]{2}*)",ze.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],ze}var Ll;function Fs(){if(Ll)return vr;Ll=1,Object.defineProperty(vr,"__esModule",{value:!0});var e=(function(){function d(u,f){for(var p=0;p<f.length;p++){var m=f[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}return function(u,f,p){return f&&d(u.prototype,f),p&&d(u,p),u}})(),t=Ct(),r=s(t),n=Yo();function s(d){return d&&d.__esModule?d:{default:d}}function l(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function i(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:d}function a(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}var c=(function(d){a(u,d);function u(f,p){l(this,u);var m=i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f.substring(1),p));return m.bytes=f.split("").map(function(g){return g.charCodeAt(0)}),m}return e(u,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var p=this.bytes,m=p.shift()-105,g=n.SET_BY_CODE[m];if(g===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&p.unshift(n.FNC1);var v=u.next(p,1,g);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:u.getBar(m)+v.result+u.getBar((v.checksum+m)%n.MODULO)+u.getBar(n.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var p=this.options.ean128||!1;return typeof p=="string"&&(p=p.toLowerCase()==="true"),p}}],[{key:"getBar",value:function(p){return n.BARS[p]?n.BARS[p].toString():""}},{key:"correctIndex",value:function(p,m){if(m===n.SET_A){var g=p.shift();return g<32?g+64:g-32}else return m===n.SET_B?p.shift()-32:(p.shift()-48)*10+p.shift()-48}},{key:"next",value:function(p,m,g){if(!p.length)return{result:"",checksum:0};var v=void 0,h=void 0;if(p[0]>=200){h=p.shift()-105;var C=n.SWAP[h];C!==void 0?v=u.next(p,m+1,C):((g===n.SET_A||g===n.SET_B)&&h===n.SHIFT&&(p[0]=g===n.SET_A?p[0]>95?p[0]-96:p[0]:p[0]<32?p[0]+96:p[0]),v=u.next(p,m+1,g))}else h=u.correctIndex(p,g),v=u.next(p,m+1,g);var E=u.getBar(h),k=h*m;return{result:E+v.result,checksum:k+v.checksum}}}]),u})(r.default);return vr.default=c,vr}var hr={},ql;function mA(){if(ql)return hr;ql=1,Object.defineProperty(hr,"__esModule",{value:!0});var e=Yo(),t=function(a){return a.match(new RegExp("^"+e.A_CHARS+"*"))[0].length},r=function(a){return a.match(new RegExp("^"+e.B_CHARS+"*"))[0].length},n=function(a){return a.match(new RegExp("^"+e.C_CHARS+"*"))[0]};function s(i,a){var c=a?e.A_CHARS:e.B_CHARS,d=i.match(new RegExp("^("+c+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(d)return d[1]+""+l(i.substring(d[1].length));var u=i.match(new RegExp("^"+c+"+"))[0];return u.length===i.length?i:u+String.fromCharCode(a?205:206)+s(i.substring(u.length),!a)}function l(i){var a=n(i),c=a.length;if(c===i.length)return i;i=i.substring(c);var d=t(i)>=r(i);return a+String.fromCharCode(d?206:205)+s(i,d)}return hr.default=function(i){var a=void 0,c=n(i).length;if(c>=2)a=e.C_START_CHAR+l(i);else{var d=t(i)>r(i);a=(d?e.A_START_CHAR:e.B_START_CHAR)+s(i,d)}return a.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(u,f){return""+f})},hr}var Ul;function gA(){if(Ul)return gr;Ul=1,Object.defineProperty(gr,"__esModule",{value:!0});var e=Fs(),t=s(e),r=mA(),n=s(r);function s(d){return d&&d.__esModule?d:{default:d}}function l(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function i(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:d}function a(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}var c=(function(d){a(u,d);function u(f,p){if(l(this,u),/^[\x00-\x7F\xC8-\xD3]+$/.test(f))var m=i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,(0,n.default)(f),p));else var m=i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f,p));return i(m)}return u})(t.default);return gr.default=c,gr}var yr={},jl;function vA(){if(jl)return yr;jl=1,Object.defineProperty(yr,"__esModule",{value:!0});var e=(function(){function d(u,f){for(var p=0;p<f.length;p++){var m=f[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}return function(u,f,p){return f&&d(u.prototype,f),p&&d(u,p),u}})(),t=Fs(),r=s(t),n=Yo();function s(d){return d&&d.__esModule?d:{default:d}}function l(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function i(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:d}function a(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}var c=(function(d){a(u,d);function u(f,p){return l(this,u),i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,n.A_START_CHAR+f,p))}return e(u,[{key:"valid",value:function(){return new RegExp("^"+n.A_CHARS+"+$").test(this.data)}}]),u})(r.default);return yr.default=c,yr}var br={},Bl;function hA(){if(Bl)return br;Bl=1,Object.defineProperty(br,"__esModule",{value:!0});var e=(function(){function d(u,f){for(var p=0;p<f.length;p++){var m=f[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}return function(u,f,p){return f&&d(u.prototype,f),p&&d(u,p),u}})(),t=Fs(),r=s(t),n=Yo();function s(d){return d&&d.__esModule?d:{default:d}}function l(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function i(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:d}function a(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}var c=(function(d){a(u,d);function u(f,p){return l(this,u),i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,n.B_START_CHAR+f,p))}return e(u,[{key:"valid",value:function(){return new RegExp("^"+n.B_CHARS+"+$").test(this.data)}}]),u})(r.default);return br.default=c,br}var _r={},Vl;function yA(){if(Vl)return _r;Vl=1,Object.defineProperty(_r,"__esModule",{value:!0});var e=(function(){function d(u,f){for(var p=0;p<f.length;p++){var m=f[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}return function(u,f,p){return f&&d(u.prototype,f),p&&d(u,p),u}})(),t=Fs(),r=s(t),n=Yo();function s(d){return d&&d.__esModule?d:{default:d}}function l(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function i(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:d}function a(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}var c=(function(d){a(u,d);function u(f,p){return l(this,u),i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,n.C_START_CHAR+f,p))}return e(u,[{key:"valid",value:function(){return new RegExp("^"+n.C_CHARS+"+$").test(this.data)}}]),u})(r.default);return _r.default=c,_r}var Hl;function bA(){if(Hl)return Nt;Hl=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.CODE128C=Nt.CODE128B=Nt.CODE128A=Nt.CODE128=void 0;var e=gA(),t=c(e),r=vA(),n=c(r),s=hA(),l=c(s),i=yA(),a=c(i);function c(d){return d&&d.__esModule?d:{default:d}}return Nt.CODE128=t.default,Nt.CODE128A=n.default,Nt.CODE128B=l.default,Nt.CODE128C=a.default,Nt}var it={},xr={},tn={},zl;function Zo(){return zl||(zl=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.SIDE_BIN="101",tn.MIDDLE_BIN="01010",tn.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},tn.EAN2_STRUCTURE=["LL","LG","GL","GG"],tn.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],tn.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]),tn}var wr={},Cr={},Gl;function er(){if(Gl)return Cr;Gl=1,Object.defineProperty(Cr,"__esModule",{value:!0});var e=Zo(),t=function(n,s,l){var i=n.split("").map(function(c,d){return e.BINARIES[s[d]]}).map(function(c,d){return c?c[n[d]]:""});if(l){var a=n.length-1;i=i.map(function(c,d){return d<a?c+l:c})}return i.join("")};return Cr.default=t,Cr}var Ql;function Ef(){if(Ql)return wr;Ql=1,Object.defineProperty(wr,"__esModule",{value:!0});var e=(function(){function f(p,m){for(var g=0;g<m.length;g++){var v=m[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,m,g){return m&&f(p.prototype,m),g&&f(p,g),p}})(),t=Zo(),r=er(),n=i(r),s=Ct(),l=i(s);function i(f){return f&&f.__esModule?f:{default:f}}function a(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var u=(function(f){d(p,f);function p(m,g){a(this,p);var v=c(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,m,g));return v.fontSize=!g.flat&&g.fontSize>g.width*10?g.width*10:g.fontSize,v.guardHeight=g.height+v.fontSize/2+g.textMargin,v}return e(p,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(g,v){return this.text.substr(g,v)}},{key:"leftEncode",value:function(g,v){return(0,n.default)(g,v)}},{key:"rightText",value:function(g,v){return this.text.substr(g,v)}},{key:"rightEncode",value:function(g,v){return(0,n.default)(g,v)}},{key:"encodeGuarded",value:function(){var g={fontSize:this.fontSize},v={height:this.guardHeight};return[{data:t.SIDE_BIN,options:v},{data:this.leftEncode(),text:this.leftText(),options:g},{data:t.MIDDLE_BIN,options:v},{data:this.rightEncode(),text:this.rightText(),options:g},{data:t.SIDE_BIN,options:v}]}},{key:"encodeFlat",value:function(){var g=[t.SIDE_BIN,this.leftEncode(),t.MIDDLE_BIN,this.rightEncode(),t.SIDE_BIN];return{data:g.join(""),text:this.text}}}]),p})(l.default);return wr.default=u,wr}var Kl;function _A(){if(Kl)return xr;Kl=1,Object.defineProperty(xr,"__esModule",{value:!0});var e=(function(){function f(p,m){for(var g=0;g<m.length;g++){var v=m[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,m,g){return m&&f(p.prototype,m),g&&f(p,g),p}})(),t=function f(p,m,g){p===null&&(p=Function.prototype);var v=Object.getOwnPropertyDescriptor(p,m);if(v===void 0){var h=Object.getPrototypeOf(p);return h===null?void 0:f(h,m,g)}else{if("value"in v)return v.value;var C=v.get;return C===void 0?void 0:C.call(g)}},r=Zo(),n=Ef(),s=l(n);function l(f){return f&&f.__esModule?f:{default:f}}function i(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function a(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function c(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=function(p){var m=p.substr(0,12).split("").map(function(g){return+g}).reduce(function(g,v,h){return h%2?g+v*3:g+v},0);return(10-m%10)%10},u=(function(f){c(p,f);function p(m,g){i(this,p),m.search(/^[0-9]{12}$/)!==-1&&(m+=d(m));var v=a(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,m,g));return v.lastChar=g.lastChar,v}return e(p,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===d(this.data)}},{key:"leftText",value:function(){return t(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var g=this.data.substr(1,6),v=r.EAN13_STRUCTURE[this.data[0]];return t(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"leftEncode",this).call(this,g,v)}},{key:"rightText",value:function(){return t(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var g=this.data.substr(7,6);return t(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"rightEncode",this).call(this,g,"RRRRRR")}},{key:"encodeGuarded",value:function(){var g=t(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(g.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(g.push({data:"00"}),g.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),g}}]),p})(s.default);return xr.default=u,xr}var kr={},Jl;function xA(){if(Jl)return kr;Jl=1,Object.defineProperty(kr,"__esModule",{value:!0});var e=(function(){function u(f,p){for(var m=0;m<p.length;m++){var g=p[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}return function(f,p,m){return p&&u(f.prototype,p),m&&u(f,m),f}})(),t=function u(f,p,m){f===null&&(f=Function.prototype);var g=Object.getOwnPropertyDescriptor(f,p);if(g===void 0){var v=Object.getPrototypeOf(f);return v===null?void 0:u(v,p,m)}else{if("value"in g)return g.value;var h=g.get;return h===void 0?void 0:h.call(m)}},r=Ef(),n=s(r);function s(u){return u&&u.__esModule?u:{default:u}}function l(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function i(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function a(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var c=function(f){var p=f.substr(0,7).split("").map(function(m){return+m}).reduce(function(m,g,v){return v%2?m+g:m+g*3},0);return(10-p%10)%10},d=(function(u){a(f,u);function f(p,m){return l(this,f),p.search(/^[0-9]{7}$/)!==-1&&(p+=c(p)),i(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,p,m))}return e(f,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===c(this.data)}},{key:"leftText",value:function(){return t(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var m=this.data.substr(0,4);return t(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"leftEncode",this).call(this,m,"LLLL")}},{key:"rightText",value:function(){return t(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var m=this.data.substr(4,4);return t(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"rightEncode",this).call(this,m,"RRRR")}}]),f})(n.default);return kr.default=d,kr}var Sr={},Wl;function wA(){if(Wl)return Sr;Wl=1,Object.defineProperty(Sr,"__esModule",{value:!0});var e=(function(){function p(m,g){for(var v=0;v<g.length;v++){var h=g[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(m,h.key,h)}}return function(m,g,v){return g&&p(m.prototype,g),v&&p(m,v),m}})(),t=Zo(),r=er(),n=i(r),s=Ct(),l=i(s);function i(p){return p&&p.__esModule?p:{default:p}}function a(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function d(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var u=function(m){var g=m.split("").map(function(v){return+v}).reduce(function(v,h,C){return C%2?v+h*9:v+h*3},0);return g%10},f=(function(p){d(m,p);function m(g,v){return a(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,g,v))}return e(m,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var v=t.EAN5_STRUCTURE[u(this.data)];return{data:"1011"+(0,n.default)(this.data,v,"01"),text:this.text}}}]),m})(l.default);return Sr.default=f,Sr}var Er={},Xl;function CA(){if(Xl)return Er;Xl=1,Object.defineProperty(Er,"__esModule",{value:!0});var e=(function(){function f(p,m){for(var g=0;g<m.length;g++){var v=m[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,m,g){return m&&f(p.prototype,m),g&&f(p,g),p}})(),t=Zo(),r=er(),n=i(r),s=Ct(),l=i(s);function i(f){return f&&f.__esModule?f:{default:f}}function a(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var u=(function(f){d(p,f);function p(m,g){return a(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,m,g))}return e(p,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var g=t.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,n.default)(this.data,g,"01"),text:this.text}}}]),p})(l.default);return Er.default=u,Er}var bo={},Yl;function Pf(){if(Yl)return bo;Yl=1,Object.defineProperty(bo,"__esModule",{value:!0});var e=(function(){function f(p,m){for(var g=0;g<m.length;g++){var v=m[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,m,g){return m&&f(p.prototype,m),g&&f(p,g),p}})();bo.checksum=u;var t=er(),r=l(t),n=Ct(),s=l(n);function l(f){return f&&f.__esModule?f:{default:f}}function i(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function a(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function c(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d=(function(f){c(p,f);function p(m,g){i(this,p),m.search(/^[0-9]{11}$/)!==-1&&(m+=u(m));var v=a(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,m,g));return v.displayValue=g.displayValue,g.fontSize>g.width*10?v.fontSize=g.width*10:v.fontSize=g.fontSize,v.guardHeight=g.height+v.fontSize/2+g.textMargin,v}return e(p,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==u(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var g="";return g+="101",g+=(0,r.default)(this.data.substr(0,6),"LLLLLL"),g+="01010",g+=(0,r.default)(this.data.substr(6,6),"RRRRRR"),g+="101",{data:g,text:this.text}}},{key:"guardedEncoding",value:function(){var g=[];return this.displayValue&&g.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),g.push({data:"101"+(0,r.default)(this.data[0],"L"),options:{height:this.guardHeight}}),g.push({data:(0,r.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),g.push({data:"01010",options:{height:this.guardHeight}}),g.push({data:(0,r.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),g.push({data:(0,r.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&g.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),g}}]),p})(s.default);function u(f){var p=0,m;for(m=1;m<11;m+=2)p+=parseInt(f[m]);for(m=0;m<11;m+=2)p+=parseInt(f[m])*3;return(10-p%10)%10}return bo.default=d,bo}var Pr={},Zl;function kA(){if(Zl)return Pr;Zl=1,Object.defineProperty(Pr,"__esModule",{value:!0});var e=(function(){function g(v,h){for(var C=0;C<h.length;C++){var E=h[C];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(v,E.key,E)}}return function(v,h,C){return h&&g(v.prototype,h),C&&g(v,C),v}})(),t=er(),r=i(t),n=Ct(),s=i(n),l=Pf();function i(g){return g&&g.__esModule?g:{default:g}}function a(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function c(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function d(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var u=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],f=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],p=(function(g){d(v,g);function v(h,C){a(this,v);var E=c(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,h,C));if(E.isValid=!1,h.search(/^[0-9]{6}$/)!==-1)E.middleDigits=h,E.upcA=m(h,"0"),E.text=C.text||""+E.upcA[0]+h+E.upcA[E.upcA.length-1],E.isValid=!0;else if(h.search(/^[01][0-9]{7}$/)!==-1)if(E.middleDigits=h.substring(1,h.length-1),E.upcA=m(E.middleDigits,h[0]),E.upcA[E.upcA.length-1]===h[h.length-1])E.isValid=!0;else return c(E);else return c(E);return E.displayValue=C.displayValue,C.fontSize>C.width*10?E.fontSize=C.width*10:E.fontSize=C.fontSize,E.guardHeight=C.height+E.fontSize/2+C.textMargin,E}return e(v,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var C="";return C+="101",C+=this.encodeMiddleDigits(),C+="010101",{data:C,text:this.text}}},{key:"guardedEncoding",value:function(){var C=[];return this.displayValue&&C.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),C.push({data:"101",options:{height:this.guardHeight}}),C.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),C.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&C.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),C}},{key:"encodeMiddleDigits",value:function(){var C=this.upcA[0],E=this.upcA[this.upcA.length-1],k=f[parseInt(E)][parseInt(C)];return(0,r.default)(this.middleDigits,k)}}]),v})(s.default);function m(g,v){for(var h=parseInt(g[g.length-1]),C=u[h],E="",k=0,T=0;T<C.length;T++){var y=C[T];y==="X"?E+=g[k++]:E+=y}return E=""+v+E,""+E+(0,l.checksum)(E)}return Pr.default=p,Pr}var eu;function SA(){if(eu)return it;eu=1,Object.defineProperty(it,"__esModule",{value:!0}),it.UPCE=it.UPC=it.EAN2=it.EAN5=it.EAN8=it.EAN13=void 0;var e=_A(),t=p(e),r=xA(),n=p(r),s=wA(),l=p(s),i=CA(),a=p(i),c=Pf(),d=p(c),u=kA(),f=p(u);function p(m){return m&&m.__esModule?m:{default:m}}return it.EAN13=t.default,it.EAN8=n.default,it.EAN5=l.default,it.EAN2=a.default,it.UPC=d.default,it.UPCE=f.default,it}var Tn={},Ar={},Gn={},tu;function EA(){return tu||(tu=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.START_BIN="1010",Gn.END_BIN="11101",Gn.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]),Gn}var nu;function Af(){if(nu)return Ar;nu=1,Object.defineProperty(Ar,"__esModule",{value:!0});var e=(function(){function d(u,f){for(var p=0;p<f.length;p++){var m=f[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}return function(u,f,p){return f&&d(u.prototype,f),p&&d(u,p),u}})(),t=EA(),r=Ct(),n=s(r);function s(d){return d&&d.__esModule?d:{default:d}}function l(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function i(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:d}function a(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}var c=(function(d){a(u,d);function u(){return l(this,u),i(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return e(u,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var p=this,m=this.data.match(/.{2}/g).map(function(g){return p.encodePair(g)}).join("");return{data:t.START_BIN+m+t.END_BIN,text:this.text}}},{key:"encodePair",value:function(p){var m=t.BINARIES[p[1]];return t.BINARIES[p[0]].split("").map(function(g,v){return(g==="1"?"111":"1")+(m[v]==="1"?"000":"0")}).join("")}}]),u})(n.default);return Ar.default=c,Ar}var Rr={},ou;function PA(){if(ou)return Rr;ou=1,Object.defineProperty(Rr,"__esModule",{value:!0});var e=(function(){function d(u,f){for(var p=0;p<f.length;p++){var m=f[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}return function(u,f,p){return f&&d(u.prototype,f),p&&d(u,p),u}})(),t=Af(),r=n(t);function n(d){return d&&d.__esModule?d:{default:d}}function s(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function l(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:d}function i(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}var a=function(u){var f=u.substr(0,13).split("").map(function(p){return parseInt(p,10)}).reduce(function(p,m,g){return p+m*(3-g%2*2)},0);return Math.ceil(f/10)*10-f},c=(function(d){i(u,d);function u(f,p){return s(this,u),f.search(/^[0-9]{13}$/)!==-1&&(f+=a(f)),l(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f,p))}return e(u,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===a(this.data)}}]),u})(r.default);return Rr.default=c,Rr}var ru;function AA(){if(ru)return Tn;ru=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.ITF14=Tn.ITF=void 0;var e=Af(),t=s(e),r=PA(),n=s(r);function s(l){return l&&l.__esModule?l:{default:l}}return Tn.ITF=t.default,Tn.ITF14=n.default,Tn}var yt={},Tr={},su;function tr(){if(su)return Tr;su=1,Object.defineProperty(Tr,"__esModule",{value:!0});var e=(function(){function d(u,f){for(var p=0;p<f.length;p++){var m=f[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}return function(u,f,p){return f&&d(u.prototype,f),p&&d(u,p),u}})(),t=Ct(),r=n(t);function n(d){return d&&d.__esModule?d:{default:d}}function s(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function l(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:d}function i(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}var a=(function(d){i(u,d);function u(f,p){return s(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f,p))}return e(u,[{key:"encode",value:function(){for(var p="110",m=0;m<this.data.length;m++){var g=parseInt(this.data[m]),v=g.toString(2);v=c(v,4-v.length);for(var h=0;h<v.length;h++)p+=v[h]=="0"?"100":"110"}return p+="1001",{data:p,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),u})(r.default);function c(d,u){for(var f=0;f<u;f++)d="0"+d;return d}return Tr.default=a,Tr}var Or={},_o={},iu;function $s(){if(iu)return _o;iu=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.mod10=e,_o.mod11=t;function e(r){for(var n=0,s=0;s<r.length;s++){var l=parseInt(r[s]);(s+r.length)%2===0?n+=l:n+=l*2%10+Math.floor(l*2/10)}return(10-n%10)%10}function t(r){for(var n=0,s=[2,3,4,5,6,7],l=0;l<r.length;l++){var i=parseInt(r[r.length-1-l]);n+=s[l%s.length]*i}return(11-n%11)%11}return _o}var au;function RA(){if(au)return Or;au=1,Object.defineProperty(Or,"__esModule",{value:!0});var e=tr(),t=n(e),r=$s();function n(c){return c&&c.__esModule?c:{default:c}}function s(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function l(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function i(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var a=(function(c){i(d,c);function d(u,f){return s(this,d),l(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,u+(0,r.mod10)(u),f))}return d})(t.default);return Or.default=a,Or}var Mr={},lu;function TA(){if(lu)return Mr;lu=1,Object.defineProperty(Mr,"__esModule",{value:!0});var e=tr(),t=n(e),r=$s();function n(c){return c&&c.__esModule?c:{default:c}}function s(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function l(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function i(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var a=(function(c){i(d,c);function d(u,f){return s(this,d),l(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,u+(0,r.mod11)(u),f))}return d})(t.default);return Mr.default=a,Mr}var Dr={},uu;function OA(){if(uu)return Dr;uu=1,Object.defineProperty(Dr,"__esModule",{value:!0});var e=tr(),t=n(e),r=$s();function n(c){return c&&c.__esModule?c:{default:c}}function s(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function l(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function i(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var a=(function(c){i(d,c);function d(u,f){return s(this,d),u+=(0,r.mod10)(u),u+=(0,r.mod10)(u),l(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,u,f))}return d})(t.default);return Dr.default=a,Dr}var Ir={},du;function MA(){if(du)return Ir;du=1,Object.defineProperty(Ir,"__esModule",{value:!0});var e=tr(),t=n(e),r=$s();function n(c){return c&&c.__esModule?c:{default:c}}function s(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function l(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function i(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var a=(function(c){i(d,c);function d(u,f){return s(this,d),u+=(0,r.mod11)(u),u+=(0,r.mod10)(u),l(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,u,f))}return d})(t.default);return Ir.default=a,Ir}var cu;function DA(){if(cu)return yt;cu=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.MSI1110=yt.MSI1010=yt.MSI11=yt.MSI10=yt.MSI=void 0;var e=tr(),t=u(e),r=RA(),n=u(r),s=TA(),l=u(s),i=OA(),a=u(i),c=MA(),d=u(c);function u(f){return f&&f.__esModule?f:{default:f}}return yt.MSI=t.default,yt.MSI10=n.default,yt.MSI11=l.default,yt.MSI1010=a.default,yt.MSI1110=d.default,yt}var xo={},fu;function IA(){if(fu)return xo;fu=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.pharmacode=void 0;var e=(function(){function c(d,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})(),t=Ct(),r=n(t);function n(c){return c&&c.__esModule?c:{default:c}}function s(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function l(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function i(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var a=(function(c){i(d,c);function d(u,f){s(this,d);var p=l(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,u,f));return p.number=parseInt(u,10),p}return e(d,[{key:"encode",value:function(){for(var f=this.number,p="";!isNaN(f)&&f!=0;)f%2===0?(p="11100"+p,f=(f-2)/2):(p="100"+p,f=(f-1)/2);return p=p.slice(0,-2),{data:p,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),d})(r.default);return xo.pharmacode=a,xo}var wo={},pu;function NA(){if(pu)return wo;pu=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.codabar=void 0;var e=(function(){function c(d,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})(),t=Ct(),r=n(t);function n(c){return c&&c.__esModule?c:{default:c}}function s(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function l(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function i(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var a=(function(c){i(d,c);function d(u,f){s(this,d),u.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(u="A"+u+"A");var p=l(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,u.toUpperCase(),f));return p.text=p.options.text||p.text.replace(/[A-D]/g,""),p}return e(d,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var f=[],p=this.getEncodings(),m=0;m<this.data.length;m++)f.push(p[this.data.charAt(m)]),m!==this.data.length-1&&f.push("0");return{text:this.text,data:f.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),d})(r.default);return wo.codabar=a,wo}var On={},Nr={},Qn={},mu;function FA(){return mu||(mu=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""],Qn.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],Qn.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]}),Qn}var gu;function Rf(){if(gu)return Nr;gu=1,Object.defineProperty(Nr,"__esModule",{value:!0});var e=(function(){function d(u,f){for(var p=0;p<f.length;p++){var m=f[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}return function(u,f,p){return f&&d(u.prototype,f),p&&d(u,p),u}})(),t=FA(),r=Ct(),n=s(r);function s(d){return d&&d.__esModule?d:{default:d}}function l(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function i(d,u){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:d}function a(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(d,u):d.__proto__=u)}var c=(function(d){a(u,d);function u(f,p){return l(this,u),i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f,p))}return e(u,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var p=this.data.split("").flatMap(function(h){return t.MULTI_SYMBOLS[h]||h}),m=p.map(function(h){return u.getEncoding(h)}).join(""),g=u.checksum(p,20),v=u.checksum(p.concat(g),15);return{text:this.text,data:u.getEncoding("")+m+u.getEncoding(g)+u.getEncoding(v)+u.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(p){return t.BINARIES[u.symbolValue(p)]}},{key:"getSymbol",value:function(p){return t.SYMBOLS[p]}},{key:"symbolValue",value:function(p){return t.SYMBOLS.indexOf(p)}},{key:"checksum",value:function(p,m){var g=p.slice().reverse().reduce(function(v,h,C){var E=C%m+1;return v+u.symbolValue(h)*E},0);return u.getSymbol(g%47)}}]),u})(n.default);return Nr.default=c,Nr}var Fr={},vu;function $A(){if(vu)return Fr;vu=1,Object.defineProperty(Fr,"__esModule",{value:!0});var e=(function(){function c(d,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})(),t=Rf(),r=n(t);function n(c){return c&&c.__esModule?c:{default:c}}function s(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function l(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function i(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var a=(function(c){i(d,c);function d(u,f){return s(this,d),l(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,u,f))}return e(d,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),d})(r.default);return Fr.default=a,Fr}var hu;function LA(){if(hu)return On;hu=1,Object.defineProperty(On,"__esModule",{value:!0}),On.CODE93FullASCII=On.CODE93=void 0;var e=Rf(),t=s(e),r=$A(),n=s(r);function s(l){return l&&l.__esModule?l:{default:l}}return On.CODE93=t.default,On.CODE93FullASCII=n.default,On}var Co={},yu;function qA(){if(yu)return Co;yu=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.GenericBarcode=void 0;var e=(function(){function c(d,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})(),t=Ct(),r=n(t);function n(c){return c&&c.__esModule?c:{default:c}}function s(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function l(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function i(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var a=(function(c){i(d,c);function d(u,f){return s(this,d),l(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,u,f))}return e(d,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),d})(r.default);return Co.GenericBarcode=a,Co}var bu;function UA(){if(bu)return pr;bu=1,Object.defineProperty(pr,"__esModule",{value:!0});var e=pA(),t=bA(),r=SA(),n=AA(),s=DA(),l=IA(),i=NA(),a=LA(),c=qA();return pr.default={CODE39:e.CODE39,CODE128:t.CODE128,CODE128A:t.CODE128A,CODE128B:t.CODE128B,CODE128C:t.CODE128C,EAN13:r.EAN13,EAN8:r.EAN8,EAN5:r.EAN5,EAN2:r.EAN2,UPC:r.UPC,UPCE:r.UPCE,ITF14:n.ITF14,ITF:n.ITF,MSI:s.MSI,MSI10:s.MSI10,MSI11:s.MSI11,MSI1010:s.MSI1010,MSI1110:s.MSI1110,pharmacode:l.pharmacode,codabar:i.codabar,CODE93:a.CODE93,CODE93FullASCII:a.CODE93FullASCII,GenericBarcode:c.GenericBarcode},pr}var $r={},_u;function Ls(){if(_u)return $r;_u=1,Object.defineProperty($r,"__esModule",{value:!0});var e=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t};return $r.default=function(t,r){return e({},t,r)},$r}var Lr={},xu;function jA(){if(xu)return Lr;xu=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.default=e;function e(t){var r=[];function n(s){if(Array.isArray(s))for(var l=0;l<s.length;l++)n(s[l]);else s.text=s.text||"",s.data=s.data||"",r.push(s)}return n(t),r}return Lr}var qr={},wu;function BA(){if(wu)return qr;wu=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.default=e;function e(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}return qr}var Ur={},jr={},Br={},Cu;function Tf(){if(Cu)return Br;Cu=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.default=e;function e(t){var r=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in r)r.hasOwnProperty(n)&&(n=r[n],typeof t[n]=="string"&&(t[n]=parseInt(t[n],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}return Br}var Vr={},ku;function Of(){if(ku)return Vr;ku=1,Object.defineProperty(Vr,"__esModule",{value:!0});var e={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};return Vr.default=e,Vr}var Su;function VA(){if(Su)return jr;Su=1,Object.defineProperty(jr,"__esModule",{value:!0});var e=Tf(),t=s(e),r=Of(),n=s(r);function s(i){return i&&i.__esModule?i:{default:i}}function l(i){var a={};for(var c in n.default)n.default.hasOwnProperty(c)&&(i.hasAttribute("jsbarcode-"+c.toLowerCase())&&(a[c]=i.getAttribute("jsbarcode-"+c.toLowerCase())),i.hasAttribute("data-"+c.toLowerCase())&&(a[c]=i.getAttribute("data-"+c.toLowerCase())));return a.value=i.getAttribute("jsbarcode-value")||i.getAttribute("data-value"),a=(0,t.default)(a),a}return jr.default=l,jr}var Hr={},zr={},bt={},Eu;function Mf(){if(Eu)return bt;Eu=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.getTotalWidthOfEncodings=bt.calculateEncodingAttributes=bt.getBarcodePadding=bt.getEncodingHeight=bt.getMaximumHeightOfEncodings=void 0;var e=Ls(),t=r(e);function r(d){return d&&d.__esModule?d:{default:d}}function n(d,u){return u.height+(u.displayValue&&d.text.length>0?u.fontSize+u.textMargin:0)+u.marginTop+u.marginBottom}function s(d,u,f){if(f.displayValue&&u<d){if(f.textAlign=="center")return Math.floor((d-u)/2);if(f.textAlign=="left")return 0;if(f.textAlign=="right")return Math.floor(d-u)}return 0}function l(d,u,f){for(var p=0;p<d.length;p++){var m=d[p],g=(0,t.default)(u,m.options),v;g.displayValue?v=c(m.text,g,f):v=0;var h=m.data.length*g.width;m.width=Math.ceil(Math.max(v,h)),m.height=n(m,g),m.barcodePadding=s(v,h,g)}}function i(d){for(var u=0,f=0;f<d.length;f++)u+=d[f].width;return u}function a(d){for(var u=0,f=0;f<d.length;f++)d[f].height>u&&(u=d[f].height);return u}function c(d,u,f){var p;if(f)p=f;else if(typeof document<"u")p=document.createElement("canvas").getContext("2d");else return 0;p.font=u.fontOptions+" "+u.fontSize+"px "+u.font;var m=p.measureText(d);if(!m)return 0;var g=m.width;return g}return bt.getMaximumHeightOfEncodings=a,bt.getEncodingHeight=n,bt.getBarcodePadding=s,bt.calculateEncodingAttributes=l,bt.getTotalWidthOfEncodings=i,bt}var Pu;function HA(){if(Pu)return zr;Pu=1,Object.defineProperty(zr,"__esModule",{value:!0});var e=(function(){function a(c,d){for(var u=0;u<d.length;u++){var f=d[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,d,u){return d&&a(c.prototype,d),u&&a(c,u),c}})(),t=Ls(),r=s(t),n=Mf();function s(a){return a&&a.__esModule?a:{default:a}}function l(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}var i=(function(){function a(c,d,u){l(this,a),this.canvas=c,this.encodings=d,this.options=u}return e(a,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var d=0;d<this.encodings.length;d++){var u=(0,r.default)(this.options,this.encodings[d].options);this.drawCanvasBarcode(u,this.encodings[d]),this.drawCanvasText(u,this.encodings[d]),this.moveCanvasDrawing(this.encodings[d])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var d=this.canvas.getContext("2d");d.save(),(0,n.calculateEncodingAttributes)(this.encodings,this.options,d);var u=(0,n.getTotalWidthOfEncodings)(this.encodings),f=(0,n.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=u+this.options.marginLeft+this.options.marginRight,this.canvas.height=f,d.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(d.fillStyle=this.options.background,d.fillRect(0,0,this.canvas.width,this.canvas.height)),d.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(d,u){var f=this.canvas.getContext("2d"),p=u.data,m;d.textPosition=="top"?m=d.marginTop+d.fontSize+d.textMargin:m=d.marginTop,f.fillStyle=d.lineColor;for(var g=0;g<p.length;g++){var v=g*d.width+u.barcodePadding;p[g]==="1"?f.fillRect(v,m,d.width,d.height):p[g]&&f.fillRect(v,m,d.width,d.height*p[g])}}},{key:"drawCanvasText",value:function(d,u){var f=this.canvas.getContext("2d"),p=d.fontOptions+" "+d.fontSize+"px "+d.font;if(d.displayValue){var m,g;d.textPosition=="top"?g=d.marginTop+d.fontSize-d.textMargin:g=d.height+d.textMargin+d.marginTop+d.fontSize,f.font=p,d.textAlign=="left"||u.barcodePadding>0?(m=0,f.textAlign="left"):d.textAlign=="right"?(m=u.width-1,f.textAlign="right"):(m=u.width/2,f.textAlign="center"),f.fillText(u.text,m,g)}}},{key:"moveCanvasDrawing",value:function(d){var u=this.canvas.getContext("2d");u.translate(d.width,0)}},{key:"restoreCanvas",value:function(){var d=this.canvas.getContext("2d");d.restore()}}]),a})();return zr.default=i,zr}var Gr={},Au;function zA(){if(Au)return Gr;Au=1,Object.defineProperty(Gr,"__esModule",{value:!0});var e=(function(){function c(d,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})(),t=Ls(),r=s(t),n=Mf();function s(c){return c&&c.__esModule?c:{default:c}}function l(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var i="http://www.w3.org/2000/svg",a=(function(){function c(d,u,f){l(this,c),this.svg=d,this.encodings=u,this.options=f,this.document=f.xmlDocument||document}return e(c,[{key:"render",value:function(){var u=this.options.marginLeft;this.prepareSVG();for(var f=0;f<this.encodings.length;f++){var p=this.encodings[f],m=(0,r.default)(this.options,p.options),g=this.createGroup(u,m.marginTop,this.svg);this.setGroupOptions(g,m),this.drawSvgBarcode(g,m,p),this.drawSVGText(g,m,p),u+=p.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,n.calculateEncodingAttributes)(this.encodings,this.options);var u=(0,n.getTotalWidthOfEncodings)(this.encodings),f=(0,n.getMaximumHeightOfEncodings)(this.encodings),p=u+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(p,f),this.options.background&&this.drawRect(0,0,p,f,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(u,f,p){var m=p.data,g;f.textPosition=="top"?g=f.fontSize+f.textMargin:g=0;for(var v=0,h=0,C=0;C<m.length;C++)h=C*f.width+p.barcodePadding,m[C]==="1"?v++:v>0&&(this.drawRect(h-f.width*v,g,f.width*v,f.height,u),v=0);v>0&&this.drawRect(h-f.width*(v-1),g,f.width*v,f.height,u)}},{key:"drawSVGText",value:function(u,f,p){var m=this.document.createElementNS(i,"text");if(f.displayValue){var g,v;m.setAttribute("style","font:"+f.fontOptions+" "+f.fontSize+"px "+f.font),f.textPosition=="top"?v=f.fontSize-f.textMargin:v=f.height+f.textMargin+f.fontSize,f.textAlign=="left"||p.barcodePadding>0?(g=0,m.setAttribute("text-anchor","start")):f.textAlign=="right"?(g=p.width-1,m.setAttribute("text-anchor","end")):(g=p.width/2,m.setAttribute("text-anchor","middle")),m.setAttribute("x",g),m.setAttribute("y",v),m.appendChild(this.document.createTextNode(p.text)),u.appendChild(m)}}},{key:"setSvgAttributes",value:function(u,f){var p=this.svg;p.setAttribute("width",u+"px"),p.setAttribute("height",f+"px"),p.setAttribute("x","0px"),p.setAttribute("y","0px"),p.setAttribute("viewBox","0 0 "+u+" "+f),p.setAttribute("xmlns",i),p.setAttribute("version","1.1"),p.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(u,f,p){var m=this.document.createElementNS(i,"g");return m.setAttribute("transform","translate("+u+", "+f+")"),p.appendChild(m),m}},{key:"setGroupOptions",value:function(u,f){u.setAttribute("style","fill:"+f.lineColor+";")}},{key:"drawRect",value:function(u,f,p,m,g){var v=this.document.createElementNS(i,"rect");return v.setAttribute("x",u),v.setAttribute("y",f),v.setAttribute("width",p),v.setAttribute("height",m),g.appendChild(v),v}}]),c})();return Gr.default=a,Gr}var Qr={},Ru;function GA(){if(Ru)return Qr;Ru=1,Object.defineProperty(Qr,"__esModule",{value:!0});var e=(function(){function n(s,l){for(var i=0;i<l.length;i++){var a=l[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}return function(s,l,i){return l&&n(s.prototype,l),i&&n(s,i),s}})();function t(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}var r=(function(){function n(s,l,i){t(this,n),this.object=s,this.encodings=l,this.options=i}return e(n,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),n})();return Qr.default=r,Qr}var Tu;function QA(){if(Tu)return Hr;Tu=1,Object.defineProperty(Hr,"__esModule",{value:!0});var e=HA(),t=i(e),r=zA(),n=i(r),s=GA(),l=i(s);function i(a){return a&&a.__esModule?a:{default:a}}return Hr.default={CanvasRenderer:t.default,SVGRenderer:n.default,ObjectRenderer:l.default},Hr}var Kn={},Ou;function Df(){if(Ou)return Kn;Ou=1,Object.defineProperty(Kn,"__esModule",{value:!0});function e(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}function t(i,a){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:i}function r(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(i,a):i.__proto__=a)}var n=(function(i){r(a,i);function a(c,d){e(this,a);var u=t(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return u.name="InvalidInputException",u.symbology=c,u.input=d,u.message='"'+u.input+'" is not a valid input for '+u.symbology,u}return a})(Error),s=(function(i){r(a,i);function a(){e(this,a);var c=t(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return c.name="InvalidElementException",c.message="Not supported type to render on",c}return a})(Error),l=(function(i){r(a,i);function a(){e(this,a);var c=t(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return c.name="NoElementException",c.message="No element to render on.",c}return a})(Error);return Kn.InvalidInputException=n,Kn.InvalidElementException=s,Kn.NoElementException=l,Kn}var Mu;function KA(){if(Mu)return Ur;Mu=1,Object.defineProperty(Ur,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t=VA(),r=i(t),n=QA(),s=i(n),l=Df();function i(u){return u&&u.__esModule?u:{default:u}}function a(u){if(typeof u=="string")return c(u);if(Array.isArray(u)){for(var f=[],p=0;p<u.length;p++)f.push(a(u[p]));return f}else{if(typeof HTMLCanvasElement<"u"&&u instanceof HTMLImageElement)return d(u);if(u&&u.nodeName&&u.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&u instanceof SVGElement)return{element:u,options:(0,r.default)(u),renderer:s.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement)return{element:u,options:(0,r.default)(u),renderer:s.default.CanvasRenderer};if(u&&u.getContext)return{element:u,renderer:s.default.CanvasRenderer};if(u&&(typeof u>"u"?"undefined":e(u))==="object"&&!u.nodeName)return{element:u,renderer:s.default.ObjectRenderer};throw new l.InvalidElementException}}function c(u){var f=document.querySelectorAll(u);if(f.length!==0){for(var p=[],m=0;m<f.length;m++)p.push(a(f[m]));return p}}function d(u){var f=document.createElement("canvas");return{element:f,options:(0,r.default)(u),renderer:s.default.CanvasRenderer,afterRender:function(){u.setAttribute("src",f.toDataURL())}}}return Ur.default=a,Ur}var Kr={},Du;function JA(){if(Du)return Kr;Du=1,Object.defineProperty(Kr,"__esModule",{value:!0});var e=(function(){function n(s,l){for(var i=0;i<l.length;i++){var a=l[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}return function(s,l,i){return l&&n(s.prototype,l),i&&n(s,i),s}})();function t(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}var r=(function(){function n(s){t(this,n),this.api=s}return e(n,[{key:"handleCatch",value:function(l){if(l.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw l.message;else throw l;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(l){try{var i=l.apply(void 0,arguments);return this.api._options.valid(!0),i}catch(a){return this.handleCatch(a),this.api}}}]),n})();return Kr.default=r,Kr}var ni,Iu;function WA(){if(Iu)return ni;Iu=1;var e=UA(),t=C(e),r=Ls(),n=C(r),s=jA(),l=C(s),i=BA(),a=C(i),c=KA(),d=C(c),u=Tf(),f=C(u),p=JA(),m=C(p),g=Df(),v=Of(),h=C(v);function C(O){return O&&O.__esModule?O:{default:O}}var E=function(){},k=function($,U,I){var M=new E;if(typeof $>"u")throw Error("No element to render on was provided.");return M._renderProperties=(0,d.default)($),M._encodings=[],M._options=h.default,M._errorHandler=new m.default(M),typeof U<"u"&&(I=I||{},I.format||(I.format=S()),M.options(I)[I.format](U,I).render()),M};k.getModule=function(O){return t.default[O]};for(var T in t.default)t.default.hasOwnProperty(T)&&y(t.default,T);function y(O,$){E.prototype[$]=E.prototype[$.toUpperCase()]=E.prototype[$.toLowerCase()]=function(U,I){var M=this;return M._errorHandler.wrapBarcodeCall(function(){I.text=typeof I.text>"u"?void 0:""+I.text;var j=(0,n.default)(M._options,I);j=(0,f.default)(j);var B=O[$],A=R(U,B,j);return M._encodings.push(A),M})}}function R(O,$,U){O=""+O;var I=new $(O,U);if(!I.valid())throw new g.InvalidInputException(I.constructor.name,O);var M=I.encode();M=(0,l.default)(M);for(var j=0;j<M.length;j++)M[j].options=(0,n.default)(U,M[j].options);return M}function S(){return t.default.CODE128?"CODE128":Object.keys(t.default)[0]}E.prototype.options=function(O){return this._options=(0,n.default)(this._options,O),this},E.prototype.blank=function(O){var $=new Array(O+1).join("0");return this._encodings.push({data:$}),this},E.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var O;for(var $ in this._renderProperties){O=this._renderProperties[$];var U=(0,n.default)(this._options,O.options);U.format=="auto"&&(U.format=S()),this._errorHandler.wrapBarcodeCall(function(){var I=U.value,M=t.default[U.format.toUpperCase()],j=R(I,M,U);w(O,j,U)})}}},E.prototype.render=function(){if(!this._renderProperties)throw new g.NoElementException;if(Array.isArray(this._renderProperties))for(var O=0;O<this._renderProperties.length;O++)w(this._renderProperties[O],this._encodings,this._options);else w(this._renderProperties,this._encodings,this._options);return this},E.prototype._defaults=h.default;function w(O,$,U){$=(0,l.default)($);for(var I=0;I<$.length;I++)$[I].options=(0,n.default)(U,$[I].options),(0,a.default)($[I].options);(0,a.default)(U);var M=O.renderer,j=new M(O.element,$,U);j.render(),O.afterRender&&O.afterRender()}return typeof window<"u"&&(window.JsBarcode=k),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(O,$){var U=[];return jQuery(this).each(function(){U.push(this)}),k(U,O,$)}),ni=k,ni}var XA=WA();const YA=Sf(XA);var Jn={},oi,Nu;function ZA(){return Nu||(Nu=1,oi=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),oi}var ri={},gn={},Fu;function jn(){if(Fu)return gn;Fu=1;let e;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return gn.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},gn.getSymbolTotalCodewords=function(n){return t[n]},gn.getBCHDigit=function(r){let n=0;for(;r!==0;)n++,r>>>=1;return n},gn.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');e=n},gn.isKanjiModeEnabled=function(){return typeof e<"u"},gn.toSJIS=function(n){return e(n)},gn}var si={},$u;function Sa(){return $u||($u=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,s){if(e.isValid(n))return n;try{return t(n)}catch{return s}}})(si)),si}var ii,Lu;function eR(){if(Lu)return ii;Lu=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(t){const r=Math.floor(t/8);return(this.buffer[r]>>>7-t%8&1)===1},put:function(t,r){for(let n=0;n<r;n++)this.putBit((t>>>r-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),t&&(this.buffer[r]|=128>>>this.length%8),this.length++}},ii=e,ii}var ai,qu;function tR(){if(qu)return ai;qu=1;function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return e.prototype.set=function(t,r,n,s){const l=t*this.size+r;this.data[l]=n,s&&(this.reservedBit[l]=!0)},e.prototype.get=function(t,r){return this.data[t*this.size+r]},e.prototype.xor=function(t,r,n){this.data[t*this.size+r]^=n},e.prototype.isReserved=function(t,r){return this.reservedBit[t*this.size+r]},ai=e,ai}var li={},Uu;function nR(){return Uu||(Uu=1,(function(e){const t=jn().getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,l=t(n),i=l===145?26:Math.ceil((l-13)/(2*s-2))*2,a=[l-7];for(let c=1;c<s-1;c++)a[c]=a[c-1]-i;return a.push(6),a.reverse()},e.getPositions=function(n){const s=[],l=e.getRowColCoords(n),i=l.length;for(let a=0;a<i;a++)for(let c=0;c<i;c++)a===0&&c===0||a===0&&c===i-1||a===i-1&&c===0||s.push([l[a],l[c]]);return s}})(li)),li}var ui={},ju;function oR(){if(ju)return ui;ju=1;const e=jn().getSymbolSize,t=7;return ui.getPositions=function(n){const s=e(n);return[[0,0],[s-t,0],[0,s-t]]},ui}var di={},Bu;function rR(){return Bu||(Bu=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},e.from=function(s){return e.isValid(s)?parseInt(s,10):void 0},e.getPenaltyN1=function(s){const l=s.size;let i=0,a=0,c=0,d=null,u=null;for(let f=0;f<l;f++){a=c=0,d=u=null;for(let p=0;p<l;p++){let m=s.get(f,p);m===d?a++:(a>=5&&(i+=t.N1+(a-5)),d=m,a=1),m=s.get(p,f),m===u?c++:(c>=5&&(i+=t.N1+(c-5)),u=m,c=1)}a>=5&&(i+=t.N1+(a-5)),c>=5&&(i+=t.N1+(c-5))}return i},e.getPenaltyN2=function(s){const l=s.size;let i=0;for(let a=0;a<l-1;a++)for(let c=0;c<l-1;c++){const d=s.get(a,c)+s.get(a,c+1)+s.get(a+1,c)+s.get(a+1,c+1);(d===4||d===0)&&i++}return i*t.N2},e.getPenaltyN3=function(s){const l=s.size;let i=0,a=0,c=0;for(let d=0;d<l;d++){a=c=0;for(let u=0;u<l;u++)a=a<<1&2047|s.get(d,u),u>=10&&(a===1488||a===93)&&i++,c=c<<1&2047|s.get(u,d),u>=10&&(c===1488||c===93)&&i++}return i*t.N3},e.getPenaltyN4=function(s){let l=0;const i=s.data.length;for(let c=0;c<i;c++)l+=s.data[c];return Math.abs(Math.ceil(l*100/i/5)-10)*t.N4};function r(n,s,l){switch(n){case e.Patterns.PATTERN000:return(s+l)%2===0;case e.Patterns.PATTERN001:return s%2===0;case e.Patterns.PATTERN010:return l%3===0;case e.Patterns.PATTERN011:return(s+l)%3===0;case e.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(l/3))%2===0;case e.Patterns.PATTERN101:return s*l%2+s*l%3===0;case e.Patterns.PATTERN110:return(s*l%2+s*l%3)%2===0;case e.Patterns.PATTERN111:return(s*l%3+(s+l)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(s,l){const i=l.size;for(let a=0;a<i;a++)for(let c=0;c<i;c++)l.isReserved(c,a)||l.xor(c,a,r(s,c,a))},e.getBestMask=function(s,l){const i=Object.keys(e.Patterns).length;let a=0,c=1/0;for(let d=0;d<i;d++){l(d),e.applyMask(d,s);const u=e.getPenaltyN1(s)+e.getPenaltyN2(s)+e.getPenaltyN3(s)+e.getPenaltyN4(s);e.applyMask(d,s),u<c&&(c=u,a=d)}return a}})(di)),di}var Jr={},Vu;function If(){if(Vu)return Jr;Vu=1;const e=Sa(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Jr.getBlocksCount=function(s,l){switch(l){case e.L:return t[(s-1)*4+0];case e.M:return t[(s-1)*4+1];case e.Q:return t[(s-1)*4+2];case e.H:return t[(s-1)*4+3];default:return}},Jr.getTotalCodewordsCount=function(s,l){switch(l){case e.L:return r[(s-1)*4+0];case e.M:return r[(s-1)*4+1];case e.Q:return r[(s-1)*4+2];case e.H:return r[(s-1)*4+3];default:return}},Jr}var ci={},ko={},Hu;function sR(){if(Hu)return ko;Hu=1;const e=new Uint8Array(512),t=new Uint8Array(256);return(function(){let n=1;for(let s=0;s<255;s++)e[s]=n,t[n]=s,n<<=1,n&256&&(n^=285);for(let s=255;s<512;s++)e[s]=e[s-255]})(),ko.log=function(n){if(n<1)throw new Error("log("+n+")");return t[n]},ko.exp=function(n){return e[n]},ko.mul=function(n,s){return n===0||s===0?0:e[t[n]+t[s]]},ko}var zu;function iR(){return zu||(zu=1,(function(e){const t=sR();e.mul=function(n,s){const l=new Uint8Array(n.length+s.length-1);for(let i=0;i<n.length;i++)for(let a=0;a<s.length;a++)l[i+a]^=t.mul(n[i],s[a]);return l},e.mod=function(n,s){let l=new Uint8Array(n);for(;l.length-s.length>=0;){const i=l[0];for(let c=0;c<s.length;c++)l[c]^=t.mul(s[c],i);let a=0;for(;a<l.length&&l[a]===0;)a++;l=l.slice(a)}return l},e.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let l=0;l<n;l++)s=e.mul(s,new Uint8Array([1,t.exp(l)]));return s}})(ci)),ci}var fi,Gu;function aR(){if(Gu)return fi;Gu=1;const e=iR();function t(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(n){this.degree=n,this.genPoly=e.generateECPolynomial(this.degree)},t.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(n.length+this.degree);s.set(n);const l=e.mod(s,this.genPoly),i=this.degree-l.length;if(i>0){const a=new Uint8Array(this.degree);return a.set(l,i),a}return l},fi=t,fi}var pi={},mi={},gi={},Qu;function Nf(){return Qu||(Qu=1,gi.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),gi}var Ht={},Ku;function Ff(){if(Ku)return Ht;Ku=1;const e="[0-9]+",t="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;Ht.KANJI=new RegExp(r,"g"),Ht.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ht.BYTE=new RegExp(n,"g"),Ht.NUMERIC=new RegExp(e,"g"),Ht.ALPHANUMERIC=new RegExp(t,"g");const s=new RegExp("^"+r+"$"),l=new RegExp("^"+e+"$"),i=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ht.testKanji=function(c){return s.test(c)},Ht.testNumeric=function(c){return l.test(c)},Ht.testAlphanumeric=function(c){return i.test(c)},Ht}var Ju;function Bn(){return Ju||(Ju=1,(function(e){const t=Nf(),r=Ff();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(l,i){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!t.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?l.ccBits[0]:i<27?l.ccBits[1]:l.ccBits[2]},e.getBestModeForData=function(l){return r.testNumeric(l)?e.NUMERIC:r.testAlphanumeric(l)?e.ALPHANUMERIC:r.testKanji(l)?e.KANJI:e.BYTE},e.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},e.isValid=function(l){return l&&l.bit&&l.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+s)}}e.from=function(l,i){if(e.isValid(l))return l;try{return n(l)}catch{return i}}})(mi)),mi}var Wu;function lR(){return Wu||(Wu=1,(function(e){const t=jn(),r=If(),n=Sa(),s=Bn(),l=Nf(),i=7973,a=t.getBCHDigit(i);function c(p,m,g){for(let v=1;v<=40;v++)if(m<=e.getCapacity(v,g,p))return v}function d(p,m){return s.getCharCountIndicator(p,m)+4}function u(p,m){let g=0;return p.forEach(function(v){const h=d(v.mode,m);g+=h+v.getBitsLength()}),g}function f(p,m){for(let g=1;g<=40;g++)if(u(p,g)<=e.getCapacity(g,m,s.MIXED))return g}e.from=function(m,g){return l.isValid(m)?parseInt(m,10):g},e.getCapacity=function(m,g,v){if(!l.isValid(m))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=s.BYTE);const h=t.getSymbolTotalCodewords(m),C=r.getTotalCodewordsCount(m,g),E=(h-C)*8;if(v===s.MIXED)return E;const k=E-d(v,m);switch(v){case s.NUMERIC:return Math.floor(k/10*3);case s.ALPHANUMERIC:return Math.floor(k/11*2);case s.KANJI:return Math.floor(k/13);case s.BYTE:default:return Math.floor(k/8)}},e.getBestVersionForData=function(m,g){let v;const h=n.from(g,n.M);if(Array.isArray(m)){if(m.length>1)return f(m,h);if(m.length===0)return 1;v=m[0]}else v=m;return c(v.mode,v.getLength(),h)},e.getEncodedBits=function(m){if(!l.isValid(m)||m<7)throw new Error("Invalid QR Code version");let g=m<<12;for(;t.getBCHDigit(g)-a>=0;)g^=i<<t.getBCHDigit(g)-a;return m<<12|g}})(pi)),pi}var vi={},Xu;function uR(){if(Xu)return vi;Xu=1;const e=jn(),t=1335,r=21522,n=e.getBCHDigit(t);return vi.getEncodedBits=function(l,i){const a=l.bit<<3|i;let c=a<<10;for(;e.getBCHDigit(c)-n>=0;)c^=t<<e.getBCHDigit(c)-n;return(a<<10|c)^r},vi}var hi={},yi,Yu;function dR(){if(Yu)return yi;Yu=1;const e=Bn();function t(r){this.mode=e.NUMERIC,this.data=r.toString()}return t.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let s,l,i;for(s=0;s+3<=this.data.length;s+=3)l=this.data.substr(s,3),i=parseInt(l,10),n.put(i,10);const a=this.data.length-s;a>0&&(l=this.data.substr(s),i=parseInt(l,10),n.put(i,a*3+1))},yi=t,yi}var bi,Zu;function cR(){if(Zu)return bi;Zu=1;const e=Bn(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(n){this.mode=e.ALPHANUMERIC,this.data=n}return r.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(s){let l;for(l=0;l+2<=this.data.length;l+=2){let i=t.indexOf(this.data[l])*45;i+=t.indexOf(this.data[l+1]),s.put(i,11)}this.data.length%2&&s.put(t.indexOf(this.data[l]),6)},bi=r,bi}var _i,ed;function fR(){if(ed)return _i;ed=1;const e=Bn();function t(r){this.mode=e.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return t.getBitsLength=function(n){return n*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){for(let n=0,s=this.data.length;n<s;n++)r.put(this.data[n],8)},_i=t,_i}var xi,td;function pR(){if(td)return xi;td=1;const e=Bn(),t=jn();function r(n){this.mode=e.KANJI,this.data=n}return r.getBitsLength=function(s){return s*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){let s;for(s=0;s<this.data.length;s++){let l=t.toSJIS(this.data[s]);if(l>=33088&&l<=40956)l-=33088;else if(l>=57408&&l<=60351)l-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);l=(l>>>8&255)*192+(l&255),n.put(l,13)}},xi=r,xi}var wi={exports:{}},nd;function mR(){return nd||(nd=1,(function(e){var t={single_source_shortest_paths:function(r,n,s){var l={},i={};i[n]=0;var a=t.PriorityQueue.make();a.push(n,0);for(var c,d,u,f,p,m,g,v,h;!a.empty();){c=a.pop(),d=c.value,f=c.cost,p=r[d]||{};for(u in p)p.hasOwnProperty(u)&&(m=p[u],g=f+m,v=i[u],h=typeof i[u]>"u",(h||v>g)&&(i[u]=g,a.push(u,g),l[u]=d))}if(typeof s<"u"&&typeof i[s]>"u"){var C=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(C)}return l},extract_shortest_path_from_predecessor_list:function(r,n){for(var s=[],l=n;l;)s.push(l),r[l],l=r[l];return s.reverse(),s},find_path:function(r,n,s){var l=t.single_source_shortest_paths(r,n,s);return t.extract_shortest_path_from_predecessor_list(l,s)},PriorityQueue:{make:function(r){var n=t.PriorityQueue,s={},l;r=r||{};for(l in n)n.hasOwnProperty(l)&&(s[l]=n[l]);return s.queue=[],s.sorter=r.sorter||n.default_sorter,s},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var s={value:r,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(wi)),wi.exports}var od;function gR(){return od||(od=1,(function(e){const t=Bn(),r=dR(),n=cR(),s=fR(),l=pR(),i=Ff(),a=jn(),c=mR();function d(C){return unescape(encodeURIComponent(C)).length}function u(C,E,k){const T=[];let y;for(;(y=C.exec(k))!==null;)T.push({data:y[0],index:y.index,mode:E,length:y[0].length});return T}function f(C){const E=u(i.NUMERIC,t.NUMERIC,C),k=u(i.ALPHANUMERIC,t.ALPHANUMERIC,C);let T,y;return a.isKanjiModeEnabled()?(T=u(i.BYTE,t.BYTE,C),y=u(i.KANJI,t.KANJI,C)):(T=u(i.BYTE_KANJI,t.BYTE,C),y=[]),E.concat(k,T,y).sort(function(S,w){return S.index-w.index}).map(function(S){return{data:S.data,mode:S.mode,length:S.length}})}function p(C,E){switch(E){case t.NUMERIC:return r.getBitsLength(C);case t.ALPHANUMERIC:return n.getBitsLength(C);case t.KANJI:return l.getBitsLength(C);case t.BYTE:return s.getBitsLength(C)}}function m(C){return C.reduce(function(E,k){const T=E.length-1>=0?E[E.length-1]:null;return T&&T.mode===k.mode?(E[E.length-1].data+=k.data,E):(E.push(k),E)},[])}function g(C){const E=[];for(let k=0;k<C.length;k++){const T=C[k];switch(T.mode){case t.NUMERIC:E.push([T,{data:T.data,mode:t.ALPHANUMERIC,length:T.length},{data:T.data,mode:t.BYTE,length:T.length}]);break;case t.ALPHANUMERIC:E.push([T,{data:T.data,mode:t.BYTE,length:T.length}]);break;case t.KANJI:E.push([T,{data:T.data,mode:t.BYTE,length:d(T.data)}]);break;case t.BYTE:E.push([{data:T.data,mode:t.BYTE,length:d(T.data)}])}}return E}function v(C,E){const k={},T={start:{}};let y=["start"];for(let R=0;R<C.length;R++){const S=C[R],w=[];for(let O=0;O<S.length;O++){const $=S[O],U=""+R+O;w.push(U),k[U]={node:$,lastCount:0},T[U]={};for(let I=0;I<y.length;I++){const M=y[I];k[M]&&k[M].node.mode===$.mode?(T[M][U]=p(k[M].lastCount+$.length,$.mode)-p(k[M].lastCount,$.mode),k[M].lastCount+=$.length):(k[M]&&(k[M].lastCount=$.length),T[M][U]=p($.length,$.mode)+4+t.getCharCountIndicator($.mode,E))}}y=w}for(let R=0;R<y.length;R++)T[y[R]].end=0;return{map:T,table:k}}function h(C,E){let k;const T=t.getBestModeForData(C);if(k=t.from(E,T),k!==t.BYTE&&k.bit<T.bit)throw new Error('"'+C+'" cannot be encoded with mode '+t.toString(k)+`.
 Suggested mode is: `+t.toString(T));switch(k===t.KANJI&&!a.isKanjiModeEnabled()&&(k=t.BYTE),k){case t.NUMERIC:return new r(C);case t.ALPHANUMERIC:return new n(C);case t.KANJI:return new l(C);case t.BYTE:return new s(C)}}e.fromArray=function(E){return E.reduce(function(k,T){return typeof T=="string"?k.push(h(T,null)):T.data&&k.push(h(T.data,T.mode)),k},[])},e.fromString=function(E,k){const T=f(E,a.isKanjiModeEnabled()),y=g(T),R=v(y,k),S=c.find_path(R.map,"start","end"),w=[];for(let O=1;O<S.length-1;O++)w.push(R.table[S[O]].node);return e.fromArray(m(w))},e.rawSplit=function(E){return e.fromArray(f(E,a.isKanjiModeEnabled()))}})(hi)),hi}var rd;function vR(){if(rd)return ri;rd=1;const e=jn(),t=Sa(),r=eR(),n=tR(),s=nR(),l=oR(),i=rR(),a=If(),c=aR(),d=lR(),u=uR(),f=Bn(),p=gR();function m(R,S){const w=R.size,O=l.getPositions(S);for(let $=0;$<O.length;$++){const U=O[$][0],I=O[$][1];for(let M=-1;M<=7;M++)if(!(U+M<=-1||w<=U+M))for(let j=-1;j<=7;j++)I+j<=-1||w<=I+j||(M>=0&&M<=6&&(j===0||j===6)||j>=0&&j<=6&&(M===0||M===6)||M>=2&&M<=4&&j>=2&&j<=4?R.set(U+M,I+j,!0,!0):R.set(U+M,I+j,!1,!0))}}function g(R){const S=R.size;for(let w=8;w<S-8;w++){const O=w%2===0;R.set(w,6,O,!0),R.set(6,w,O,!0)}}function v(R,S){const w=s.getPositions(S);for(let O=0;O<w.length;O++){const $=w[O][0],U=w[O][1];for(let I=-2;I<=2;I++)for(let M=-2;M<=2;M++)I===-2||I===2||M===-2||M===2||I===0&&M===0?R.set($+I,U+M,!0,!0):R.set($+I,U+M,!1,!0)}}function h(R,S){const w=R.size,O=d.getEncodedBits(S);let $,U,I;for(let M=0;M<18;M++)$=Math.floor(M/3),U=M%3+w-8-3,I=(O>>M&1)===1,R.set($,U,I,!0),R.set(U,$,I,!0)}function C(R,S,w){const O=R.size,$=u.getEncodedBits(S,w);let U,I;for(U=0;U<15;U++)I=($>>U&1)===1,U<6?R.set(U,8,I,!0):U<8?R.set(U+1,8,I,!0):R.set(O-15+U,8,I,!0),U<8?R.set(8,O-U-1,I,!0):U<9?R.set(8,15-U-1+1,I,!0):R.set(8,15-U-1,I,!0);R.set(O-8,8,1,!0)}function E(R,S){const w=R.size;let O=-1,$=w-1,U=7,I=0;for(let M=w-1;M>0;M-=2)for(M===6&&M--;;){for(let j=0;j<2;j++)if(!R.isReserved($,M-j)){let B=!1;I<S.length&&(B=(S[I]>>>U&1)===1),R.set($,M-j,B),U--,U===-1&&(I++,U=7)}if($+=O,$<0||w<=$){$-=O,O=-O;break}}}function k(R,S,w){const O=new r;w.forEach(function(j){O.put(j.mode.bit,4),O.put(j.getLength(),f.getCharCountIndicator(j.mode,R)),j.write(O)});const $=e.getSymbolTotalCodewords(R),U=a.getTotalCodewordsCount(R,S),I=($-U)*8;for(O.getLengthInBits()+4<=I&&O.put(0,4);O.getLengthInBits()%8!==0;)O.putBit(0);const M=(I-O.getLengthInBits())/8;for(let j=0;j<M;j++)O.put(j%2?17:236,8);return T(O,R,S)}function T(R,S,w){const O=e.getSymbolTotalCodewords(S),$=a.getTotalCodewordsCount(S,w),U=O-$,I=a.getBlocksCount(S,w),M=O%I,j=I-M,B=Math.floor(O/I),A=Math.floor(U/I),z=A+1,te=B-A,pe=new c(te);let Re=0;const de=new Array(I),P=new Array(I);let W=0;const ke=new Uint8Array(R.buffer);for(let ie=0;ie<I;ie++){const ce=ie<j?A:z;de[ie]=ke.slice(Re,Re+ce),P[ie]=pe.encode(de[ie]),Re+=ce,W=Math.max(W,ce)}const Ee=new Uint8Array(O);let Be=0,J,ae;for(J=0;J<W;J++)for(ae=0;ae<I;ae++)J<de[ae].length&&(Ee[Be++]=de[ae][J]);for(J=0;J<te;J++)for(ae=0;ae<I;ae++)Ee[Be++]=P[ae][J];return Ee}function y(R,S,w,O){let $;if(Array.isArray(R))$=p.fromArray(R);else if(typeof R=="string"){let B=S;if(!B){const A=p.rawSplit(R);B=d.getBestVersionForData(A,w)}$=p.fromString(R,B||40)}else throw new Error("Invalid data");const U=d.getBestVersionForData($,w);if(!U)throw new Error("The amount of data is too big to be stored in a QR Code");if(!S)S=U;else if(S<U)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+U+`.
`);const I=k(S,w,$),M=e.getSymbolSize(S),j=new n(M);return m(j,S),g(j),v(j,S),C(j,w,0),S>=7&&h(j,S),E(j,I),isNaN(O)&&(O=i.getBestMask(j,C.bind(null,j,w))),i.applyMask(O,j),C(j,w,O),{modules:j,version:S,errorCorrectionLevel:w,maskPattern:O,segments:$}}return ri.create=function(S,w){if(typeof S>"u"||S==="")throw new Error("No input text");let O=t.M,$,U;return typeof w<"u"&&(O=t.from(w.errorCorrectionLevel,t.M),$=d.from(w.version),U=i.from(w.maskPattern),w.toSJISFunc&&e.setToSJISFunction(w.toSJISFunc)),y(S,$,O,U)},ri}var Ci={},ki={},sd;function $f(){return sd||(sd=1,(function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(l){return[l,l]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,l=n.width&&n.width>=21?n.width:void 0,i=n.scale||4;return{width:l,scale:l?4:i,margin:s,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},e.getImageWidth=function(n,s){const l=e.getScale(n,s);return Math.floor((n+s.margin*2)*l)},e.qrToImageData=function(n,s,l){const i=s.modules.size,a=s.modules.data,c=e.getScale(i,l),d=Math.floor((i+l.margin*2)*c),u=l.margin*c,f=[l.color.light,l.color.dark];for(let p=0;p<d;p++)for(let m=0;m<d;m++){let g=(p*d+m)*4,v=l.color.light;if(p>=u&&m>=u&&p<d-u&&m<d-u){const h=Math.floor((p-u)/c),C=Math.floor((m-u)/c);v=f[a[h*i+C]?1:0]}n[g++]=v.r,n[g++]=v.g,n[g++]=v.b,n[g]=v.a}}})(ki)),ki}var id;function hR(){return id||(id=1,(function(e){const t=$f();function r(s,l,i){s.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=i,l.width=i,l.style.height=i+"px",l.style.width=i+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(l,i,a){let c=a,d=i;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),i||(d=n()),c=t.getOptions(c);const u=t.getImageWidth(l.modules.size,c),f=d.getContext("2d"),p=f.createImageData(u,u);return t.qrToImageData(p.data,l,c),r(f,d,u),f.putImageData(p,0,0),d},e.renderToDataURL=function(l,i,a){let c=a;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),c||(c={});const d=e.render(l,i,c),u=c.type||"image/png",f=c.rendererOpts||{};return d.toDataURL(u,f.quality)}})(Ci)),Ci}var Si={},ad;function yR(){if(ad)return Si;ad=1;const e=$f();function t(s,l){const i=s.a/255,a=l+'="'+s.hex+'"';return i<1?a+" "+l+'-opacity="'+i.toFixed(2).slice(1)+'"':a}function r(s,l,i){let a=s+l;return typeof i<"u"&&(a+=" "+i),a}function n(s,l,i){let a="",c=0,d=!1,u=0;for(let f=0;f<s.length;f++){const p=Math.floor(f%l),m=Math.floor(f/l);!p&&!d&&(d=!0),s[f]?(u++,f>0&&p>0&&s[f-1]||(a+=d?r("M",p+i,.5+m+i):r("m",c,0),c=0,d=!1),p+1<l&&s[f+1]||(a+=r("h",u),u=0)):c++}return a}return Si.render=function(l,i,a){const c=e.getOptions(i),d=l.modules.size,u=l.modules.data,f=d+c.margin*2,p=c.color.light.a?"<path "+t(c.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",m="<path "+t(c.color.dark,"stroke")+' d="'+n(u,d,c.margin)+'"/>',g='viewBox="0 0 '+f+" "+f+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+g+' shape-rendering="crispEdges">'+p+m+`</svg>
`;return typeof a=="function"&&a(null,h),h},Si}var ld;function bR(){if(ld)return Jn;ld=1;const e=ZA(),t=vR(),r=hR(),n=yR();function s(l,i,a,c,d){const u=[].slice.call(arguments,1),f=u.length,p=typeof u[f-1]=="function";if(!p&&!e())throw new Error("Callback required as last argument");if(p){if(f<2)throw new Error("Too few arguments provided");f===2?(d=a,a=i,i=c=void 0):f===3&&(i.getContext&&typeof d>"u"?(d=c,c=void 0):(d=c,c=a,a=i,i=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(a=i,i=c=void 0):f===2&&!i.getContext&&(c=a,a=i,i=void 0),new Promise(function(m,g){try{const v=t.create(a,c);m(l(v,i,c))}catch(v){g(v)}})}try{const m=t.create(a,c);d(null,l(m,i,c))}catch(m){d(m)}}return Jn.create=t.create,Jn.toCanvas=s.bind(null,r.render),Jn.toDataURL=s.bind(null,r.renderToDataURL),Jn.toString=s.bind(null,function(l,i,a){return n.render(l,a)}),Jn}var _R=bR();const xR=Sf(_R),wR={class:"modal-container"},CR={class:"modal-header"},kR={class:"modal-body"},SR={class:"no-print"},ER={class:"purchase-info"},PR={class:"info-row"},AR={class:"info-row"},RR={class:"info-row"},TR={class:"receive-section"},OR={class:"products-list"},MR={class:"product-header"},DR={class:"product-info"},IR={class:"product-name"},NR={class:"product-meta"},FR={class:"product-receive"},$R={class:"form-group"},LR=["onUpdate:modelValue","max"],qR={key:0,class:"error-message"},UR={key:1,class:"error-message"},jR={class:"receive-status"},BR={key:0,class:"status not-received"},VR={key:1,class:"status partial"},HR={key:2,class:"status complete"},zR={class:"form-group"},GR={class:"form-group",style:{"margin-top":"1rem"}},QR={class:"summary-section"},KR={class:"summary-grid"},JR={class:"summary-card"},WR={class:"summary-content"},XR={class:"summary-value"},YR={class:"summary-card"},ZR={class:"summary-content"},eT={class:"summary-value"},tT={class:"summary-card"},nT={class:"summary-content"},oT={class:"summary-value"},rT={class:"summary-icon"},sT={class:"summary-content"},iT={class:"summary-value"},aT={key:0,class:"alert alert-warning"},lT={class:"info-box"},uT={class:"info-content"},dT={key:0},cT={class:"print-only"},fT={class:"receipt-border"},pT={class:"print-header"},mT={class:"company-branding"},gT=["src"],vT={class:"company-text"},hT={key:0},yT={class:"document-details"},bT={class:"detail-row"},_T={class:"detail-row"},xT={class:"supplier-banner"},wT={class:"value"},CT={key:0,class:"print-notes"},kT={class:"print-table"},ST={class:"text-center"},ET={class:"text-center"},PT={class:"text-center"},AT={class:"text-right"},RT={class:"text-right"},TT={class:"print-summary"},OT={class:"modal-footer"},MT=["disabled"],DT={key:0,class:"spinner-small"},IT={key:1},NT={__name:"ReceivePurchaseModal",props:{purchase:{type:Object,required:!0}},emits:["close","success"],setup(e,{emit:t}){const r=e,n=t,s=N(!1),l=N({items:[],received_date:new Date().toISOString().split("T")[0],notes:""}),i=N({name:localStorage.getItem("app_company_name")||" SmartDrink Store",subtitle:localStorage.getItem("app_company_subtitle")||"Commerce Gnral & Distribution",address:localStorage.getItem("app_company_address")||"Yaound, Cameroun",logo:localStorage.getItem("app_company_logo")||"/logo.png",phone:localStorage.getItem("app_company_phone")||""}),a=N({}),c={loadProducts:()=>{},loadDeposits:()=>{}},{receivePurchase:d}=ka(a,c),u=K(()=>l.value.items.filter(S=>S.quantity_received>0).length),f=K(()=>l.value.items.reduce((S,w)=>S+w.quantity_received,0)),p=K(()=>l.value.items.reduce((S,w)=>S+w.quantity,0)),m=K(()=>l.value.items.reduce((S,w)=>S+w.quantity_received*(w.unit_cost||0),0)),g=K(()=>p.value===0?0:Math.round(f.value/p.value*100)),v=K(()=>l.value.items.some(S=>S.quantity_received>0&&S.quantity_received<S.quantity)),h=K(()=>g.value===100?"":g.value>0?"":""),C=K(()=>g.value===100?"status-complete":g.value>0?"status-partial":"status-none"),E=K(()=>f.value<=0?!1:!l.value.items.some(w=>w.quantity_received>w.quantity||w.quantity_received<0)),k=S=>S?new Date(S).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",T=S=>new Intl.NumberFormat("fr-FR").format(S||0)+" FCFA",y=()=>{const S=document.querySelector(".print-only");if(!S){console.error("Element .print-only introuvable pour l'impression.");return}const w=document.createElement("iframe");w.style.display="none",w.setAttribute("title","Frame d'impression"),document.body.appendChild(w);const O=w.contentWindow.document;O.open(),O.write("<!DOCTYPE html><html><head><title>Bon de Rception</title></head><body></body></html>"),document.querySelectorAll('style, link[rel="stylesheet"]').forEach(M=>{O.head.appendChild(M.cloneNode(!0))}),O.body.innerHTML=S.innerHTML,O.close();const I=Array.from(O.querySelectorAll("img")).map(M=>M.complete?Promise.resolve():new Promise(j=>{M.onload=M.onerror=j}));Promise.all(I).then(()=>{setTimeout(()=>{w.contentWindow.focus(),w.contentWindow.print(),document.body.removeChild(w)},250)})},R=async()=>{if(!E.value){const w=l.value.items.find(O=>O.quantity_received>O.quantity||O.quantity_received<0);alert(w?` Quantit invalide pour "${w.product_name}". La quantit doit tre entre 0 et ${w.quantity}.`:" Veuillez saisir au moins une quantit reue.");return}if(confirm(`Confirmer la rception de ${f.value} unit(s) ?

Cela va mettre  jour le stock automatiquement.`)){s.value=!0;try{const w=await d(r.purchase.id,l.value);w.success?(alert(" Rception valide avec succs ! Le stock a t mis  jour."),n("success")):alert(" Erreur : "+w.error)}catch(w){alert(" Erreur : "+w.message)}finally{s.value=!1}}};return vt(()=>{l.value.items=r.purchase.items.map(S=>({id:S.id,product_id:S.product_id,product_name:S.product?.name||"Produit inconnu",quantity:S.quantity,unit_cost:S.unit_cost||0,quantity_received:S.quantity_received??S.quantity})),Ss(()=>{if(r.purchase?.reference){const S=r.purchase.reference,w=S;try{YA("#purchase-barcode",S,{format:"CODE128",width:1.5,height:40,displayValue:!1,margin:0})}catch($){console.error("Erreur gnration code-barres:",$)}const O=document.getElementById("purchase-qrcode");O&&xR.toCanvas(O,w,{width:50,margin:1,errorCorrectionLevel:"H"},function($){$&&console.error("Erreur gnration QR Code:",$)})}})}),(S,w)=>(_(),x("div",{class:"modal-overlay",onClick:w[4]||(w[4]=xe(O=>S.$emit("close"),["self"]))},[o("div",wR,[o("div",CR,[w[5]||(w[5]=o("h2",{class:"modal-title"},[o("span",{class:"icon"},""),ne(" Rception de Marchandises ")],-1)),o("button",{onClick:w[0]||(w[0]=O=>S.$emit("close")),class:"btn-close"},"")]),o("div",kR,[o("div",SR,[o("div",ER,[o("div",PR,[w[6]||(w[6]=o("span",{class:"info-label"},"Rfrence :",-1)),o("strong",null,b(e.purchase.reference),1)]),o("div",AR,[w[7]||(w[7]=o("span",{class:"info-label"},"Fournisseur :",-1)),o("strong",null,b(e.purchase.supplier?.name),1)]),o("div",RR,[w[8]||(w[8]=o("span",{class:"info-label"},"Date de commande :",-1)),o("strong",null,b(k(e.purchase.order_date)),1)])]),o("div",TR,[w[14]||(w[14]=o("h3",{class:"section-title"}," Produits Commands",-1)),o("div",OR,[(_(!0),x(fe,null,be(l.value.items,(O,$)=>(_(),x("div",{key:O.id,class:"product-card"},[o("div",MR,[o("div",DR,[o("h4",IR,b(O.product_name),1),o("div",NR,[w[9]||(w[9]=ne(" Command : ",-1)),o("strong",null,b(O.quantity),1),w[10]||(w[10]=ne(" units ",-1))])])]),o("div",FR,[o("div",$R,[w[11]||(w[11]=o("label",{class:"form-label"},"Quantit reue *",-1)),Q(o("input",{"onUpdate:modelValue":U=>O.quantity_received=U,type:"number",class:le([{"input-error":O.quantity_received>O.quantity||O.quantity_received<0},"form-input"]),min:0,max:O.quantity,required:""},null,10,LR),[[oe,O.quantity_received,void 0,{number:!0}]]),O.quantity_received>O.quantity?(_(),x("div",qR," La quantit reue ne peut pas dpasser la quantit commande ("+b(O.quantity)+"). ",1)):L("",!0),O.quantity_received<0?(_(),x("div",UR," La quantit ne peut pas tre ngative. ")):L("",!0)]),o("div",jR,[O.quantity_received===0?(_(),x("div",BR,"  Non reu ")):O.quantity_received<O.quantity?(_(),x("div",VR,"  Rception partielle ("+b(O.quantity-O.quantity_received)+" manquant"+b(O.quantity-O.quantity_received>1?"s":"")+") ",1)):(_(),x("div",HR,"  Rception complte "))])])]))),128))]),o("div",zR,[w[12]||(w[12]=o("label",{class:"form-label"},"Date de rception",-1)),Q(o("input",{"onUpdate:modelValue":w[1]||(w[1]=O=>l.value.received_date=O),type:"date",class:"form-input"},null,512),[[oe,l.value.received_date]])]),o("div",GR,[w[13]||(w[13]=o("label",{class:"form-label"},"Notes de rception",-1)),Q(o("textarea",{"onUpdate:modelValue":w[2]||(w[2]=O=>l.value.notes=O),class:"form-textarea",rows:"2",placeholder:"Observations sur la rception (tat des cartons, remarques...)"},null,512),[[oe,l.value.notes]])])]),o("div",QR,[w[22]||(w[22]=o("h3",{class:"section-title"}," Rsum de la Rception",-1)),o("div",KR,[o("div",JR,[w[16]||(w[16]=o("div",{class:"summary-icon"},"",-1)),o("div",WR,[o("div",XR,b(u.value),1),w[15]||(w[15]=o("div",{class:"summary-label"},"Produits reus",-1))])]),o("div",YR,[w[18]||(w[18]=o("div",{class:"summary-icon"},"",-1)),o("div",ZR,[o("div",eT,b(f.value),1),w[17]||(w[17]=o("div",{class:"summary-label"},"Units reues",-1))])]),o("div",tT,[w[20]||(w[20]=o("div",{class:"summary-icon"},"",-1)),o("div",nT,[o("div",oT,b(p.value),1),w[19]||(w[19]=o("div",{class:"summary-label"},"Units commandes",-1))])]),o("div",{class:le(["summary-card",C.value])},[o("div",rT,b(h.value),1),o("div",sT,[o("div",iT,b(g.value)+"%",1),w[21]||(w[21]=o("div",{class:"summary-label"},"Taux de rception",-1))])],2)])]),v.value?(_(),x("div",aT,[...w[23]||(w[23]=[o("div",{class:"alert-icon"},"",-1),o("div",{class:"alert-content"},[o("strong",null,"Rception partielle dtecte"),o("p",null,"Certains produits n'ont pas t reus en totalit. Le stock sera mis  jour uniquement pour les quantits reues.")],-1)])])):L("",!0),o("div",lT,[w[28]||(w[28]=o("div",{class:"info-icon"},"",-1)),o("div",uT,[w[27]||(w[27]=o("strong",null,"Actions automatiques aprs validation :",-1)),o("ul",null,[w[24]||(w[24]=o("li",null," Mise  jour automatique du stock",-1)),e.purchase.has_deposits?(_(),x("li",dT," Cration des consignes entrantes")):L("",!0),w[25]||(w[25]=o("li",null,' Changement du statut  "Reu"',-1)),w[26]||(w[26]=o("li",null," Enregistrement des mouvements de stock",-1))])])])]),o("div",cT,[o("div",fT,[o("div",pT,[o("div",mT,[o("img",{src:i.value.logo,alt:"Logo",class:"print-logo",onerror:"this.style.display='none'"},null,8,gT),o("div",vT,[o("h1",null,b(i.value.name),1),o("p",null,b(i.value.subtitle),1),o("p",null,b(i.value.address),1),i.value.phone?(_(),x("p",hT,"Tl : "+b(i.value.phone),1)):L("",!0)])]),o("div",yT,[w[31]||(w[31]=o("h2",null,"BON DE RCEPTION",-1)),o("div",bT,[w[29]||(w[29]=o("strong",null,"Rf:",-1)),ne(" "+b(e.purchase.reference),1)]),o("div",_T,[w[30]||(w[30]=o("strong",null,"Date:",-1)),ne(" "+b(k(l.value.received_date)),1)]),w[32]||(w[32]=o("div",{style:{"margin-top":"0.5rem",display:"flex","justify-content":"flex-end","align-items":"center",gap:"1rem"}},[o("canvas",{id:"purchase-qrcode"}),o("svg",{id:"purchase-barcode"})],-1))])]),o("div",xT,[w[33]||(w[33]=o("span",{class:"label"},"Fournisseur :",-1)),o("span",wT,b(e.purchase.supplier?.name),1)]),l.value.notes?(_(),x("div",CT,[w[34]||(w[34]=o("strong",null,"Notes :",-1)),ne(" "+b(l.value.notes),1)])):L("",!0),o("table",kT,[w[35]||(w[35]=o("thead",null,[o("tr",null,[o("th",null,"Produit"),o("th",null,"Qt Commande"),o("th",null,"Qt Reue"),o("th",null,"Manquant"),o("th",null,"P.U."),o("th",null,"Total")])],-1)),o("tbody",null,[(_(!0),x(fe,null,be(l.value.items,O=>(_(),x("tr",{key:O.id},[o("td",null,b(O.product_name),1),o("td",ST,b(O.quantity),1),o("td",ET,b(O.quantity_received),1),o("td",PT,b(O.quantity-O.quantity_received),1),o("td",AT,b(T(O.unit_cost)),1),o("td",RT,b(T(O.quantity_received*O.unit_cost)),1)]))),128))])]),o("div",TT,[o("div",null,[w[36]||(w[36]=o("strong",null,"Total command:",-1)),ne(" "+b(p.value)+" units",1)]),o("div",null,[w[37]||(w[37]=o("strong",null,"Total reu:",-1)),ne(" "+b(f.value)+" units",1)]),o("div",null,[w[38]||(w[38]=o("strong",null,"Montant Total:",-1)),ne(" "+b(T(m.value)),1)]),o("div",null,[w[39]||(w[39]=o("strong",null,"Taux de rception:",-1)),ne(" "+b(g.value)+"%",1)])]),w[40]||(w[40]=o("div",{class:"print-footer"},[o("div",{class:"signature-box"},[o("p",null,"Signature Magasinier")]),o("div",{class:"signature-box"},[o("p",null,"Signature Fournisseur")])],-1))])])]),o("div",OT,[o("button",{type:"button",onClick:y,class:"btn btn-secondary"},"  Imprimer "),o("button",{type:"button",onClick:w[3]||(w[3]=O=>S.$emit("close")),class:"btn btn-secondary"}," Annuler "),o("button",{type:"button",onClick:R,disabled:s.value||!E.value,class:"btn btn-primary"},[s.value?(_(),x("span",DT)):(_(),x("span",IT,"")),ne(" "+b(s.value?"Rception...":"Valider la Rception"),1)],8,MT)])])]))}},FT=Ve(NT,[["__scopeId","data-v-811a188b"]]),$T={class:"modal-container"},LT={class:"modal-header"},qT={class:"header-left"},UT={class:"modal-body"},jT={class:"section"},BT={class:"info-grid"},VT={class:"info-item"},HT={class:"info-value"},zT={class:"info-item"},GT={class:"info-value"},QT={class:"info-item"},KT={class:"info-item"},JT={class:"info-value"},WT={class:"info-item"},XT={class:"info-value"},YT={class:"info-item"},ZT={class:"info-value"},eO={key:0,class:"info-item"},tO={class:"info-value"},nO={class:"section"},oO={class:"products-table"},rO={key:0,class:"text-right"},sO={class:"product-cell"},iO={key:0,class:"product-notes"},aO={class:"text-right"},lO={key:0,class:"text-right"},uO={class:"text-right"},dO={class:"text-right"},cO={key:0,class:"consignments-info"},fO={class:"consignments-table"},pO={class:"text-right"},mO={class:"text-right"},gO={class:"text-right"},vO={class:"section"},hO={class:"payment-info"},yO={class:"payment-row"},bO={key:0,class:"payment-row"},_O={key:1,class:"payment-row"},xO={class:"transaction-ref"},wO={key:2,class:"payment-row"},CO={key:3,class:"payment-row"},kO={key:0,class:"overdue-badge"},SO={class:"section"},EO={class:"amounts-summary"},PO={class:"amount-row"},AO={key:0,class:"amount-row consignment"},RO={key:1,class:"amount-row"},TO={key:2,class:"amount-row discount"},OO={class:"amount-row total"},MO={class:"amount-row paid"},DO={key:3,class:"amount-row remaining"},IO={class:"text-danger"},NO={key:4,class:"amount-row complete"},FO={key:0,class:"section"},$O={class:"notes-content"},LO={class:"section"},qO={class:"timeline"},UO={class:"timeline-item"},jO={class:"timeline-content"},BO={key:0,class:"timeline-item"},VO={class:"timeline-content"},HO={key:1,class:"timeline-item"},zO={class:"timeline-content"},GO={key:2,class:"timeline-item"},QO={class:"timeline-content"},KO={class:"modal-footer"},JO={__name:"PurchaseDetailModal",props:{purchase:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const r=e,n=K(()=>r.purchase.items?.filter(p=>p.is_consigned)||[]),s=K(()=>(r.purchase.total_amount||0)-(r.purchase.paid_amount||0)),l=K(()=>!r.purchase.due_date||r.purchase.payment_method!=="credit"?!1:new Date(r.purchase.due_date)<new Date&&s.value>0),i=p=>new Intl.NumberFormat("fr-FR").format(p||0)+" FCFA",a=p=>p?new Date(p).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",c=p=>p?new Date(p).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",d=p=>({draft:" Brouillon",confirmed:" Confirm",received:" Reu",cancelled:" Annul"})[p]||p,u=p=>({cash:" Espces",mobile:" Mobile Money",credit:" Crdit",bank_transfer:" Virement"})[p]||p,f=()=>{window.print()};return(p,m)=>(_(),x("div",{class:"modal-overlay",onClick:m[2]||(m[2]=xe(g=>p.$emit("close"),["self"]))},[o("div",$T,[o("div",LT,[o("div",qT,[m[3]||(m[3]=o("h2",{class:"modal-title"},[o("span",{class:"icon"},""),ne(" Dtails de l'Achat ")],-1)),o("span",{class:le(["status-badge","status-"+e.purchase.status])},b(d(e.purchase.status)),3)]),o("button",{onClick:m[0]||(m[0]=g=>p.$emit("close")),class:"btn-close"},"")]),o("div",UT,[o("div",jT,[m[11]||(m[11]=o("h3",{class:"section-title"}," Informations Gnrales",-1)),o("div",BT,[o("div",VT,[m[4]||(m[4]=o("span",{class:"info-label"},"Rfrence",-1)),o("strong",HT,b(e.purchase.reference),1)]),o("div",zT,[m[5]||(m[5]=o("span",{class:"info-label"},"Fournisseur",-1)),o("strong",GT,b(e.purchase.supplier?.name||"N/A"),1)]),o("div",QT,[m[6]||(m[6]=o("span",{class:"info-label"},"Statut",-1)),o("span",{class:le(["status-badge","status-"+e.purchase.status])},b(d(e.purchase.status)),3)]),o("div",KT,[m[7]||(m[7]=o("span",{class:"info-label"},"Cr par",-1)),o("strong",JT,b(e.purchase.user?.name||"N/A"),1)]),o("div",WT,[m[8]||(m[8]=o("span",{class:"info-label"},"Date de commande",-1)),o("strong",XT,b(a(e.purchase.order_date)),1)]),o("div",YT,[m[9]||(m[9]=o("span",{class:"info-label"},"Livraison prvue",-1)),o("strong",ZT,b(a(e.purchase.expected_delivery_date)),1)]),e.purchase.received_date?(_(),x("div",eO,[m[10]||(m[10]=o("span",{class:"info-label"},"Date de rception",-1)),o("strong",tO,b(a(e.purchase.received_date)),1)])):L("",!0)])]),o("div",nO,[m[18]||(m[18]=o("h3",{class:"section-title"}," Produits Commands",-1)),o("div",oO,[o("table",null,[o("thead",null,[o("tr",null,[m[12]||(m[12]=o("th",null,"Produit",-1)),m[13]||(m[13]=o("th",{class:"text-right"},"Qt Commande",-1)),e.purchase.status==="received"?(_(),x("th",rO,"Qt Reue")):L("",!0),m[14]||(m[14]=o("th",{class:"text-right"},"Prix Unitaire",-1)),m[15]||(m[15]=o("th",{class:"text-right"},"Sous-total",-1))])]),o("tbody",null,[(_(!0),x(fe,null,be(e.purchase.items,g=>(_(),x("tr",{key:g.id},[o("td",null,[o("div",sO,[o("strong",null,b(g.product?.name||"N/A"),1),g.notes?(_(),x("small",iO,b(g.notes),1)):L("",!0)])]),o("td",aO,b(g.quantity),1),e.purchase.status==="received"?(_(),x("td",lO,[o("span",{class:le(g.quantity_received<g.quantity?"text-warning":"text-success")},b(g.quantity_received),3)])):L("",!0),o("td",uO,b(i(g.unit_cost)),1),o("td",dO,[o("strong",null,b(i(g.quantity*g.unit_cost)),1)])]))),128))])])]),e.purchase.has_deposits?(_(),x("div",cO,[m[17]||(m[17]=o("h4",{class:"subsection-title"}," Consignes Entrantes",-1)),o("div",fO,[o("table",null,[m[16]||(m[16]=o("thead",null,[o("tr",null,[o("th",null,"Type d'emballage"),o("th",{class:"text-right"},"Quantit"),o("th",{class:"text-right"},"Montant Unitaire"),o("th",{class:"text-right"},"Total")])],-1)),o("tbody",null,[(_(!0),x(fe,null,be(n.value,g=>(_(),x("tr",{key:g.id},[o("td",null,b(g.deposit_type?.name||"N/A"),1),o("td",pO,b(g.deposit_quantity),1),o("td",mO,b(i(g.unit_deposit_amount)),1),o("td",gO,[o("strong",null,b(i(g.total_deposit_amount)),1)])]))),128))])])])])):L("",!0)]),o("div",vO,[m[24]||(m[24]=o("h3",{class:"section-title"}," Paiement",-1)),o("div",hO,[o("div",yO,[m[19]||(m[19]=o("span",null,"Mthode de paiement :",-1)),o("span",{class:le(["payment-badge","payment-"+e.purchase.payment_method])},b(u(e.purchase.payment_method)),3)]),e.purchase.payment_method==="mobile"?(_(),x("div",bO,[m[20]||(m[20]=o("span",null,"Oprateur mobile :",-1)),o("strong",null,b(e.purchase.mobile_operator),1)])):L("",!0),e.purchase.mobile_reference?(_(),x("div",_O,[m[21]||(m[21]=o("span",null,"Rfrence de transaction :",-1)),o("code",xO,b(e.purchase.mobile_reference),1)])):L("",!0),e.purchase.payment_method==="credit"?(_(),x("div",wO,[m[22]||(m[22]=o("span",null,"Jours de crdit :",-1)),o("strong",null,b(e.purchase.credit_days)+" jours",1)])):L("",!0),e.purchase.due_date?(_(),x("div",CO,[m[23]||(m[23]=o("span",null,"Date d'chance :",-1)),o("strong",{class:le(l.value?"text-danger":"")},[ne(b(a(e.purchase.due_date))+" ",1),l.value?(_(),x("span",kO," EN RETARD")):L("",!0)],2)])):L("",!0)])]),o("div",SO,[m[33]||(m[33]=o("h3",{class:"section-title"}," Montants",-1)),o("div",EO,[o("div",PO,[m[25]||(m[25]=o("span",null,"Sous-total produits :",-1)),o("span",null,b(i(e.purchase.subtotal)),1)]),e.purchase.has_deposits?(_(),x("div",AO,[m[26]||(m[26]=o("span",null,"Total consignes :",-1)),o("span",null,b(i(e.purchase.total_deposit_amount)),1)])):L("",!0),e.purchase.tax>0?(_(),x("div",RO,[m[27]||(m[27]=o("span",null,"TVA :",-1)),o("span",null,b(i(e.purchase.tax)),1)])):L("",!0),e.purchase.discount>0?(_(),x("div",TO,[m[28]||(m[28]=o("span",null,"Remise :",-1)),o("span",null,"- "+b(i(e.purchase.discount)),1)])):L("",!0),o("div",OO,[m[29]||(m[29]=o("span",null,"TOTAL :",-1)),o("strong",null,b(i(e.purchase.total_amount)),1)]),o("div",MO,[m[30]||(m[30]=o("span",null,"Montant pay :",-1)),o("strong",null,b(i(e.purchase.paid_amount)),1)]),s.value>0?(_(),x("div",DO,[m[31]||(m[31]=o("span",null,"Reste  payer :",-1)),o("strong",IO,b(i(s.value)),1)])):(_(),x("div",NO,[...m[32]||(m[32]=[o("span",null," Paiement complet",-1)])]))])]),e.purchase.notes?(_(),x("div",FO,[m[34]||(m[34]=o("h3",{class:"section-title"}," Notes",-1)),o("div",$O,b(e.purchase.notes),1)])):L("",!0),o("div",LO,[m[43]||(m[43]=o("h3",{class:"section-title"}," Historique",-1)),o("div",qO,[o("div",UO,[m[36]||(m[36]=o("div",{class:"timeline-dot status-draft"},null,-1)),o("div",jO,[m[35]||(m[35]=o("strong",null,"Brouillon cr",-1)),o("small",null,b(c(e.purchase.created_at)),1)])]),e.purchase.status!=="draft"?(_(),x("div",BO,[m[38]||(m[38]=o("div",{class:"timeline-dot status-confirmed"},null,-1)),o("div",VO,[m[37]||(m[37]=o("strong",null,"Achat confirm",-1)),o("small",null,b(c(e.purchase.updated_at)),1)])])):L("",!0),e.purchase.status==="received"?(_(),x("div",HO,[m[40]||(m[40]=o("div",{class:"timeline-dot status-received"},null,-1)),o("div",zO,[m[39]||(m[39]=o("strong",null,"Marchandise rceptionne",-1)),o("small",null,b(c(e.purchase.received_date)),1)])])):L("",!0),e.purchase.status==="cancelled"?(_(),x("div",GO,[m[42]||(m[42]=o("div",{class:"timeline-dot status-cancelled"},null,-1)),o("div",QO,[m[41]||(m[41]=o("strong",null,"Achat annul",-1)),o("small",null,b(c(e.purchase.updated_at)),1)])])):L("",!0)])])]),o("div",KO,[o("button",{onClick:f,class:"btn btn-secondary"},"  Imprimer "),o("button",{onClick:m[1]||(m[1]=g=>p.$emit("close")),class:"btn btn-primary"}," Fermer ")])])]))}},WO=Ve(JO,[["__scopeId","data-v-a0979006"]]),XO={class:"purchases-page"},YO={class:"stats-grid"},ZO={class:"stat-card stat-total"},e6={class:"stat-content"},t6={class:"stat-value"},n6={class:"stat-card stat-draft"},o6={class:"stat-content"},r6={class:"stat-value"},s6={class:"stat-card stat-pending"},i6={class:"stat-content"},a6={class:"stat-value"},l6={class:"stat-card stat-received"},u6={class:"stat-content"},d6={class:"stat-value"},c6={class:"stat-card stat-amount"},f6={class:"stat-content"},p6={class:"stat-value"},m6={class:"stat-card stat-debt"},g6={class:"stat-content"},v6={class:"stat-value"},h6={class:"filters-section"},y6={class:"filters-row"},b6={class:"filter-group"},_6={class:"filter-group"},x6={class:"filter-group"},w6={class:"filter-group"},C6=["value"],k6={class:"filter-group"},S6={class:"filter-group"},E6={class:"purchases-list"},P6={key:0,class:"loading-state"},A6={key:1,class:"empty-state"},R6={key:2,class:"purchases-table"},T6={class:"purchase-reference"},O6={key:0,class:"purchase-notes"},M6={class:"supplier-info"},D6={class:"supplier-name"},I6={class:"date-info"},N6={key:0,class:"delivery-date"},F6={class:"amount-info"},$6={key:0,class:"amount-remaining"},L6={class:"badge-icon"},q6={class:"badge-text"},U6={class:"badge-icon"},j6={class:"badge-text"},B6={key:0,class:"payment-method-info"},V6={key:0,class:"mobile-operator"},H6={class:"action-buttons"},z6=["onClick"],G6=["onClick"],Q6=["onClick"],K6=["onClick"],J6=["onClick"],W6=["onClick"],X6={__name:"Purchases",props:{products:{type:Array,default:()=>[]},suppliers:{type:Array,default:()=>[]},purchases:{type:Array,default:()=>[]},user:{type:Object,default:()=>({})}},setup(e){const t=e,r=N(!1),n=N(!1),s=N(!1),l=N(!1),i=N(null),a=N({status:"all",payment_status:"all",supplier_id:"",date_from:"",date_to:"",search:""}),c=B=>({draft:"status-draft",confirmed:"status-confirmed",received:"status-received",cancelled:"status-cancelled"})[B]||"status-default",d=B=>({draft:"",confirmed:"",received:"",cancelled:"",awaiting_approval:""})[B]||"",u=B=>({draft:"Brouillon",confirmed:"Confirm",received:"Reu",cancelled:"Annul",awaiting_approval:"En attente"})[B]||B,f=B=>B.paid_amount===0?"payment-unpaid":B.paid_amount>=B.total_amount?"payment-paid":"payment-partial",p=B=>B.paid_amount===0?"":B.paid_amount>=B.total_amount?"":"",m=B=>B.paid_amount===0?"Non pay":B.paid_amount>=B.total_amount?"Pay":"Partiel",g=B=>({cash:" Espces",mobile_money:" Mobile Money",bank_transfer:" Virement",check:" Chque",credit:" Crdit"})[B]||B,v=K(()=>({total:t.purchases.length,draft:t.purchases.filter(B=>B.status==="draft").length,confirmed:t.purchases.filter(B=>B.status==="confirmed").length,received:t.purchases.filter(B=>B.status==="received").length,totalAmount:t.purchases.reduce((B,A)=>B+parseFloat(A.total_amount||0),0),debtAmount:t.purchases.reduce((B,A)=>{const z=parseFloat(A.total_amount||0)-parseFloat(A.paid_amount||0);return B+(z>0?z:0)},0)})),h=K(()=>{let B=[...t.purchases];if(a.value.status!=="all"&&(B=B.filter(A=>A.status===a.value.status)),a.value.payment_status!=="all"&&(B=B.filter(A=>{const z=a.value.payment_status;return z==="paid"?A.paid_amount>=A.total_amount:z==="unpaid"?A.paid_amount===0:z==="partial"?A.paid_amount>0&&A.paid_amount<A.total_amount:!0})),a.value.supplier_id&&(B=B.filter(A=>A.supplier_id===parseInt(a.value.supplier_id))),a.value.date_from&&(B=B.filter(A=>new Date(A.order_date)>=new Date(a.value.date_from))),a.value.date_to&&(B=B.filter(A=>new Date(A.order_date)<=new Date(a.value.date_to))),a.value.search){const A=a.value.search.toLowerCase();B=B.filter(z=>z.reference?.toLowerCase().includes(A)||z.supplier?.name?.toLowerCase().includes(A))}return B}),C=K(()=>t.user?.role==="admin"||t.user?.role==="manager"),E=async()=>{console.log(" Purchases chargs depuis App.vue:",t.purchases.length)},k=B=>B?new Date(B).toLocaleDateString("fr-FR"):"N/A",T=B=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(B||0),y=()=>{n.value=!0},R=B=>{i.value=B,l.value=!0},S=B=>{i.value=B,s.value=!0},w=async B=>{confirm("Confirmer cet achat ?")&&await E()},O=async B=>{confirm("Annuler cet achat ?")&&await E()},$=async B=>{confirm("Supprimer dfinitivement cet achat ?")&&await E()},U=async B=>{confirm("Approuver cet achat ?")&&await E()},I=()=>{a.value={status:"all",payment_status:"all",supplier_id:"",date_from:"",date_to:"",search:""}},M=async()=>{n.value=!1,await E(),alert(" Achat cr avec succs !")},j=async()=>{s.value=!1,await E(),alert(" Achat rceptionn avec succs !")};return vt(async()=>{r.value=!0,await E(),r.value=!1}),(B,A)=>(_(),x("div",XO,[o("div",{class:"page-header"},[A[10]||(A[10]=o("div",{class:"header-left"},[o("h1",{class:"page-title"},[o("span",{class:"icon"},""),ne(" Gestion des Achats ")]),o("p",{class:"page-subtitle"},"Grez vos bons d'achat et rceptions de marchandises")],-1)),o("div",{class:"header-right"},[o("button",{onClick:y,class:"btn btn-primary"},[...A[9]||(A[9]=[o("span",{class:"icon"},"",-1),ne(" Nouvel Achat ",-1)])])])]),o("div",YO,[o("div",ZO,[A[12]||(A[12]=o("div",{class:"stat-icon"},"",-1)),o("div",e6,[o("div",t6,b(v.value.total),1),A[11]||(A[11]=o("div",{class:"stat-label"},"Total Achats",-1))])]),o("div",n6,[A[14]||(A[14]=o("div",{class:"stat-icon"},"",-1)),o("div",o6,[o("div",r6,b(v.value.draft),1),A[13]||(A[13]=o("div",{class:"stat-label"},"Brouillons",-1))])]),o("div",s6,[A[16]||(A[16]=o("div",{class:"stat-icon"},"",-1)),o("div",i6,[o("div",a6,b(v.value.confirmed),1),A[15]||(A[15]=o("div",{class:"stat-label"},"En Attente",-1))])]),o("div",l6,[A[18]||(A[18]=o("div",{class:"stat-icon"},"",-1)),o("div",u6,[o("div",d6,b(v.value.received),1),A[17]||(A[17]=o("div",{class:"stat-label"},"Reus",-1))])]),o("div",c6,[A[20]||(A[20]=o("div",{class:"stat-icon"},"",-1)),o("div",f6,[o("div",p6,b(T(v.value.totalAmount)),1),A[19]||(A[19]=o("div",{class:"stat-label"},"Montant Total",-1))])]),o("div",m6,[A[22]||(A[22]=o("div",{class:"stat-icon"},"",-1)),o("div",g6,[o("div",v6,b(T(v.value.debtAmount)),1),A[21]||(A[21]=o("div",{class:"stat-label"},"Dettes Fournisseurs",-1))])])]),o("div",h6,[o("div",y6,[o("div",b6,[Q(o("input",{"onUpdate:modelValue":A[0]||(A[0]=z=>a.value.search=z),type:"text",class:"filter-input",placeholder:" Rechercher (rfrence, fournisseur)..."},null,512),[[oe,a.value.search]])]),o("div",_6,[Q(o("select",{"onUpdate:modelValue":A[1]||(A[1]=z=>a.value.status=z),class:"filter-select"},[...A[23]||(A[23]=[Dt('<option value="all" data-v-6a577f0c> Tous les statuts</option><option value="draft" data-v-6a577f0c> Brouillons</option><option value="confirmed" data-v-6a577f0c> Confirms</option><option value="received" data-v-6a577f0c> Reus</option><option value="cancelled" data-v-6a577f0c> Annuls</option>',5)])],512),[[$e,a.value.status]])]),o("div",x6,[Q(o("select",{"onUpdate:modelValue":A[2]||(A[2]=z=>a.value.payment_status=z),class:"filter-select"},[...A[24]||(A[24]=[Dt('<option value="all" data-v-6a577f0c> Tous les paiements</option><option value="paid" data-v-6a577f0c> Pays</option><option value="partial" data-v-6a577f0c> Partiels</option><option value="unpaid" data-v-6a577f0c> Non pays</option><option value="overdue" data-v-6a577f0c> En retard</option>',5)])],512),[[$e,a.value.payment_status]])]),o("div",w6,[Q(o("select",{"onUpdate:modelValue":A[3]||(A[3]=z=>a.value.supplier_id=z),class:"filter-select"},[A[25]||(A[25]=o("option",{value:""}," Tous les fournisseurs",-1)),(_(!0),x(fe,null,be(t.suppliers,z=>(_(),x("option",{key:z.id,value:z.id},b(z.name),9,C6))),128))],512),[[$e,a.value.supplier_id]])]),o("div",k6,[Q(o("input",{"onUpdate:modelValue":A[4]||(A[4]=z=>a.value.date_from=z),type:"date",class:"filter-input",placeholder:"Date dbut"},null,512),[[oe,a.value.date_from]])]),o("div",S6,[Q(o("input",{"onUpdate:modelValue":A[5]||(A[5]=z=>a.value.date_to=z),type:"date",class:"filter-input",placeholder:"Date fin"},null,512),[[oe,a.value.date_to]])]),o("button",{onClick:I,class:"btn btn-secondary"},"  Rinitialiser ")])]),o("div",E6,[r.value?(_(),x("div",P6,[...A[26]||(A[26]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des achats...",-1)])])):h.value.length===0?(_(),x("div",A6,[A[27]||(A[27]=o("div",{class:"empty-icon"},"",-1)),A[28]||(A[28]=o("h3",null,"Aucun achat trouv",-1)),A[29]||(A[29]=o("p",null,"Commencez par crer votre premier bon d'achat",-1)),o("button",{onClick:y,class:"btn btn-primary"},"  Crer un Achat ")])):(_(),x("div",R6,[o("table",null,[A[30]||(A[30]=o("thead",null,[o("tr",null,[o("th",null,"Rfrence"),o("th",null,"Fournisseur"),o("th",null,"Date"),o("th",null,"Montant"),o("th",null,"Statut Commande"),o("th",null,"Statut Paiement"),o("th",null,"Actions")])],-1)),o("tbody",null,[(_(!0),x(fe,null,be(h.value,z=>(_(),x("tr",{key:z.id,class:"purchase-row"},[o("td",null,[o("div",T6,[o("strong",null,b(z.reference),1),z.notes?(_(),x("small",O6,b(z.notes),1)):L("",!0)])]),o("td",null,[o("div",M6,[o("span",D6,b(z.supplier?.name||"N/A"),1)])]),o("td",null,[o("div",I6,[o("div",null,b(k(z.order_date)),1),z.expected_delivery_date?(_(),x("small",N6,"  Livraison : "+b(k(z.expected_delivery_date)),1)):L("",!0)])]),o("td",null,[o("div",F6,[o("strong",null,b(T(z.total_amount)),1),z.paid_amount<z.total_amount?(_(),x("small",$6," Reste : "+b(T(z.total_amount-z.paid_amount)),1)):L("",!0)])]),o("td",null,[o("span",{class:le(["status-badge",c(z.status)])},[o("span",L6,b(d(z.status)),1),o("span",q6,b(u(z.status)),1)],2)]),o("td",null,[o("span",{class:le(["payment-status-badge",f(z)])},[o("span",U6,b(p(z)),1),o("span",j6,b(m(z)),1)],2),z.payment_method?(_(),x("div",B6,[o("small",null,b(g(z.payment_method)),1),z.mobile_operator?(_(),x("small",V6,b(z.mobile_operator),1)):L("",!0)])):L("",!0)]),o("td",null,[o("div",H6,[o("button",{onClick:te=>R(z),class:"btn-icon",title:"Voir dtails"},"  ",8,z6),z.status==="draft"&&C.value?(_(),x("button",{key:0,onClick:te=>U(),class:"btn-icon btn-approve",title:"Approuver"},"  ",8,G6)):L("",!0),z.status==="draft"?(_(),x("button",{key:1,onClick:te=>w(z.id),class:"btn-icon btn-confirm",title:"Confirmer"},"  ",8,Q6)):L("",!0),z.status==="confirmed"?(_(),x("button",{key:2,onClick:te=>S(z),class:"btn-icon btn-receive",title:"Rceptionner"},"  ",8,K6)):L("",!0),["draft","confirmed"].includes(z.status)?(_(),x("button",{key:3,onClick:te=>O(z.id),class:"btn-icon btn-cancel",title:"Annuler"},"  ",8,J6)):L("",!0),z.status==="draft"?(_(),x("button",{key:4,onClick:te=>$(z.id),class:"btn-icon btn-delete",title:"Supprimer"},"  ",8,W6)):L("",!0)])])]))),128))])])]))]),n.value?(_(),pt(kf,{key:0,products:t.products,suppliers:t.suppliers,onClose:A[6]||(A[6]=z=>n.value=!1),onSuccess:M},null,8,["products","suppliers"])):L("",!0),s.value?(_(),pt(FT,{key:1,purchase:i.value,onClose:A[7]||(A[7]=z=>s.value=!1),onSuccess:j},null,8,["purchase"])):L("",!0),l.value?(_(),pt(WO,{key:2,purchase:i.value,onClose:A[8]||(A[8]=z=>l.value=!1)},null,8,["purchase"])):L("",!0)]))}},Y6=Ve(X6,[["__scopeId","data-v-6a577f0c"]]),Z6={class:"users-page p-6"},eM={class:"flex justify-between items-center mb-6"},tM={class:"bg-white rounded-lg shadow overflow-hidden"},nM={class:"min-w-full divide-y divide-gray-200"},oM={class:"bg-white divide-y divide-gray-200"},rM={key:0,class:"text-center"},sM={class:"px-6 py-4 whitespace-nowrap"},iM={class:"flex items-center"},aM={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold"},lM={class:"ml-4"},uM={class:"text-sm font-medium text-gray-900"},dM={class:"text-sm text-gray-500"},cM={class:"px-6 py-4 whitespace-nowrap"},fM={class:"px-6 py-4 whitespace-nowrap"},pM={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},mM={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},gM=["onClick"],vM=["onClick","title"],hM=["onClick"],yM={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},bM={class:"bg-white rounded-lg p-6 w-full max-w-md"},_M={class:"text-xl font-bold mb-4"},xM={class:"space-y-4"},wM={class:"block text-sm font-medium text-gray-700"},CM=["required"],kM={__name:"Users",setup(e){const t=N([]),r=N(!1),n=N(!1),s=N(null),l=N({name:"",email:"",role:"cashier",password:"",phone:""}),i=()=>window.authHeaders||{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},a=async()=>{r.value=!0;try{const v=window.electron?await window.electron.getApiBase():"http://localhost:8000",C=await(await fetch(`${v}/api/v1/users`,{headers:i()})).json();t.value=Array.isArray(C)?C:C.data||[]}catch(v){console.error("Erreur chargement utilisateurs:",v)}finally{r.value=!1}},c=(v=null)=>{s.value=v,v?l.value={name:v.name,email:v.email,role:v.role,phone:v.phone,password:""}:l.value={name:"",email:"",role:"cashier",password:"",phone:""},n.value=!0},d=()=>{n.value=!1,s.value=null},u=async()=>{try{const v=window.electron?await window.electron.getApiBase():"http://localhost:8000",h=s.value?`${v}/api/v1/users/${s.value.id}`:`${v}/api/v1/users`,C=s.value?"PUT":"POST",E=await fetch(h,{method:C,headers:i(),body:JSON.stringify(l.value)});if(E.ok)d(),a(),alert(" Utilisateur enregistr avec succs");else{const k=await E.json();alert(" Erreur: "+(k.message||"Une erreur est survenue"))}}catch(v){console.error(v),alert(" Erreur technique")}},f=async v=>{if(confirm(`Voulez-vous vraiment ${v.is_active?"dsactiver":"activer"} cet utilisateur ?`))try{const h=window.electron?await window.electron.getApiBase():"http://localhost:8000";await fetch(`${h}/api/v1/users/${v.id}/toggle-active`,{method:"PATCH",headers:i()}),a()}catch(h){console.error(h)}},p=async v=>{if(confirm("tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible."))try{const h=window.electron?await window.electron.getApiBase():"http://localhost:8000";await fetch(`${h}/api/v1/users/${v.id}`,{method:"DELETE",headers:i()}),a()}catch(h){console.error(h)}},m=v=>v?new Date(v).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais",g=v=>{switch(v){case"admin":return"px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800";case"manager":return"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800";default:return"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"}};return vt(a),(v,h)=>(_(),x("div",Z6,[o("div",eM,[h[7]||(h[7]=o("div",null,[o("h1",{class:"text-2xl font-bold text-gray-800"}," Gestion des Utilisateurs"),o("p",{class:"text-gray-600"},"Grez les comptes employs et leurs permissions")],-1)),o("button",{onClick:h[0]||(h[0]=C=>c()),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2"},[...h[6]||(h[6]=[o("span",null,"",-1),ne(" Nouvel Utilisateur ",-1)])])]),o("div",tM,[o("table",nM,[h[9]||(h[9]=o("thead",{class:"bg-gray-50"},[o("tr",null,[o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Utilisateur"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rle"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Dernire connexion"),o("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),o("tbody",oM,[r.value?(_(),x("tr",rM,[...h[8]||(h[8]=[o("td",{colspan:"5",class:"py-4"},"Chargement...",-1)])])):(_(!0),x(fe,{key:1},be(t.value,C=>(_(),x("tr",{key:C.id,class:"hover:bg-gray-50"},[o("td",sM,[o("div",iM,[o("div",aM,b(C.name.charAt(0).toUpperCase()),1),o("div",lM,[o("div",uM,b(C.name),1),o("div",dM,b(C.email),1)])])]),o("td",cM,[o("span",{class:le(g(C.role))},b(C.role_label||C.role),3)]),o("td",fM,[o("span",{class:le(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",C.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},b(C.is_active?"Actif":"Inactif"),3)]),o("td",pM,b(m(C.last_login_at)),1),o("td",mM,[o("button",{onClick:E=>c(C),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," diter",8,gM),o("button",{onClick:E=>f(C),class:"text-orange-600 hover:text-orange-900 mr-3",title:C.is_active?"Dsactiver":"Activer"},b(C.is_active?"":""),9,vM),o("button",{onClick:E=>p(C),class:"text-red-600 hover:text-red-900"},"",8,hM)])]))),128))])])]),n.value?(_(),x("div",yM,[o("div",bM,[o("h2",_M,b(s.value?"Modifier l'utilisateur":"Nouvel utilisateur"),1),o("form",{onSubmit:xe(u,["prevent"])},[o("div",xM,[o("div",null,[h[10]||(h[10]=o("label",{class:"block text-sm font-medium text-gray-700"},"Nom complet",-1)),Q(o("input",{"onUpdate:modelValue":h[1]||(h[1]=C=>l.value.name=C),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2"},null,512),[[oe,l.value.name]])]),o("div",null,[h[11]||(h[11]=o("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),Q(o("input",{"onUpdate:modelValue":h[2]||(h[2]=C=>l.value.email=C),type:"email",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2"},null,512),[[oe,l.value.email]])]),o("div",null,[h[13]||(h[13]=o("label",{class:"block text-sm font-medium text-gray-700"},"Rle",-1)),Q(o("select",{"onUpdate:modelValue":h[3]||(h[3]=C=>l.value.role=C),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2"},[...h[12]||(h[12]=[o("option",{value:"admin"},"Administrateur",-1),o("option",{value:"manager"},"Grant",-1),o("option",{value:"cashier"},"Vendeur (Caissier)",-1)])],512),[[$e,l.value.role]])]),o("div",null,[o("label",wM," Mot de passe "+b(s.value?"(laisser vide pour ne pas changer)":"*"),1),Q(o("input",{"onUpdate:modelValue":h[4]||(h[4]=C=>l.value.password=C),type:"password",required:!s.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2"},null,8,CM),[[oe,l.value.password]])]),o("div",null,[h[14]||(h[14]=o("label",{class:"block text-sm font-medium text-gray-700"},"Tlphone",-1)),Q(o("input",{"onUpdate:modelValue":h[5]||(h[5]=C=>l.value.phone=C),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2"},null,512),[[oe,l.value.phone]])])]),o("div",{class:"mt-6 flex justify-end gap-3"},[o("button",{type:"button",onClick:d,class:"px-4 py-2 border rounded-md text-gray-600 hover:bg-gray-50"},"Annuler"),h[15]||(h[15]=o("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Enregistrer",-1))])],32)])])):L("",!0)]))}};const Xn=typeof document<"u";function Lf(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function SM(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Lf(e.default)}const Ne=Object.assign;function Ei(e,t){const r={};for(const n in t){const s=t[n];r[n]=Ut(s)?s.map(e):e(s)}return r}const No=()=>{},Ut=Array.isArray;function ud(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}const qf=/#/g,EM=/&/g,PM=/\//g,AM=/=/g,RM=/\?/g,Uf=/\+/g,TM=/%5B/g,OM=/%5D/g,jf=/%5E/g,MM=/%60/g,Bf=/%7B/g,DM=/%7C/g,Vf=/%7D/g,IM=/%20/g;function Ea(e){return e==null?"":encodeURI(""+e).replace(DM,"|").replace(TM,"[").replace(OM,"]")}function NM(e){return Ea(e).replace(Bf,"{").replace(Vf,"}").replace(jf,"^")}function Qi(e){return Ea(e).replace(Uf,"%2B").replace(IM,"+").replace(qf,"%23").replace(EM,"%26").replace(MM,"`").replace(Bf,"{").replace(Vf,"}").replace(jf,"^")}function FM(e){return Qi(e).replace(AM,"%3D")}function $M(e){return Ea(e).replace(qf,"%23").replace(RM,"%3F")}function LM(e){return $M(e).replace(PM,"%2F")}function Ho(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const qM=/\/$/,UM=e=>e.replace(qM,"");function Pi(e,t,r="/"){let n,s={},l="",i="";const a=t.indexOf("#");let c=t.indexOf("?");return c=a>=0&&c>a?-1:c,c>=0&&(n=t.slice(0,c),l=t.slice(c,a>0?a:t.length),s=e(l.slice(1))),a>=0&&(n=n||t.slice(0,a),i=t.slice(a,t.length)),n=HM(n??t,r),{fullPath:n+l+i,path:n,query:s,hash:Ho(i)}}function jM(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function dd(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function BM(e,t,r){const n=t.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&io(t.matched[n],r.matched[s])&&Hf(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function io(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Hf(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!VM(e[r],t[r]))return!1;return!0}function VM(e,t){return Ut(e)?cd(e,t):Ut(t)?cd(t,e):e?.valueOf()===t?.valueOf()}function cd(e,t){return Ut(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function HM(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let l=r.length-1,i,a;for(i=0;i<n.length;i++)if(a=n[i],a!==".")if(a==="..")l>1&&l--;else break;return r.slice(0,l).join("/")+"/"+n.slice(i).join("/")}const vn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ki=(function(e){return e.pop="pop",e.push="push",e})({}),Ai=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function zM(e){if(!e)if(Xn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),UM(e)}const GM=/^[^#]+#/;function QM(e,t){return e.replace(GM,"#")+t}function KM(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const qs=()=>({left:window.scrollX,top:window.scrollY});function JM(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;t=KM(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function fd(e,t){return(history.state?history.state.position-t:-1)+e}const Ji=new Map;function WM(e,t){Ji.set(e,t)}function XM(e){const t=Ji.get(e);return Ji.delete(e),t}function YM(e){return typeof e=="string"||e&&typeof e=="object"}function zf(e){return typeof e=="string"||typeof e=="symbol"}let Ge=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Gf=Symbol("");Ge.MATCHER_NOT_FOUND+"",Ge.NAVIGATION_GUARD_REDIRECT+"",Ge.NAVIGATION_ABORTED+"",Ge.NAVIGATION_CANCELLED+"",Ge.NAVIGATION_DUPLICATED+"";function ao(e,t){return Ne(new Error,{type:e,[Gf]:!0},t)}function nn(e,t){return e instanceof Error&&Gf in e&&(t==null||!!(e.type&t))}const ZM=["params","query","hash"];function eD(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const r of ZM)r in e&&(t[r]=e[r]);return JSON.stringify(t,null,2)}function tD(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<r.length;++n){const s=r[n].replace(Uf," "),l=s.indexOf("="),i=Ho(l<0?s:s.slice(0,l)),a=l<0?null:Ho(s.slice(l+1));if(i in t){let c=t[i];Ut(c)||(c=t[i]=[c]),c.push(a)}else t[i]=a}return t}function pd(e){let t="";for(let r in e){const n=e[r];if(r=FM(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(Ut(n)?n.map(s=>s&&Qi(s)):[n&&Qi(n)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+r,s!=null&&(t+="="+s))})}return t}function nD(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=Ut(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return t}const oD=Symbol(""),md=Symbol(""),Us=Symbol(""),Qf=Symbol(""),Wi=Symbol("");function So(){let e=[];function t(n){return e.push(n),()=>{const s=e.indexOf(n);s>-1&&e.splice(s,1)}}function r(){e=[]}return{add:t,list:()=>e.slice(),reset:r}}function _n(e,t,r,n,s,l=i=>i()){const i=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const d=p=>{p===!1?c(ao(Ge.NAVIGATION_ABORTED,{from:r,to:t})):p instanceof Error?c(p):YM(p)?c(ao(Ge.NAVIGATION_GUARD_REDIRECT,{from:t,to:p})):(i&&n.enterCallbacks[s]===i&&typeof p=="function"&&i.push(p),a())},u=l(()=>e.call(n&&n.instances[s],t,r,d));let f=Promise.resolve(u);e.length<3&&(f=f.then(d)),f.catch(p=>c(p))})}function Ri(e,t,r,n,s=l=>l()){const l=[];for(const i of e)for(const a in i.components){let c=i.components[a];if(!(t!=="beforeRouteEnter"&&!i.instances[a]))if(Lf(c)){const d=(c.__vccOpts||c)[t];d&&l.push(_n(d,r,n,i,a,s))}else{let d=c();l.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const f=SM(u)?u.default:u;i.mods[a]=u,i.components[a]=f;const p=(f.__vccOpts||f)[t];return p&&_n(p,r,n,i,a,s)()}))}}return l}function rD(e,t){const r=[],n=[],s=[],l=Math.max(t.matched.length,e.matched.length);for(let i=0;i<l;i++){const a=t.matched[i];a&&(e.matched.find(d=>io(d,a))?n.push(a):r.push(a));const c=e.matched[i];c&&(t.matched.find(d=>io(d,c))||s.push(c))}return[r,n,s]}let sD=()=>location.protocol+"//"+location.host;function Kf(e,t){const{pathname:r,search:n,hash:s}=t,l=e.indexOf("#");if(l>-1){let i=s.includes(e.slice(l))?e.slice(l).length:1,a=s.slice(i);return a[0]!=="/"&&(a="/"+a),dd(a,"")}return dd(r,e)+n+s}function iD(e,t,r,n){let s=[],l=[],i=null;const a=({state:p})=>{const m=Kf(e,location),g=r.value,v=t.value;let h=0;if(p){if(r.value=m,t.value=p,i&&i===g){i=null;return}h=v?p.position-v.position:0}else n(m);s.forEach(C=>{C(r.value,g,{delta:h,type:Ki.pop,direction:h?h>0?Ai.forward:Ai.back:Ai.unknown})})};function c(){i=r.value}function d(p){s.push(p);const m=()=>{const g=s.indexOf(p);g>-1&&s.splice(g,1)};return l.push(m),m}function u(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Ne({},p.state,{scroll:qs()}),"")}}function f(){for(const p of l)p();l=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:c,listen:d,destroy:f}}function gd(e,t,r,n=!1,s=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:s?qs():null}}function aD(e){const{history:t,location:r}=window,n={value:Kf(e,r)},s={value:t.state};s.value||l(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function l(c,d,u){const f=e.indexOf("#"),p=f>-1?(r.host&&document.querySelector("base")?e:e.slice(f))+c:sD()+e+c;try{t[u?"replaceState":"pushState"](d,"",p),s.value=d}catch(m){console.error(m),r[u?"replace":"assign"](p)}}function i(c,d){l(c,Ne({},t.state,gd(s.value.back,c,s.value.forward,!0),d,{position:s.value.position}),!0),n.value=c}function a(c,d){const u=Ne({},s.value,t.state,{forward:c,scroll:qs()});l(u.current,u,!0),l(c,Ne({},gd(n.value,c,null),{position:u.position+1},d),!1),n.value=c}return{location:n,state:s,push:a,replace:i}}function lD(e){e=zM(e);const t=aD(e),r=iD(e,t.state,t.location,t.replace);function n(l,i=!0){i||r.pauseListeners(),history.go(l)}const s=Ne({location:"",base:e,go:n,createHref:QM.bind(null,e)},t,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function uD(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),lD(e)}let Nn=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var Xe=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(Xe||{});const dD={type:Nn.Static,value:""},cD=/[a-zA-Z0-9_]/;function fD(e){if(!e)return[[]];if(e==="/")return[[dD]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${r})/"${d}": ${m}`)}let r=Xe.Static,n=r;const s=[];let l;function i(){l&&s.push(l),l=[]}let a=0,c,d="",u="";function f(){d&&(r===Xe.Static?l.push({type:Nn.Static,value:d}):r===Xe.Param||r===Xe.ParamRegExp||r===Xe.ParamRegExpEnd?(l.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),l.push({type:Nn.Param,value:d,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),d="")}function p(){d+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&r!==Xe.ParamRegExp){n=r,r=Xe.EscapeNext;continue}switch(r){case Xe.Static:c==="/"?(d&&f(),i()):c===":"?(f(),r=Xe.Param):p();break;case Xe.EscapeNext:p(),r=n;break;case Xe.Param:c==="("?r=Xe.ParamRegExp:cD.test(c)?p():(f(),r=Xe.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case Xe.ParamRegExp:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:r=Xe.ParamRegExpEnd:u+=c;break;case Xe.ParamRegExpEnd:f(),r=Xe.Static,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return r===Xe.ParamRegExp&&t(`Unfinished custom RegExp for param "${d}"`),f(),i(),s}const vd="[^/]+?",pD={sensitive:!1,strict:!1,start:!0,end:!0};var lt=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(lt||{});const mD=/[.+*?^${}()[\]/\\]/g;function gD(e,t){const r=Ne({},pD,t),n=[];let s=r.start?"^":"";const l=[];for(const d of e){const u=d.length?[]:[lt.Root];r.strict&&!d.length&&(s+="/");for(let f=0;f<d.length;f++){const p=d[f];let m=lt.Segment+(r.sensitive?lt.BonusCaseSensitive:0);if(p.type===Nn.Static)f||(s+="/"),s+=p.value.replace(mD,"\\$&"),m+=lt.Static;else if(p.type===Nn.Param){const{value:g,repeatable:v,optional:h,regexp:C}=p;l.push({name:g,repeatable:v,optional:h});const E=C||vd;if(E!==vd){m+=lt.BonusCustomRegExp;try{`${E}`}catch(T){throw new Error(`Invalid custom RegExp for param "${g}" (${E}): `+T.message)}}let k=v?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;f||(k=h&&d.length<2?`(?:/${k})`:"/"+k),h&&(k+="?"),s+=k,m+=lt.Dynamic,h&&(m+=lt.BonusOptional),v&&(m+=lt.BonusRepeatable),E===".*"&&(m+=lt.BonusWildcard)}u.push(m)}n.push(u)}if(r.strict&&r.end){const d=n.length-1;n[d][n[d].length-1]+=lt.BonusStrict}r.strict||(s+="/?"),r.end?s+="$":r.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const i=new RegExp(s,r.sensitive?"":"i");function a(d){const u=d.match(i),f={};if(!u)return null;for(let p=1;p<u.length;p++){const m=u[p]||"",g=l[p-1];f[g.name]=m&&g.repeatable?m.split("/"):m}return f}function c(d){let u="",f=!1;for(const p of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const m of p)if(m.type===Nn.Static)u+=m.value;else if(m.type===Nn.Param){const{value:g,repeatable:v,optional:h}=m,C=g in d?d[g]:"";if(Ut(C)&&!v)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const E=Ut(C)?C.join("/"):C;if(!E)if(h)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=E}}return u||"/"}return{re:i,score:n,keys:l,parse:a,stringify:c}}function vD(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===lt.Static+lt.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===lt.Static+lt.Segment?1:-1:0}function Jf(e,t){let r=0;const n=e.score,s=t.score;for(;r<n.length&&r<s.length;){const l=vD(n[r],s[r]);if(l)return l;r++}if(Math.abs(s.length-n.length)===1){if(hd(n))return 1;if(hd(s))return-1}return s.length-n.length}function hd(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const hD={strict:!1,end:!0,sensitive:!1};function yD(e,t,r){const n=gD(fD(e.path),r),s=Ne(n,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function bD(e,t){const r=[],n=new Map;t=ud(hD,t);function s(f){return n.get(f)}function l(f,p,m){const g=!m,v=bd(f);v.aliasOf=m&&m.record;const h=ud(t,f),C=[v];if("alias"in f){const T=typeof f.alias=="string"?[f.alias]:f.alias;for(const y of T)C.push(bd(Ne({},v,{components:m?m.record.components:v.components,path:y,aliasOf:m?m.record:v})))}let E,k;for(const T of C){const{path:y}=T;if(p&&y[0]!=="/"){const R=p.record.path,S=R[R.length-1]==="/"?"":"/";T.path=p.record.path+(y&&S+y)}if(E=yD(T,p,h),m?m.alias.push(E):(k=k||E,k!==E&&k.alias.push(E),g&&f.name&&!_d(E)&&i(f.name)),Wf(E)&&c(E),v.children){const R=v.children;for(let S=0;S<R.length;S++)l(R[S],E,m&&m.children[S])}m=m||E}return k?()=>{i(k)}:No}function i(f){if(zf(f)){const p=n.get(f);p&&(n.delete(f),r.splice(r.indexOf(p),1),p.children.forEach(i),p.alias.forEach(i))}else{const p=r.indexOf(f);p>-1&&(r.splice(p,1),f.record.name&&n.delete(f.record.name),f.children.forEach(i),f.alias.forEach(i))}}function a(){return r}function c(f){const p=wD(f,r);r.splice(p,0,f),f.record.name&&!_d(f)&&n.set(f.record.name,f)}function d(f,p){let m,g={},v,h;if("name"in f&&f.name){if(m=n.get(f.name),!m)throw ao(Ge.MATCHER_NOT_FOUND,{location:f});h=m.record.name,g=Ne(yd(p.params,m.keys.filter(k=>!k.optional).concat(m.parent?m.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),f.params&&yd(f.params,m.keys.map(k=>k.name))),v=m.stringify(g)}else if(f.path!=null)v=f.path,m=r.find(k=>k.re.test(v)),m&&(g=m.parse(v),h=m.record.name);else{if(m=p.name?n.get(p.name):r.find(k=>k.re.test(p.path)),!m)throw ao(Ge.MATCHER_NOT_FOUND,{location:f,currentLocation:p});h=m.record.name,g=Ne({},p.params,f.params),v=m.stringify(g)}const C=[];let E=m;for(;E;)C.unshift(E.record),E=E.parent;return{name:h,path:v,params:g,matched:C,meta:xD(C)}}e.forEach(f=>l(f));function u(){r.length=0,n.clear()}return{addRoute:l,resolve:d,removeRoute:i,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function yd(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function bd(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:_D(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function _D(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="object"?r[n]:r;return t}function _d(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function xD(e){return e.reduce((t,r)=>Ne(t,r.meta),{})}function wD(e,t){let r=0,n=t.length;for(;r!==n;){const l=r+n>>1;Jf(e,t[l])<0?n=l:r=l+1}const s=CD(e);return s&&(n=t.lastIndexOf(s,n-1)),n}function CD(e){let t=e;for(;t=t.parent;)if(Wf(t)&&Jf(e,t)===0)return t}function Wf({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function xd(e){const t=Kt(Us),r=Kt(Qf),n=K(()=>{const c=ye(e.to);return t.resolve(c)}),s=K(()=>{const{matched:c}=n.value,{length:d}=c,u=c[d-1],f=r.matched;if(!u||!f.length)return-1;const p=f.findIndex(io.bind(null,u));if(p>-1)return p;const m=wd(c[d-2]);return d>1&&wd(u)===m&&f[f.length-1].path!==m?f.findIndex(io.bind(null,c[d-2])):p}),l=K(()=>s.value>-1&&AD(r.params,n.value.params)),i=K(()=>s.value>-1&&s.value===r.matched.length-1&&Hf(r.params,n.value.params));function a(c={}){if(PD(c)){const d=t[ye(e.replace)?"replace":"push"](ye(e.to)).catch(No);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:n,href:K(()=>n.value.href),isActive:l,isExactActive:i,navigate:a}}function kD(e){return e.length===1?e[0]:e}const SD=uc({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:xd,setup(e,{slots:t}){const r=Cs(xd(e)),{options:n}=Kt(Us),s=K(()=>({[Cd(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[Cd(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const l=t.default&&kD(t.default(r));return e.custom?l:ga("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},l)}}}),ED=SD;function PD(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function AD(e,t){for(const r in t){const n=t[r],s=e[r];if(typeof n=="string"){if(n!==s)return!1}else if(!Ut(s)||s.length!==n.length||n.some((l,i)=>l.valueOf()!==s[i].valueOf()))return!1}return!0}function wd(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Cd=(e,t,r)=>e??t??r,RD=uc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=Kt(Wi),s=K(()=>e.route||n.value),l=Kt(md,0),i=K(()=>{let d=ye(l);const{matched:u}=s.value;let f;for(;(f=u[d])&&!f.components;)d++;return d}),a=K(()=>s.value.matched[i.value]);Xr(md,K(()=>i.value+1)),Xr(oD,a),Xr(Wi,s);const c=N();return Ae(()=>[c.value,a.value,e.name],([d,u,f],[p,m,g])=>{u&&(u.instances[f]=d,m&&m!==u&&d&&d===p&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),d&&u&&(!m||!io(u,m)||!p)&&(u.enterCallbacks[f]||[]).forEach(v=>v(d))},{flush:"post"}),()=>{const d=s.value,u=e.name,f=a.value,p=f&&f.components[u];if(!p)return kd(r.default,{Component:p,route:d});const m=f.props[u],g=m?m===!0?d.params:typeof m=="function"?m(d):m:null,h=ga(p,Ne({},g,t,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return kd(r.default,{Component:h,route:d})||h}}});function kd(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const TD=RD;function OD(e){const t=bD(e.routes,e),r=e.parseQuery||tD,n=e.stringifyQuery||pd,s=e.history,l=So(),i=So(),a=So(),c=Ip(vn);let d=vn;Xn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ei.bind(null,J=>""+J),f=Ei.bind(null,LM),p=Ei.bind(null,Ho);function m(J,ae){let ie,ce;return zf(J)?(ie=t.getRecordMatcher(J),ce=ae):ce=J,t.addRoute(ce,ie)}function g(J){const ae=t.getRecordMatcher(J);ae&&t.removeRoute(ae)}function v(){return t.getRoutes().map(J=>J.record)}function h(J){return!!t.getRecordMatcher(J)}function C(J,ae){if(ae=Ne({},ae||c.value),typeof J=="string"){const H=Pi(r,J,ae.path),X=t.resolve({path:H.path},ae),q=s.createHref(H.fullPath);return Ne(H,X,{params:p(X.params),hash:Ho(H.hash),redirectedFrom:void 0,href:q})}let ie;if(J.path!=null)ie=Ne({},J,{path:Pi(r,J.path,ae.path).path});else{const H=Ne({},J.params);for(const X in H)H[X]==null&&delete H[X];ie=Ne({},J,{params:f(H)}),ae.params=f(ae.params)}const ce=t.resolve(ie,ae),Se=J.hash||"";ce.params=u(p(ce.params));const D=jM(n,Ne({},J,{hash:NM(Se),path:ce.path})),F=s.createHref(D);return Ne({fullPath:D,hash:Se,query:n===pd?nD(J.query):J.query||{}},ce,{redirectedFrom:void 0,href:F})}function E(J){return typeof J=="string"?Pi(r,J,c.value.path):Ne({},J)}function k(J,ae){if(d!==J)return ao(Ge.NAVIGATION_CANCELLED,{from:ae,to:J})}function T(J){return S(J)}function y(J){return T(Ne(E(J),{replace:!0}))}function R(J,ae){const ie=J.matched[J.matched.length-1];if(ie&&ie.redirect){const{redirect:ce}=ie;let Se=typeof ce=="function"?ce(J,ae):ce;return typeof Se=="string"&&(Se=Se.includes("?")||Se.includes("#")?Se=E(Se):{path:Se},Se.params={}),Ne({query:J.query,hash:J.hash,params:Se.path!=null?{}:J.params},Se)}}function S(J,ae){const ie=d=C(J),ce=c.value,Se=J.state,D=J.force,F=J.replace===!0,H=R(ie,ce);if(H)return S(Ne(E(H),{state:typeof H=="object"?Ne({},Se,H.state):Se,force:D,replace:F}),ae||ie);const X=ie;X.redirectedFrom=ae;let q;return!D&&BM(n,ce,ie)&&(q=ao(Ge.NAVIGATION_DUPLICATED,{to:X,from:ce}),de(ce,ce,!0,!1)),(q?Promise.resolve(q):$(X,ce)).catch(V=>nn(V)?nn(V,Ge.NAVIGATION_GUARD_REDIRECT)?V:Re(V):te(V,X,ce)).then(V=>{if(V){if(nn(V,Ge.NAVIGATION_GUARD_REDIRECT))return S(Ne({replace:F},E(V.to),{state:typeof V.to=="object"?Ne({},Se,V.to.state):Se,force:D}),ae||X)}else V=I(X,ce,!0,F,Se);return U(X,ce,V),V})}function w(J,ae){const ie=k(J,ae);return ie?Promise.reject(ie):Promise.resolve()}function O(J){const ae=ke.values().next().value;return ae&&typeof ae.runWithContext=="function"?ae.runWithContext(J):J()}function $(J,ae){let ie;const[ce,Se,D]=rD(J,ae);ie=Ri(ce.reverse(),"beforeRouteLeave",J,ae);for(const H of ce)H.leaveGuards.forEach(X=>{ie.push(_n(X,J,ae))});const F=w.bind(null,J,ae);return ie.push(F),Be(ie).then(()=>{ie=[];for(const H of l.list())ie.push(_n(H,J,ae));return ie.push(F),Be(ie)}).then(()=>{ie=Ri(Se,"beforeRouteUpdate",J,ae);for(const H of Se)H.updateGuards.forEach(X=>{ie.push(_n(X,J,ae))});return ie.push(F),Be(ie)}).then(()=>{ie=[];for(const H of D)if(H.beforeEnter)if(Ut(H.beforeEnter))for(const X of H.beforeEnter)ie.push(_n(X,J,ae));else ie.push(_n(H.beforeEnter,J,ae));return ie.push(F),Be(ie)}).then(()=>(J.matched.forEach(H=>H.enterCallbacks={}),ie=Ri(D,"beforeRouteEnter",J,ae,O),ie.push(F),Be(ie))).then(()=>{ie=[];for(const H of i.list())ie.push(_n(H,J,ae));return ie.push(F),Be(ie)}).catch(H=>nn(H,Ge.NAVIGATION_CANCELLED)?H:Promise.reject(H))}function U(J,ae,ie){a.list().forEach(ce=>O(()=>ce(J,ae,ie)))}function I(J,ae,ie,ce,Se){const D=k(J,ae);if(D)return D;const F=ae===vn,H=Xn?history.state:{};ie&&(ce||F?s.replace(J.fullPath,Ne({scroll:F&&H&&H.scroll},Se)):s.push(J.fullPath,Se)),c.value=J,de(J,ae,ie,F),Re()}let M;function j(){M||(M=s.listen((J,ae,ie)=>{if(!Ee.listening)return;const ce=C(J),Se=R(ce,Ee.currentRoute.value);if(Se){S(Ne(Se,{replace:!0,force:!0}),ce).catch(No);return}d=ce;const D=c.value;Xn&&WM(fd(D.fullPath,ie.delta),qs()),$(ce,D).catch(F=>nn(F,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_CANCELLED)?F:nn(F,Ge.NAVIGATION_GUARD_REDIRECT)?(S(Ne(E(F.to),{force:!0}),ce).then(H=>{nn(H,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_DUPLICATED)&&!ie.delta&&ie.type===Ki.pop&&s.go(-1,!1)}).catch(No),Promise.reject()):(ie.delta&&s.go(-ie.delta,!1),te(F,ce,D))).then(F=>{F=F||I(ce,D,!1),F&&(ie.delta&&!nn(F,Ge.NAVIGATION_CANCELLED)?s.go(-ie.delta,!1):ie.type===Ki.pop&&nn(F,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),U(ce,D,F)}).catch(No)}))}let B=So(),A=So(),z;function te(J,ae,ie){Re(J);const ce=A.list();return ce.length?ce.forEach(Se=>Se(J,ae,ie)):console.error(J),Promise.reject(J)}function pe(){return z&&c.value!==vn?Promise.resolve():new Promise((J,ae)=>{B.add([J,ae])})}function Re(J){return z||(z=!J,j(),B.list().forEach(([ae,ie])=>J?ie(J):ae()),B.reset()),J}function de(J,ae,ie,ce){const{scrollBehavior:Se}=e;if(!Xn||!Se)return Promise.resolve();const D=!ie&&XM(fd(J.fullPath,0))||(ce||!ie)&&history.state&&history.state.scroll||null;return Ss().then(()=>Se(J,ae,D)).then(F=>F&&JM(F)).catch(F=>te(F,J,ae))}const P=J=>s.go(J);let W;const ke=new Set,Ee={currentRoute:c,listening:!0,addRoute:m,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:h,getRoutes:v,resolve:C,options:e,push:T,replace:y,go:P,back:()=>P(-1),forward:()=>P(1),beforeEach:l.add,beforeResolve:i.add,afterEach:a.add,onError:A.add,isReady:pe,install(J){J.component("RouterLink",ED),J.component("RouterView",TD),J.config.globalProperties.$router=Ee,Object.defineProperty(J.config.globalProperties,"$route",{enumerable:!0,get:()=>ye(c)}),Xn&&!W&&c.value===vn&&(W=!0,T(s.location).catch(ce=>{}));const ae={};for(const ce in vn)Object.defineProperty(ae,ce,{get:()=>c.value[ce],enumerable:!0});J.provide(Us,Ee),J.provide(Qf,Qd(ae)),J.provide(Wi,c);const ie=J.unmount;ke.add(J),J.unmount=function(){ke.delete(J),ke.size<1&&(d=vn,M&&M(),M=null,c.value=vn,W=!1,z=!1),ie()}}};function Be(J){return J.reduce((ae,ie)=>ae.then(()=>O(ie)),Promise.resolve())}return Ee}function MD(){return Kt(Us)}const DD={name:"App",components:{Login:qc,Sidebar:ky,Header:Iy,DashboardView:Xy,ProductModals:Sh,ProductsView:Bb,StockModals:y_,StockMovementsView:dk,CreditManagement:VE,DepositsView:I4,Purchases:Y6,ProductSuppliersModal:eS,PurchaseFormModal:kf,Users:kM},setup(){console.log(" Setup() dmarr...");const e=N(!1),t=N(null),r=N(null),n=K(()=>!t.value?.roles||t.value.roles.length===0?"Utilisateur":t.value.roles.map(Z=>Z.display_name).join(", "));Ae(e,Z=>{console.log(" App.vue isAuthenticated =",Z)});const s=Z=>t.value?.permissions?t.value.roles?.some(Ce=>Ce.name==="admin")?!0:t.value.permissions.some(Ce=>Ce.name===Z):!1,l=Z=>t.value?.roles?t.value.roles.some(Ce=>Ce.name===Z):!1,i=async()=>{try{let Z,Ce;if(window.electron?(Z=await window.electron.store.get("auth_token"),Ce=await window.electron.store.get("user")):(Z=localStorage.getItem("auth_token"),Ce=localStorage.getItem("user")),Z&&Ce){r.value=Z;try{t.value=typeof Ce=="string"?JSON.parse(Ce):Ce}catch(Qe){return console.error(" Donnes utilisateur corrompues:",Qe),window.electron?(await window.electron.store.delete("user"),await window.electron.store.delete("auth_token")):(localStorage.removeItem("user"),localStorage.removeItem("auth_token")),!1}return e.value=!0,console.log(" Session restaure:",t.value.name),!0}return console.log(" Aucune session trouve"),!1}catch(Z){return console.error(" Erreur chargement session:",Z),window.electron?(await window.electron.store.delete("user"),await window.electron.store.delete("auth_token")):localStorage.clear(),!1}},a={currentView:N("dashboard"),loading:N(!1),connectionError:N(!1),...mv},c=async()=>{console.log(" Rechargement des donnes..."),await Promise.all([d.loadProducts(),d.loadMovements(),d.calculateStats(),d.calculateAlerts()]),console.log(" Donnes recharges")},d=yv(a),u=vv(a),f=bv(a,d),p=_v(a,d),m=xv(a,d),g=wv(a,d),v=Cv(a,d),h=kv(a),C=h.viewInvoice,E=h.closeInvoiceModal,k=h.printInvoice,T=h.getPaymentMethodLabel,y=Tv(a,d),R=Ov(),S=N(0),w=N([]),O=N(!1),$=K(()=>w.value.filter(Z=>Z.status==="active"||Z.status==="partially_returned").length),U=async()=>{try{const Z=window.electron?await window.electron.getApiBase():"http://localhost:8000",Ce=await fetch(`${Z}/api/v1/credits`,{method:"GET",headers:window.authHeaders||{Authorization:`Bearer ${r.value}`,"Content-Type":"application/json"}});if(!Ce.ok)throw new Error(`Erreur ${Ce.status}`);const We=(await Ce.json()).data||[];S.value=We.filter(Wt=>Wt.remaining_amount>0).length,console.log(" Crdits impays:",S.value)}catch(Z){console.error(" Erreur chargement crdits:",Z),S.value=0}};MD();const I=N(null),M=N(0),j=N([]),B=[1e4,5e3,2e3,1e3,500,250,100,50,25],A=()=>{if(console.log(" Calcul de la monnaie..."),console.log("  Montant reu:",I.value),console.log("  Total  payer:",u.grandTotal.value),!I.value||I.value<u.grandTotal.value){M.value=0,j.value=[],console.log("   Montant insuffisant ou invalide");return}const Z=I.value-u.grandTotal.value;if(M.value=Z,console.log("   Monnaie  rendre:",Z,"FCFA"),Z===0){j.value=[],console.log("   Montant exact, pas de monnaie");return}const Ce=[];let Qe=Z;for(const We of B)if(Qe>=We){const Wt=Math.floor(Qe/We);Ce.push({value:We,count:Wt}),Qe-=Wt*We,console.log(`   ${Wt}  ${We} FCFA`)}j.value=Ce,console.log("   Dcomposition calcule")},z=K(()=>{const Z=u.grandTotal.value,Ce=[],Qe=Math.ceil(Z/1e3)*1e3;Qe>Z&&Qe<=1e5&&Ce.push(Qe);const We=[5e3,1e4,2e4,5e4];for(const Wt of We)Wt>Z&&!Ce.includes(Wt)&&Ce.push(Wt);return Ce.slice(0,4)});Ae(()=>u.grandTotal.value,()=>{I.value=null,M.value=0,j.value=[],console.log(" Calculateur rinitialis (total chang)")}),Ae(()=>a.paymentMethod.value,Z=>{Z!=="cash"&&(I.value=null,M.value=0,j.value=[],console.log(" Calculateur rinitialis (mode de paiement chang)"))});const te=()=>{I.value=null,M.value=0,j.value=[]},pe=N(1),Re=N(5),de=K(()=>{const Z=(pe.value-1)*Re.value,Ce=Z+Re.value;return u.filteredCustomers.value.slice(Z,Ce)}),P=K(()=>Math.ceil(u.filteredCustomers.value.length/Re.value)),W=K(()=>pe.value>1),ke=K(()=>pe.value<P.value),Ee=N(1),Be=N(5),J=K(()=>{const Z=(Ee.value-1)*Be.value,Ce=Z+Be.value;return u.filteredSuppliers.value.slice(Z,Ce)}),ae=K(()=>Math.ceil(u.filteredSuppliers.value.length/Be.value)),ie=K(()=>Ee.value>1),ce=K(()=>Ee.value<ae.value),Se=Z=>{console.log(" goToCustomersPage appel avec:",Z),Z>=1&&Z<=P.value&&(console.log(" Navigation vers page clients",Z),pe.value=Z)},D=()=>{W.value&&pe.value--},F=()=>{ke.value&&pe.value++},H=Z=>{console.log(" goToSuppliersPage appel avec:",Z),Z>=1&&Z<=ae.value&&(console.log(" Navigation vers page fournisseurs",Z),Ee.value=Z)},X=()=>{ie.value&&Ee.value--},q=()=>{ce.value&&Ee.value++};Ae(()=>a.customerSearchQuery?.value,()=>{pe.value=1}),Ae(()=>a.supplierSearchQuery?.value,()=>{Ee.value=1}),console.log(" Module exports:"),console.log("- computedProps:",Object.keys(u)),console.log("- searchQuery:",a.searchQuery),Ae(a.searchQuery,Z=>{console.log(" Recherche change:",Z),console.log(" Produits filtrs:",u.filteredProducts?.value?.length)});const V=N(!1),ee=Z=>{Z?(a.editingProduct.value=Z,a.productForm.value={name:Z.name,sku:Z.sku,code:Z.code||"",category_id:Z.category_id,subcategory_id:Z.subcategory_id||"",unit_price:Z.unit_price,min_stock:Z.min_stock,stock:Z.stock}):(a.editingProduct.value=null,a.productForm.value={name:"",sku:"",code:"",category_id:"",subcategory_id:"",unit_price:0,min_stock:0,stock:0}),V.value=!0},re=N(!1),se=N(null),Y=Z=>{se.value=Z,re.value=!0},ge=()=>{re.value=!1,se.value=null},ue=N(!1),me=()=>{console.log(" Ouverture du gestionnaire hirarchique"),ue.value=!0},he=()=>{console.log(" Fermeture du gestionnaire hirarchique"),ue.value=!1,d.loadCategories()},Pe=async({user:Z,token:Ce})=>{console.log(" App.vue - Login russi!",Z.name),console.log(" Token reu:",Ce);try{if(t.value=Z,r.value=Ce,window.electron?.store)try{await Og(Ce),console.log(" Token sauvegard dans Electron store")}catch(Qe){console.error(" Erreur lors de la sauvegarde du token:",Qe)}else console.warn(" Electron store non disponible (mode web?)");e.value=!0,console.log(" isAuthenticated = true, redirection vers Dashboard"),window.authHeaders={Authorization:`Bearer ${Ce}`,"Content-Type":"application/json"};try{console.log(" Chargement des donnes en arrire-plan..."),await d.init(),await U(),console.log(" Donnes charges avec succs")}catch(Qe){console.error(" Erreur lors du chargement des donnes:",Qe)}}catch(Qe){console.error(" Erreur critique dans handleLoginSuccess:",Qe)}},Ie=N(null);Ae(a.currentView,Z=>{Z==="pos"&&Ie.value&&setTimeout(()=>{Ie.value?.focus()},100)});const Me=ka(a,d),Je=Me.purchases,et=Me.loadPurchases||(async()=>{console.log(" Module purchases dj charg")}),kt=async()=>{if(window.electron?.store)try{await Dg(),console.log(" Token supprim du store Electron")}catch(Z){console.error(" Erreur lors de la suppression du token:",Z)}if(confirm("tes-vous sr de vouloir vous dconnecter ?"))try{const Z=window.electron?await window.electron.getApiBase():"http://localhost:8000";await fetch(`${Z}/api/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${r.value}`,"Content-Type":"application/json"}})}catch(Z){console.error("Erreur dconnexion:",Z)}finally{t.value=null,r.value=null,e.value=!1,Ae(e,Z=>{console.log(" App.vue isAuthenticated =",Z)}),window.electron&&(await window.electron.store.delete("auth_token"),await window.electron.store.delete("user")),console.log(" Dconnexion termine")}},St=Z=>{switch(a.currentView.value=Z,Z){case"customers":y&&y.switchToCustomers&&y.switchToCustomers();break;case"suppliers":y&&y.switchToSuppliers&&y.switchToSuppliers();break;case"movements":y&&y.switchToMovements&&y.switchToMovements();break;case"invoices":y&&y.switchToInvoices&&y.switchToInvoices();break}};vt(async()=>{if(console.log(" Dmarrage de l'application..."),no.start("Initialisation App"),await i()){if(await d.loadProducts(),await d.loadCategories(),await d.loadCustomers(),await d.loadSuppliers(),await d.loadSales(),await d.loadMovements(),await Promise.all([U(),R.loadDepositTypes(),R.loadDeposits(),et()]),await i()&&r.value){console.log(" Session trouve, initialisation des headers avec le token charg"),window.authHeaders={Authorization:`Bearer ${r.value}`,"Content-Type":"application/json"},console.log(" window.authHeaders configur:",window.authHeaders);try{await __("Chargement produits",async()=>{await d.loadProducts()}),await d.init(),await U(),setInterval(U,3e4),await R.loadDepositTypes(),await R.loadDeposits(),console.log(" Toutes les donnes charges avec succs")}catch(Qe){console.error(" Erreur lors du chargement des donnes:",Qe)}}else console.log(" Aucune session trouve ou token manquant"),await Ng(),console.log(" En attente de connexion...");no.end("Initialisation App"),no.getReport()}});const Sn=Z=>{console.log(" goToPage appel avec:",Z),console.log(" Total pages disponibles:",u.totalSalesPages.value),Z>=1&&Z<=u.totalSalesPages.value?(console.log(" Navigation vers page",Z),a.salesCurrentPage.value=Z):console.warn(" Page invalide:",Z)},nr=()=>{console.log(" previousPage appel"),console.log(" Page actuelle:",a.salesCurrentPage.value),console.log(" Has previous?",u.hasPreviousPage.value),u.hasPreviousPage.value?(a.salesCurrentPage.value--,console.log(" Nouvelle page:",a.salesCurrentPage.value)):console.warn(" Dj  la premire page")},st=()=>{console.log(" nextPage appel"),console.log(" Page actuelle:",a.salesCurrentPage.value),console.log(" Has next?",u.hasNextPage.value),u.hasNextPage.value?(a.salesCurrentPage.value++,console.log(" Nouvelle page:",a.salesCurrentPage.value)):console.warn(" Dj  la dernire page")};console.log(" Vrification des computed properties:",{paginatedSales:u.paginatedSales,totalSalesPages:u.totalSalesPages,hasPreviousPage:u.hasPreviousPage,hasNextPage:u.hasNextPage}),Ae(()=>a.salesCurrentPage.value,(Z,Ce)=>{console.log(" WATCH: Page change",{oldPage:Ce,newPage:Z}),console.log(" Computed recalcul?",{paginatedCount:u.paginatedSales.value.length,firstSaleId:u.paginatedSales.value[0]?.id})});const Et=N(!0),Vn=N(!1),Hn=N(null),Yf=Z=>{Hn.value=Z,Vn.value=!0},Pa=()=>{Vn.value=!1,Hn.value=null},Zf=async()=>{Pa(),await c(),a.currentView.value="purchases"},ep=K(()=>{if(!Je||!Je.value||Je.value.length===0)return{count:0,overdueDeliveries:0,overduePayments:0};const Z=new Date().toISOString().split("T")[0],Ce=Je.value.filter(We=>We.status!=="received"&&We.status!=="cancelled"&&We.expected_delivery_date&&We.expected_delivery_date<Z).length,Qe=Je.value.filter(We=>We.payment_method==="credit"&&We.paid_amount<We.total_amount&&We.due_date&&We.due_date<Z).length;return{count:Ce+Qe,overdueDeliveries:Ce,overduePayments:Qe}});return{isAuthenticated:e,currentUser:t,authToken:r,currentUserRole:n,hasPermission:s,hasRole:l,handleLoginSuccess:Pe,handleLogout:kt,handleSidebarNavigation:St,depositTypes:ms,deposits:Bi,loaders:d,handleReloadData:c,loadUserFromStorage:i,deposits:w,depositsCount:$,loadingDeposits:O,amountReceived:I,changeToReturn:M,changeBreakdown:j,suggestedCashAmounts:z,calculateChange:A,resetChangeCalculator:te,viewInvoice:C,closeInvoiceModal:E,printInvoice:k,getPaymentMethodLabel:T,currentView:a.currentView,loading:a.loading,connectionError:a.connectionError,products:a.products,categories:a.categories,subcategories:a.subcategories,searchQuery:a.searchQuery,productForm:a.productForm,editingProduct:a.editingProduct,viewingProduct:a.viewingProduct,savingProduct:a.savingProduct,depositTypes:ms,deposits:Bi,depositReturns:Xc,showDepositTypeModal:Uc,showDepositModal:Vc,showDepositReturnModal:zc,showDepositDetails:Et,deposittype:void 0,depositTypeForm:Bc,depositForm:Hc,depositReturnForm:Kc,editingDepositType:jc,selectedDeposit:Gc,processingReturn:Qc,depositFilters:Jc,depositStats:Wc,filteredDepositTypes:u.filteredDepositTypes,activeDepositTypes:u.activeDepositTypes,depositTypesInPOS:u.depositTypesInPOS,filteredDeposits:u.filteredDeposits,pendingDeposits:u.pendingDeposits,returnedDeposits:u.returnedDeposits,totalDepositValue:u.totalDepositValue,cartDepositsCount:u.cartDepositsCount,cartDeposits:u.cartDeposits,totalDepositsAmount:u.totalDepositsAmount,totalDepositsCount:u.totalDepositsCount,grandTotal:u.grandTotal,loadDepositTypes:R.loadDepositTypes,loadDeposits:R.loadDeposits,loadDepositReturns:R.loadDepositReturns,createDepositType:R.createDepositType,updateDepositType:R.updateDepositType,deleteDepositType:R.deleteDepositType,createDeposit:R.createDeposit,processDepositReturn:R.processDepositReturn,showProductSuppliersModal:re,selectedProduct:se,openProductSuppliersModal:Y,closeProductSuppliersModal:ge,showProductModal:V,showCategoryModal:a.showCategoryModal,showViewModal:a.showViewModal,showRestockModal:a.showRestockModal,showStockOutModal:a.showStockOutModal,showCheckoutModal:a.showCheckoutModal,showCustomerModal:a.showCustomerModal,showSupplierModal:a.showSupplierModal,showInvoiceModal:a.showInvoiceModal,newCategoryName:a.newCategoryName,editingCategoryId:a.editingCategoryId,editingCategoryName:a.editingCategoryName,restockProduct:a.restockProduct,restockQuantity:a.restockQuantity,restockReason:a.restockReason,stockOutProduct:a.stockOutProduct,stockOutQuantity:a.stockOutQuantity,stockOutReason:a.stockOutReason,stockOutReasonType:a.stockOutReasonType,movements:a.movements,loadingMovements:a.loadingMovements,movementFilters:a.movementFilters,customers:a.customers,customerSearchQuery:a.customerSearchQuery,editingCustomer:a.editingCustomer,customerForm:a.customerForm,suppliers:a.suppliers,supplierSearchQuery:a.supplierSearchQuery,editingSupplier:a.editingSupplier,supplierForm:a.supplierForm,purchases:Me.purchases,sales:a.sales,loadingSales:a.loadingSales,salesSearch:a.salesSearch,salesFilters:a.salesFilters,currentInvoice:a.currentInvoice,invoiceType:a.invoiceType,salesStats:a.salesStats,cart:a.cart,posSearch:a.posSearch,saleType:a.saleType,selectedCustomerId:a.selectedCustomerId,paymentMethod:a.paymentMethod,lastSaleItems:a.lastSaleItems,lastSaleTotal:a.lastSaleTotal,stats:a.stats,alerts:a.alerts,alertsCount:a.alertsCount,creditsCount:S,appInfo:a.appInfo,customersCurrentPage:pe,customersPerPage:Re,paginatedCustomers:de,totalCustomersPages:P,hasCustomersPreviousPage:W,hasCustomersNextPage:ke,goToCustomersPage:Se,previousCustomersPage:D,nextCustomersPage:F,suppliersCurrentPage:Ee,suppliersPerPage:Be,paginatedSuppliers:J,totalSuppliersPages:ae,hasSuppliersPreviousPage:ie,hasSuppliersNextPage:ce,goToSuppliersPage:H,previousSuppliersPage:X,nextSuppliersPage:q,salesCurrentPage:a.salesCurrentPage,salesPerPage:a.salesPerPage,paginatedSales:u.paginatedSales,totalSalesPages:u.totalSalesPages,hasPreviousPage:u.hasPreviousPage,hasNextPage:u.hasNextPage,goToPage:Sn,previousPage:nr,nextPage:st,filteredProducts:u.filteredProducts,filteredPosProducts:u.filteredPosProducts,consignedProducts:u.consignedProducts,totalEmptyContainers:u.totalEmptyContainers,cartTotal:u.cartTotal,grandTotal:u.grandTotal,filteredCustomers:u.filteredCustomers,filteredSuppliers:u.filteredSuppliers,filteredMovements:u.filteredMovements,filteredSales:u.filteredSales,displaySalesStats:u.displaySalesStats,formatCurrency:rn,openProductModal:ee,closeProductModal:f.closeProductModal,filterSubcategories:f.filterSubcategories,saveProduct:f.saveProduct,deleteProduct:f.deleteProduct,viewProduct:f.viewProduct,addCategory:p.addCategory,saveCategory:p.saveCategory,editCategory:p.editCategory,deleteCategory:p.deleteCategory,cancelEditCategory:p.cancelEditCategory,openRestockModal:m.openRestockModal,closeRestockModal:m.closeRestockModal,saveRestock:m.saveRestock,openStockOutModal:m.openStockOutModal,closeStockOutModal:m.closeStockOutModal,saveStockOut:m.saveStockOut,addToCart:g.addToCart,removeFromCart:g.removeFromCart,updateCartQty:g.updateCartQty,increaseQuantity:g.increaseQuantity,decreaseQuantity:g.decreaseQuantity,clearCart:g.clearCart,processSale:g.processSale,openCustomerModal:v.openCustomerModal,closeCustomerModal:v.closeCustomerModal,saveCustomer:v.saveCustomer,deleteCustomer:v.deleteCustomer,openSupplierModal:v.openSupplierModal,closeSupplierModal:v.closeSupplierModal,saveSupplier:v.saveSupplier,deleteSupplier:v.deleteSupplier,switchToCustomers:y.switchToCustomers,switchToSuppliers:y.switchToSuppliers,switchToMovements:y.switchToMovements,switchToInvoices:y.switchToInvoices,posSearchInput:Ie,showHierarchicalCategoryModal:ue,openHierarchicalCategoryModal:me,closeHierarchicalCategoryModal:he,showPurchaseModal:Vn,selectedAlertProduct:Hn,openPurchaseModalFromAlert:Yf,closePurchaseModal:Pa,handlePurchaseSuccess:Zf,p2pReminders:ep}}},ID={key:1},ND={key:0,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 shadow-md"},FD={class:"flex items-center justify-between container mx-auto"},$D={key:1,class:"bg-orange-50 border-l-4 border-orange-500 text-orange-800 p-4 shadow-sm mb-1 mx-6 mt-4"},LD={class:"flex items-center justify-between"},qD={class:"flex items-center gap-3"},UD={class:"text-sm flex gap-4"},jD={key:0,class:"flex items-center gap-1"},BD={key:1,class:"flex items-center gap-1"},VD={class:"flex min-h-screen"},HD={class:"flex-1 p-6 bg-gray-50"},zD={key:2,class:"space-y-6"},GD={class:"grid grid-cols-3 gap-6"},QD={class:"col-span-2 space-y-4"},KD={class:"bg-white rounded-lg shadow p-6"},JD={class:"bg-white rounded-lg shadow overflow-hidden max-h-[600px] overflow-y-auto"},WD={key:0,class:"p-8 text-center text-gray-500"},XD={class:"text-sm"},YD={class:"grid grid-cols-2 gap-4 p-4"},ZD=["onClick"],e8={class:"font-medium"},t8={class:"text-sm text-gray-500"},n8={class:"flex justify-between items-center mt-2"},o8={class:"text-lg font-bold text-blue-600"},r8={class:"space-y-4"},s8={class:"bg-white rounded-lg shadow p-6"},i8={key:0,class:"text-center text-gray-500 py-8"},a8={key:1,class:"space-y-3 max-h-[400px] overflow-y-auto"},l8={class:"flex justify-between items-start mb-2"},u8={class:"flex-1"},d8={class:"font-medium"},c8={key:0,class:"mt-1 flex items-center gap-1"},f8=["onClick"],p8={class:"flex items-center gap-2 mb-2"},m8=["onClick"],g8=["onUpdate:modelValue","max","onChange"],v8=["onClick"],h8={class:"text-sm text-gray-600"},y8={class:"font-bold"},b8={class:"mt-6 pt-4 border-t space-y-3"},_8={class:"flex justify-between text-lg"},x8={class:"font-semibold"},w8={key:0,class:"flex justify-between text-sm text-green-600"},C8={class:"font-semibold"},k8={class:"flex justify-between text-lg"},S8={class:"font-semibold"},E8={key:1,class:"bg-amber-50 border border-amber-200 rounded-lg p-3 space-y-2"},P8={class:"flex items-center justify-between"},A8={class:"text-sm font-semibold text-amber-800 flex items-center gap-1"},R8={key:0,class:"space-y-1 text-xs"},T8={class:"font-medium"},O8={class:"flex justify-between text-sm font-bold text-amber-900 pt-2 border-t border-amber-300"},M8={class:"flex justify-between text-2xl font-bold border-t-2 pt-3"},D8={class:"text-blue-600"},I8={class:"space-y-2"},N8=["value"],F8={key:2,class:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-3"},$8={class:"bg-white rounded-lg p-3 border border-blue-200"},L8={class:"flex justify-between items-center"},q8={class:"text-lg font-bold text-gray-900"},U8=["min"],j8={key:0,class:"bg-green-50 border-2 border-green-300 rounded-lg p-4"},B8={class:"flex justify-between items-center mb-3"},V8={class:"text-2xl font-bold text-green-600"},H8={key:0,class:"space-y-2"},z8={class:"text-sm text-gray-700"},G8={class:"font-semibold text-gray-900"},Q8={key:1,class:"text-center py-2"},K8={key:1,class:"bg-red-50 border-2 border-red-300 rounded-lg p-3"},J8={class:"text-sm text-red-700 font-medium flex items-center gap-2"},W8={class:"font-bold"},X8={class:"flex flex-wrap gap-2"},Y8=["onClick"],Z8=["disabled"],eI={key:6,class:"space-y-6"},tI={class:"flex justify-between items-center"},nI={class:"bg-white rounded-lg shadow p-6"},oI={class:"mt-3 text-sm text-gray-600"},rI={key:0},sI={key:1},iI={class:"bg-white rounded-lg shadow overflow-hidden"},aI={class:"w-full"},lI={key:0},uI={class:"px-6 py-4 font-medium"},dI={class:"px-6 py-4"},cI={class:"px-6 py-4"},fI={class:"px-6 py-4"},pI={class:"flex gap-2"},mI=["onClick"],gI=["onClick"],vI={key:0,class:"bg-gray-50 px-6 py-4 border-t border-gray-200"},hI={class:"flex items-center justify-between"},yI={class:"text-sm text-gray-700"},bI={class:"font-medium"},_I={class:"font-medium"},xI={class:"font-medium"},wI={class:"flex items-center gap-1"},CI={key:1,class:"px-2 text-gray-500"},kI=["onClick"],SI={key:2,class:"px-2 text-gray-500"},EI={key:7,class:"space-y-6"},PI={class:"flex justify-between items-center"},AI={class:"bg-white rounded-lg shadow p-6"},RI={class:"mt-3 text-sm text-gray-600"},TI={key:0},OI={key:1},MI={class:"bg-white rounded-lg shadow overflow-hidden"},DI={class:"w-full"},II={key:0},NI={class:"px-6 py-4 font-medium"},FI={class:"px-6 py-4"},$I={class:"px-6 py-4"},LI={class:"px-6 py-4"},qI={class:"flex gap-2"},UI=["onClick"],jI=["onClick"],BI={key:0,class:"bg-gray-50 px-6 py-4 border-t border-gray-200"},VI={class:"flex items-center justify-between"},HI={class:"text-sm text-gray-700"},zI={class:"font-medium"},GI={class:"font-medium"},QI={class:"font-medium"},KI={class:"flex items-center gap-1"},JI={key:1,class:"px-2 text-gray-500"},WI=["onClick"],XI={key:2,class:"px-2 text-gray-500"},YI={key:8,class:"space-y-6"},ZI={key:9,class:"space-y-6"},e7={class:"flex justify-between items-center"},t7={class:"flex gap-2"},n7={class:"grid grid-cols-3 gap-6"},o7={class:"bg-white rounded-lg shadow p-6"},r7={class:"text-3xl font-bold text-green-600"},s7={class:"bg-white rounded-lg shadow p-6"},i7={class:"text-3xl font-bold text-blue-600"},a7={class:"bg-white rounded-lg shadow p-6"},l7={class:"text-3xl font-bold text-purple-600"},u7={class:"bg-white rounded-lg shadow p-6"},d7={class:"grid grid-cols-2 gap-4"},c7={class:"mt-3 text-sm text-gray-600"},f7={key:0},p7={key:1},m7={class:"bg-white rounded-lg shadow overflow-hidden"},g7={class:"w-full"},v7={key:0},h7={key:1},y7={class:"px-6 py-4"},b7={class:"px-6 py-4"},_7={class:"px-6 py-4"},x7={class:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm"},w7={class:"px-6 py-4"},C7={class:"px-6 py-4 font-bold text-green-600"},k7={class:"px-6 py-4"},S7=["onClick"],E7={key:0,class:"bg-gray-50 px-6 py-4 border-t border-gray-200"},P7={class:"flex items-center justify-between"},A7={class:"text-sm text-gray-700"},R7={class:"font-medium"},T7={class:"font-medium"},O7={class:"font-medium"},M7={class:"flex items-center gap-1"},D7={key:1,class:"px-2 text-gray-500"},I7=["onClick"],N7={key:2,class:"px-2 text-gray-500"},F7=["disabled"],$7={key:10,class:"space-y-6"},L7={class:"space-y-4"},q7={key:0,class:"bg-green-50 border-l-4 border-green-500 p-4 rounded"},U7={class:"flex items-center justify-between"},j7={class:"flex items-center"},B7={class:"text-2xl mr-3"},V7=["onClick"],H7=["onClick"],z7={class:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[95vh] flex flex-col overflow-hidden"},G7={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 flex-shrink-0"},Q7={class:"flex justify-between items-center"},K7={class:"text-xl font-bold"},J7={class:"text-blue-100 text-sm mt-1"},W7={class:"overflow-y-auto flex-1",style:{"max-height":"calc(95vh - 280px)"}},X7={class:"p-4"},Y7={class:"grid grid-cols-2 gap-4 mb-4"},Z7={class:"bg-gray-50 p-3 rounded-lg border border-gray-200"},eN={class:"space-y-1 text-xs"},tN={class:"font-medium"},nN={class:"font-medium"},oN={class:"font-medium"},rN={class:"bg-blue-50 p-3 rounded-lg border border-blue-200"},sN={class:"space-y-1 text-xs"},iN={class:"font-medium"},aN={key:0,class:"text-gray-600"},lN={key:1,class:"text-gray-600"},uN={class:"mb-4"},dN={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},cN={class:"w-full text-sm"},fN={class:"px-3 py-2"},pN={class:"font-medium text-sm"},mN={key:0,class:"text-xs text-gray-500"},gN={class:"px-3 py-2 text-right text-sm"},vN={class:"px-3 py-2 text-right font-medium text-sm"},hN={class:"px-3 py-2 text-right font-bold text-green-600 text-sm"},yN={class:"flex justify-end"},bN={class:"w-72 bg-gray-50 rounded-lg p-3 border border-gray-200"},_N={class:"space-y-1 text-sm"},xN={class:"flex justify-between text-gray-600"},wN={class:"font-medium"},CN={key:0,class:"flex justify-between text-red-600"},kN={class:"font-medium"},SN={class:"border-t-2 border-gray-300 pt-2 flex justify-between text-lg font-bold text-blue-600"},EN={class:"bg-gray-50 px-4 py-2.5 border-t border-gray-200 flex-shrink-0"},PN={class:"space-y-2"},AN={class:"grid grid-cols-2 gap-2"},RN={class:"bg-gradient-to-r from-purple-50 to-orange-50 rounded-md p-1.5 border-2 border-purple-200"},TN={class:"grid grid-cols-2 gap-2"},ON={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},MN={class:"bg-white rounded-lg p-6 w-full max-w-md shadow-xl"},DN={class:"text-xl font-bold mb-4"},IN={class:"space-y-4"},NN={class:"flex gap-3 mt-6"},FN={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},$N={class:"bg-white rounded-lg p-6 w-full max-w-md shadow-xl"},LN={class:"text-xl font-bold mb-4"},qN={class:"space-y-4"},UN={class:"flex gap-3 mt-6"},jN={id:"app"};function BN(e,t,r,n,s,l){const i=He("Login"),a=He("Header"),c=He("Sidebar"),d=He("DashboardView"),u=He("ProductsView"),f=He("CreditManagement"),p=He("DepositsView"),m=He("Purchases"),g=He("StockMovementsView"),v=He("Users"),h=He("ProductModals"),C=He("StockModals"),E=He("PurchaseFormModal"),k=He("ProductSuppliersModal"),T=He("MainApp");return _(),x(fe,null,[o("div",null,[n.isAuthenticated?(_(),x("div",ID,[Te(a,{"current-user":n.currentUser,"current-user-role":n.currentUserRole},null,8,["current-user","current-user-role"]),n.connectionError?(_(),x("div",ND,[o("div",FD,[t[54]||(t[54]=o("div",{class:"flex items-center"},[o("span",{class:"text-2xl mr-3"},""),o("div",null,[o("p",{class:"font-bold"},"Erreur de connexion!"),o("p",{class:"text-sm"},"Le serveur API ne rpond pas correctement.")])],-1)),o("button",{onClick:t[0]||(t[0]=(...y)=>e.retryConnection&&e.retryConnection(...y)),class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded transition"}," Ressayer ")])])):L("",!0),n.p2pReminders.count>0?(_(),x("div",$D,[o("div",LD,[o("div",qD,[t[60]||(t[60]=o("span",{class:"text-2xl"},"",-1)),o("div",null,[t[59]||(t[59]=o("p",{class:"font-bold"},"Rappels de Gestion (Procure-to-Pay)",-1)),o("div",UD,[n.p2pReminders.overdueDeliveries>0?(_(),x("span",jD,[t[55]||(t[55]=ne("  ",-1)),o("strong",null,b(n.p2pReminders.overdueDeliveries),1),t[56]||(t[56]=ne(" livraison(s) en retard ",-1))])):L("",!0),n.p2pReminders.overduePayments>0?(_(),x("span",BD,[t[57]||(t[57]=ne("  ",-1)),o("strong",null,b(n.p2pReminders.overduePayments),1),t[58]||(t[58]=ne(" paiement(s) chu(s) ",-1))])):L("",!0)])])])])])):L("",!0),o("div",VD,[Te(c,{"current-view":n.currentView,"current-user":n.currentUser,"alerts-count":n.alertsCount,"credits-count":n.creditsCount,"deposits-count":n.depositsCount,"purchases-count":n.purchases?.length||0,"products-count":n.products?.length||0,"customers-count":n.customers?.length||0,"suppliers-count":n.suppliers?.length||0,"sales-count":n.sales?.length||0,"movements-count":n.movements?.length||0,"app-info":n.appInfo,onNavigate:n.handleSidebarNavigation,onLogout:n.handleLogout},null,8,["current-view","current-user","alerts-count","credits-count","deposits-count","purchases-count","products-count","customers-count","suppliers-count","sales-count","movements-count","app-info","onNavigate","onLogout"]),o("main",HD,[Te(fs,{name:"fade",mode:"out-in"},{default:qo(()=>[(_(),x("div",{key:n.currentView,class:"w-full"},[n.currentView==="dashboard"?(_(),pt(d,{key:0,stats:n.stats},null,8,["stats"])):L("",!0),n.currentView==="products"?(_(),pt(u,{key:1,"filtered-products":n.filteredProducts,loading:n.loading,"search-query":n.searchQuery,"onUpdate:searchQuery":t[1]||(t[1]=y=>n.searchQuery=y),"format-currency":n.formatCurrency,onOpenHierarchicalCategoryModal:n.openHierarchicalCategoryModal,onOpenProductModal:n.openProductModal,onViewProduct:n.viewProduct,onDeleteProduct:n.deleteProduct,onOpenRestockModal:n.openRestockModal,onOpenProductSuppliersModal:n.openProductSuppliersModal},null,8,["filtered-products","loading","search-query","format-currency","onOpenHierarchicalCategoryModal","onOpenProductModal","onViewProduct","onDeleteProduct","onOpenRestockModal","onOpenProductSuppliersModal"])):L("",!0),n.currentView==="pos"?(_(),x("div",zD,[t[83]||(t[83]=o("h2",{class:"text-3xl font-bold"},"Point de Vente",-1)),o("div",GD,[o("div",QD,[o("div",KD,[Q(o("input",{ref:"posSearchInput","onUpdate:modelValue":t[2]||(t[2]=y=>n.posSearch=y),type:"text",placeholder:" Rechercher un produit par nom ou SKU...",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[oe,n.posSearch]])]),o("div",JD,[!n.filteredPosProducts||n.filteredPosProducts.length===0?(_(),x("div",WD,[t[61]||(t[61]=o("p",{class:"text-lg"},"Aucun produit disponible",-1)),o("p",XD,b(n.products?.length||0)+" produits chargs",1)])):L("",!0),o("div",YD,[(_(!0),x(fe,null,be(n.filteredPosProducts,y=>(_(),x("div",{key:y.id,onClick:R=>n.addToCart(y),class:"border rounded-lg p-4 cursor-pointer hover:bg-blue-50 transition"},[o("h3",e8,b(y.name),1),o("p",t8,b(y.sku),1),o("div",n8,[o("span",o8,b(n.formatCurrency(y.unit_price)),1),o("span",{class:le(["text-sm px-2 py-1 rounded",y.stock===0?"bg-red-100 text-red-800":y.stock<=5?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"])},b(y.stock)+" en stock ",3)])],8,ZD))),128))])])]),o("div",r8,[o("div",s8,[t[82]||(t[82]=o("h3",{class:"text-xl font-bold mb-4"},"Panier",-1)),n.cart.length===0?(_(),x("div",i8," Panier vide ")):(_(),x("div",a8,[(_(!0),x(fe,null,be(n.cart,y=>(_(),x("div",{key:y.product_id,class:"border rounded p-3"},[o("div",l8,[o("div",u8,[o("span",d8,b(y.name),1),y.has_deposit?(_(),x("div",c8,[...t[62]||(t[62]=[o("span",{class:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full"}," Consign ",-1)])])):L("",!0)]),o("button",{onClick:R=>n.removeFromCart(n.cart.indexOf(y)),class:"text-red-500 hover:text-red-700"},"  ",8,f8)]),o("div",p8,[o("button",{onClick:R=>n.decreaseQuantity(y.product_id),class:"px-2 py-1 bg-gray-200 rounded hover:bg-gray-300"}," - ",8,m8),Q(o("input",{"onUpdate:modelValue":R=>y.quantity=R,type:"number",min:"1",max:y.stock,class:"w-16 px-2 py-1 border rounded text-center",onChange:R=>n.updateCartQty(n.cart.indexOf(y),0)},null,40,g8),[[oe,y.quantity,void 0,{number:!0}]]),o("button",{onClick:R=>n.increaseQuantity(y.product_id),class:"px-2 py-1 bg-gray-200 rounded hover:bg-gray-300"}," + ",8,v8)]),o("div",h8,[ne(b(n.formatCurrency(y.unit_price))+"  "+b(y.quantity)+" = ",1),o("span",y8,b(n.formatCurrency(y.quantity*y.unit_price)),1)])]))),128))])),o("div",b8,[o("div",_8,[t[63]||(t[63]=o("span",{class:"text-gray-600"},"Sous-total:",-1)),o("span",x8,b(n.formatCurrency(n.cartTotal)),1)]),o("div",null,[t[65]||(t[65]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type de vente",-1)),Q(o("select",{"onUpdate:modelValue":t[3]||(t[3]=y=>n.saleType=y),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},[...t[64]||(t[64]=[o("option",{value:"counter"},"Vente au comptoir",-1),o("option",{value:"wholesale"},"Vente en gros (-5%)",-1)])],512),[[$e,n.saleType]])]),n.saleType==="wholesale"?(_(),x("div",w8,[t[66]||(t[66]=o("span",null,"Remise (5%):",-1)),o("span",C8,"- "+b(n.formatCurrency(n.cartTotal*.05)),1)])):L("",!0),o("div",k8,[t[67]||(t[67]=o("span",{class:"text-gray-600"},"Total produits:",-1)),o("span",S8,b(n.formatCurrency(n.grandTotal)),1)]),n.cartDeposits.length>0?(_(),x("div",E8,[o("div",P8,[o("span",A8,"  Consignes ("+b(n.cartDepositsCount)+") ",1),o("button",{onClick:t[4]||(t[4]=y=>n.showDepositDetails=!n.showDepositDetails),class:"text-xs text-amber-700 hover:text-amber-900"},b(n.showDepositDetails?" Masquer":" Afficher"),1)]),n.showDepositDetails?(_(),x("div",R8,[(_(!0),x(fe,null,be(n.cartDeposits,y=>(_(),x("div",{key:y.deposit_type_id,class:"flex justify-between text-gray-700 bg-white rounded px-2 py-1"},[o("span",null,b(y.quantity)+" "+b(y.deposit_type_name),1),o("span",T8,b(n.formatCurrency(y.total_amount)),1)]))),128))])):L("",!0),o("div",O8,[t[68]||(t[68]=o("span",null,"Total consignes:",-1)),o("span",null,b(n.formatCurrency(n.totalDepositsAmount)),1)])])):L("",!0),o("div",M8,[t[69]||(t[69]=o("span",null,"Total gnral:",-1)),o("span",D8,b(n.formatCurrency(n.grandTotal)),1)]),o("div",null,[t[72]||(t[72]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mode de paiement",-1)),o("div",I8,[Q(o("select",{"onUpdate:modelValue":t[5]||(t[5]=y=>n.paymentMethod=y),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},[...t[70]||(t[70]=[o("option",{value:"cash"}," Espces",-1),o("option",{value:"mobile_money"}," Mobile Money",-1),o("option",{value:"bank_transfer"}," Virement bancaire",-1),o("option",{value:"credit"},"  crdit",-1)])],512),[[$e,n.paymentMethod]]),n.paymentMethod==="credit"?Q((_(),x("select",{key:0,"onUpdate:modelValue":t[6]||(t[6]=y=>n.selectedCustomerId=y),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:""},[t[71]||(t[71]=o("option",{value:""},"Slectionner un client",-1)),(_(!0),x(fe,null,be(n.customers,y=>(_(),x("option",{key:y.id,value:y.id},b(y.name),9,N8))),128))],512)),[[$e,n.selectedCustomerId]]):L("",!0)])]),n.paymentMethod==="cash"?(_(),x("div",F8,[t[81]||(t[81]=o("h4",{class:"font-semibold text-blue-900 flex items-center gap-2"},"  Calculateur de monnaie ",-1)),o("div",$8,[o("div",L8,[t[73]||(t[73]=o("span",{class:"text-sm text-gray-600"},"Montant  payer:",-1)),o("span",q8,b(n.formatCurrency(n.grandTotal)),1)])]),o("div",null,[t[74]||(t[74]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Montant reu du client ",-1)),Q(o("input",{"onUpdate:modelValue":t[7]||(t[7]=y=>n.amountReceived=y),type:"number",min:n.grandTotal,step:"500",placeholder:"Ex: 10000",class:"w-full px-4 py-2 border-2 border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg font-semibold",onInput:t[8]||(t[8]=(...y)=>n.calculateChange&&n.calculateChange(...y))},null,40,U8),[[oe,n.amountReceived,void 0,{number:!0}]]),t[75]||(t[75]=o("p",{class:"text-xs text-gray-500 mt-1"},"  Saisissez le montant donn par le client ",-1))]),n.amountReceived&&n.amountReceived>=n.grandTotal?(_(),x("div",j8,[o("div",B8,[t[76]||(t[76]=o("span",{class:"text-sm font-medium text-green-700"}," Monnaie  rendre:",-1)),o("span",V8,b(n.formatCurrency(n.changeToReturn)),1)]),n.changeToReturn>0?(_(),x("div",H8,[t[77]||(t[77]=o("p",{class:"text-xs font-semibold text-gray-700 uppercase mb-2"},"Dcomposition:",-1)),(_(!0),x(fe,null,be(n.changeBreakdown,y=>Q((_(),x("div",{key:y.value,class:"flex justify-between items-center bg-white rounded px-3 py-2 border border-gray-200"},[o("span",z8,b(n.formatCurrency(y.value))+"  "+b(y.count),1),o("span",G8,b(n.formatCurrency(y.value*y.count)),1)])),[[Po,y.count>0]])),128))])):(_(),x("div",Q8,[...t[78]||(t[78]=[o("p",{class:"text-sm text-green-700 font-medium"},"  Montant exact, pas de monnaie  rendre ",-1)])]))])):n.amountReceived&&n.amountReceived<n.grandTotal?(_(),x("div",K8,[o("p",J8,[t[79]||(t[79]=ne("  Montant insuffisant ! ",-1)),o("span",W8,"Manque: "+b(n.formatCurrency(n.grandTotal-n.amountReceived)),1)])])):L("",!0),o("div",X8,[t[80]||(t[80]=o("p",{class:"w-full text-xs text-gray-600 font-medium mb-1"},"Montants suggrs:",-1)),(_(!0),x(fe,null,be(n.suggestedCashAmounts,y=>(_(),x("button",{key:y,onClick:R=>{n.amountReceived=y,n.calculateChange()},class:"px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition text-sm font-medium"},b(n.formatCurrency(y)),9,Y8))),128))])])):L("",!0),o("button",{onClick:t[9]||(t[9]=(...y)=>n.processSale&&n.processSale(...y)),disabled:n.cart.length===0||n.paymentMethod==="credit"&&!n.selectedCustomerId,class:"w-full py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium transition"},"  Valider la vente ",8,Z8),o("button",{onClick:t[10]||(t[10]=(...y)=>n.clearCart&&n.clearCart(...y)),class:"w-full py-2 border border-red-600 text-red-600 rounded-lg hover:bg-red-50 transition"},"  Vider le panier ")])])])])])):L("",!0),n.currentView==="credits"?(_(),pt(f,{key:3})):L("",!0),n.currentView==="deposits"?(_(),pt(p,{key:4})):L("",!0),n.currentView==="purchases"?(_(),pt(m,{key:5,products:n.products,suppliers:n.suppliers,purchases:n.purchases,"format-currency":n.formatCurrency,"current-user":n.currentUser},null,8,["products","suppliers","purchases","format-currency","current-user"])):L("",!0),n.currentView==="customers"?(_(),x("div",eI,[o("div",tI,[t[84]||(t[84]=o("h2",{class:"text-3xl font-bold"},"Gestion des Clients",-1)),o("button",{onClick:t[11]||(t[11]=y=>n.openCustomerModal()),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium"},"  Nouveau client ")]),o("div",nI,[Q(o("input",{"onUpdate:modelValue":t[12]||(t[12]=y=>n.customerSearchQuery=y),type:"text",placeholder:" Rechercher un client...",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[oe,n.customerSearchQuery]]),o("div",oI,[n.customerSearchQuery?(_(),x("span",rI,b(n.filteredCustomers.length)+" rsultat(s) trouv(s) sur "+b(n.customers.length)+" client(s) ",1)):(_(),x("span",sI,b(n.filteredCustomers.length)+" client(s) affich(s) ",1))])]),o("div",iI,[o("table",aI,[t[86]||(t[86]=o("thead",{class:"bg-gray-50"},[o("tr",null,[o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nom"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tlphone"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),o("tbody",null,[n.filteredCustomers.length===0?(_(),x("tr",lI,[...t[85]||(t[85]=[o("td",{colspan:"4",class:"px-6 py-8 text-center text-gray-500"}," Aucun client trouv ",-1)])])):(_(!0),x(fe,{key:1},be(n.paginatedCustomers,y=>(_(),x("tr",{key:y.id,class:"border-t hover:bg-gray-50"},[o("td",uI,b(y.name),1),o("td",dI,b(y.phone||"N/A"),1),o("td",cI,b(y.email||"N/A"),1),o("td",fI,[o("div",pI,[o("button",{onClick:R=>n.openCustomerModal(y),class:"text-yellow-600 hover:text-yellow-800"},"",8,mI),o("button",{onClick:R=>n.deleteCustomer(y.id),class:"text-red-600 hover:text-red-800"},"",8,gI)])])]))),128))])]),n.filteredCustomers.length>0?(_(),x("div",vI,[o("div",hI,[o("div",yI,[t[87]||(t[87]=ne(" Affichage de ",-1)),o("span",bI,b((n.customersCurrentPage-1)*n.customersPerPage+1),1),t[88]||(t[88]=ne("  ",-1)),o("span",_I,b(Math.min(n.customersCurrentPage*n.customersPerPage,n.filteredCustomers.length)),1),t[89]||(t[89]=ne(" sur ",-1)),o("span",xI,b(n.filteredCustomers.length),1),t[90]||(t[90]=ne(" client(s) ",-1))]),o("div",wI,[n.customersCurrentPage>3?(_(),x("button",{key:0,onClick:t[13]||(t[13]=y=>n.goToCustomersPage(1)),class:"w-10 h-10 rounded-lg font-medium transition bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}," 1 ")):L("",!0),n.customersCurrentPage>4?(_(),x("span",CI,"...")):L("",!0),(_(!0),x(fe,null,be(n.totalCustomersPages,y=>Q((_(),x("button",{key:y,onClick:R=>n.goToCustomersPage(y),class:le(["w-10 h-10 rounded-lg font-medium transition",y===n.customersCurrentPage?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"])},b(y),11,kI)),[[Po,Math.abs(y-n.customersCurrentPage)<=2]])),128)),n.customersCurrentPage<n.totalCustomersPages-3?(_(),x("span",SI,"...")):L("",!0),n.customersCurrentPage<n.totalCustomersPages-2?(_(),x("button",{key:3,onClick:t[14]||(t[14]=y=>n.goToCustomersPage(n.totalCustomersPages)),class:"w-10 h-10 rounded-lg font-medium transition bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"},b(n.totalCustomersPages),1)):L("",!0)])])])):L("",!0)])])):L("",!0),n.currentView==="suppliers"?(_(),x("div",EI,[o("div",PI,[t[91]||(t[91]=o("h2",{class:"text-3xl font-bold"},"Gestion des Fournisseurs",-1)),o("button",{onClick:t[15]||(t[15]=y=>n.openSupplierModal()),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium"},"  Nouveau fournisseur ")]),o("div",AI,[Q(o("input",{"onUpdate:modelValue":t[16]||(t[16]=y=>n.supplierSearchQuery=y),type:"text",placeholder:" Rechercher un fournisseur...",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[oe,n.supplierSearchQuery]]),o("div",RI,[n.supplierSearchQuery?(_(),x("span",TI,b(n.filteredSuppliers.length)+" rsultat(s) trouv(s) sur "+b(n.suppliers.length)+" fournisseur(s) ",1)):(_(),x("span",OI,b(n.filteredSuppliers.length)+" fournisseur(s) affich(s) ",1))])]),o("div",MI,[o("table",DI,[t[93]||(t[93]=o("thead",{class:"bg-gray-50"},[o("tr",null,[o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nom"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tlphone"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),o("tbody",null,[n.filteredSuppliers.length===0?(_(),x("tr",II,[...t[92]||(t[92]=[o("td",{colspan:"4",class:"px-6 py-8 text-center text-gray-500"}," Aucun fournisseur trouv ",-1)])])):(_(!0),x(fe,{key:1},be(n.paginatedSuppliers,y=>(_(),x("tr",{key:y.id,class:"border-t hover:bg-gray-50"},[o("td",NI,b(y.name),1),o("td",FI,b(y.phone||"N/A"),1),o("td",$I,b(y.email||"N/A"),1),o("td",LI,[o("div",qI,[o("button",{onClick:R=>n.openSupplierModal(y),class:"text-yellow-600 hover:text-yellow-800"},"",8,UI),o("button",{onClick:R=>n.deleteSupplier(y.id),class:"text-red-600 hover:text-red-800"},"",8,jI)])])]))),128))])]),n.filteredSuppliers.length>0?(_(),x("div",BI,[o("div",VI,[o("div",HI,[t[94]||(t[94]=ne(" Affichage de ",-1)),o("span",zI,b((n.suppliersCurrentPage-1)*n.suppliersPerPage+1),1),t[95]||(t[95]=ne("  ",-1)),o("span",GI,b(Math.min(n.suppliersCurrentPage*n.suppliersPerPage,n.filteredSuppliers.length)),1),t[96]||(t[96]=ne(" sur ",-1)),o("span",QI,b(n.filteredSuppliers.length),1),t[97]||(t[97]=ne(" fournisseur(s) ",-1))]),o("div",KI,[n.suppliersCurrentPage>3?(_(),x("button",{key:0,onClick:t[17]||(t[17]=y=>n.goToSuppliersPage(1)),class:"w-10 h-10 rounded-lg font-medium transition bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}," 1 ")):L("",!0),n.suppliersCurrentPage>4?(_(),x("span",JI,"...")):L("",!0),(_(!0),x(fe,null,be(n.totalSuppliersPages,y=>Q((_(),x("button",{key:y,onClick:R=>n.goToSuppliersPage(y),class:le(["w-10 h-10 rounded-lg font-medium transition",y===n.suppliersCurrentPage?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"])},b(y),11,WI)),[[Po,Math.abs(y-n.suppliersCurrentPage)<=2]])),128)),n.suppliersCurrentPage<n.totalSuppliersPages-3?(_(),x("span",XI,"...")):L("",!0),n.suppliersCurrentPage<n.totalSuppliersPages-2?(_(),x("button",{key:3,onClick:t[18]||(t[18]=y=>n.goToSuppliersPage(n.totalSuppliersPages)),class:"w-10 h-10 rounded-lg font-medium transition bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"},b(n.totalSuppliersPages),1)):L("",!0)])])])):L("",!0)])])):L("",!0),n.currentView==="movements"?(_(),x("div",YI,[Te(g,{products:n.products,alertsCount:n.alertsCount,onReloadData:n.handleReloadData},null,8,["products","alertsCount","onReloadData"])])):L("",!0),n.currentView==="invoices"?(_(),x("div",ZI,[o("div",e7,[t[99]||(t[99]=o("h2",{class:"text-3xl font-bold"},"Ventes-Factures",-1)),o("div",t7,[Q(o("select",{"onUpdate:modelValue":t[19]||(t[19]=y=>n.salesFilters.period=y),class:"px-4 py-2 border rounded-lg"},[...t[98]||(t[98]=[o("option",{value:"today"},"Aujourd'hui",-1),o("option",{value:"week"},"Cette semaine",-1),o("option",{value:"month"},"Ce mois",-1),o("option",{value:"all"},"Toutes",-1)])],512),[[$e,n.salesFilters.period]])])]),o("div",n7,[o("div",o7,[t[100]||(t[100]=o("p",{class:"text-gray-500 text-sm"},"Ventes totales",-1)),o("p",r7,b(n.formatCurrency(n.displaySalesStats.total)),1)]),o("div",s7,[t[101]||(t[101]=o("p",{class:"text-gray-500 text-sm"},"Nombre de ventes",-1)),o("p",i7,b(n.displaySalesStats.count),1)]),o("div",a7,[t[102]||(t[102]=o("p",{class:"text-gray-500 text-sm"},"Panier moyen",-1)),o("p",l7,b(n.formatCurrency(n.displaySalesStats.average)),1)])]),o("div",u7,[o("div",d7,[Q(o("select",{"onUpdate:modelValue":t[20]||(t[20]=y=>n.salesFilters.period=y),class:"px-4 py-2 border rounded-lg"},[...t[103]||(t[103]=[o("option",{value:"today"},"Aujourd'hui",-1),o("option",{value:"week"},"Cette semaine",-1),o("option",{value:"month"},"Ce mois",-1),o("option",{value:"all"},"Toutes",-1)])],512),[[$e,n.salesFilters.period]]),Q(o("input",{"onUpdate:modelValue":t[21]||(t[21]=y=>n.salesSearch=y),type:"text",placeholder:" Rechercher par n facture, client, montant...",class:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[oe,n.salesSearch]])]),o("div",c7,[n.salesSearch?(_(),x("span",f7,b(n.filteredSales.length)+" rsultat(s) trouv(s) sur "+b(n.sales.length)+" vente(s) ",1)):(_(),x("span",p7,b(n.filteredSales.length)+" vente(s) affiche(s) ",1))])]),o("div",m7,[o("table",g7,[t[106]||(t[106]=o("thead",{class:"bg-gray-50"},[o("tr",null,[o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Paiement"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),o("tbody",null,[n.loadingSales?(_(),x("tr",v7,[...t[104]||(t[104]=[o("td",{colspan:"6",class:"px-6 py-8 text-center"},"Chargement...",-1)])])):n.filteredSales.length===0?(_(),x("tr",h7,[...t[105]||(t[105]=[o("td",{colspan:"6",class:"px-6 py-8 text-center text-gray-500"}," Aucune vente trouve ",-1)])])):(_(!0),x(fe,{key:2},be(n.paginatedSales,y=>(_(),x("tr",{key:y.id,class:"border-t hover:bg-gray-50"},[o("td",y7,b(new Date(y.created_at).toLocaleString()),1),o("td",b7,b(y.customer?.name||"Comptoir"),1),o("td",_7,[o("span",x7,b(y.type==="wholesale"?"Gros":"Comptoir"),1)]),o("td",w7,b(y.payment_method),1),o("td",C7,b(n.formatCurrency(y.total_amount)),1),o("td",k7,[o("button",{onClick:R=>n.viewInvoice(y),class:"text-blue-600 hover:text-blue-800"}," Voir",8,S7)])]))),128))])]),!n.loadingSales&&n.filteredSales.length>0?(_(),x("div",E7,[o("div",P7,[o("div",A7,[t[107]||(t[107]=ne(" Affichage de ",-1)),o("span",R7,b((n.salesCurrentPage-1)*n.salesPerPage+1),1),t[108]||(t[108]=ne("  ",-1)),o("span",T7,b(Math.min(n.salesCurrentPage*n.salesPerPage,n.filteredSales.length)),1),t[109]||(t[109]=ne(" sur ",-1)),o("span",O7,b(n.filteredSales.length),1),t[110]||(t[110]=ne(" vente(s) ",-1))]),o("div",M7,[n.salesCurrentPage>3?(_(),x("button",{key:0,onClick:t[22]||(t[22]=y=>n.goToPage(1)),class:"w-10 h-10 rounded-lg font-medium transition bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}," 1 ")):L("",!0),n.salesCurrentPage>4?(_(),x("span",D7,"...")):L("",!0),(_(!0),x(fe,null,be(n.totalSalesPages,y=>Q((_(),x("button",{key:y,onClick:R=>n.goToPage(y),class:le(["w-10 h-10 rounded-lg font-medium transition",y===n.salesCurrentPage?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"])},b(y),11,I7)),[[Po,Math.abs(y-n.salesCurrentPage)<=2]])),128)),n.salesCurrentPage<n.totalSalesPages-3?(_(),x("span",N7,"...")):L("",!0),n.salesCurrentPage<n.totalSalesPages-2?(_(),x("button",{key:3,onClick:t[23]||(t[23]=y=>n.goToPage(n.totalSalesPages)),class:"w-10 h-10 rounded-lg font-medium transition bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"},b(n.totalSalesPages),1)):L("",!0)]),o("button",{onClick:t[24]||(t[24]=(...y)=>n.nextPage&&n.nextPage(...y)),disabled:!n.hasNextPage,class:le(["px-4 py-2 rounded-lg font-medium transition",n.hasNextPage?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"])}," Suivant  ",10,F7)])])):L("",!0)])])):L("",!0),n.currentView==="alerts"?(_(),x("div",$7,[t[112]||(t[112]=o("h2",{class:"text-3xl font-bold"},"Alertes Stock",-1)),o("div",L7,[n.alerts.length===0?(_(),x("div",q7,[...t[111]||(t[111]=[o("div",{class:"flex items-center"},[o("span",{class:"text-2xl mr-3"},""),o("div",null,[o("p",{class:"font-bold text-green-800"},"Tout est en ordre !"),o("p",{class:"text-sm text-green-700"},"Aucune alerte de stock pour le moment.")])],-1)])])):(_(!0),x(fe,{key:1},be(n.alerts,y=>(_(),x("div",{key:y.id,class:le(["border-l-4 p-4 rounded",y.stock===0?"bg-red-50 border-red-500":"bg-orange-50 border-orange-500"])},[o("div",U7,[o("div",j7,[o("span",B7,b(y.stock===0?"":""),1),o("div",null,[o("p",{class:le(["font-bold",y.stock===0?"text-red-800":"text-orange-800"])},b(y.name),3),o("p",{class:le(["text-sm",y.stock===0?"text-red-700":"text-orange-700"])},b(y.stock===0?"Rupture de stock":`Stock faible: ${y.stock} units (min: ${y.min_stock})`),3)])]),o("button",{onClick:R=>n.openRestockModal(y),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},"  Rapprovisionner ",8,V7),o("button",{onClick:R=>n.openPurchaseModalFromAlert(y),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 ml-2"},"  Commander ",8,H7)])],2))),128))])])):L("",!0),n.currentView==="users"?(_(),pt(v,{key:11})):L("",!0),n.showInvoiceModal&&n.currentInvoice?(_(),x("div",{key:12,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[30]||(t[30]=xe((...y)=>n.closeInvoiceModal&&n.closeInvoiceModal(...y),["self"]))},[o("div",z7,[o("div",G7,[o("div",Q7,[o("div",null,[o("h3",K7,"Facture #"+b(n.currentInvoice.id),1),o("p",J7,b(new Date(n.currentInvoice.created_at).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),1)]),o("button",{onClick:t[25]||(t[25]=(...y)=>n.closeInvoiceModal&&n.closeInvoiceModal(...y)),class:"text-white hover:text-gray-200 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-blue-800 transition"},"  ")])]),o("div",W7,[o("div",X7,[o("div",Y7,[o("div",Z7,[t[119]||(t[119]=o("h4",{class:"font-bold text-gray-700 mb-2 text-sm"}," Informations de vente",-1)),o("div",eN,[o("p",null,[t[113]||(t[113]=o("span",{class:"text-gray-600"},"Type:",-1)),t[114]||(t[114]=ne()),o("span",tN,b(n.currentInvoice.type==="wholesale"?"Vente en gros":"Vente au comptoir"),1)]),o("p",null,[t[115]||(t[115]=o("span",{class:"text-gray-600"},"Paiement:",-1)),t[116]||(t[116]=ne()),o("span",nN,b(n.getPaymentMethodLabel(n.currentInvoice.payment_method)),1)]),o("p",null,[t[117]||(t[117]=o("span",{class:"text-gray-600"},"Vendeur:",-1)),t[118]||(t[118]=ne()),o("span",oN,b(n.currentInvoice.user?.name||"N/A"),1)])])]),o("div",rN,[t[120]||(t[120]=o("h4",{class:"font-bold text-blue-700 mb-2 text-sm"}," Client",-1)),o("div",sN,[o("p",iN,b(n.currentInvoice.customer?.name||"Client au comptoir"),1),n.currentInvoice.customer?.phone?(_(),x("p",aN," "+b(n.currentInvoice.customer.phone),1)):L("",!0),n.currentInvoice.customer?.email?(_(),x("p",lN," "+b(n.currentInvoice.customer.email),1)):L("",!0)])])]),o("div",uN,[t[122]||(t[122]=o("h4",{class:"font-bold text-gray-700 mb-2 flex items-center gap-2 text-sm"},[o("span",null,""),o("span",null,"Articles vendus")],-1)),o("div",dN,[o("table",cN,[t[121]||(t[121]=o("thead",{class:"bg-gray-50"},[o("tr",null,[o("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Produit"),o("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Prix Unit."),o("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Qt"),o("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Total")])],-1)),o("tbody",null,[(_(!0),x(fe,null,be(n.currentInvoice.items,y=>(_(),x("tr",{key:y.id,class:"border-t"},[o("td",fN,[o("div",pN,b(y.product_name),1),y.sku?(_(),x("div",mN,"SKU: "+b(y.sku),1)):L("",!0)]),o("td",gN,b(n.formatCurrency(y.unit_price)),1),o("td",vN,b(y.quantity),1),o("td",hN,b(n.formatCurrency(y.quantity*y.unit_price)),1)]))),128))])])])]),o("div",yN,[o("div",bN,[o("div",_N,[o("div",xN,[t[123]||(t[123]=o("span",null,"Sous-total:",-1)),o("span",wN,b(n.formatCurrency(n.currentInvoice.subtotal)),1)]),n.currentInvoice.discount?(_(),x("div",CN,[o("span",null,"Remise "+b(n.currentInvoice.type==="wholesale"?"(5%)":"")+":",1),o("span",kN,"-"+b(n.formatCurrency(n.currentInvoice.discount)),1)])):L("",!0),o("div",SN,[t[124]||(t[124]=o("span",null,"TOTAL:",-1)),o("span",null,b(n.formatCurrency(n.currentInvoice.total_amount)),1)])])])])])]),o("div",EN,[o("div",PN,[t[131]||(t[131]=o("div",{class:"text-[11px] text-gray-700 font-medium flex items-center gap-1"},[o("span",null,""),o("span",null,"Choisissez un format d'impression")],-1)),o("div",AN,[o("button",{onClick:t[26]||(t[26]=y=>n.printInvoice("standard")),class:"px-2 py-1.5 bg-white border-2 border-blue-600 text-blue-600 rounded-md hover:bg-blue-50 transition font-medium flex flex-col items-center gap-0.5 group"},[...t[125]||(t[125]=[o("span",{class:"text-base group-hover:scale-110 transition-transform"},"",-1),o("span",{class:"text-[11px] font-semibold"},"Standard",-1),o("span",{class:"text-[9px] text-gray-500"},"Web / Email",-1)])]),o("button",{onClick:t[27]||(t[27]=y=>n.printInvoice("a4")),class:"px-2 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition font-medium flex flex-col items-center gap-0.5 group"},[...t[126]||(t[126]=[o("span",{class:"text-base group-hover:scale-110 transition-transform"},"",-1),o("span",{class:"text-[11px] font-semibold"},"Format A4",-1),o("span",{class:"text-[9px] opacity-90"},"Professionnel",-1)])])]),o("div",RN,[t[129]||(t[129]=o("div",{class:"flex items-center gap-1 mb-1.5"},[o("span",{class:"text-xs"},""),o("span",{class:"text-[9px] font-semibold text-purple-800 uppercase tracking-wide"}," Formats Thermiques ")],-1)),o("div",TN,[o("button",{onClick:t[28]||(t[28]=y=>n.printInvoice("thermal-78")),class:"px-2 py-1.5 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition font-medium flex flex-col items-center gap-0.5 shadow hover:shadow-md group"},[...t[127]||(t[127]=[o("span",{class:"text-base group-hover:scale-110 transition-transform"},"",-1),o("span",{class:"text-[11px] font-bold"},"78mm",-1),o("span",{class:"text-[9px] opacity-90"},"Standard",-1)])]),o("button",{onClick:t[29]||(t[29]=y=>n.printInvoice("thermal-58")),class:"px-2 py-1.5 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition font-medium flex flex-col items-center gap-0.5 shadow hover:shadow-md group"},[...t[128]||(t[128]=[o("span",{class:"text-base group-hover:scale-110 transition-transform"},"",-1),o("span",{class:"text-[11px] font-bold"},"58mm",-1),o("span",{class:"text-[9px] opacity-90"},"Compact",-1)])])]),t[130]||(t[130]=o("div",{class:"mt-1.5 flex items-start gap-1 text-[9px] text-gray-700 bg-white bg-opacity-60 rounded p-1"},[o("span",{class:"text-[10px]"},""),o("span",null,[o("strong",null,"78mm"),ne(" pour imprimantes standard  "),o("strong",null,"58mm"),ne(" pour imprimantes compactes ")])],-1))])])])])])):L("",!0)]))]),_:1}),Te(h,{showProductModal:n.showProductModal,"onUpdate:showProductModal":t[31]||(t[31]=y=>n.showProductModal=y),showHierarchicalCategoryModal:n.showHierarchicalCategoryModal,"onUpdate:showHierarchicalCategoryModal":t[32]||(t[32]=y=>n.showHierarchicalCategoryModal=y),showCategoryModal:n.showCategoryModal,"onUpdate:showCategoryModal":t[33]||(t[33]=y=>n.showCategoryModal=y),showViewModal:n.showViewModal,"onUpdate:showViewModal":t[34]||(t[34]=y=>n.showViewModal=y),"product-form":n.productForm,"editing-product":n.editingProduct,categories:n.categories,subcategories:n.subcategories,"saving-product":n.savingProduct,"viewing-product":n.viewingProduct,newCategoryName:n.newCategoryName,"onUpdate:newCategoryName":t[35]||(t[35]=y=>n.newCategoryName=y),"editing-category-id":n.editingCategoryId,editingCategoryName:n.editingCategoryName,"onUpdate:editingCategoryName":t[36]||(t[36]=y=>n.editingCategoryName=y),"format-currency":n.formatCurrency,"filter-subcategories":n.filterSubcategories,onSaveProduct:n.saveProduct,onCloseHierarchicalModal:n.closeHierarchicalCategoryModal,onCategoryUpdated:n.loaders.loadCategories,onAddCategory:n.addCategory,onSaveCategory:n.saveCategory,onCancelEditCategory:n.cancelEditCategory,onEditCategory:n.editCategory,onDeleteCategory:n.deleteCategory,onOpenProductModal:n.openProductModal},null,8,["showProductModal","showHierarchicalCategoryModal","showCategoryModal","showViewModal","product-form","editing-product","categories","subcategories","saving-product","viewing-product","newCategoryName","editing-category-id","editingCategoryName","format-currency","filter-subcategories","onSaveProduct","onCloseHierarchicalModal","onCategoryUpdated","onAddCategory","onSaveCategory","onCancelEditCategory","onEditCategory","onDeleteCategory","onOpenProductModal"])]),Te(C,{"show-restock-modal":n.showRestockModal,"restock-product":n.restockProduct,"restock-quantity":n.restockQuantity,"onUpdate:restockQuantity":t[37]||(t[37]=y=>n.restockQuantity=y),"restock-reason":n.restockReason,"onUpdate:restockReason":t[38]||(t[38]=y=>n.restockReason=y),"show-stock-out-modal":n.showStockOutModal,"stock-out-product":n.stockOutProduct,"stock-out-quantity":n.stockOutQuantity,"onUpdate:stockOutQuantity":t[39]||(t[39]=y=>n.stockOutQuantity=y),"stock-out-reason":n.stockOutReason,"onUpdate:stockOutReason":t[40]||(t[40]=y=>n.stockOutReason=y),"stock-out-reason-type":n.stockOutReasonType,"onUpdate:stockOutReasonType":t[41]||(t[41]=y=>n.stockOutReasonType=y),onCloseRestockModal:n.closeRestockModal,onSaveRestock:n.saveRestock,onCloseStockOutModal:n.closeStockOutModal,onSaveStockOut:n.saveStockOut},null,8,["show-restock-modal","restock-product","restock-quantity","restock-reason","show-stock-out-modal","stock-out-product","stock-out-quantity","stock-out-reason","stock-out-reason-type","onCloseRestockModal","onSaveRestock","onCloseStockOutModal","onSaveStockOut"]),n.showPurchaseModal?(_(),pt(E,{key:0,products:n.products,suppliers:n.suppliers,"preselected-product":n.selectedAlertProduct,onClose:n.closePurchaseModal,onSuccess:n.handlePurchaseSuccess},null,8,["products","suppliers","preselected-product","onClose","onSuccess"])):L("",!0),n.showCustomerModal?(_(),x("div",ON,[o("div",MN,[o("h3",DN,b(n.editingCustomer?"Modifier le client":"Nouveau client"),1),o("div",IN,[o("div",null,[t[132]||(t[132]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom *",-1)),Q(o("input",{"onUpdate:modelValue":t[42]||(t[42]=y=>n.customerForm.name=y),type:"text",required:"",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nom du client"},null,512),[[oe,n.customerForm.name]])]),o("div",null,[t[133]||(t[133]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tlphone",-1)),Q(o("input",{"onUpdate:modelValue":t[43]||(t[43]=y=>n.customerForm.phone=y),type:"tel",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Tlphone"},null,512),[[oe,n.customerForm.phone]])]),o("div",null,[t[134]||(t[134]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),Q(o("input",{"onUpdate:modelValue":t[44]||(t[44]=y=>n.customerForm.email=y),type:"email",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Email"},null,512),[[oe,n.customerForm.email]])]),o("div",null,[t[135]||(t[135]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Adresse",-1)),Q(o("textarea",{"onUpdate:modelValue":t[45]||(t[45]=y=>n.customerForm.address=y),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Adresse",rows:"2"},null,512),[[oe,n.customerForm.address]])])]),o("div",NN,[o("button",{onClick:t[46]||(t[46]=(...y)=>n.closeCustomerModal&&n.closeCustomerModal(...y)),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition"}," Annuler "),o("button",{onClick:t[47]||(t[47]=(...y)=>n.saveCustomer&&n.saveCustomer(...y)),class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"},b(n.editingCustomer?"Modifier":"Crer"),1)])])])):L("",!0),Te(k,{show:n.showProductSuppliersModal,product:n.selectedProduct,"all-suppliers":n.suppliers,onClose:n.closeProductSuppliersModal,onRefresh:n.handleReloadData},null,8,["show","product","all-suppliers","onClose","onRefresh"]),n.showSupplierModal?(_(),x("div",FN,[o("div",$N,[o("h3",LN,b(n.editingSupplier?"Modifier le fournisseur":"Nouveau fournisseur"),1),o("div",qN,[o("div",null,[t[136]||(t[136]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom *",-1)),Q(o("input",{"onUpdate:modelValue":t[48]||(t[48]=y=>n.supplierForm.name=y),type:"text",required:"",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nom du fournisseur"},null,512),[[oe,n.supplierForm.name]])]),o("div",null,[t[137]||(t[137]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tlphone",-1)),Q(o("input",{"onUpdate:modelValue":t[49]||(t[49]=y=>n.supplierForm.phone=y),type:"tel",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Tlphone"},null,512),[[oe,n.supplierForm.phone]])]),o("div",null,[t[138]||(t[138]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),Q(o("input",{"onUpdate:modelValue":t[50]||(t[50]=y=>n.supplierForm.email=y),type:"email",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Email"},null,512),[[oe,n.supplierForm.email]])]),o("div",null,[t[139]||(t[139]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Adresse",-1)),Q(o("textarea",{"onUpdate:modelValue":t[51]||(t[51]=y=>n.supplierForm.address=y),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Adresse",rows:"2"},null,512),[[oe,n.supplierForm.address]])])]),o("div",UN,[o("button",{onClick:t[52]||(t[52]=(...y)=>n.closeSupplierModal&&n.closeSupplierModal(...y)),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition"}," Annuler "),o("button",{onClick:t[53]||(t[53]=(...y)=>n.saveSupplier&&n.saveSupplier(...y)),class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"},b(n.editingSupplier?"Modifier":"Crer"),1)])])])):L("",!0)])])):(_(),pt(i,{key:0,onLoginSuccess:n.handleLoginSuccess},null,8,["onLoginSuccess"]))]),o("div",jN,[n.isAuthenticated?(_(),pt(T,{key:1,user:n.currentUser,onLogout:e.onLogout},null,8,["user","onLogout"])):(_(),pt(i,{key:0,onLoginSuccess:e.onLoginSuccess},null,8,["onLoginSuccess"]))])],64)}const VN=Ve(DD,[["render",BN]]),HN=[{path:"/login",name:"Login",component:qc},{path:"/",redirect:"/login"}],zN=OD({history:uD(),routes:HN}),Xf=Ag(VN);Xf.use(zN);Xf.mount("#app");console.log(" Application Vue monte avec succs");window.electronStore?(console.log(" Application en cours d'excution dans Electron"),window.electron?.getAppInfo&&window.electron.getAppInfo().then(e=>{console.log(" Infos app:",e)})):console.log(" Application en cours d'excution dans le navigateur");
